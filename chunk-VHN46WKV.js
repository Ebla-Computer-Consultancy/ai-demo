var $3=Object.create;var NS=Object.defineProperty,W3=Object.defineProperties,G3=Object.getOwnPropertyDescriptor,K3=Object.getOwnPropertyDescriptors,J3=Object.getOwnPropertyNames,aM=Object.getOwnPropertySymbols,uM=Object.getPrototypeOf,lM=Object.prototype.hasOwnProperty,Q3=Object.prototype.propertyIsEnumerable,Z3=Reflect.get;var cM=(t,e,n)=>e in t?NS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D=(t,e)=>{for(var n in e||={})lM.call(e,n)&&cM(t,n,e[n]);if(aM)for(var n of aM(e))Q3.call(e,n)&&cM(t,n,e[n]);return t},ee=(t,e)=>W3(t,K3(e));var h=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Y3=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of J3(e))!lM.call(t,i)&&i!==n&&NS(t,i,{get:()=>e[i],enumerable:!(r=G3(e,i))||r.enumerable});return t};var X3=(t,e,n)=>(n=t!=null?$3(uM(t)):{},Y3(e||!t||!t.__esModule?NS(n,"default",{value:t,enumerable:!0}):n,t));var Ze=(t,e,n)=>Z3(uM(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(u){i(u)}},s=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var GI=h(WI=>{"use strict";Object.defineProperty(WI,"__esModule",{value:!0});WI.default=jQ;var og,LQ=new Uint8Array(16);function jQ(){if(!og&&(og=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!og))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return og(LQ)}});var eL=h(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.default=void 0;var qQ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;sg.default=qQ});var ed=h(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.default=void 0;var BQ=VQ(eL());function VQ(t){return t&&t.__esModule?t:{default:t}}function zQ(t){return typeof t=="string"&&BQ.default.test(t)}var UQ=zQ;ag.default=UQ});var nd=h(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=void 0;td.unsafeStringify=tL;var HQ=$Q(ed());function $Q(t){return t&&t.__esModule?t:{default:t}}var Ct=[];for(let t=0;t<256;++t)Ct.push((t+256).toString(16).slice(1));function tL(t,e=0){return Ct[t[e+0]]+Ct[t[e+1]]+Ct[t[e+2]]+Ct[t[e+3]]+"-"+Ct[t[e+4]]+Ct[t[e+5]]+"-"+Ct[t[e+6]]+Ct[t[e+7]]+"-"+Ct[t[e+8]]+Ct[t[e+9]]+"-"+Ct[t[e+10]]+Ct[t[e+11]]+Ct[t[e+12]]+Ct[t[e+13]]+Ct[t[e+14]]+Ct[t[e+15]]}function WQ(t,e=0){let n=tL(t,e);if(!(0,HQ.default)(n))throw TypeError("Stringified UUID is invalid");return n}var GQ=WQ;td.default=GQ});var rL=h(cg=>{"use strict";Object.defineProperty(cg,"__esModule",{value:!0});cg.default=void 0;var KQ=QQ(GI()),JQ=nd();function QQ(t){return t&&t.__esModule?t:{default:t}}var nL,KI,JI=0,QI=0;function ZQ(t,e,n){let r=e&&n||0,i=e||new Array(16);t=t||{};let o=t.node||nL,s=t.clockseq!==void 0?t.clockseq:KI;if(o==null||s==null){let p=t.random||(t.rng||KQ.default)();o==null&&(o=nL=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),s==null&&(s=KI=(p[6]<<8|p[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:QI+1,u=a-JI+(c-QI)/1e4;if(u<0&&t.clockseq===void 0&&(s=s+1&16383),(u<0||a>JI)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");JI=a,QI=c,KI=s,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=l&255;let d=a/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=s>>>8|128,i[r++]=s&255;for(let p=0;p<6;++p)i[r+p]=o[p];return e||(0,JQ.unsafeStringify)(i)}var YQ=ZQ;cg.default=YQ});var ZI=h(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});ug.default=void 0;var XQ=eZ(ed());function eZ(t){return t&&t.__esModule?t:{default:t}}function tZ(t){if(!(0,XQ.default)(t))throw TypeError("Invalid UUID");let e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var nZ=tZ;ug.default=nZ});var YI=h(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.URL=Os.DNS=void 0;Os.default=aZ;var rZ=nd(),iZ=oZ(ZI());function oZ(t){return t&&t.__esModule?t:{default:t}}function sZ(t){t=unescape(encodeURIComponent(t));let e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var iL="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Os.DNS=iL;var oL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Os.URL=oL;function aZ(t,e,n){function r(i,o,s,a){var c;if(typeof i=="string"&&(i=sZ(i)),typeof o=="string"&&(o=(0,iZ.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=n(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=u[l];return s}return(0,rZ.unsafeStringify)(u)}try{r.name=t}catch{}return r.DNS=iL,r.URL=oL,r}});var aL=h(dg=>{"use strict";Object.defineProperty(dg,"__esModule",{value:!0});dg.default=void 0;function cZ(t){if(typeof t=="string"){let e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return uZ(lZ(dZ(t),t.length*8))}function uZ(t){let e=[],n=t.length*32,r="0123456789abcdef";for(let i=0;i<n;i+=8){let o=t[i>>5]>>>i%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);e.push(s)}return e}function sL(t){return(t+64>>>9<<4)+14+1}function lZ(t,e){t[e>>5]|=128<<e%32,t[sL(e)-1]=e;let n=1732584193,r=-271733879,i=-1732584194,o=271733878;for(let s=0;s<t.length;s+=16){let a=n,c=r,u=i,l=o;n=Ft(n,r,i,o,t[s],7,-680876936),o=Ft(o,n,r,i,t[s+1],12,-389564586),i=Ft(i,o,n,r,t[s+2],17,606105819),r=Ft(r,i,o,n,t[s+3],22,-1044525330),n=Ft(n,r,i,o,t[s+4],7,-176418897),o=Ft(o,n,r,i,t[s+5],12,1200080426),i=Ft(i,o,n,r,t[s+6],17,-1473231341),r=Ft(r,i,o,n,t[s+7],22,-45705983),n=Ft(n,r,i,o,t[s+8],7,1770035416),o=Ft(o,n,r,i,t[s+9],12,-1958414417),i=Ft(i,o,n,r,t[s+10],17,-42063),r=Ft(r,i,o,n,t[s+11],22,-1990404162),n=Ft(n,r,i,o,t[s+12],7,1804603682),o=Ft(o,n,r,i,t[s+13],12,-40341101),i=Ft(i,o,n,r,t[s+14],17,-1502002290),r=Ft(r,i,o,n,t[s+15],22,1236535329),n=Lt(n,r,i,o,t[s+1],5,-165796510),o=Lt(o,n,r,i,t[s+6],9,-1069501632),i=Lt(i,o,n,r,t[s+11],14,643717713),r=Lt(r,i,o,n,t[s],20,-373897302),n=Lt(n,r,i,o,t[s+5],5,-701558691),o=Lt(o,n,r,i,t[s+10],9,38016083),i=Lt(i,o,n,r,t[s+15],14,-660478335),r=Lt(r,i,o,n,t[s+4],20,-405537848),n=Lt(n,r,i,o,t[s+9],5,568446438),o=Lt(o,n,r,i,t[s+14],9,-1019803690),i=Lt(i,o,n,r,t[s+3],14,-187363961),r=Lt(r,i,o,n,t[s+8],20,1163531501),n=Lt(n,r,i,o,t[s+13],5,-1444681467),o=Lt(o,n,r,i,t[s+2],9,-51403784),i=Lt(i,o,n,r,t[s+7],14,1735328473),r=Lt(r,i,o,n,t[s+12],20,-1926607734),n=jt(n,r,i,o,t[s+5],4,-378558),o=jt(o,n,r,i,t[s+8],11,-2022574463),i=jt(i,o,n,r,t[s+11],16,1839030562),r=jt(r,i,o,n,t[s+14],23,-35309556),n=jt(n,r,i,o,t[s+1],4,-1530992060),o=jt(o,n,r,i,t[s+4],11,1272893353),i=jt(i,o,n,r,t[s+7],16,-155497632),r=jt(r,i,o,n,t[s+10],23,-1094730640),n=jt(n,r,i,o,t[s+13],4,681279174),o=jt(o,n,r,i,t[s],11,-358537222),i=jt(i,o,n,r,t[s+3],16,-722521979),r=jt(r,i,o,n,t[s+6],23,76029189),n=jt(n,r,i,o,t[s+9],4,-640364487),o=jt(o,n,r,i,t[s+12],11,-421815835),i=jt(i,o,n,r,t[s+15],16,530742520),r=jt(r,i,o,n,t[s+2],23,-995338651),n=qt(n,r,i,o,t[s],6,-198630844),o=qt(o,n,r,i,t[s+7],10,1126891415),i=qt(i,o,n,r,t[s+14],15,-1416354905),r=qt(r,i,o,n,t[s+5],21,-57434055),n=qt(n,r,i,o,t[s+12],6,1700485571),o=qt(o,n,r,i,t[s+3],10,-1894986606),i=qt(i,o,n,r,t[s+10],15,-1051523),r=qt(r,i,o,n,t[s+1],21,-2054922799),n=qt(n,r,i,o,t[s+8],6,1873313359),o=qt(o,n,r,i,t[s+15],10,-30611744),i=qt(i,o,n,r,t[s+6],15,-1560198380),r=qt(r,i,o,n,t[s+13],21,1309151649),n=qt(n,r,i,o,t[s+4],6,-145523070),o=qt(o,n,r,i,t[s+11],10,-1120210379),i=qt(i,o,n,r,t[s+2],15,718787259),r=qt(r,i,o,n,t[s+9],21,-343485551),n=Po(n,a),r=Po(r,c),i=Po(i,u),o=Po(o,l)}return[n,r,i,o]}function dZ(t){if(t.length===0)return[];let e=t.length*8,n=new Uint32Array(sL(e));for(let r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function Po(t,e){let n=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(n>>16)<<16|n&65535}function pZ(t,e){return t<<e|t>>>32-e}function lg(t,e,n,r,i,o){return Po(pZ(Po(Po(e,t),Po(r,o)),i),n)}function Ft(t,e,n,r,i,o,s){return lg(e&n|~e&r,t,e,i,o,s)}function Lt(t,e,n,r,i,o,s){return lg(e&r|n&~r,t,e,i,o,s)}function jt(t,e,n,r,i,o,s){return lg(e^n^r,t,e,i,o,s)}function qt(t,e,n,r,i,o,s){return lg(n^(e|~r),t,e,i,o,s)}var fZ=cZ;dg.default=fZ});var uL=h(pg=>{"use strict";Object.defineProperty(pg,"__esModule",{value:!0});pg.default=void 0;var hZ=cL(YI()),gZ=cL(aL());function cL(t){return t&&t.__esModule?t:{default:t}}var vZ=(0,hZ.default)("v3",48,gZ.default),mZ=vZ;pg.default=mZ});var lL=h(fg=>{"use strict";Object.defineProperty(fg,"__esModule",{value:!0});fg.default=void 0;var yZ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),CZ={randomUUID:yZ};fg.default=CZ});var fL=h(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});hg.default=void 0;var dL=pL(lL()),SZ=pL(GI()),wZ=nd();function pL(t){return t&&t.__esModule?t:{default:t}}function bZ(t,e,n){if(dL.default.randomUUID&&!e&&!t)return dL.default.randomUUID();t=t||{};let r=t.random||(t.rng||SZ.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return(0,wZ.unsafeStringify)(r)}var EZ=bZ;hg.default=EZ});var hL=h(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.default=void 0;function IZ(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function XI(t,e){return t<<e|t>>>32-e}function DZ(t){let e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let s=unescape(encodeURIComponent(t));t=[];for(let a=0;a<s.length;++a)t.push(s.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let r=t.length/4+2,i=Math.ceil(r/16),o=new Array(i);for(let s=0;s<i;++s){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=t[s*64+c*4]<<24|t[s*64+c*4+1]<<16|t[s*64+c*4+2]<<8|t[s*64+c*4+3];o[s]=a}o[i-1][14]=(t.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(t.length-1)*8&4294967295;for(let s=0;s<i;++s){let a=new Uint32Array(80);for(let f=0;f<16;++f)a[f]=o[s][f];for(let f=16;f<80;++f)a[f]=XI(a[f-3]^a[f-8]^a[f-14]^a[f-16],1);let c=n[0],u=n[1],l=n[2],d=n[3],p=n[4];for(let f=0;f<80;++f){let g=Math.floor(f/20),m=XI(c,5)+IZ(g,u,l,d)+p+e[g]+a[f]>>>0;p=d,d=l,l=XI(u,30)>>>0,u=c,c=m}n[0]=n[0]+c>>>0,n[1]=n[1]+u>>>0,n[2]=n[2]+l>>>0,n[3]=n[3]+d>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var _Z=DZ;gg.default=_Z});var vL=h(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.default=void 0;var RZ=gL(YI()),PZ=gL(hL());function gL(t){return t&&t.__esModule?t:{default:t}}var TZ=(0,RZ.default)("v5",80,PZ.default),AZ=TZ;vg.default=AZ});var mL=h(mg=>{"use strict";Object.defineProperty(mg,"__esModule",{value:!0});mg.default=void 0;var MZ="00000000-0000-0000-0000-000000000000";mg.default=MZ});var yL=h(yg=>{"use strict";Object.defineProperty(yg,"__esModule",{value:!0});yg.default=void 0;var OZ=xZ(ed());function xZ(t){return t&&t.__esModule?t:{default:t}}function NZ(t){if(!(0,OZ.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var kZ=NZ;yg.default=kZ});var CL=h(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Object.defineProperty(Sr,"NIL",{enumerable:!0,get:function(){return BZ.default}});Object.defineProperty(Sr,"parse",{enumerable:!0,get:function(){return HZ.default}});Object.defineProperty(Sr,"stringify",{enumerable:!0,get:function(){return UZ.default}});Object.defineProperty(Sr,"v1",{enumerable:!0,get:function(){return FZ.default}});Object.defineProperty(Sr,"v3",{enumerable:!0,get:function(){return LZ.default}});Object.defineProperty(Sr,"v4",{enumerable:!0,get:function(){return jZ.default}});Object.defineProperty(Sr,"v5",{enumerable:!0,get:function(){return qZ.default}});Object.defineProperty(Sr,"validate",{enumerable:!0,get:function(){return zZ.default}});Object.defineProperty(Sr,"version",{enumerable:!0,get:function(){return VZ.default}});var FZ=qi(rL()),LZ=qi(uL()),jZ=qi(fL()),qZ=qi(vL()),BZ=qi(mL()),VZ=qi(yL()),zZ=qi(ed()),UZ=qi(nd()),HZ=qi(ZI());function qi(t){return t&&t.__esModule?t:{default:t}}});var To=h(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.createNoDashGuid=Oc.createGuid=void 0;var $Z=CL(),SL=()=>$Z.v4();Oc.createGuid=SL;var WZ=()=>SL().replace(new RegExp("-","g"),"").toUpperCase();Oc.createNoDashGuid=WZ});var xc=h(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.PlatformEvent=xs.EventType=void 0;var GZ=To(),KZ;(function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.None=4]="None"})(KZ=xs.EventType||(xs.EventType={}));var eD=class{constructor(e,n){this.privName=e,this.privEventId=GZ.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=n,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}};xs.PlatformEvent=eD});var wL=h(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.AudioStreamNodeErrorEvent=Ue.AudioStreamNodeDetachedEvent=Ue.AudioStreamNodeAttachedEvent=Ue.AudioStreamNodeAttachingEvent=Ue.AudioStreamNodeEvent=Ue.AudioSourceErrorEvent=Ue.AudioSourceOffEvent=Ue.AudioSourceReadyEvent=Ue.AudioSourceInitializingEvent=Ue.AudioSourceEvent=void 0;var tD=xc(),Ao=class extends tD.PlatformEvent{constructor(e,n,r=tD.EventType.Info){super(e,r),this.privAudioSourceId=n}get audioSourceId(){return this.privAudioSourceId}};Ue.AudioSourceEvent=Ao;var nD=class extends Ao{constructor(e){super("AudioSourceInitializingEvent",e)}};Ue.AudioSourceInitializingEvent=nD;var rD=class extends Ao{constructor(e){super("AudioSourceReadyEvent",e)}};Ue.AudioSourceReadyEvent=rD;var iD=class extends Ao{constructor(e){super("AudioSourceOffEvent",e)}};Ue.AudioSourceOffEvent=iD;var oD=class extends Ao{constructor(e,n){super("AudioSourceErrorEvent",e,tD.EventType.Error),this.privError=n}get error(){return this.privError}};Ue.AudioSourceErrorEvent=oD;var Ns=class extends Ao{constructor(e,n,r){super(e,n),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}};Ue.AudioStreamNodeEvent=Ns;var sD=class extends Ns{constructor(e,n){super("AudioStreamNodeAttachingEvent",e,n)}};Ue.AudioStreamNodeAttachingEvent=sD;var aD=class extends Ns{constructor(e,n){super("AudioStreamNodeAttachedEvent",e,n)}};Ue.AudioStreamNodeAttachedEvent=aD;var cD=class extends Ns{constructor(e,n){super("AudioStreamNodeDetachedEvent",e,n)}};Ue.AudioStreamNodeDetachedEvent=cD;var uD=class extends Ns{constructor(e,n,r){super("AudioStreamNodeErrorEvent",e,n),this.privError=r}get error(){return this.privError}};Ue.AudioStreamNodeErrorEvent=uD});var bL=h(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.ConnectionMessageSentEvent=et.ConnectionMessageReceivedEvent=et.ConnectionEstablishErrorEvent=et.ConnectionErrorEvent=et.ConnectionClosedEvent=et.ConnectionEstablishedEvent=et.ConnectionStartEvent=et.ConnectionEvent=et.ServiceEvent=void 0;var ks=xc(),lD=class extends ks.PlatformEvent{constructor(e,n,r=ks.EventType.Info){super(e,r),this.privJsonResult=n}get jsonString(){return this.privJsonResult}};et.ServiceEvent=lD;var Kr=class extends ks.PlatformEvent{constructor(e,n,r=ks.EventType.Info){super(e,r),this.privConnectionId=n}get connectionId(){return this.privConnectionId}};et.ConnectionEvent=Kr;var dD=class extends Kr{constructor(e,n,r){super("ConnectionStartEvent",e),this.privUri=n,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}};et.ConnectionStartEvent=dD;var pD=class extends Kr{constructor(e){super("ConnectionEstablishedEvent",e)}};et.ConnectionEstablishedEvent=pD;var fD=class extends Kr{constructor(e,n,r){super("ConnectionClosedEvent",e,ks.EventType.Debug),this.privReason=r,this.privStatusCode=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};et.ConnectionClosedEvent=fD;var hD=class extends Kr{constructor(e,n,r){super("ConnectionErrorEvent",e,ks.EventType.Debug),this.privMessage=n,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}};et.ConnectionErrorEvent=hD;var gD=class extends Kr{constructor(e,n,r){super("ConnectionEstablishErrorEvent",e,ks.EventType.Error),this.privStatusCode=n,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};et.ConnectionEstablishErrorEvent=gD;var vD=class extends Kr{constructor(e,n,r){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=n,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};et.ConnectionMessageReceivedEvent=vD;var mD=class extends Kr{constructor(e,n,r){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=n,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}};et.ConnectionMessageSentEvent=mD});var wr=h(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ObjectDisposedError=Mo.InvalidOperationError=Mo.ArgumentNullError=void 0;var yD=class extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}};Mo.ArgumentNullError=yD;var CD=class extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}};Mo.InvalidOperationError=CD;var SD=class extends Error{constructor(e,n){super(n),this.name=e+"ObjectDisposed",this.message=n}};Mo.ObjectDisposedError=SD});var bD=h(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.ConnectionMessage=Ls.MessageType=void 0;var Cg=wr(),JZ=To(),Fs;(function(t){t[t.Text=0]="Text",t[t.Binary=1]="Binary"})(Fs=Ls.MessageType||(Ls.MessageType={}));var wD=class{constructor(e,n,r,i){if(this.privBody=null,e===Fs.Text&&n&&typeof n!="string")throw new Cg.InvalidOperationError("Payload must be a string");if(e===Fs.Binary&&n&&!(n instanceof ArrayBuffer))throw new Cg.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=n,this.privHeaders=r||{},this.privId=i||JZ.createNoDashGuid(),this.messageType){case Fs.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case Fs.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===Fs.Binary)throw new Cg.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===Fs.Text)throw new Cg.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}};Ls.ConnectionMessage=wD});var EL=h(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.ConnectionOpenResponse=void 0;var ED=class{constructor(e,n){this.privStatusCode=e,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};Sg.ConnectionOpenResponse=ED});var IL=h(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0});wg.DeferralMap=void 0;var ID=class{constructor(){this.privMap={}}add(e,n){this.privMap[e]=n}getId(e){return this.privMap[e]}complete(e,n){try{this.privMap[e].resolve(n)}catch(r){this.privMap[e].reject(r)}finally{this.privMap[e]=void 0}}};wg.DeferralMap=ID});var _D=h(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.SendingAgentContextMessageEvent=Nc.DialogEvent=void 0;var DL=xc(),bg=class extends DL.PlatformEvent{constructor(e,n=DL.EventType.Info){super(e,n)}};Nc.DialogEvent=bg;var DD=class extends bg{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}};Nc.SendingAgentContextMessageEvent=DD});var PD=h(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});Eg.EventSource=void 0;var QZ=wr(),ZZ=To(),RD=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new QZ.ObjectDisposedError("EventSource");if(this.metadata)for(let n in this.metadata)n&&e.metadata&&(e.metadata[n]||(e.metadata[n]=this.metadata[n]));for(let n in this.privEventListeners)n&&this.privEventListeners[n]&&this.privEventListeners[n](e)}attach(e){let n=ZZ.createNoDashGuid();return this.privEventListeners[n]=e,{detach:()=>(delete this.privEventListeners[n],Promise.resolve())}}attachListener(e){return this.attach(n=>e.onEvent(n))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(n=>e.onEvent(n)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};Eg.EventSource=RD});var _L=h(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.Events=void 0;var YZ=wr(),XZ=PD(),Ig=class t{static setEventSource(e){if(!e)throw new YZ.ArgumentNullError("eventSource");t.privInstance=e}static get instance(){return t.privInstance}};Dg.Events=Ig;Ig.privInstance=new XZ.EventSource});var PL=h(RL=>{"use strict";Object.defineProperty(RL,"__esModule",{value:!0})});var TL=h(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.ConnectionState=void 0;var eY;(function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"})(eY=rd.ConnectionState||(rd.ConnectionState={}))});var ML=h(AL=>{"use strict";Object.defineProperty(AL,"__esModule",{value:!0})});var xL=h(OL=>{"use strict";Object.defineProperty(OL,"__esModule",{value:!0})});var kL=h(NL=>{"use strict";Object.defineProperty(NL,"__esModule",{value:!0})});var LL=h(FL=>{"use strict";Object.defineProperty(FL,"__esModule",{value:!0})});var qL=h(jL=>{"use strict";Object.defineProperty(jL,"__esModule",{value:!0})});var VL=h(BL=>{"use strict";Object.defineProperty(BL,"__esModule",{value:!0})});var UL=h(zL=>{"use strict";Object.defineProperty(zL,"__esModule",{value:!0})});var $L=h(HL=>{"use strict";Object.defineProperty(HL,"__esModule",{value:!0})});var AD=h(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});_g.List=void 0;var tY=wr(),TD=class t{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(let n of e)this.privList.push(n)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,n){this.throwIfDisposed(),e===0?this.privList.unshift(n):e===this.privList.length?this.privList.push(n):this.privList.splice(e,0,n),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,n){this.throwIfDisposed();let r=this.privList.splice(e,n);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();let n=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[n]=e,{detach:()=>(delete this.privAddSubscriptions[n],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();let n=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[n]=e,{detach:()=>(delete this.privRemoveSubscriptions[n],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();let n=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[n]=e,{detach:()=>(delete this.privDisposedSubscriptions[n],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){let e=Array();return this.privList.forEach(n=>{e.push(n)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let n=0;n<this.length();n++)e(this.privList[n],n)}select(e){this.throwIfDisposed();let n=[];for(let r=0;r<this.privList.length;r++)n.push(e(this.privList[r],r));return new t(n)}where(e){this.throwIfDisposed();let n=new t;for(let r=0;r<this.privList.length;r++)e(this.privList[r],r)&&n.add(this.privList[r]);return n}orderBy(e){this.throwIfDisposed();let r=this.toArray().sort(e);return new t(r)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((n,r)=>e(r,n))}clone(){return this.throwIfDisposed(),new t(this.toArray())}concat(e){return this.throwIfDisposed(),new t(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new t(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new tY.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(let n in e)n&&e[n]()}};_g.List=TD});var xD=h(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.marshalPromiseToCallbacks=nn.Sink=nn.Deferred=nn.PromiseResultEventSource=nn.PromiseResult=nn.PromiseState=void 0;var Bi;(function(t){t[t.None=0]="None",t[t.Resolved=1]="Resolved",t[t.Rejected=2]="Rejected"})(Bi=nn.PromiseState||(nn.PromiseState={}));var Rg=class{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on(n=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=n)},n=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=n)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}};nn.PromiseResult=Rg;var Pg=class{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,n)=>{this.privOnSetResult=e,this.privOnSetError=n}}};nn.PromiseResultEventSource=Pg;var MD=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,n)=>{this.privResolve=e,this.privReject=n})}get promise(){return this.privPromise}};nn.Deferred=MD;var OD=class{constructor(){this.privState=Bi.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new Pg,this.privPromiseResult=new Rg(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==Bi.None)throw new Error("'Cannot resolve a completed promise'");this.privState=Bi.Resolved,this.privPromiseResultEvents.setResult(e);for(let n=0;n<this.privSuccessHandlers.length;n++)this.executeSuccessCallback(e,this.privSuccessHandlers[n],this.privErrorHandlers[n]);this.detachHandlers()}reject(e){if(this.privState!==Bi.None)throw new Error("'Cannot reject a completed promise'");this.privState=Bi.Rejected,this.privPromiseResultEvents.setError(e);for(let n of this.privErrorHandlers)this.executeErrorCallback(e,n);this.detachHandlers()}on(e,n){e==null&&(e=()=>{}),this.privState===Bi.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(n)):(this.privState===Bi.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,n):this.privState===Bi.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,n),this.detachHandlers())}executeSuccessCallback(e,n,r){try{n(e)}catch(i){this.executeErrorCallback(`'Unhandled callback error: ${i}'`,r)}}executeErrorCallback(e,n){if(n)try{n(e)}catch(r){throw new Error(`'Unhandled callback error: ${r}. InnerError: ${e}'`)}else throw new Error(`'Unhandled error: ${e}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}};nn.Sink=OD;function nY(t,e,n){t.then(r=>{try{e&&e(r)}catch(i){if(n)try{if(i instanceof Error){let o=i;n(o.name+": "+o.message)}else n(i)}catch{}}},r=>{if(n)try{if(r instanceof Error){let i=r;n(i.name+": "+i.message)}else n(r)}catch{}})}nn.marshalPromiseToCallbacks=nY});var LD=h(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.Queue=void 0;var ND=wr(),kD=AD(),WL=xD(),Tg=function(t){return t[t.Dequeue=0]="Dequeue",t[t.Peek=1]="Peek",t}(Tg||{}),FD=class{constructor(e){this.privPromiseStore=new kD.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new kD.List,this.privDetachables=[],this.privSubscribers=new kD.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(n=>n(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(n=>{this.privList.add(n)},()=>{})}dequeue(){this.throwIfDispose();let e=new WL.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:Tg.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();let e=new WL.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:Tg.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}drainAndDispose(e,n){return v(this,null,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=n,this.privIsDisposing=!0;let r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(let i of this.privDetachables)yield i.detach();if(this.privPromiseStore.length()>0&&e){let i=[];return this.privPromiseStore.toArray().forEach(o=>{i.push(o)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(o=>{e(o)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}})}dispose(e){return v(this,null,function*(){yield this.drainAndDispose(null,e)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;let e=this.privSubscribers,n=this.privList;if(e&&n){for(;n.length()>0&&e.length()>0&&!this.privIsDisposing;){let r=e.removeFirst();if(r.type===Tg.Peek)r.deferral.resolve(n.first());else{let i=n.removeFirst();r.deferral.resolve(i)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===n&&(this.privList=n)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new ND.InvalidOperationError(this.privDisposeReason):new ND.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new ND.InvalidOperationError("Queue disposing")}};Ag.Queue=FD});var GL=h(Og=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});Og.RawWebsocketMessage=void 0;var Mg=bD(),id=wr(),rY=To(),jD=class{constructor(e,n,r){if(this.privPayload=null,!n)throw new id.ArgumentNullError("payload");if(e===Mg.MessageType.Binary&&Object.getPrototypeOf(n).constructor.name!=="ArrayBuffer")throw new id.InvalidOperationError("Payload must be ArrayBuffer");if(e===Mg.MessageType.Text&&typeof n!="string")throw new id.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=n,this.privId=r||rY.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===Mg.MessageType.Binary)throw new id.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===Mg.MessageType.Text)throw new id.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};Og.RawWebsocketMessage=jD});var KL=h(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.RiffPcmEncoder=void 0;var qD=class{constructor(e,n){this.privActualSampleRate=e,this.privDesiredSampleRate=n}encode(e){let n=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;let r=n.length*2,i=new ArrayBuffer(r),o=new DataView(i);return this.floatTo16BitPCM(o,0,n),i}setString(e,n,r){for(let i=0;i<r.length;i++)e.setUint8(n+i,r.charCodeAt(i))}floatTo16BitPCM(e,n,r){for(let i=0;i<r.length;i++,n+=2){let o=Math.max(-1,Math.min(1,r[i]));e.setInt16(n,o<0?o*32768:o*32767,!0)}}downSampleAudioFrame(e,n,r){if(!e)return null;if(r===n||r>n)return e;let i=n/r,o=Math.round(e.length/i),s=new Float32Array(o),a=0,c=0;for(;c<o;){let u=Math.round((c+1)*i),l=0,d=0;for(;a<u&&a<e.length;)l+=e[a++],d++;s[c++]=l/d}return s}};xg.RiffPcmEncoder=qD});var ZL=h(Ng=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.Stream=void 0;var JL=wr(),iY=To(),QL=LD(),BD=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||iY.createNoDashGuid(),this.privReaderQueue=new QL.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new JL.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>v(this,null,function*(){return(e===void 0||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new QL.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new JL.InvalidOperationError("Stream closed")}};Ng.Stream=BD});var kg=h(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.TranslationStatus=void 0;var oY;(function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"})(oY=od.TranslationStatus||(od.TranslationStatus={}))});var YL=h(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.ChunkedArrayBufferStream=void 0;var sY=L(),VD=class extends sY.Stream{constructor(e,n){super(n),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||this.privNextBufferReadyBytes===0&&e.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(e);return}let n=0;for(;n<e.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);let r=Math.min(e.buffer.byteLength-n,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(e.buffer.slice(n,r+n));i.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=r,n+=r,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};Fg.ChunkedArrayBufferStream=VD});var ej=h(XL=>{"use strict";Object.defineProperty(XL,"__esModule",{value:!0})});var tj=h(Lg=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});Lg.Timeout=void 0;var Jr=class t{static load(){let e=new Map([[0,()=>{}]]),n=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),o=new Worker(i);return o.addEventListener("message",({data:c})=>{if(t.isCallNotification(c)){let{params:{timerId:u}}=c,l=e.get(u);if(typeof l=="number"){let d=n.get(l);if(d===void 0||d!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(t.isClearResponse(c)){let{id:u}=c,l=n.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");n.delete(u),e.delete(l)}else{let{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{let u=Math.random();n.set(u,c),e.set(c,u),o.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{let l=Math.random();return e.set(l,c),o.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(t.workerTimers!==null||(t.workerTimers=t.load()),t.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}};Lg.Timeout=Jr;Jr.workerTimers=null;Jr.clearTimeout=t=>Jr.timers().clearTimeout(t);Jr.setTimeout=(t,e)=>Jr.timers().setTimeout(t,e);Jr.timers=Jr.loadWorkerTimers()});var nj=h(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.OCSPCacheUpdateErrorEvent=fe.OCSPResponseRetrievedEvent=fe.OCSPCacheFetchErrorEvent=fe.OCSPVerificationFailedEvent=fe.OCSPCacheHitEvent=fe.OCSPCacheEntryNeedsRefreshEvent=fe.OCSPCacheEntryExpiredEvent=fe.OCSPWSUpgradeStartedEvent=fe.OCSPStapleReceivedEvent=fe.OCSPCacheUpdateCompleteEvent=fe.OCSPDiskCacheStoreEvent=fe.OCSPMemoryCacheStoreEvent=fe.OCSPCacheUpdateNeededEvent=fe.OCSPDiskCacheHitEvent=fe.OCSPCacheMissEvent=fe.OCSPMemoryCacheHitEvent=fe.OCSPEvent=void 0;var St=xc(),ut=class extends St.PlatformEvent{constructor(e,n,r){super(e,n),this.privSignature=r}};fe.OCSPEvent=ut;var zD=class extends ut{constructor(e){super("OCSPMemoryCacheHitEvent",St.EventType.Debug,e)}};fe.OCSPMemoryCacheHitEvent=zD;var UD=class extends ut{constructor(e){super("OCSPCacheMissEvent",St.EventType.Debug,e)}};fe.OCSPCacheMissEvent=UD;var HD=class extends ut{constructor(e){super("OCSPDiskCacheHitEvent",St.EventType.Debug,e)}};fe.OCSPDiskCacheHitEvent=HD;var $D=class extends ut{constructor(e){super("OCSPCacheUpdateNeededEvent",St.EventType.Debug,e)}};fe.OCSPCacheUpdateNeededEvent=$D;var WD=class extends ut{constructor(e){super("OCSPMemoryCacheStoreEvent",St.EventType.Debug,e)}};fe.OCSPMemoryCacheStoreEvent=WD;var GD=class extends ut{constructor(e){super("OCSPDiskCacheStoreEvent",St.EventType.Debug,e)}};fe.OCSPDiskCacheStoreEvent=GD;var KD=class extends ut{constructor(e){super("OCSPCacheUpdateCompleteEvent",St.EventType.Debug,e)}};fe.OCSPCacheUpdateCompleteEvent=KD;var JD=class extends ut{constructor(){super("OCSPStapleReceivedEvent",St.EventType.Debug,"")}};fe.OCSPStapleReceivedEvent=JD;var QD=class extends ut{constructor(e){super("OCSPWSUpgradeStartedEvent",St.EventType.Debug,e)}};fe.OCSPWSUpgradeStartedEvent=QD;var ZD=class extends ut{constructor(e,n){super("OCSPCacheEntryExpiredEvent",St.EventType.Debug,e),this.privExpireTime=n}};fe.OCSPCacheEntryExpiredEvent=ZD;var YD=class extends ut{constructor(e,n,r){super("OCSPCacheEntryNeedsRefreshEvent",St.EventType.Debug,e),this.privExpireTime=r,this.privStartTime=n}};fe.OCSPCacheEntryNeedsRefreshEvent=YD;var XD=class extends ut{constructor(e,n,r){super("OCSPCacheHitEvent",St.EventType.Debug,e),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=n,this.privStartTimeString=new Date(n).toLocaleTimeString()}};fe.OCSPCacheHitEvent=XD;var e_=class extends ut{constructor(e,n){super("OCSPVerificationFailedEvent",St.EventType.Debug,e),this.privError=n}};fe.OCSPVerificationFailedEvent=e_;var t_=class extends ut{constructor(e,n){super("OCSPCacheFetchErrorEvent",St.EventType.Debug,e),this.privError=n}};fe.OCSPCacheFetchErrorEvent=t_;var n_=class extends ut{constructor(e){super("OCSPResponseRetrievedEvent",St.EventType.Debug,e)}};fe.OCSPResponseRetrievedEvent=n_;var r_=class extends ut{constructor(e,n){super("OCSPCacheUpdateErrorEvent",St.EventType.Debug,e),this.privError=n}};fe.OCSPCacheUpdateErrorEvent=r_});var ij=h(jg=>{"use strict";Object.defineProperty(jg,"__esModule",{value:!0});jg.BackgroundEvent=void 0;var rj=L(),i_=class extends rj.PlatformEvent{constructor(e){super("BackgroundEvent",rj.EventType.Error),this.privError=e}get error(){return this.privError}};jg.BackgroundEvent=i_});var L=h(ie=>{"use strict";var aY=ie&&ie.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ye=ie&&ie.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&aY(e,t,n)};Object.defineProperty(ie,"__esModule",{value:!0});ye(wL(),ie);ye(bL(),ie);ye(bD(),ie);ye(EL(),ie);ye(IL(),ie);ye(_D(),ie);ye(wr(),ie);ye(_L(),ie);ye(PD(),ie);ye(To(),ie);ye(PL(),ie);ye(TL(),ie);ye(ML(),ie);ye(xL(),ie);ye(kL(),ie);ye(LL(),ie);ye(qL(),ie);ye(VL(),ie);ye(UL(),ie);ye($L(),ie);ye(AD(),ie);ye(xc(),ie);ye(xD(),ie);ye(LD(),ie);ye(GL(),ie);ye(KL(),ie);ye(ZL(),ie);var cY=kg();Object.defineProperty(ie,"TranslationStatus",{enumerable:!0,get:function(){return cY.TranslationStatus}});ye(YL(),ie);ye(ej(),ie);ye(tj(),ie);ye(nj(),ie);ye(ij(),ie)});var Bt=h(qg=>{"use strict";Object.defineProperty(qg,"__esModule",{value:!0});qg.HeaderNames=void 0;var On=class{};qg.HeaderNames=On;On.AuthKey="Ocp-Apim-Subscription-Key";On.Authorization="Authorization";On.SpIDAuthKey="Apim-Subscription-Id";On.ConnectionId="X-ConnectionId";On.ContentType="Content-Type";On.CustomCommandsAppId="X-CommandsAppId";On.Path="Path";On.RequestId="X-RequestId";On.RequestStreamId="X-StreamId";On.RequestTimestamp="X-Timestamp"});var Vg=h(Bg=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});Bg.AuthInfo=void 0;var o_=class{constructor(e,n){this.privHeaderName=e,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}};Bg.AuthInfo=o_});var oj=h(zg=>{"use strict";Object.defineProperty(zg,"__esModule",{value:!0});zg.CognitiveSubscriptionKeyAuthentication=void 0;var uY=L(),lY=Bt(),dY=Vg(),s_=class{constructor(e){if(!e)throw new uY.ArgumentNullError("subscriptionKey");this.privAuthInfo=new dY.AuthInfo(lY.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}};zg.CognitiveSubscriptionKeyAuthentication=s_});var uj=h(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});Hg.CognitiveTokenAuthentication=void 0;var sj=L(),aj=Vg(),cj=Bt(),Ug=class t{constructor(e,n){if(!e)throw new sj.ArgumentNullError("fetchCallback");if(!n)throw new sj.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=n}fetch(e){return this.privFetchCallback(e).then(n=>new aj.AuthInfo(cj.HeaderNames.Authorization,n===void 0?void 0:t.privTokenPrefix+n))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(n=>new aj.AuthInfo(cj.HeaderNames.Authorization,n===void 0?void 0:t.privTokenPrefix+n))}};Hg.CognitiveTokenAuthentication=Ug;Ug.privTokenPrefix="Bearer "});var dj=h(lj=>{"use strict";Object.defineProperty(lj,"__esModule",{value:!0})});var fj=h(pj=>{"use strict";Object.defineProperty(pj,"__esModule",{value:!0})});var a_=h(()=>{"use strict"});var c_=h($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});$g.LogLevel=void 0;var pY=L();Object.defineProperty($g,"LogLevel",{enumerable:!0,get:function(){return pY.EventType}})});var $=h(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});Wg.Contracts=void 0;var u_=class t{static throwIfNullOrUndefined(e,n){if(e==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(e,n){if(e===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(e,n){if(t.throwIfNullOrUndefined(e,n),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(e,n,r){if(t.throwIfNullOrUndefined(e,n),(""+e).length>r)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(e,n,r){if(t.throwIfNullOrUndefined(e,n),(""+e).length<r)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+r.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,n){if(t.throwIfNullOrUndefined(e,n),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(let r of e)t.throwIfNullOrWhitespace(r,n)}static throwIfFileDoesNotExist(e,n){t.throwIfNullOrWhitespace(e,n)}static throwIfNotUndefined(e,n){if(e!==void 0)throw new Error("throwIfNotUndefined:"+n)}};Wg.Contracts=u_});var gj=h(Qr=>{"use strict";var fY=Qr&&Qr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),hY=Qr&&Qr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gY=Qr&&Qr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&fY(e,t,n);return hY(e,t),e};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.ConsoleLoggingListener=void 0;var hj=gY(a_()),sd=c_(),vY=$(),l_=class{constructor(e=sd.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){vY.Contracts.throwIfNullOrUndefined(hj.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){let n=this.toString(e);if(this.logCallback&&this.logCallback(n),this.privLogPath&&hj.writeFileSync(this.privLogPath,n+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case sd.LogLevel.Debug:console.debug(n);break;case sd.LogLevel.Info:console.info(n);break;case sd.LogLevel.Warning:console.warn(n);break;case sd.LogLevel.Error:console.error(n);break;default:console.log(n);break}}}toString(e){let n=[`${e.eventTime}`,`${e.name}`],r=e;for(let i in r)if(i&&e.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){let o=r[i],s="<NULL>";o!=null&&(typeof o=="number"||typeof o=="string"?s=o.toString():s=JSON.stringify(o)),n.push(`${i}: ${s}`)}return n.join(" | ")}};Qr.ConsoleLoggingListener=l_});var mj=h(vj=>{"use strict";Object.defineProperty(vj,"__esModule",{value:!0})});var Oo=h(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.AudioStreamFormatImpl=Vi.AudioStreamFormat=Vi.AudioFormatTag=void 0;var ad;(function(t){t[t.PCM=1]="PCM",t[t.MuLaw=2]="MuLaw",t[t.Siren=3]="Siren",t[t.MP3=4]="MP3",t[t.SILKSkype=5]="SILKSkype",t[t.OGG_OPUS=6]="OGG_OPUS",t[t.WEBM_OPUS=7]="WEBM_OPUS",t[t.ALaw=8]="ALaw",t[t.FLAC=9]="FLAC",t[t.OPUS=10]="OPUS",t[t.AMR_WB=11]="AMR_WB",t[t.G722=12]="G722"})(ad=Vi.AudioFormatTag||(Vi.AudioFormatTag={}));var Gg=class{static getDefaultInputFormat(){return kc.getDefaultInputFormat()}static getWaveFormat(e,n,r,i){return new kc(e,n,r,i)}static getWaveFormatPCM(e,n,r){return new kc(e,n,r)}};Vi.AudioStreamFormat=Gg;var kc=class t extends Gg{constructor(e=16e3,n=16,r=1,i=ad.PCM){super();let o=!0;switch(i){case ad.PCM:this.formatTag=1;break;case ad.ALaw:this.formatTag=6;break;case ad.MuLaw:this.formatTag=7;break;default:o=!1}if(this.bitsPerSample=n,this.samplesPerSec=e,this.channels=r,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),o){this.privHeader=new ArrayBuffer(44);let s=new DataView(this.privHeader);this.setString(s,0,"RIFF"),s.setUint32(4,0,!0),this.setString(s,8,"WAVEfmt "),s.setUint32(16,16,!0),s.setUint16(20,this.formatTag,!0),s.setUint16(22,this.channels,!0),s.setUint32(24,this.samplesPerSec,!0),s.setUint32(28,this.avgBytesPerSec,!0),s.setUint16(32,this.channels*(this.bitsPerSample/8),!0),s.setUint16(34,this.bitsPerSample,!0),this.setString(s,36,"data"),s.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new t}static getAudioContext(e){let n=window.AudioContext||window.webkitAudioContext||!1;if(n)return e!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new n({sampleRate:e}):new n;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,n,r){for(let i=0;i<r.length;i++)e.setUint8(n+i,r.charCodeAt(i))}};Vi.AudioStreamFormatImpl=kc});var Sj=h(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.MicAudioSource=js.AudioWorkletSourceURLPropertyName=void 0;var yj=M(),wt=L(),Cj=Oo();js.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";var Kg=class t{constructor(e,n,r,i){this.privRecorder=e,this.deviceId=n,this.privStreams={},this.privOutputChunkSize=t.AUDIOFORMAT.avgBytesPerSec/10,this.privId=r||wt.createNoDashGuid(),this.privEvents=new wt.EventSource,this.privMediaStream=i||null,this.privIsClosing=!1}get format(){return Promise.resolve(t.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new wt.Deferred;try{this.createAudioContext()}catch(r){if(r instanceof Error){let i=r;this.privInitializeDeferral.reject(i.name+": "+i.message)}else this.privInitializeDeferral.reject(r);return this.privInitializeDeferral.promise}let e=window.navigator,n=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(n=(r,i,o)=>{e.mediaDevices.getUserMedia(r).then(i).catch(o)}),n){let r=()=>{this.onEvent(new wt.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new wt.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):n({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},i=>{this.privMediaStream=i,this.onEvent(new wt.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},i=>{let o=`Error occurred during microphone initialization: ${i}`;this.privInitializeDeferral.reject(o),this.onEvent(new wt.AudioSourceErrorEvent(this.privId,o))})};this.privContext.state==="suspended"?this.privContext.resume().then(r).catch(i=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${i}`)}):r()}else{let r="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(r),this.onEvent(new wt.AudioSourceErrorEvent(r,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new wt.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then(n=>(this.onEvent(new wt.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>v(this,null,function*(){return n.readEnded(),delete this.privStreams[e],this.onEvent(new wt.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>n.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new wt.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){return v(this,null,function*(){for(let e in this.privStreams)if(e){let n=this.privStreams[e];n&&n.close()}this.onEvent(new wt.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:t.AUDIOFORMAT.bitsPerSample,channelcount:t.AUDIOFORMAT.channels,connectivity:yj.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:t.AUDIOFORMAT.samplesPerSec,type:yj.type.Microphones}))}setProperty(e,n){if(e===js.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(n);else throw new Error("Property '"+e+"' is not supported on Microphone.")}getMicrophoneLabel(){let e="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;let n=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(n===void 0)return Promise.resolve(this.privMicrophoneLabel);let r=new wt.Deferred;return navigator.mediaDevices.enumerateDevices().then(i=>{for(let o of i)if(o.deviceId===n){this.privMicrophoneLabel=o.label;break}r.resolve(this.privMicrophoneLabel)},()=>r.resolve(this.privMicrophoneLabel)),r.promise}listen(e){return v(this,null,function*(){yield this.turnOn();let n=new wt.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=n;try{this.privRecorder.record(this.privContext,this.privMediaStream,n)}catch(i){throw this.onEvent(new wt.AudioStreamNodeErrorEvent(this.privId,e,i)),i}return n})}onEvent(e){this.privEvents.onEvent(e),wt.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=Cj.AudioStreamFormatImpl.getAudioContext(t.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return v(this,null,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&(yield this.privContext.suspend())})}};js.MicAudioSource=Kg;Kg.AUDIOFORMAT=Cj.AudioStreamFormat.getDefaultInputFormat()});var bj=h(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0});Jg.FileAudioSource=void 0;var wj=M(),vn=L(),mY=Oo(),d_=class{constructor(e,n,r){this.privStreams={},this.privHeaderEnd=44,this.privId=r||vn.createNoDashGuid(),this.privEvents=new vn.EventSource,this.privSource=e,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=n||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){let e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new vn.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new vn.AudioSourceInitializingEvent(this.privId)),this.onEvent(new vn.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(e){return v(this,null,function*(){this.onEvent(new vn.AudioStreamNodeAttachingEvent(this.privId,e));let n=yield this.upload(e);return this.onEvent(new vn.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:()=>v(this,null,function*(){n.readEnded(),delete this.privStreams[e],this.onEvent(new vn.AudioStreamNodeDetachedEvent(this.privId,e)),yield this.turnOff()}),id:()=>e,read:()=>n.read()})})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new vn.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(let e in this.privStreams)if(e){let n=this.privStreams[e];n&&!n.isClosed&&n.close()}return this.onEvent(new vn.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:wj.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:wj.type.File}))}readHeader(){let n=this.privSource.slice(0,4296),r=new vn.Deferred,i=o=>{let s=new DataView(o),a=f=>String.fromCharCode(s.getUint8(f),s.getUint8(f+1),s.getUint8(f+2),s.getUint8(f+3));if(a(0)!=="RIFF"){r.reject("Invalid WAV header in file, RIFF was not found");return}if(a(8)!=="WAVE"||a(12)!=="fmt "){r.reject("Invalid WAV header in file, WAVEfmt was not found");return}let c=s.getInt32(16,!0),u=s.getUint16(22,!0),l=s.getUint32(24,!0),d=s.getUint16(34,!0),p=36+Math.max(c-16,0);for(;a(p)!=="data";p+=2)if(p>4288){r.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=p+8,r.resolve(mY.AudioStreamFormat.getWaveFormatPCM(l,d,u))};if(typeof window<"u"&&typeof Blob<"u"&&n instanceof Blob){let o=new FileReader;o.onload=s=>{let a=s.target.result;i(a)},o.readAsArrayBuffer(n)}else{let o=n;i(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength))}return r.promise}upload(e){return v(this,null,function*(){let n=r=>{let i=`Error occurred while processing '${this.privFilename}'. ${r}`;throw this.onEvent(new vn.AudioStreamNodeErrorEvent(this.privId,e,i)),new Error(i)};try{yield this.turnOn();let r=yield this.privAudioFormatPromise,i=new vn.ChunkedArrayBufferStream(r.avgBytesPerSec/10,e);this.privStreams[e]=i;let o=this.privSource.slice(this.privHeaderEnd),s=a=>{i.isClosed||(i.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()}),i.close())};if(typeof window<"u"&&typeof Blob<"u"&&o instanceof Blob){let a=new FileReader;a.onerror=c=>n(c.toString()),a.onload=c=>{let u=c.target.result;s(u)},a.readAsArrayBuffer(o)}else{let a=o;s(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}return i}catch(r){n(r)}})}onEvent(e){this.privEvents.onEvent(e),vn.Events.instance.onEvent(e)}};Jg.FileAudioSource=d_});var Ej=h(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.PcmRecorder=void 0;var yY=L(),p_=class{constructor(e){this.privStopInputOnRelease=e}record(e,n,r){let o=new yY.RiffPcmEncoder(e.sampleRate,16e3),s=e.createMediaStreamSource(n),a=()=>{let u=(()=>{let l=0;try{return e.createScriptProcessor(l,1,1)}catch{l=2048;let p=e.sampleRate;for(;l<16384&&p>=32e3;)l<<=1,p>>=1;return e.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{let d=l.inputBuffer.getChannelData(0);if(r&&!r.isClosed){let p=o.encode(d);p&&r.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}},s.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:s,stream:n}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){let u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{let u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=l=>{let d=l.data;if(r&&!r.isClosed){let p=o.encode(d);p&&r.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}},s.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:s,stream:n}}).catch(()=>{a()})}else try{a()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(n=>n.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}};Qg.PcmRecorder=p_});var f_=h(()=>{"use strict"});var h_=h(()=>{"use strict"});var v_=h((mwe,g_)=>{"use strict";var Fc=typeof Reflect=="object"?Reflect:null,Ij=Fc&&typeof Fc.apply=="function"?Fc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Zg;Fc&&typeof Fc.ownKeys=="function"?Zg=Fc.ownKeys:Object.getOwnPropertySymbols?Zg=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Zg=function(e){return Object.getOwnPropertyNames(e)};function CY(t){console&&console.warn&&console.warn(t)}var _j=Number.isNaN||function(e){return e!==e};function Re(){Re.init.call(this)}g_.exports=Re;g_.exports.once=EY;Re.EventEmitter=Re;Re.prototype._events=void 0;Re.prototype._eventsCount=0;Re.prototype._maxListeners=void 0;var Dj=10;function Yg(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Re,"defaultMaxListeners",{enumerable:!0,get:function(){return Dj},set:function(t){if(typeof t!="number"||t<0||_j(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Dj=t}});Re.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Re.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||_j(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Rj(t){return t._maxListeners===void 0?Re.defaultMaxListeners:t._maxListeners}Re.prototype.getMaxListeners=function(){return Rj(this)};Re.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")Ij(c,this,n);else for(var u=c.length,l=Oj(c,u),r=0;r<u;++r)Ij(l[r],this,n);return!0};function Pj(t,e,n,r){var i,o,s;if(Yg(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Rj(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,CY(a)}return t}Re.prototype.addListener=function(e,n){return Pj(this,e,n,!1)};Re.prototype.on=Re.prototype.addListener;Re.prototype.prependListener=function(e,n){return Pj(this,e,n,!0)};function SY(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Tj(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=SY.bind(r);return i.listener=n,r.wrapFn=i,i}Re.prototype.once=function(e,n){return Yg(n),this.on(e,Tj(this,e,n)),this};Re.prototype.prependOnceListener=function(e,n){return Yg(n),this.prependListener(e,Tj(this,e,n)),this};Re.prototype.removeListener=function(e,n){var r,i,o,s,a;if(Yg(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():wY(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Re.prototype.off=Re.prototype.removeListener;Re.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function Aj(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?bY(i):Oj(i,i.length)}Re.prototype.listeners=function(e){return Aj(this,e,!0)};Re.prototype.rawListeners=function(e){return Aj(this,e,!1)};Re.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Mj.call(t,e)};Re.prototype.listenerCount=Mj;function Mj(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Re.prototype.eventNames=function(){return this._eventsCount>0?Zg(this._events):[]};function Oj(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function wY(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function bY(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function EY(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}xj(t,e,o,{once:!0}),e!=="error"&&IY(t,i,{once:!0})})}function IY(t,e,n){typeof t.on=="function"&&xj(t,"error",e,n)}function xj(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var kj=h((ywe,Nj)=>{"use strict";var Lc=1e3,jc=Lc*60,qc=jc*60,qs=qc*24,DY=qs*7,_Y=qs*365.25;Nj.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return RY(t);if(n==="number"&&isFinite(t))return e.long?TY(t):PY(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function RY(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*_Y;case"weeks":case"week":case"w":return n*DY;case"days":case"day":case"d":return n*qs;case"hours":case"hour":case"hrs":case"hr":case"h":return n*qc;case"minutes":case"minute":case"mins":case"min":case"m":return n*jc;case"seconds":case"second":case"secs":case"sec":case"s":return n*Lc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function PY(t){var e=Math.abs(t);return e>=qs?Math.round(t/qs)+"d":e>=qc?Math.round(t/qc)+"h":e>=jc?Math.round(t/jc)+"m":e>=Lc?Math.round(t/Lc)+"s":t+"ms"}function TY(t){var e=Math.abs(t);return e>=qs?Xg(t,e,qs,"day"):e>=qc?Xg(t,e,qc,"hour"):e>=jc?Xg(t,e,jc,"minute"):e>=Lc?Xg(t,e,Lc,"second"):t+" ms"}function Xg(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}});var Lj=h((Cwe,Fj)=>{"use strict";function AY(t){n.debug=n,n.default=n,n.coerce=c,n.disable=o,n.enable=i,n.enabled=s,n.humanize=kj(),n.destroy=u,Object.keys(t).forEach(l=>{n[l]=t[l]}),n.names=[],n.skips=[],n.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(l){let d,p=null,f,g;function m(...y){if(!m.enabled)return;let w=m,b=Number(new Date),C=b-(d||b);w.diff=C,w.prev=d,w.curr=b,d=b,y[0]=n.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let _=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(O,de)=>{if(O==="%%")return"%";_++;let ae=n.formatters[de];if(typeof ae=="function"){let De=y[_];O=ae.call(w,De),y.splice(_,1),_--}return O}),n.formatArgs.call(w,y),(w.log||n.log).apply(w,y)}return m.namespace=l,m.useColors=n.useColors(),m.color=n.selectColor(l),m.extend=r,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==n.namespaces&&(f=n.namespaces,g=n.enabled(l)),g),set:y=>{p=y}}),typeof n.init=="function"&&n.init(m),m}function r(l,d){let p=n(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let d,p=(typeof l=="string"?l:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(l=p[d].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...n.names.map(a),...n.skips.map(a).map(d=>"-"+d)].join(",");return n.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,p;for(d=0,p=n.skips.length;d<p;d++)if(n.skips[d].test(l))return!1;for(d=0,p=n.names.length;d<p;d++)if(n.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}Fj.exports=AY});var m_=h((xn,ev)=>{"use strict";xn.formatArgs=OY;xn.save=xY;xn.load=NY;xn.useColors=MY;xn.storage=kY();xn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();xn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function MY(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function OY(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ev.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}xn.log=console.debug||console.log||(()=>{});function xY(t){try{t?xn.storage.setItem("debug",t):xn.storage.removeItem("debug")}catch{}}function NY(){let t;try{t=xn.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function kY(){try{return localStorage}catch{}}ev.exports=Lj()(xn);var{formatters:FY}=ev.exports;FY.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var jj=h(y_=>{"use strict";Object.defineProperty(y_,"__esModule",{value:!0});function LY(t){return function(e,n){return new Promise((r,i)=>{t.call(this,e,n,(o,s)=>{o?i(o):r(s)})})}}y_.default=LY});var Vj=h((S_,Bj)=>{"use strict";var qj=S_&&S_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},jY=v_(),qY=qj(m_()),BY=qj(jj()),cd=qY.default("agent-base");function VY(t){return!!t&&typeof t.addRequest=="function"}function C_(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function tv(t,e){return new tv.Agent(t,e)}(function(t){class e extends jY.EventEmitter{constructor(r,i){super();let o=i;typeof r=="function"?this.callback=r:r&&(o=r),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:C_()?443:80}set defaultPort(r){this.explicitDefaultPort=r}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:C_()?"https:":"http:"}set protocol(r){this.explicitProtocol=r}callback(r,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(r,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=C_()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,r._last=!0,r.shouldKeepAlive=!1;let s=!1,a=null,c=o.timeout||this.timeout,u=f=>{r._hadError||(r.emit("error",f),r._hadError=!0)},l=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${c}ms`);f.code="ETIMEOUT",u(f)},d=f=>{s||(a!==null&&(clearTimeout(a),a=null),u(f))},p=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),VY(f)){cd("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(r,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),r.onSocket(f);return}let g=new Error(`no Duplex stream was returned to agent-base for \`${r.method} ${r.path}\``);u(g)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(cd("Converting legacy callback function to promise"),this.promisifiedCallback=BY.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(a=setTimeout(l,c)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{cd("Resolving socket for %o request: %o",o.protocol,`${r.method} ${r.path}`),Promise.resolve(this.promisifiedCallback(r,o)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(r,i){cd("Freeing socket %o %o",r.constructor.name,i),r.destroy()}destroy(){cd("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(tv||(tv={}));Bj.exports=tv});var zj=h((Bc,Vc)=>{"use strict";(function(t){var e=typeof Bc=="object"&&Bc&&!Bc.nodeType&&Bc,n=typeof Vc=="object"&&Vc&&!Vc.nodeType&&Vc,r=typeof global=="object"&&global;(r.global===r||r.window===r||r.self===r)&&(t=r);var i,o=2147483647,s=36,a=1,c=26,u=38,l=700,d=72,p=128,f="-",g=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=s-a,C=Math.floor,_=String.fromCharCode,U;function O(k){throw new RangeError(w[k])}function de(k,W){for(var ve=k.length,je=[];ve--;)je[ve]=W(k[ve]);return je}function ae(k,W){var ve=k.split("@"),je="";ve.length>1&&(je=ve[0]+"@",k=ve[1]),k=k.replace(y,".");var $e=k.split("."),Kt=de($e,W).join(".");return je+Kt}function De(k){for(var W=[],ve=0,je=k.length,$e,Kt;ve<je;)$e=k.charCodeAt(ve++),$e>=55296&&$e<=56319&&ve<je?(Kt=k.charCodeAt(ve++),(Kt&64512)==56320?W.push((($e&1023)<<10)+(Kt&1023)+65536):(W.push($e),ve--)):W.push($e);return W}function Je(k){return de(k,function(W){var ve="";return W>65535&&(W-=65536,ve+=_(W>>>10&1023|55296),W=56320|W&1023),ve+=_(W),ve}).join("")}function Nr(k){return k-48<10?k-22:k-65<26?k-65:k-97<26?k-97:s}function lr(k,W){return k+22+75*(k<26)-((W!=0)<<5)}function Qe(k,W,ve){var je=0;for(k=ve?C(k/l):k>>1,k+=C(k/W);k>b*c>>1;je+=s)k=C(k/b);return C(je+(b+1)*k/(k+u))}function Wt(k){var W=[],ve=k.length,je,$e=0,Kt=p,mt=d,In,dr,kr,pi,Tt,Bn,pr,to,os;for(In=k.lastIndexOf(f),In<0&&(In=0),dr=0;dr<In;++dr)k.charCodeAt(dr)>=128&&O("not-basic"),W.push(k.charCodeAt(dr));for(kr=In>0?In+1:0;kr<ve;){for(pi=$e,Tt=1,Bn=s;kr>=ve&&O("invalid-input"),pr=Nr(k.charCodeAt(kr++)),(pr>=s||pr>C((o-$e)/Tt))&&O("overflow"),$e+=pr*Tt,to=Bn<=mt?a:Bn>=mt+c?c:Bn-mt,!(pr<to);Bn+=s)os=s-to,Tt>C(o/os)&&O("overflow"),Tt*=os;je=W.length+1,mt=Qe($e-pi,je,pi==0),C($e/je)>o-Kt&&O("overflow"),Kt+=C($e/je),$e%=je,W.splice($e++,0,Kt)}return Je(W)}function Gt(k){var W,ve,je,$e,Kt,mt,In,dr,kr,pi,Tt,Bn=[],pr,to,os,xS;for(k=De(k),pr=k.length,W=p,ve=0,Kt=d,mt=0;mt<pr;++mt)Tt=k[mt],Tt<128&&Bn.push(_(Tt));for(je=$e=Bn.length,$e&&Bn.push(f);je<pr;){for(In=o,mt=0;mt<pr;++mt)Tt=k[mt],Tt>=W&&Tt<In&&(In=Tt);for(to=je+1,In-W>C((o-ve)/to)&&O("overflow"),ve+=(In-W)*to,W=In,mt=0;mt<pr;++mt)if(Tt=k[mt],Tt<W&&++ve>o&&O("overflow"),Tt==W){for(dr=ve,kr=s;pi=kr<=Kt?a:kr>=Kt+c?c:kr-Kt,!(dr<pi);kr+=s)xS=dr-pi,os=s-pi,Bn.push(_(lr(pi+xS%os,0))),dr=C(xS/os);Bn.push(_(lr(dr,0))),Kt=Qe(ve,to,je==$e),ve=0,++je}++ve,++W}return Bn.join("")}function qn(k){return ae(k,function(W){return g.test(W)?Wt(W.slice(4).toLowerCase()):W})}function is(k){return ae(k,function(W){return m.test(W)?"xn--"+Gt(W):W})}if(i={version:"1.4.1",ucs2:{decode:De,encode:Je},decode:Wt,encode:Gt,toASCII:is,toUnicode:qn},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&n)if(Vc.exports==e)n.exports=i;else for(U in i)i.hasOwnProperty(U)&&(e[U]=i[U]);else t.punycode=i})(Bc)});var Hj=h((wwe,Uj)=>{"use strict";Uj.exports=Error});var Wj=h((bwe,$j)=>{"use strict";$j.exports=EvalError});var Kj=h((Ewe,Gj)=>{"use strict";Gj.exports=RangeError});var Qj=h((Iwe,Jj)=>{"use strict";Jj.exports=ReferenceError});var w_=h((Dwe,Zj)=>{"use strict";Zj.exports=SyntaxError});var zc=h((_we,Yj)=>{"use strict";Yj.exports=TypeError});var eq=h((Rwe,Xj)=>{"use strict";Xj.exports=URIError});var nv=h((Pwe,tq)=>{"use strict";tq.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,n);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var iq=h((Twe,rq)=>{"use strict";var nq=typeof Symbol<"u"&&Symbol,zY=nv();rq.exports=function(){return typeof nq!="function"||typeof Symbol!="function"||typeof nq("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:zY()}});var sq=h((Awe,oq)=>{"use strict";var b_={__proto__:null,foo:{}},UY=Object;oq.exports=function(){return{__proto__:b_}.foo===b_.foo&&!(b_ instanceof UY)}});var uq=h((Mwe,cq)=>{"use strict";var HY="Function.prototype.bind called on incompatible ",$Y=Object.prototype.toString,WY=Math.max,GY="[object Function]",aq=function(e,n){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var o=0;o<n.length;o+=1)r[o+e.length]=n[o];return r},KY=function(e,n){for(var r=[],i=n||0,o=0;i<e.length;i+=1,o+=1)r[o]=e[i];return r},JY=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n};cq.exports=function(e){var n=this;if(typeof n!="function"||$Y.apply(n)!==GY)throw new TypeError(HY+n);for(var r=KY(arguments,1),i,o=function(){if(this instanceof i){var l=n.apply(this,aq(r,arguments));return Object(l)===l?l:this}return n.apply(e,aq(r,arguments))},s=WY(0,n.length-r.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+JY(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var u=function(){};u.prototype=n.prototype,i.prototype=new u,u.prototype=null}return i}});var rv=h((Owe,lq)=>{"use strict";var QY=uq();lq.exports=Function.prototype.bind||QY});var pq=h((xwe,dq)=>{"use strict";var ZY=Function.prototype.call,YY=Object.prototype.hasOwnProperty,XY=rv();dq.exports=XY.call(ZY,YY)});var zs=h((Nwe,mq)=>{"use strict";var he,eX=Hj(),tX=Wj(),nX=Kj(),rX=Qj(),Wc=w_(),$c=zc(),iX=eq(),vq=Function,E_=function(t){try{return vq('"use strict"; return ('+t+").constructor;")()}catch{}},Bs=Object.getOwnPropertyDescriptor;if(Bs)try{Bs({},"")}catch{Bs=null}var I_=function(){throw new $c},oX=Bs?function(){try{return arguments.callee,I_}catch{try{return Bs(arguments,"callee").get}catch{return I_}}}():I_,Uc=iq()(),sX=sq()(),ht=Object.getPrototypeOf||(sX?function(t){return t.__proto__}:null),Hc={},aX=typeof Uint8Array>"u"||!ht?he:ht(Uint8Array),Vs={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?he:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?he:ArrayBuffer,"%ArrayIteratorPrototype%":Uc&&ht?ht([][Symbol.iterator]()):he,"%AsyncFromSyncIteratorPrototype%":he,"%AsyncFunction%":Hc,"%AsyncGenerator%":Hc,"%AsyncGeneratorFunction%":Hc,"%AsyncIteratorPrototype%":Hc,"%Atomics%":typeof Atomics>"u"?he:Atomics,"%BigInt%":typeof BigInt>"u"?he:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?he:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?he:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?he:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":eX,"%eval%":eval,"%EvalError%":tX,"%Float32Array%":typeof Float32Array>"u"?he:Float32Array,"%Float64Array%":typeof Float64Array>"u"?he:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?he:FinalizationRegistry,"%Function%":vq,"%GeneratorFunction%":Hc,"%Int8Array%":typeof Int8Array>"u"?he:Int8Array,"%Int16Array%":typeof Int16Array>"u"?he:Int16Array,"%Int32Array%":typeof Int32Array>"u"?he:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Uc&&ht?ht(ht([][Symbol.iterator]())):he,"%JSON%":typeof JSON=="object"?JSON:he,"%Map%":typeof Map>"u"?he:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Uc||!ht?he:ht(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?he:Promise,"%Proxy%":typeof Proxy>"u"?he:Proxy,"%RangeError%":nX,"%ReferenceError%":rX,"%Reflect%":typeof Reflect>"u"?he:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?he:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Uc||!ht?he:ht(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?he:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Uc&&ht?ht(""[Symbol.iterator]()):he,"%Symbol%":Uc?Symbol:he,"%SyntaxError%":Wc,"%ThrowTypeError%":oX,"%TypedArray%":aX,"%TypeError%":$c,"%Uint8Array%":typeof Uint8Array>"u"?he:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?he:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?he:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?he:Uint32Array,"%URIError%":iX,"%WeakMap%":typeof WeakMap>"u"?he:WeakMap,"%WeakRef%":typeof WeakRef>"u"?he:WeakRef,"%WeakSet%":typeof WeakSet>"u"?he:WeakSet};if(ht)try{null.error}catch(t){fq=ht(ht(t)),Vs["%Error.prototype%"]=fq}var fq,cX=function t(e){var n;if(e==="%AsyncFunction%")n=E_("async function () {}");else if(e==="%GeneratorFunction%")n=E_("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=E_("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&ht&&(n=ht(i.prototype))}return Vs[e]=n,n},hq={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ud=rv(),iv=pq(),uX=ud.call(Function.call,Array.prototype.concat),lX=ud.call(Function.apply,Array.prototype.splice),gq=ud.call(Function.call,String.prototype.replace),ov=ud.call(Function.call,String.prototype.slice),dX=ud.call(Function.call,RegExp.prototype.exec),pX=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fX=/\\(\\)?/g,hX=function(e){var n=ov(e,0,1),r=ov(e,-1);if(n==="%"&&r!=="%")throw new Wc("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Wc("invalid intrinsic syntax, expected opening `%`");var i=[];return gq(e,pX,function(o,s,a,c){i[i.length]=a?gq(c,fX,"$1"):s||o}),i},gX=function(e,n){var r=e,i;if(iv(hq,r)&&(i=hq[r],r="%"+i[0]+"%"),iv(Vs,r)){var o=Vs[r];if(o===Hc&&(o=cX(r)),typeof o>"u"&&!n)throw new $c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new Wc("intrinsic "+e+" does not exist!")};mq.exports=function(e,n){if(typeof e!="string"||e.length===0)throw new $c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new $c('"allowMissing" argument must be a boolean');if(dX(/^%?[^%]*%?$/,e)===null)throw new Wc("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=hX(e),i=r.length>0?r[0]:"",o=gX("%"+i+"%",n),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],lX(r,uX([0,1],u)));for(var l=1,d=!0;l<r.length;l+=1){var p=r[l],f=ov(p,0,1),g=ov(p,-1);if((f==='"'||f==="'"||f==="`"||g==='"'||g==="'"||g==="`")&&f!==g)throw new Wc("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(c=!0),i+="."+p,s="%"+i+"%",iv(Vs,s))a=Vs[s];else if(a!=null){if(!(p in a)){if(!n)throw new $c("base intrinsic for "+e+" exists, but the property is not available.");return}if(Bs&&l+1>=r.length){var m=Bs(a,p);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[p]}else d=iv(a,p),a=a[p];d&&!c&&(Vs[s]=a)}}return a}});var av=h((kwe,yq)=>{"use strict";var vX=zs(),sv=vX("%Object.defineProperty%",!0)||!1;if(sv)try{sv({},"a",{value:1})}catch{sv=!1}yq.exports=sv});var uv=h((Fwe,Cq)=>{"use strict";var mX=zs(),cv=mX("%Object.getOwnPropertyDescriptor%",!0);if(cv)try{cv([],"length")}catch{cv=null}Cq.exports=cv});var D_=h((Lwe,bq)=>{"use strict";var Sq=av(),yX=w_(),Gc=zc(),wq=uv();bq.exports=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new Gc("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new Gc("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Gc("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Gc("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Gc("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Gc("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!wq&&wq(e,n);if(Sq)Sq(e,n,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:r,writable:o===null&&c?c.writable:!o});else if(a||!i&&!o&&!s)e[n]=r;else throw new yX("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var R_=h((jwe,Iq)=>{"use strict";var __=av(),Eq=function(){return!!__};Eq.hasArrayLengthDefineBug=function(){if(!__)return null;try{return __([],"length",{value:1}).length!==1}catch{return!0}};Iq.exports=Eq});var Tq=h((qwe,Pq)=>{"use strict";var CX=zs(),Dq=D_(),SX=R_()(),_q=uv(),Rq=zc(),wX=CX("%Math.floor%");Pq.exports=function(e,n){if(typeof e!="function")throw new Rq("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||wX(n)!==n)throw new Rq("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&_q){var s=_q(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!r)&&(SX?Dq(e,"length",n,!0,!0):Dq(e,"length",n)),e}});var ld=h((Bwe,lv)=>{"use strict";var P_=rv(),dv=zs(),bX=Tq(),EX=zc(),Oq=dv("%Function.prototype.apply%"),xq=dv("%Function.prototype.call%"),Nq=dv("%Reflect.apply%",!0)||P_.call(xq,Oq),Aq=av(),IX=dv("%Math.max%");lv.exports=function(e){if(typeof e!="function")throw new EX("a function is required");var n=Nq(P_,xq,arguments);return bX(n,1+IX(0,e.length-(arguments.length-1)),!0)};var Mq=function(){return Nq(P_,Oq,arguments)};Aq?Aq(lv.exports,"apply",{value:Mq}):lv.exports.apply=Mq});var Kc=h((Vwe,Lq)=>{"use strict";var kq=zs(),Fq=ld(),DX=Fq(kq("String.prototype.indexOf"));Lq.exports=function(e,n){var r=kq(e,!!n);return typeof r=="function"&&DX(e,".prototype.")>-1?Fq(r):r}});var jq=h(()=>{"use strict"});var iB=h((Hwe,rB)=>{"use strict";var j_=typeof Map=="function"&&Map.prototype,T_=Object.getOwnPropertyDescriptor&&j_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,fv=j_&&T_&&typeof T_.get=="function"?T_.get:null,qq=j_&&Map.prototype.forEach,q_=typeof Set=="function"&&Set.prototype,A_=Object.getOwnPropertyDescriptor&&q_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,hv=q_&&A_&&typeof A_.get=="function"?A_.get:null,Bq=q_&&Set.prototype.forEach,_X=typeof WeakMap=="function"&&WeakMap.prototype,pd=_X?WeakMap.prototype.has:null,RX=typeof WeakSet=="function"&&WeakSet.prototype,fd=RX?WeakSet.prototype.has:null,PX=typeof WeakRef=="function"&&WeakRef.prototype,Vq=PX?WeakRef.prototype.deref:null,TX=Boolean.prototype.valueOf,AX=Object.prototype.toString,MX=Function.prototype.toString,OX=String.prototype.match,B_=String.prototype.slice,No=String.prototype.replace,xX=String.prototype.toUpperCase,zq=String.prototype.toLowerCase,Zq=RegExp.prototype.test,Uq=Array.prototype.concat,Zr=Array.prototype.join,NX=Array.prototype.slice,Hq=Math.floor,x_=typeof BigInt=="function"?BigInt.prototype.valueOf:null,M_=Object.getOwnPropertySymbols,N_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Vt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Jc||!0)?Symbol.toStringTag:null,Yq=Object.prototype.propertyIsEnumerable,$q=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Wq(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Zq.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-Hq(-t):Hq(t);if(r!==t){var i=String(r),o=B_.call(e,i.length+1);return No.call(i,n,"$&_")+"."+No.call(No.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return No.call(e,n,"$&_")}var k_=jq(),Gq=k_.custom,Kq=eB(Gq)?Gq:null;rB.exports=function t(e,n,r,i){var o=n||{};if(xo(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xo(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=xo(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xo(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(xo(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return nB(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?Wq(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return a?Wq(e,u):u}var l=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=l&&l>0&&typeof e=="object")return F_(e)?"[Array]":"[Object]";var d=YX(o,r);if(typeof i>"u")i=[];else if(tB(i,e)>=0)return"[Circular]";function p(Qe,Wt,Gt){if(Wt&&(i=NX.call(i),i.push(Wt)),Gt){var qn={depth:o.depth};return xo(o,"quoteStyle")&&(qn.quoteStyle=o.quoteStyle),t(Qe,qn,r+1,i)}return t(Qe,o,r+1,i)}if(typeof e=="function"&&!Jq(e)){var f=UX(e),g=pv(e,p);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(g.length>0?" { "+Zr.call(g,", ")+" }":"")}if(eB(e)){var m=Jc?No.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):N_.call(e);return typeof e=="object"&&!Jc?dd(m):m}if(JX(e)){for(var y="<"+zq.call(String(e.nodeName)),w=e.attributes||[],b=0;b<w.length;b++)y+=" "+w[b].name+"="+Xq(kX(w[b].value),"double",o);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+zq.call(String(e.nodeName))+">",y}if(F_(e)){if(e.length===0)return"[]";var C=pv(e,p);return d&&!ZX(C)?"["+L_(C,d)+"]":"[ "+Zr.call(C,", ")+" ]"}if(LX(e)){var _=pv(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!Yq.call(e,"cause")?"{ ["+String(e)+"] "+Zr.call(Uq.call("[cause]: "+p(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Zr.call(_,", ")+" }"}if(typeof e=="object"&&s){if(Kq&&typeof e[Kq]=="function"&&k_)return k_(e,{depth:l-r});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(HX(e)){var U=[];return qq&&qq.call(e,function(Qe,Wt){U.push(p(Wt,e,!0)+" => "+p(Qe,e))}),Qq("Map",fv.call(e),U,d)}if(GX(e)){var O=[];return Bq&&Bq.call(e,function(Qe){O.push(p(Qe,e))}),Qq("Set",hv.call(e),O,d)}if($X(e))return O_("WeakMap");if(KX(e))return O_("WeakSet");if(WX(e))return O_("WeakRef");if(qX(e))return dd(p(Number(e)));if(VX(e))return dd(p(x_.call(e)));if(BX(e))return dd(TX.call(e));if(jX(e))return dd(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!FX(e)&&!Jq(e)){var de=pv(e,p),ae=$q?$q(e)===Object.prototype:e instanceof Object||e.constructor===Object,De=e instanceof Object?"":"null prototype",Je=!ae&&Vt&&Object(e)===e&&Vt in e?B_.call(ko(e),8,-1):De?"Object":"",Nr=ae||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",lr=Nr+(Je||De?"["+Zr.call(Uq.call([],Je||[],De||[]),": ")+"] ":"");return de.length===0?lr+"{}":d?lr+"{"+L_(de,d)+"}":lr+"{ "+Zr.call(de,", ")+" }"}return String(e)};function Xq(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function kX(t){return No.call(String(t),/"/g,"&quot;")}function F_(t){return ko(t)==="[object Array]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function FX(t){return ko(t)==="[object Date]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function Jq(t){return ko(t)==="[object RegExp]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function LX(t){return ko(t)==="[object Error]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function jX(t){return ko(t)==="[object String]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function qX(t){return ko(t)==="[object Number]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function BX(t){return ko(t)==="[object Boolean]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function eB(t){if(Jc)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!N_)return!1;try{return N_.call(t),!0}catch{}return!1}function VX(t){if(!t||typeof t!="object"||!x_)return!1;try{return x_.call(t),!0}catch{}return!1}var zX=Object.prototype.hasOwnProperty||function(t){return t in this};function xo(t,e){return zX.call(t,e)}function ko(t){return AX.call(t)}function UX(t){if(t.name)return t.name;var e=OX.call(MX.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function tB(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function HX(t){if(!fv||!t||typeof t!="object")return!1;try{fv.call(t);try{hv.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function $X(t){if(!pd||!t||typeof t!="object")return!1;try{pd.call(t,pd);try{fd.call(t,fd)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function WX(t){if(!Vq||!t||typeof t!="object")return!1;try{return Vq.call(t),!0}catch{}return!1}function GX(t){if(!hv||!t||typeof t!="object")return!1;try{hv.call(t);try{fv.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function KX(t){if(!fd||!t||typeof t!="object")return!1;try{fd.call(t,fd);try{pd.call(t,pd)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function JX(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function nB(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return nB(B_.call(t,0,e.maxStringLength),e)+r}var i=No.call(No.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,QX);return Xq(i,"single",e)}function QX(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+xX.call(e.toString(16))}function dd(t){return"Object("+t+")"}function O_(t){return t+" { ? }"}function Qq(t,e,n,r){var i=r?L_(n,r):Zr.call(n,", ");return t+" ("+e+") {"+i+"}"}function ZX(t){for(var e=0;e<t.length;e++)if(tB(t[e],`
`)>=0)return!1;return!0}function YX(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Zr.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Zr.call(Array(e+1),n)}}function L_(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Zr.call(t,","+n)+`
`+e.prev}function pv(t,e){var n=F_(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=xo(t,i)?e(t[i],t):""}var o=typeof M_=="function"?M_(t):[],s;if(Jc){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var c in t)xo(t,c)&&(n&&String(Number(c))===c&&c<t.length||Jc&&s["$"+c]instanceof Symbol||(Zq.call(/[^\w$]/,c)?r.push(e(c,t)+": "+e(t[c],t)):r.push(c+": "+e(t[c],t))));if(typeof M_=="function")for(var u=0;u<o.length;u++)Yq.call(t,o[u])&&r.push("["+e(o[u])+"]: "+e(t[o[u]],t));return r}});var aB=h(($we,sB)=>{"use strict";var oB=zs(),Qc=Kc(),XX=iB(),eee=zc(),gv=oB("%WeakMap%",!0),vv=oB("%Map%",!0),tee=Qc("WeakMap.prototype.get",!0),nee=Qc("WeakMap.prototype.set",!0),ree=Qc("WeakMap.prototype.has",!0),iee=Qc("Map.prototype.get",!0),oee=Qc("Map.prototype.set",!0),see=Qc("Map.prototype.has",!0),V_=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},aee=function(t,e){var n=V_(t,e);return n&&n.value},cee=function(t,e,n){var r=V_(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},uee=function(t,e){return!!V_(t,e)};sB.exports=function(){var e,n,r,i={assert:function(o){if(!i.has(o))throw new eee("Side channel does not contain "+XX(o))},get:function(o){if(gv&&o&&(typeof o=="object"||typeof o=="function")){if(e)return tee(e,o)}else if(vv){if(n)return iee(n,o)}else if(r)return aee(r,o)},has:function(o){if(gv&&o&&(typeof o=="object"||typeof o=="function")){if(e)return ree(e,o)}else if(vv){if(n)return see(n,o)}else if(r)return uee(r,o);return!1},set:function(o,s){gv&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new gv),nee(e,o,s)):vv?(n||(n=new vv),oee(n,o,s)):(r||(r={key:{},next:null}),cee(r,o,s))}};return i}});var mv=h((Wwe,cB)=>{"use strict";var lee=String.prototype.replace,dee=/%20/g,z_={RFC1738:"RFC1738",RFC3986:"RFC3986"};cB.exports={default:z_.RFC3986,formatters:{RFC1738:function(t){return lee.call(t,dee,"+")},RFC3986:function(t){return String(t)}},RFC1738:z_.RFC1738,RFC3986:z_.RFC3986}});var $_=h((Gwe,lB)=>{"use strict";var pee=mv(),U_=Object.prototype.hasOwnProperty,Us=Array.isArray,Yr=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),fee=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Us(r)){for(var i=[],o=0;o<r.length;++o)typeof r[o]<"u"&&i.push(r[o]);n.obj[n.prop]=i}}},uB=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},hee=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Us(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!U_.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return Us(e)&&!Us(n)&&(i=uB(e,r)),Us(e)&&Us(n)?(n.forEach(function(o,s){if(U_.call(e,s)){var a=e[s];a&&typeof a=="object"&&o&&typeof o=="object"?e[s]=t(a,o,r):e.push(o)}else e[s]=o}),e):Object.keys(n).reduce(function(o,s){var a=n[s];return U_.call(o,s)?o[s]=t(o[s],a,r):o[s]=a,o},i)},gee=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},vee=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},H_=1024,mee=function(e,n,r,i,o){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),r==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",c=0;c<s.length;c+=H_){for(var u=s.length>=H_?s.slice(c,c+H_):s,l=[],d=0;d<u.length;++d){var p=u.charCodeAt(d);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||o===pee.RFC1738&&(p===40||p===41)){l[l.length]=u.charAt(d);continue}if(p<128){l[l.length]=Yr[p];continue}if(p<2048){l[l.length]=Yr[192|p>>6]+Yr[128|p&63];continue}if(p<55296||p>=57344){l[l.length]=Yr[224|p>>12]+Yr[128|p>>6&63]+Yr[128|p&63];continue}d+=1,p=65536+((p&1023)<<10|u.charCodeAt(d)&1023),l[l.length]=Yr[240|p>>18]+Yr[128|p>>12&63]+Yr[128|p>>6&63]+Yr[128|p&63]}a+=l.join("")}return a},yee=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var o=n[i],s=o.obj[o.prop],a=Object.keys(s),c=0;c<a.length;++c){var u=a[c],l=s[u];typeof l=="object"&&l!==null&&r.indexOf(l)===-1&&(n.push({obj:s,prop:u}),r.push(l))}return fee(n),e},Cee=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},See=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},wee=function(e,n){return[].concat(e,n)},bee=function(e,n){if(Us(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)};lB.exports={arrayToObject:uB,assign:gee,combine:wee,compact:yee,decode:vee,encode:mee,isBuffer:See,isRegExp:Cee,maybeMap:bee,merge:hee}});var vB=h((Kwe,gB)=>{"use strict";var pB=aB(),yv=$_(),hd=mv(),Eee=Object.prototype.hasOwnProperty,fB={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},Xr=Array.isArray,Iee=Array.prototype.push,hB=function(t,e){Iee.apply(t,Xr(e)?e:[e])},Dee=Date.prototype.toISOString,dB=hd.default,lt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:yv.encode,encodeValuesOnly:!1,format:dB,formatter:hd.formatters[dB],indices:!1,serializeDate:function(e){return Dee.call(e)},skipNulls:!1,strictNullHandling:!1},_ee=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},W_={},Ree=function t(e,n,r,i,o,s,a,c,u,l,d,p,f,g,m,y,w,b){for(var C=e,_=b,U=0,O=!1;(_=_.get(W_))!==void 0&&!O;){var de=_.get(e);if(U+=1,typeof de<"u"){if(de===U)throw new RangeError("Cyclic object value");O=!0}typeof _.get(W_)>"u"&&(U=0)}if(typeof l=="function"?C=l(n,C):C instanceof Date?C=f(C):r==="comma"&&Xr(C)&&(C=yv.maybeMap(C,function(ve){return ve instanceof Date?f(ve):ve})),C===null){if(s)return u&&!y?u(n,lt.encoder,w,"key",g):n;C=""}if(_ee(C)||yv.isBuffer(C)){if(u){var ae=y?n:u(n,lt.encoder,w,"key",g);return[m(ae)+"="+m(u(C,lt.encoder,w,"value",g))]}return[m(n)+"="+m(String(C))]}var De=[];if(typeof C>"u")return De;var Je;if(r==="comma"&&Xr(C))y&&u&&(C=yv.maybeMap(C,u)),Je=[{value:C.length>0?C.join(",")||null:void 0}];else if(Xr(l))Je=l;else{var Nr=Object.keys(C);Je=d?Nr.sort(d):Nr}var lr=c?n.replace(/\./g,"%2E"):n,Qe=i&&Xr(C)&&C.length===1?lr+"[]":lr;if(o&&Xr(C)&&C.length===0)return Qe+"[]";for(var Wt=0;Wt<Je.length;++Wt){var Gt=Je[Wt],qn=typeof Gt=="object"&&typeof Gt.value<"u"?Gt.value:C[Gt];if(!(a&&qn===null)){var is=p&&c?Gt.replace(/\./g,"%2E"):Gt,k=Xr(C)?typeof r=="function"?r(Qe,is):Qe:Qe+(p?"."+is:"["+is+"]");b.set(e,U);var W=pB();W.set(W_,b),hB(De,t(qn,k,r,i,o,s,a,c,r==="comma"&&y&&Xr(C)?null:u,l,d,p,f,g,m,y,w,W))}}return De},Pee=function(e){if(!e)return lt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||lt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=hd.default;if(typeof e.format<"u"){if(!Eee.call(hd.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=hd.formatters[r],o=lt.filter;(typeof e.filter=="function"||Xr(e.filter))&&(o=e.filter);var s;if(e.arrayFormat in fB?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=lt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:lt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:lt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:lt.allowEmptyArrays,arrayFormat:s,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:lt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?lt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:lt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:lt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:lt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:lt.encodeValuesOnly,filter:o,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:lt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:lt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:lt.strictNullHandling}};gB.exports=function(t,e){var n=t,r=Pee(e),i,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):Xr(r.filter)&&(o=r.filter,i=o);var s=[];if(typeof n!="object"||n===null)return"";var a=fB[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var u=pB(),l=0;l<i.length;++l){var d=i[l];r.skipNulls&&n[d]===null||hB(s,Ree(n[d],d,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var p=s.join(r.delimiter),f=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),p.length>0?f+p:""}});var CB=h((Jwe,yB)=>{"use strict";var Zc=$_(),G_=Object.prototype.hasOwnProperty,Tee=Array.isArray,He={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Zc.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},Aee=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},mB=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Mee="utf8=%26%2310003%3B",Oee="utf8=%E2%9C%93",xee=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=n.parameterLimit===1/0?void 0:n.parameterLimit,s=i.split(n.delimiter,o),a=-1,c,u=n.charset;if(n.charsetSentinel)for(c=0;c<s.length;++c)s[c].indexOf("utf8=")===0&&(s[c]===Oee?u="utf-8":s[c]===Mee&&(u="iso-8859-1"),a=c,c=s.length);for(c=0;c<s.length;++c)if(c!==a){var l=s[c],d=l.indexOf("]="),p=d===-1?l.indexOf("="):d+1,f,g;p===-1?(f=n.decoder(l,He.decoder,u,"key"),g=n.strictNullHandling?null:""):(f=n.decoder(l.slice(0,p),He.decoder,u,"key"),g=Zc.maybeMap(mB(l.slice(p+1),n),function(y){return n.decoder(y,He.decoder,u,"value")})),g&&n.interpretNumericEntities&&u==="iso-8859-1"&&(g=Aee(g)),l.indexOf("[]=")>-1&&(g=Tee(g)?[g]:g);var m=G_.call(r,f);m&&n.duplicates==="combine"?r[f]=Zc.combine(r[f],g):(!m||n.duplicates==="last")&&(r[f]=g)}return r},Nee=function(t,e,n,r){for(var i=r?e:mB(e,n),o=t.length-1;o>=0;--o){var s,a=t[o];if(a==="[]"&&n.parseArrays)s=n.allowEmptyArrays&&(i===""||n.strictNullHandling&&i===null)?[]:[].concat(i);else{s=n.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=n.decodeDotInKeys?c.replace(/%2E/g,"."):c,l=parseInt(u,10);!n.parseArrays&&u===""?s={0:i}:!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(s=[],s[l]=i):u!=="__proto__"&&(s[u]=i)}i=s}return i},kee=function(e,n,r,i){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=r.depth>0&&s.exec(o),u=c?o.slice(0,c.index):o,l=[];if(u){if(!r.plainObjects&&G_.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var d=0;r.depth>0&&(c=a.exec(o))!==null&&d<r.depth;){if(d+=1,!r.plainObjects&&G_.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(c[1])}if(c){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");l.push("["+o.slice(c.index)+"]")}return Nee(l,n,r,i)}},Fee=function(e){if(!e)return He;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?He.charset:e.charset,r=typeof e.duplicates>"u"?He.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:He.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:He.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:He.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:He.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:He.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:He.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:He.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:He.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:He.decoder,delimiter:typeof e.delimiter=="string"||Zc.isRegExp(e.delimiter)?e.delimiter:He.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:He.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:He.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:He.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:He.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:He.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:He.strictNullHandling}};yB.exports=function(t,e){var n=Fee(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?xee(t,n):t,i=n.plainObjects?Object.create(null):{},o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],c=kee(a,r[a],n,typeof t=="string");i=Zc.merge(i,c,n)}return n.allowSparse===!0?i:Zc.compact(i)}});var wB=h((Qwe,SB)=>{"use strict";var Lee=vB(),jee=CB(),qee=mv();SB.exports={formats:qee,parse:jee,stringify:Lee}});var DB=h(Xc=>{"use strict";var Bee=zj();function Jn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Vee=/^([a-z0-9.+-]+:)/i,zee=/:[0-9]*$/,Uee=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Hee=["<",">",'"',"`"," ","\r",`
`,"	"],$ee=["{","}","|","\\","^","`"].concat(Hee),K_=["'"].concat($ee),bB=["%","/","?",";","#"].concat(K_),EB=["/","?","#"],Wee=255,IB=/^[+a-z0-9A-Z_-]{0,63}$/,Gee=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Kee={javascript:!0,"javascript:":!0},J_={javascript:!0,"javascript:":!0},Yc={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Q_=wB();function gd(t,e,n){if(t&&typeof t=="object"&&t instanceof Jn)return t;var r=new Jn;return r.parse(t,e,n),r}Jn.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",o=t.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var c=Uee.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=Q_.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=Vee.exec(a);if(u){u=u[0];var l=u.toLowerCase();this.protocol=l,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(u&&J_[u])&&(a=a.substr(2),this.slashes=!0)}if(!J_[u]&&(d||u&&!Yc[u])){for(var p=-1,f=0;f<EB.length;f++){var g=a.indexOf(EB[f]);g!==-1&&(p===-1||g<p)&&(p=g)}var m,y;p===-1?y=a.lastIndexOf("@"):y=a.lastIndexOf("@",p),y!==-1&&(m=a.slice(0,y),a=a.slice(y+1),this.auth=decodeURIComponent(m)),p=-1;for(var f=0;f<bB.length;f++){var g=a.indexOf(bB[f]);g!==-1&&(p===-1||g<p)&&(p=g)}p===-1&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var b=this.hostname.split(/\./),f=0,C=b.length;f<C;f++){var _=b[f];if(_&&!_.match(IB)){for(var U="",O=0,de=_.length;O<de;O++)_.charCodeAt(O)>127?U+="x":U+=_[O];if(!U.match(IB)){var ae=b.slice(0,f),De=b.slice(f+1),Je=_.match(Gee);Je&&(ae.push(Je[1]),De.unshift(Je[2])),De.length&&(a="/"+De.join(".")+a),this.hostname=ae.join(".");break}}}this.hostname.length>Wee?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=Bee.toASCII(this.hostname));var Nr=this.port?":"+this.port:"",lr=this.hostname||"";this.host=lr+Nr,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!Kee[l])for(var f=0,C=K_.length;f<C;f++){var Qe=K_[f];if(a.indexOf(Qe)!==-1){var Wt=encodeURIComponent(Qe);Wt===Qe&&(Wt=escape(Qe)),a=a.split(Qe).join(Wt)}}var Gt=a.indexOf("#");Gt!==-1&&(this.hash=a.substr(Gt),a=a.slice(0,Gt));var qn=a.indexOf("?");if(qn!==-1?(this.search=a.substr(qn),this.query=a.substr(qn+1),e&&(this.query=Q_.parse(this.query)),a=a.slice(0,qn)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Yc[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Nr=this.pathname||"",is=this.search||"";this.path=Nr+is}return this.href=this.format(),this};function Jee(t){return typeof t=="string"&&(t=gd(t)),t instanceof Jn?t.format():Jn.prototype.format.call(t)}Jn.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=Q_.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Yc[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),e+i+n+s+r};function Qee(t,e){return gd(t,!1,!0).resolve(e)}Jn.prototype.resolve=function(t){return this.resolveObject(gd(t,!1,!0)).format()};function Zee(t,e){return t?gd(t,!1,!0).resolveObject(e):e}Jn.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Jn;e.parse(t,!1,!0),t=e}for(var n=new Jn,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];c!=="protocol"&&(n[c]=t[c])}return Yc[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!Yc[t.protocol]){for(var u=Object.keys(t),l=0;l<u.length;l++){var d=u[l];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!J_[t.protocol]){for(var C=(t.pathname||"").split("/");C.length&&!(t.host=C.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),C[0]!==""&&C.unshift(""),C.length<2&&C.unshift(""),n.pathname=C.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",f=n.search||"";n.path=p+f}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&n.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",y=m||g||n.host&&t.pathname,w=y,b=n.pathname&&n.pathname.split("/")||[],C=t.pathname&&t.pathname.split("/")||[],_=n.protocol&&!Yc[n.protocol];if(_&&(n.hostname="",n.port=null,n.host&&(b[0]===""?b[0]=n.host:b.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(C[0]===""?C[0]=t.host:C.unshift(t.host)),t.host=null),y=y&&(C[0]===""||b[0]==="")),m)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,b=C;else if(C.length)b||(b=[]),b.pop(),b=b.concat(C),n.search=t.search,n.query=t.query;else if(t.search!=null){if(_){n.host=b.shift(),n.hostname=n.host;var U=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;U&&(n.auth=U.shift(),n.hostname=U.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var O=b.slice(-1)[0],de=(n.host||t.host||b.length>1)&&(O==="."||O==="..")||O==="",ae=0,De=b.length;De>=0;De--)O=b[De],O==="."?b.splice(De,1):O===".."?(b.splice(De,1),ae++):ae&&(b.splice(De,1),ae--);if(!y&&!w)for(;ae--;ae)b.unshift("..");y&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),de&&b.join("/").substr(-1)!=="/"&&b.push("");var Je=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(_){n.hostname=Je?"":b.length?b.shift():"",n.host=n.hostname;var U=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;U&&(n.auth=U.shift(),n.hostname=U.shift(),n.host=n.hostname)}return y=y||n.host&&b.length,y&&!Je&&b.unshift(""),b.length>0?n.pathname=b.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Jn.prototype.parseHost=function(){var t=this.host,e=zee.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};Xc.parse=gd;Xc.resolve=Qee;Xc.resolveObject=Zee;Xc.format=Jee;Xc.Url=Jn});var Cv=h((Ywe,_B)=>{"use strict";var Yee=nv();_B.exports=function(){return Yee()&&!!Symbol.toStringTag}});var TB=h((Xwe,PB)=>{"use strict";var Xee=Cv()(),ete=Kc(),Z_=ete("Object.prototype.toString"),Sv=function(e){return Xee&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Z_(e)==="[object Arguments]"},RB=function(e){return Sv(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Z_(e)!=="[object Array]"&&Z_(e.callee)==="[object Function]"},tte=function(){return Sv(arguments)}();Sv.isLegacyArguments=RB;PB.exports=tte?Sv:RB});var OB=h((ebe,MB)=>{"use strict";var nte=Object.prototype.toString,rte=Function.prototype.toString,ite=/^\s*(?:function)?\*/,AB=Cv()(),Y_=Object.getPrototypeOf,ote=function(){if(!AB)return!1;try{return Function("return function*() {}")()}catch{}},X_;MB.exports=function(e){if(typeof e!="function")return!1;if(ite.test(rte.call(e)))return!0;if(!AB){var n=nte.call(e);return n==="[object GeneratorFunction]"}if(!Y_)return!1;if(typeof X_>"u"){var r=ote();X_=r?Y_(r):!1}return Y_(e)===X_}});var FB=h((tbe,kB)=>{"use strict";var NB=Function.prototype.toString,eu=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t0,wv;if(typeof eu=="function"&&typeof Object.defineProperty=="function")try{t0=Object.defineProperty({},"length",{get:function(){throw wv}}),wv={},eu(function(){throw 42},null,t0)}catch(t){t!==wv&&(eu=null)}else eu=null;var ste=/^\s*class\b/,n0=function(e){try{var n=NB.call(e);return ste.test(n)}catch{return!1}},e0=function(e){try{return n0(e)?!1:(NB.call(e),!0)}catch{return!1}},bv=Object.prototype.toString,ate="[object Object]",cte="[object Function]",ute="[object GeneratorFunction]",lte="[object HTMLAllCollection]",dte="[object HTML document.all class]",pte="[object HTMLCollection]",fte=typeof Symbol=="function"&&!!Symbol.toStringTag,hte=!(0 in[,]),r0=function(){return!1};typeof document=="object"&&(xB=document.all,bv.call(xB)===bv.call(document.all)&&(r0=function(e){if((hte||!e)&&(typeof e>"u"||typeof e=="object"))try{var n=bv.call(e);return(n===lte||n===dte||n===pte||n===ate)&&e("")==null}catch{}return!1}));var xB;kB.exports=eu?function(e){if(r0(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{eu(e,null,t0)}catch(n){if(n!==wv)return!1}return!n0(e)&&e0(e)}:function(e){if(r0(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(fte)return e0(e);if(n0(e))return!1;var n=bv.call(e);return n!==cte&&n!==ute&&!/^\[object HTML/.test(n)?!1:e0(e)}});var qB=h((nbe,jB)=>{"use strict";var gte=FB(),vte=Object.prototype.toString,LB=Object.prototype.hasOwnProperty,mte=function(e,n,r){for(var i=0,o=e.length;i<o;i++)LB.call(e,i)&&(r==null?n(e[i],i,e):n.call(r,e[i],i,e))},yte=function(e,n,r){for(var i=0,o=e.length;i<o;i++)r==null?n(e.charAt(i),i,e):n.call(r,e.charAt(i),i,e)},Cte=function(e,n,r){for(var i in e)LB.call(e,i)&&(r==null?n(e[i],i,e):n.call(r,e[i],i,e))},Ste=function(e,n,r){if(!gte(n))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),vte.call(e)==="[object Array]"?mte(e,n,i):typeof e=="string"?yte(e,n,i):Cte(e,n,i)};jB.exports=Ste});var VB=h((rbe,BB)=>{"use strict";BB.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]});var UB=h((ibe,zB)=>{"use strict";var i0=VB(),wte=typeof globalThis>"u"?global:globalThis;zB.exports=function(){for(var e=[],n=0;n<i0.length;n++)typeof wte[i0[n]]=="function"&&(e[e.length]=i0[n]);return e}});var u0=h((obe,GB)=>{"use strict";var Iv=qB(),bte=UB(),HB=ld(),a0=Kc(),Ev=uv(),Ete=a0("Object.prototype.toString"),WB=Cv()(),$B=typeof globalThis>"u"?global:globalThis,s0=bte(),c0=a0("String.prototype.slice"),o0=Object.getPrototypeOf,Ite=a0("Array.prototype.indexOf",!0)||function(e,n){for(var r=0;r<e.length;r+=1)if(e[r]===n)return r;return-1},Dv={__proto__:null};WB&&Ev&&o0?Iv(s0,function(t){var e=new $B[t];if(Symbol.toStringTag in e){var n=o0(e),r=Ev(n,Symbol.toStringTag);if(!r){var i=o0(n);r=Ev(i,Symbol.toStringTag)}Dv["$"+t]=HB(r.get)}}):Iv(s0,function(t){var e=new $B[t],n=e.slice||e.set;n&&(Dv["$"+t]=HB(n))});var Dte=function(e){var n=!1;return Iv(Dv,function(r,i){if(!n)try{"$"+r(e)===i&&(n=c0(i,1))}catch{}}),n},_te=function(e){var n=!1;return Iv(Dv,function(r,i){if(!n)try{r(e),n=c0(i,1)}catch{}}),n};GB.exports=function(e){if(!e||typeof e!="object")return!1;if(!WB){var n=c0(Ete(e),8,-1);return Ite(s0,n)>-1?n:n!=="Object"?!1:_te(e)}return Ev?Dte(e):null}});var JB=h((sbe,KB)=>{"use strict";var Rte=u0();KB.exports=function(e){return!!Rte(e)}});var uV=h(ue=>{"use strict";var Pte=TB(),Tte=OB(),br=u0(),QB=JB();function tu(t){return t.call.bind(t)}var ZB=typeof BigInt<"u",YB=typeof Symbol<"u",Qn=tu(Object.prototype.toString),Ate=tu(Number.prototype.valueOf),Mte=tu(String.prototype.valueOf),Ote=tu(Boolean.prototype.valueOf);ZB&&(XB=tu(BigInt.prototype.valueOf));var XB;YB&&(eV=tu(Symbol.prototype.valueOf));var eV;function md(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch{return!1}}ue.isArgumentsObject=Pte;ue.isGeneratorFunction=Tte;ue.isTypedArray=QB;function xte(t){return typeof Promise<"u"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}ue.isPromise=xte;function Nte(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):QB(t)||nV(t)}ue.isArrayBufferView=Nte;function kte(t){return br(t)==="Uint8Array"}ue.isUint8Array=kte;function Fte(t){return br(t)==="Uint8ClampedArray"}ue.isUint8ClampedArray=Fte;function Lte(t){return br(t)==="Uint16Array"}ue.isUint16Array=Lte;function jte(t){return br(t)==="Uint32Array"}ue.isUint32Array=jte;function qte(t){return br(t)==="Int8Array"}ue.isInt8Array=qte;function Bte(t){return br(t)==="Int16Array"}ue.isInt16Array=Bte;function Vte(t){return br(t)==="Int32Array"}ue.isInt32Array=Vte;function zte(t){return br(t)==="Float32Array"}ue.isFloat32Array=zte;function Ute(t){return br(t)==="Float64Array"}ue.isFloat64Array=Ute;function Hte(t){return br(t)==="BigInt64Array"}ue.isBigInt64Array=Hte;function $te(t){return br(t)==="BigUint64Array"}ue.isBigUint64Array=$te;function _v(t){return Qn(t)==="[object Map]"}_v.working=typeof Map<"u"&&_v(new Map);function Wte(t){return typeof Map>"u"?!1:_v.working?_v(t):t instanceof Map}ue.isMap=Wte;function Rv(t){return Qn(t)==="[object Set]"}Rv.working=typeof Set<"u"&&Rv(new Set);function Gte(t){return typeof Set>"u"?!1:Rv.working?Rv(t):t instanceof Set}ue.isSet=Gte;function Pv(t){return Qn(t)==="[object WeakMap]"}Pv.working=typeof WeakMap<"u"&&Pv(new WeakMap);function Kte(t){return typeof WeakMap>"u"?!1:Pv.working?Pv(t):t instanceof WeakMap}ue.isWeakMap=Kte;function d0(t){return Qn(t)==="[object WeakSet]"}d0.working=typeof WeakSet<"u"&&d0(new WeakSet);function Jte(t){return d0(t)}ue.isWeakSet=Jte;function Tv(t){return Qn(t)==="[object ArrayBuffer]"}Tv.working=typeof ArrayBuffer<"u"&&Tv(new ArrayBuffer);function tV(t){return typeof ArrayBuffer>"u"?!1:Tv.working?Tv(t):t instanceof ArrayBuffer}ue.isArrayBuffer=tV;function Av(t){return Qn(t)==="[object DataView]"}Av.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Av(new DataView(new ArrayBuffer(1),0,1));function nV(t){return typeof DataView>"u"?!1:Av.working?Av(t):t instanceof DataView}ue.isDataView=nV;var l0=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function vd(t){return Qn(t)==="[object SharedArrayBuffer]"}function rV(t){return typeof l0>"u"?!1:(typeof vd.working>"u"&&(vd.working=vd(new l0)),vd.working?vd(t):t instanceof l0)}ue.isSharedArrayBuffer=rV;function Qte(t){return Qn(t)==="[object AsyncFunction]"}ue.isAsyncFunction=Qte;function Zte(t){return Qn(t)==="[object Map Iterator]"}ue.isMapIterator=Zte;function Yte(t){return Qn(t)==="[object Set Iterator]"}ue.isSetIterator=Yte;function Xte(t){return Qn(t)==="[object Generator]"}ue.isGeneratorObject=Xte;function ene(t){return Qn(t)==="[object WebAssembly.Module]"}ue.isWebAssemblyCompiledModule=ene;function iV(t){return md(t,Ate)}ue.isNumberObject=iV;function oV(t){return md(t,Mte)}ue.isStringObject=oV;function sV(t){return md(t,Ote)}ue.isBooleanObject=sV;function aV(t){return ZB&&md(t,XB)}ue.isBigIntObject=aV;function cV(t){return YB&&md(t,eV)}ue.isSymbolObject=cV;function tne(t){return iV(t)||oV(t)||sV(t)||aV(t)||cV(t)}ue.isBoxedPrimitive=tne;function nne(t){return typeof Uint8Array<"u"&&(tV(t)||rV(t))}ue.isAnyArrayBuffer=nne;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(ue,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var dV=h((cbe,lV)=>{"use strict";lV.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var pV=h((ube,p0)=>{"use strict";typeof Object.create=="function"?p0.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:p0.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}});var Ws=h(le=>{"use strict";var fV=Object.getOwnPropertyDescriptors||function(e){for(var n=Object.keys(e),r={},i=0;i<n.length;i++)r[n[i]]=Object.getOwnPropertyDescriptor(e,n[i]);return r},rne=/%[sdj%]/g;le.format=function(t){if(!Lv(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Fo(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(t).replace(rne,function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}}),s=r[n];n<i;s=r[++n])Fv(s)||!nu(s)?o+=" "+s:o+=" "+Fo(s);return o};le.deprecate=function(t,e){if(typeof process<"u"&&process.noDeprecation===!0)return t;if(typeof process>"u")return function(){return le.deprecate(t,e).apply(this,arguments)};var n=!1;function r(){if(!n){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}return r};var Mv={},hV=/^$/;process.env.NODE_DEBUG&&(Ov=process.env.NODE_DEBUG,Ov=Ov.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),hV=new RegExp("^"+Ov+"$","i"));var Ov;le.debuglog=function(t){if(t=t.toUpperCase(),!Mv[t])if(hV.test(t)){var e=process.pid;Mv[t]=function(){var n=le.format.apply(le,arguments);console.error("%s %d: %s",t,e,n)}}else Mv[t]=function(){};return Mv[t]};function Fo(t,e){var n={seen:[],stylize:one};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v0(e)?n.showHidden=e:e&&le._extend(n,e),$s(n.showHidden)&&(n.showHidden=!1),$s(n.depth)&&(n.depth=2),$s(n.colors)&&(n.colors=!1),$s(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=ine),Nv(n,t,n.depth)}le.inspect=Fo;Fo.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Fo.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ine(t,e){var n=Fo.styles[e];return n?"\x1B["+Fo.colors[n][0]+"m"+t+"\x1B["+Fo.colors[n][1]+"m":t}function one(t,e){return t}function sne(t){var e={};return t.forEach(function(n,r){e[n]=!0}),e}function Nv(t,e,n){if(t.customInspect&&e&&xv(e.inspect)&&e.inspect!==le.inspect&&!(e.constructor&&e.constructor.prototype===e)){var r=e.inspect(n,t);return Lv(r)||(r=Nv(t,r,n)),r}var i=ane(t,e);if(i)return i;var o=Object.keys(e),s=sne(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),Cd(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f0(e);if(o.length===0){if(xv(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(yd(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(kv(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Cd(e))return f0(e)}var c="",u=!1,l=["{","}"];if(gV(e)&&(u=!0,l=["[","]"]),xv(e)){var d=e.name?": "+e.name:"";c=" [Function"+d+"]"}if(yd(e)&&(c=" "+RegExp.prototype.toString.call(e)),kv(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Cd(e)&&(c=" "+f0(e)),o.length===0&&(!u||e.length==0))return l[0]+c+l[1];if(n<0)return yd(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var p;return u?p=cne(t,e,n,s,o):p=o.map(function(f){return g0(t,e,n,s,f,u)}),t.seen.pop(),une(p,c,l)}function ane(t,e){if($s(e))return t.stylize("undefined","undefined");if(Lv(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(vV(e))return t.stylize(""+e,"number");if(v0(e))return t.stylize(""+e,"boolean");if(Fv(e))return t.stylize("null","null")}function f0(t){return"["+Error.prototype.toString.call(t)+"]"}function cne(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)mV(e,String(s))?o.push(g0(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(c){c.match(/^\d+$/)||o.push(g0(t,e,n,r,c,!0))}),o}function g0(t,e,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?c.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),mV(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(Fv(n)?a=Nv(t,c.value,null):a=Nv(t,c.value,n-1),a.indexOf(`
`)>-1&&(o?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=t.stylize("[Circular]","special")),$s(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function une(t,e,n){var r=0,i=t.reduce(function(o,s){return r++,s.indexOf(`
`)>=0&&r++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}le.types=uV();function gV(t){return Array.isArray(t)}le.isArray=gV;function v0(t){return typeof t=="boolean"}le.isBoolean=v0;function Fv(t){return t===null}le.isNull=Fv;function lne(t){return t==null}le.isNullOrUndefined=lne;function vV(t){return typeof t=="number"}le.isNumber=vV;function Lv(t){return typeof t=="string"}le.isString=Lv;function dne(t){return typeof t=="symbol"}le.isSymbol=dne;function $s(t){return t===void 0}le.isUndefined=$s;function yd(t){return nu(t)&&m0(t)==="[object RegExp]"}le.isRegExp=yd;le.types.isRegExp=yd;function nu(t){return typeof t=="object"&&t!==null}le.isObject=nu;function kv(t){return nu(t)&&m0(t)==="[object Date]"}le.isDate=kv;le.types.isDate=kv;function Cd(t){return nu(t)&&(m0(t)==="[object Error]"||t instanceof Error)}le.isError=Cd;le.types.isNativeError=Cd;function xv(t){return typeof t=="function"}le.isFunction=xv;function pne(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}le.isPrimitive=pne;le.isBuffer=dV();function m0(t){return Object.prototype.toString.call(t)}function h0(t){return t<10?"0"+t.toString(10):t.toString(10)}var fne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hne(){var t=new Date,e=[h0(t.getHours()),h0(t.getMinutes()),h0(t.getSeconds())].join(":");return[t.getDate(),fne[t.getMonth()],e].join(" ")}le.log=function(){console.log("%s - %s",hne(),le.format.apply(le,arguments))};le.inherits=pV();le._extend=function(t,e){if(!e||!nu(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};function mV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Hs=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;le.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(Hs&&e[Hs]){var n=e[Hs];if(typeof n!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,Hs,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var r,i,o=new Promise(function(c,u){r=c,i=u}),s=[],a=0;a<arguments.length;a++)s.push(arguments[a]);s.push(function(c,u){c?i(c):r(u)});try{e.apply(this,s)}catch(c){i(c)}return o}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Hs&&Object.defineProperty(n,Hs,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,fV(e))};le.promisify.custom=Hs;function gne(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function vne(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(a){process.nextTick(s.bind(null,null,a))},function(a){process.nextTick(gne.bind(null,a,s))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,fV(t)),e}le.callbackify=vne});var S0=h((dbe,wV)=>{"use strict";function Lo(t){"@babel/helpers - typeof";return Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(t)}function yV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yne(r.key),r)}}function mne(t,e,n){return e&&yV(t.prototype,e),n&&yV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yne(t){var e=Cne(t,"string");return Lo(e)==="symbol"?e:String(e)}function Cne(t,e){if(Lo(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lo(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C0(t,e)}function C0(t,e){return C0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C0(t,e)}function bne(t){var e=Dne();return function(){var r=jv(t),i;if(e){var o=jv(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Ene(this,i)}}function Ene(t,e){if(e&&(Lo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ine(t)}function Ine(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jv(t){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jv(t)}var SV={},ru,y0;function Sd(t,e,n){n||(n=Error);function r(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){wne(a,o);var s=bne(a);function a(c,u,l){var d;return Sne(this,a),d=s.call(this,r(c,u,l)),d.code=t,d}return mne(a)}(n);SV[t]=i}function CV(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function _ne(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}function Rne(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function Pne(t,e,n){return typeof n!="number"&&(n=0),n+e.length>t.length?!1:t.indexOf(e,n)!==-1}Sd("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);Sd("ERR_INVALID_ARG_TYPE",function(t,e,n){ru===void 0&&(ru=qv()),ru(typeof t=="string","'name' must be a string");var r;typeof e=="string"&&_ne(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be";var i;if(Rne(t," argument"))i="The ".concat(t," ").concat(r," ").concat(CV(e,"type"));else{var o=Pne(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(CV(e,"type"))}return i+=". Received type ".concat(Lo(n)),i},TypeError);Sd("ERR_INVALID_ARG_VALUE",function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";y0===void 0&&(y0=Ws());var r=y0.inspect(e);return r.length>128&&(r="".concat(r.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(n,". Received ").concat(r)},TypeError,RangeError);Sd("ERR_INVALID_RETURN_VALUE",function(t,e,n){var r;return n&&n.constructor&&n.constructor.name?r="instance of ".concat(n.constructor.name):r="type ".concat(Lo(n)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(r,".")},TypeError);Sd("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ru===void 0&&(ru=qv()),ru(e.length>0,"At least one arg needs to be specified");var r="The ",i=e.length;switch(e=e.map(function(o){return'"'.concat(o,'"')}),i){case 1:r+="".concat(e[0]," argument");break;case 2:r+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:r+=e.slice(0,i-1).join(", "),r+=", and ".concat(e[i-1]," arguments");break}return"".concat(r," must be specified")},TypeError);wV.exports.codes=SV});var MV=h((pbe,AV)=>{"use strict";function bV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(n),!0).forEach(function(r){Tne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tne(t,e,n){return e=RV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ane(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RV(r.key),r)}}function Mne(t,e,n){return e&&IV(t.prototype,e),n&&IV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RV(t){var e=One(t,"string");return mn(e)==="symbol"?e:String(e)}function One(t,e){if(mn(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Id(t,e)}function Nne(t){var e=TV();return function(){var r=Dd(t),i;if(e){var o=Dd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return PV(this,i)}}function PV(t,e){if(e&&(mn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w0(t)}function w0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b0(t){var e=typeof Map=="function"?new Map:void 0;return b0=function(r){if(r===null||!kne(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Bv(r,arguments,Dd(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Id(i,r)},b0(t)}function Bv(t,e,n){return TV()?Bv=Reflect.construct.bind():Bv=function(i,o,s){var a=[null];a.push.apply(a,o);var c=Function.bind.apply(i,a),u=new c;return s&&Id(u,s.prototype),u},Bv.apply(null,arguments)}function TV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kne(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Id(t,e){return Id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Id(t,e)}function Dd(t){return Dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dd(t)}function mn(t){"@babel/helpers - typeof";return mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(t)}var Fne=Ws(),E0=Fne.inspect,Lne=S0(),jne=Lne.codes.ERR_INVALID_ARG_TYPE;function DV(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function qne(t,e){if(e=Math.floor(e),t.length==0||e==0)return"";var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,n-t.length),t}var Er="",wd="",bd="",bt="",Gs={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},Bne=10;function _V(t){var e=Object.keys(t),n=Object.create(Object.getPrototypeOf(t));return e.forEach(function(r){n[r]=t[r]}),Object.defineProperty(n,"message",{value:t.message}),n}function Ed(t){return E0(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function Vne(t,e,n){var r="",i="",o=0,s="",a=!1,c=Ed(t),u=c.split(`
`),l=Ed(e).split(`
`),d=0,p="";if(n==="strictEqual"&&mn(t)==="object"&&mn(e)==="object"&&t!==null&&e!==null&&(n="strictEqualObject"),u.length===1&&l.length===1&&u[0]!==l[0]){var f=u[0].length+l[0].length;if(f<=Bne){if((mn(t)!=="object"||t===null)&&(mn(e)!=="object"||e===null)&&(t!==0||e!==0))return"".concat(Gs[n],`

`)+"".concat(u[0]," !== ").concat(l[0],`
`)}else if(n!=="strictEqualObject"){var g=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(f<g){for(;u[0][d]===l[0][d];)d++;d>2&&(p=`
  `.concat(qne(" ",d),"^"),d=0)}}}for(var m=u[u.length-1],y=l[l.length-1];m===y&&(d++<2?s=`
  `.concat(m).concat(s):r=m,u.pop(),l.pop(),!(u.length===0||l.length===0));)m=u[u.length-1],y=l[l.length-1];var w=Math.max(u.length,l.length);if(w===0){var b=c.split(`
`);if(b.length>30)for(b[26]="".concat(Er,"...").concat(bt);b.length>27;)b.pop();return"".concat(Gs.notIdentical,`

`).concat(b.join(`
`),`
`)}d>3&&(s=`
`.concat(Er,"...").concat(bt).concat(s),a=!0),r!==""&&(s=`
  `.concat(r).concat(s),r="");var C=0,_=Gs[n]+`
`.concat(wd,"+ actual").concat(bt," ").concat(bd,"- expected").concat(bt),U=" ".concat(Er,"...").concat(bt," Lines skipped");for(d=0;d<w;d++){var O=d-o;if(u.length<d+1)O>1&&d>2&&(O>4?(i+=`
`.concat(Er,"...").concat(bt),a=!0):O>3&&(i+=`
  `.concat(l[d-2]),C++),i+=`
  `.concat(l[d-1]),C++),o=d,r+=`
`.concat(bd,"-").concat(bt," ").concat(l[d]),C++;else if(l.length<d+1)O>1&&d>2&&(O>4?(i+=`
`.concat(Er,"...").concat(bt),a=!0):O>3&&(i+=`
  `.concat(u[d-2]),C++),i+=`
  `.concat(u[d-1]),C++),o=d,i+=`
`.concat(wd,"+").concat(bt," ").concat(u[d]),C++;else{var de=l[d],ae=u[d],De=ae!==de&&(!DV(ae,",")||ae.slice(0,-1)!==de);De&&DV(de,",")&&de.slice(0,-1)===ae&&(De=!1,ae+=","),De?(O>1&&d>2&&(O>4?(i+=`
`.concat(Er,"...").concat(bt),a=!0):O>3&&(i+=`
  `.concat(u[d-2]),C++),i+=`
  `.concat(u[d-1]),C++),o=d,i+=`
`.concat(wd,"+").concat(bt," ").concat(ae),r+=`
`.concat(bd,"-").concat(bt," ").concat(de),C+=2):(i+=r,r="",(O===1||d===0)&&(i+=`
  `.concat(ae),C++))}if(C>20&&d<w-2)return"".concat(_).concat(U,`
`).concat(i,`
`).concat(Er,"...").concat(bt).concat(r,`
`)+"".concat(Er,"...").concat(bt)}return"".concat(_).concat(a?U:"",`
`).concat(i).concat(r).concat(s).concat(p)}var zne=function(t,e){xne(r,t);var n=Nne(r);function r(i){var o;if(Ane(this,r),mn(i)!=="object"||i===null)throw new jne("options","Object",i);var s=i.message,a=i.operator,c=i.stackStartFn,u=i.actual,l=i.expected,d=Error.stackTraceLimit;if(Error.stackTraceLimit=0,s!=null)o=n.call(this,String(s));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(Er="\x1B[34m",wd="\x1B[32m",bt="\x1B[39m",bd="\x1B[31m"):(Er="",wd="",bt="",bd="")),mn(u)==="object"&&u!==null&&mn(l)==="object"&&l!==null&&"stack"in u&&u instanceof Error&&"stack"in l&&l instanceof Error&&(u=_V(u),l=_V(l)),a==="deepStrictEqual"||a==="strictEqual")o=n.call(this,Vne(u,l,a));else if(a==="notDeepStrictEqual"||a==="notStrictEqual"){var p=Gs[a],f=Ed(u).split(`
`);if(a==="notStrictEqual"&&mn(u)==="object"&&u!==null&&(p=Gs.notStrictEqualObject),f.length>30)for(f[26]="".concat(Er,"...").concat(bt);f.length>27;)f.pop();f.length===1?o=n.call(this,"".concat(p," ").concat(f[0])):o=n.call(this,"".concat(p,`

`).concat(f.join(`
`),`
`))}else{var g=Ed(u),m="",y=Gs[a];a==="notDeepEqual"||a==="notEqual"?(g="".concat(Gs[a],`

`).concat(g),g.length>1024&&(g="".concat(g.slice(0,1021),"..."))):(m="".concat(Ed(l)),g.length>512&&(g="".concat(g.slice(0,509),"...")),m.length>512&&(m="".concat(m.slice(0,509),"...")),a==="deepEqual"||a==="equal"?g="".concat(y,`

`).concat(g,`

should equal

`):m=" ".concat(a," ").concat(m)),o=n.call(this,"".concat(g).concat(m))}return Error.stackTraceLimit=d,o.generatedMessage=!s,Object.defineProperty(w0(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=u,o.expected=l,o.operator=a,Error.captureStackTrace&&Error.captureStackTrace(w0(o),c),o.stack,o.name="AssertionError",PV(o)}return Mne(r,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(o,s){return E0(this,EV(EV({},s),{},{customInspect:!1,depth:0}))}}]),r}(b0(Error),E0.custom);AV.exports=zne});var I0=h((fbe,xV)=>{"use strict";var OV=Object.prototype.toString;xV.exports=function(e){var n=OV.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&OV.call(e.callee)==="[object Function]"),r}});var zV=h((hbe,VV)=>{"use strict";var BV;Object.keys||(_d=Object.prototype.hasOwnProperty,D0=Object.prototype.toString,NV=I0(),_0=Object.prototype.propertyIsEnumerable,kV=!_0.call({toString:null},"toString"),FV=_0.call(function(){},"prototype"),Rd=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Vv=function(t){var e=t.constructor;return e&&e.prototype===t},LV={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},jV=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!LV["$"+t]&&_d.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Vv(window[t])}catch{return!0}}catch{return!0}return!1}(),qV=function(t){if(typeof window>"u"||!jV)return Vv(t);try{return Vv(t)}catch{return!1}},BV=function(e){var n=e!==null&&typeof e=="object",r=D0.call(e)==="[object Function]",i=NV(e),o=n&&D0.call(e)==="[object String]",s=[];if(!n&&!r&&!i)throw new TypeError("Object.keys called on a non-object");var a=FV&&r;if(o&&e.length>0&&!_d.call(e,0))for(var c=0;c<e.length;++c)s.push(String(c));if(i&&e.length>0)for(var u=0;u<e.length;++u)s.push(String(u));else for(var l in e)!(a&&l==="prototype")&&_d.call(e,l)&&s.push(String(l));if(kV)for(var d=qV(e),p=0;p<Rd.length;++p)!(d&&Rd[p]==="constructor")&&_d.call(e,Rd[p])&&s.push(Rd[p]);return s});var _d,D0,NV,_0,kV,FV,Rd,Vv,LV,jV,qV;VV.exports=BV});var R0=h((gbe,$V)=>{"use strict";var Une=Array.prototype.slice,Hne=I0(),UV=Object.keys,zv=UV?function(e){return UV(e)}:zV(),HV=Object.keys;zv.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return Hne(r)?HV(Une.call(r)):HV(r)})}else Object.keys=zv;return Object.keys||zv};$V.exports=zv});var ZV=h((vbe,QV)=>{"use strict";var $ne=R0(),KV=nv()(),JV=Kc(),WV=Object,Wne=JV("Array.prototype.push"),GV=JV("Object.prototype.propertyIsEnumerable"),Gne=KV?Object.getOwnPropertySymbols:null;QV.exports=function(e,n){if(e==null)throw new TypeError("target must be an object");var r=WV(e);if(arguments.length===1)return r;for(var i=1;i<arguments.length;++i){var o=WV(arguments[i]),s=$ne(o),a=KV&&(Object.getOwnPropertySymbols||Gne);if(a)for(var c=a(o),u=0;u<c.length;++u){var l=c[u];GV(o,l)&&Wne(s,l)}for(var d=0;d<s.length;++d){var p=s[d];if(GV(o,p)){var f=o[p];r[p]=f}}}return r}});var XV=h((mbe,YV)=>{"use strict";var P0=ZV(),Kne=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;r<e.length;++r)n[e[r]]=e[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return t!==o},Jne=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1};YV.exports=function(){return!Object.assign||Kne()||Jne()?P0:Object.assign}});var T0=h((ybe,tz)=>{"use strict";var ez=function(t){return t!==t};tz.exports=function(e,n){return e===0&&n===0?1/e===1/n:!!(e===n||ez(e)&&ez(n))}});var Uv=h((Cbe,nz)=>{"use strict";var Qne=T0();nz.exports=function(){return typeof Object.is=="function"?Object.is:Qne}});var Pd=h((Sbe,sz)=>{"use strict";var Zne=R0(),Yne=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Xne=Object.prototype.toString,ere=Array.prototype.concat,rz=D_(),tre=function(t){return typeof t=="function"&&Xne.call(t)==="[object Function]"},iz=R_()(),nre=function(t,e,n,r){if(e in t){if(r===!0){if(t[e]===n)return}else if(!tre(r)||!r())return}iz?rz(t,e,n,!0):rz(t,e,n)},oz=function(t,e){var n=arguments.length>2?arguments[2]:{},r=Zne(e);Yne&&(r=ere.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)nre(t,r[i],e[r[i]],n[r[i]])};oz.supportsDescriptors=!!iz;sz.exports=oz});var cz=h((wbe,az)=>{"use strict";var rre=Uv(),ire=Pd();az.exports=function(){var e=rre();return ire(Object,{is:e},{is:function(){return Object.is!==e}}),e}});var pz=h((bbe,dz)=>{"use strict";var ore=Pd(),sre=ld(),are=T0(),uz=Uv(),cre=cz(),lz=sre(uz(),Object);ore(lz,{getPolyfill:uz,implementation:are,shim:cre});dz.exports=lz});var A0=h((Ebe,fz)=>{"use strict";fz.exports=function(e){return e!==e}});var M0=h((Ibe,hz)=>{"use strict";var ure=A0();hz.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:ure}});var vz=h((Dbe,gz)=>{"use strict";var lre=Pd(),dre=M0();gz.exports=function(){var e=dre();return lre(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}});var Sz=h((_be,Cz)=>{"use strict";var pre=ld(),fre=Pd(),hre=A0(),mz=M0(),gre=vz(),yz=pre(mz(),Number);fre(yz,{getPolyfill:mz,implementation:hre,shim:gre});Cz.exports=yz});var Bz=h((Rbe,qz)=>{"use strict";function wz(t,e){return Cre(t)||yre(t,e)||mre(t,e)||vre()}function vre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mre(t,e){if(t){if(typeof t=="string")return bz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bz(t,e)}}function bz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],c=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Cre(t){if(Array.isArray(t))return t}function Zn(t){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(t)}var Sre=/a/g.flags!==void 0,Qv=function(e){var n=[];return e.forEach(function(r){return n.push(r)}),n},Ez=function(e){var n=[];return e.forEach(function(r,i){return n.push([i,r])}),n},Nz=Object.is?Object.is:pz(),Kv=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},O0=Number.isNaN?Number.isNaN:Sz();function N0(t){return t.call.bind(t)}var Ad=N0(Object.prototype.hasOwnProperty),Jv=N0(Object.prototype.propertyIsEnumerable),Iz=N0(Object.prototype.toString),rn=Ws().types,wre=rn.isAnyArrayBuffer,bre=rn.isArrayBufferView,Dz=rn.isDate,Hv=rn.isMap,_z=rn.isRegExp,$v=rn.isSet,Ere=rn.isNativeError,Ire=rn.isBoxedPrimitive,Rz=rn.isNumberObject,Pz=rn.isStringObject,Tz=rn.isBooleanObject,Az=rn.isBigIntObject,Dre=rn.isSymbolObject,_re=rn.isFloat32Array,Rre=rn.isFloat64Array;function Pre(t){if(t.length===0||t.length>10)return!0;for(var e=0;e<t.length;e++){var n=t.charCodeAt(e);if(n<48||n>57)return!0}return t.length===10&&t>=Math.pow(2,32)}function Wv(t){return Object.keys(t).filter(Pre).concat(Kv(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}function kz(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}var Gv=void 0,Tre=!0,Are=!1,x0=0,k0=1,Fz=2,Lz=3;function Mre(t,e){return Sre?t.source===e.source&&t.flags===e.flags:RegExp.prototype.toString.call(t)===RegExp.prototype.toString.call(e)}function Ore(t,e){if(t.byteLength!==e.byteLength)return!1;for(var n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}function xre(t,e){return t.byteLength!==e.byteLength?!1:kz(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))===0}function Nre(t,e){return t.byteLength===e.byteLength&&kz(new Uint8Array(t),new Uint8Array(e))===0}function kre(t,e){return Rz(t)?Rz(e)&&Nz(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):Pz(t)?Pz(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):Tz(t)?Tz(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):Az(t)?Az(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):Dre(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}function Yn(t,e,n,r){if(t===e)return t!==0?!0:n?Nz(t,e):!0;if(n){if(Zn(t)!=="object")return typeof t=="number"&&O0(t)&&O0(e);if(Zn(e)!=="object"||t===null||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(t===null||Zn(t)!=="object")return e===null||Zn(e)!=="object"?t==e:!1;if(e===null||Zn(e)!=="object")return!1}var i=Iz(t),o=Iz(e);if(i!==o)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var s=Wv(t,Gv),a=Wv(e,Gv);return s.length!==a.length?!1:Td(t,e,n,r,k0,s)}if(i==="[object Object]"&&(!Hv(t)&&Hv(e)||!$v(t)&&$v(e)))return!1;if(Dz(t)){if(!Dz(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(_z(t)){if(!_z(e)||!Mre(t,e))return!1}else if(Ere(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else if(bre(t)){if(!n&&(_re(t)||Rre(t))){if(!Ore(t,e))return!1}else if(!xre(t,e))return!1;var c=Wv(t,Gv),u=Wv(e,Gv);return c.length!==u.length?!1:Td(t,e,n,r,x0,c)}else{if($v(t))return!$v(e)||t.size!==e.size?!1:Td(t,e,n,r,Fz);if(Hv(t))return!Hv(e)||t.size!==e.size?!1:Td(t,e,n,r,Lz);if(wre(t)){if(!Nre(t,e))return!1}else if(Ire(t)&&!kre(t,e))return!1}return Td(t,e,n,r,x0)}function Mz(t,e){return e.filter(function(n){return Jv(t,n)})}function Td(t,e,n,r,i,o){if(arguments.length===5){o=Object.keys(t);var s=Object.keys(e);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!Ad(e,o[a]))return!1;if(n&&arguments.length===5){var c=Kv(t);if(c.length!==0){var u=0;for(a=0;a<c.length;a++){var l=c[a];if(Jv(t,l)){if(!Jv(e,l))return!1;o.push(l),u++}else if(Jv(e,l))return!1}var d=Kv(e);if(c.length!==d.length&&Mz(e,d).length!==u)return!1}else{var p=Kv(e);if(p.length!==0&&Mz(e,p).length!==0)return!1}}if(o.length===0&&(i===x0||i===k0&&t.length===0||t.size===0))return!0;if(r===void 0)r={val1:new Map,val2:new Map,position:0};else{var f=r.val1.get(t);if(f!==void 0){var g=r.val2.get(e);if(g!==void 0)return f===g}r.position++}r.val1.set(t,r.position),r.val2.set(e,r.position);var m=Bre(t,e,n,o,r,i);return r.val1.delete(t),r.val2.delete(e),m}function Oz(t,e,n,r){for(var i=Qv(t),o=0;o<i.length;o++){var s=i[o];if(Yn(e,s,n,r))return t.delete(s),!0}return!1}function jz(t){switch(Zn(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(O0(t))return!1}return!0}function Fre(t,e,n){var r=jz(n);return r??(e.has(r)&&!t.has(r))}function Lre(t,e,n,r,i){var o=jz(n);if(o!=null)return o;var s=e.get(o);return s===void 0&&!e.has(o)||!Yn(r,s,!1,i)?!1:!t.has(o)&&Yn(r,s,!1,i)}function jre(t,e,n,r){for(var i=null,o=Qv(t),s=0;s<o.length;s++){var a=o[s];if(Zn(a)==="object"&&a!==null)i===null&&(i=new Set),i.add(a);else if(!e.has(a)){if(n||!Fre(t,e,a))return!1;i===null&&(i=new Set),i.add(a)}}if(i!==null){for(var c=Qv(e),u=0;u<c.length;u++){var l=c[u];if(Zn(l)==="object"&&l!==null){if(!Oz(i,l,n,r))return!1}else if(!n&&!t.has(l)&&!Oz(i,l,n,r))return!1}return i.size===0}return!0}function xz(t,e,n,r,i,o){for(var s=Qv(t),a=0;a<s.length;a++){var c=s[a];if(Yn(n,c,i,o)&&Yn(r,e.get(c),i,o))return t.delete(c),!0}return!1}function qre(t,e,n,r){for(var i=null,o=Ez(t),s=0;s<o.length;s++){var a=wz(o[s],2),c=a[0],u=a[1];if(Zn(c)==="object"&&c!==null)i===null&&(i=new Set),i.add(c);else{var l=e.get(c);if(l===void 0&&!e.has(c)||!Yn(u,l,n,r)){if(n||!Lre(t,e,c,u,r))return!1;i===null&&(i=new Set),i.add(c)}}}if(i!==null){for(var d=Ez(e),p=0;p<d.length;p++){var f=wz(d[p],2),g=f[0],m=f[1];if(Zn(g)==="object"&&g!==null){if(!xz(i,t,g,m,n,r))return!1}else if(!n&&(!t.has(g)||!Yn(t.get(g),m,!1,r))&&!xz(i,t,g,m,!1,r))return!1}return i.size===0}return!0}function Bre(t,e,n,r,i,o){var s=0;if(o===Fz){if(!jre(t,e,n,i))return!1}else if(o===Lz){if(!qre(t,e,n,i))return!1}else if(o===k0)for(;s<t.length;s++)if(Ad(t,s)){if(!Ad(e,s)||!Yn(t[s],e[s],n,i))return!1}else{if(Ad(e,s))return!1;for(var a=Object.keys(t);s<a.length;s++){var c=a[s];if(!Ad(e,c)||!Yn(t[c],e[c],n,i))return!1}return a.length===Object.keys(e).length}for(s=0;s<r.length;s++){var u=r[s];if(!Yn(t[u],e[u],n,i))return!1}return!0}function Vre(t,e){return Yn(t,e,Are)}function zre(t,e){return Yn(t,e,Tre)}qz.exports={isDeepEqual:Vre,isDeepStrictEqual:zre}});var qv=h((Pbe,iU)=>{"use strict";function Ir(t){"@babel/helpers - typeof";return Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(t)}function Vz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hre(r.key),r)}}function Ure(t,e,n){return e&&Vz(t.prototype,e),n&&Vz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hre(t){var e=$re(t,"string");return Ir(e)==="symbol"?e:String(e)}function $re(t,e){if(Ir(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ir(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Gre=S0(),Md=Gre.codes,zz=Md.ERR_AMBIGUOUS_ARGUMENT,iu=Md.ERR_INVALID_ARG_TYPE,Kre=Md.ERR_INVALID_ARG_VALUE,Jre=Md.ERR_INVALID_RETURN_VALUE,qo=Md.ERR_MISSING_ARGS,Bo=MV(),Qre=Ws(),Zv=Qre.inspect,Wz=Ws().types,Zre=Wz.isPromise,Yv=Wz.isRegExp,Yre=XV()(),Gz=Uv()(),Xv=Kc()("RegExp.prototype.test"),jo,em;function Od(){var t=Bz();jo=t.isDeepEqual,em=t.isDeepStrictEqual}var Uz=!1,Me=iU.exports=F0,tm={};function Dr(t){throw t.message instanceof Error?t.message:new Bo(t)}function Kz(t,e,n,r,i){var o=arguments.length,s;if(o===0)s="Failed";else if(o===1)n=t,t=void 0;else{if(Uz===!1){Uz=!0;var a=process.emitWarning?process.emitWarning:console.warn.bind(console);a("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(r="!=")}if(n instanceof Error)throw n;var c={actual:t,expected:e,operator:r===void 0?"fail":r,stackStartFn:i||Kz};n!==void 0&&(c.message=n);var u=new Bo(c);throw s&&(u.message=s,u.generatedMessage=!0),u}Me.fail=Kz;Me.AssertionError=Bo;function Jz(t,e,n,r){if(!n){var i=!1;if(e===0)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var o=new Bo({actual:n,expected:!0,message:r,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function F0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Jz.apply(void 0,[F0,e.length].concat(e))}Me.ok=F0;Me.equal=function t(e,n,r){if(arguments.length<2)throw new qo("actual","expected");e!=n&&Dr({actual:e,expected:n,message:r,operator:"==",stackStartFn:t})};Me.notEqual=function t(e,n,r){if(arguments.length<2)throw new qo("actual","expected");e==n&&Dr({actual:e,expected:n,message:r,operator:"!=",stackStartFn:t})};Me.deepEqual=function t(e,n,r){if(arguments.length<2)throw new qo("actual","expected");jo===void 0&&Od(),jo(e,n)||Dr({actual:e,expected:n,message:r,operator:"deepEqual",stackStartFn:t})};Me.notDeepEqual=function t(e,n,r){if(arguments.length<2)throw new qo("actual","expected");jo===void 0&&Od(),jo(e,n)&&Dr({actual:e,expected:n,message:r,operator:"notDeepEqual",stackStartFn:t})};Me.deepStrictEqual=function t(e,n,r){if(arguments.length<2)throw new qo("actual","expected");jo===void 0&&Od(),em(e,n)||Dr({actual:e,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:t})};Me.notDeepStrictEqual=Qz;function Qz(t,e,n){if(arguments.length<2)throw new qo("actual","expected");jo===void 0&&Od(),em(t,e)&&Dr({actual:t,expected:e,message:n,operator:"notDeepStrictEqual",stackStartFn:Qz})}Me.strictEqual=function t(e,n,r){if(arguments.length<2)throw new qo("actual","expected");Gz(e,n)||Dr({actual:e,expected:n,message:r,operator:"strictEqual",stackStartFn:t})};Me.notStrictEqual=function t(e,n,r){if(arguments.length<2)throw new qo("actual","expected");Gz(e,n)&&Dr({actual:e,expected:n,message:r,operator:"notStrictEqual",stackStartFn:t})};var Hz=Ure(function t(e,n,r){var i=this;Wre(this,t),n.forEach(function(o){o in e&&(r!==void 0&&typeof r[o]=="string"&&Yv(e[o])&&Xv(e[o],r[o])?i[o]=r[o]:i[o]=e[o])})});function Xre(t,e,n,r,i,o){if(!(n in t)||!em(t[n],e[n])){if(!r){var s=new Hz(t,i),a=new Hz(e,i,t),c=new Bo({actual:s,expected:a,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=t,c.expected=e,c.operator=o.name,c}Dr({actual:t,expected:e,message:r,operator:o.name,stackStartFn:o})}}function Zz(t,e,n,r){if(typeof e!="function"){if(Yv(e))return Xv(e,t);if(arguments.length===2)throw new iu("expected",["Function","RegExp"],e);if(Ir(t)!=="object"||t===null){var i=new Bo({actual:t,expected:e,message:n,operator:"deepStrictEqual",stackStartFn:r});throw i.operator=r.name,i}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(o.length===0)throw new Kre("error",e,"may not be an empty object");return jo===void 0&&Od(),o.forEach(function(s){typeof t[s]=="string"&&Yv(e[s])&&Xv(e[s],t[s])||Xre(t,e,s,n,o,r)}),!0}return e.prototype!==void 0&&t instanceof e?!0:Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function Yz(t){if(typeof t!="function")throw new iu("fn","Function",t);try{t()}catch(e){return e}return tm}function $z(t){return Zre(t)||t!==null&&Ir(t)==="object"&&typeof t.then=="function"&&typeof t.catch=="function"}function Xz(t){return Promise.resolve().then(function(){var e;if(typeof t=="function"){if(e=t(),!$z(e))throw new Jre("instance of Promise","promiseFn",e)}else if($z(t))e=t;else throw new iu("promiseFn",["Function","Promise"],t);return Promise.resolve().then(function(){return e}).then(function(){return tm}).catch(function(n){return n})})}function eU(t,e,n,r){if(typeof n=="string"){if(arguments.length===4)throw new iu("error",["Object","Error","Function","RegExp"],n);if(Ir(e)==="object"&&e!==null){if(e.message===n)throw new zz("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===n)throw new zz("error/message",'The error "'.concat(e,'" is identical to the message.'));r=n,n=void 0}else if(n!=null&&Ir(n)!=="object"&&typeof n!="function")throw new iu("error",["Object","Error","Function","RegExp"],n);if(e===tm){var i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=r?": ".concat(r):".";var o=t.name==="rejects"?"rejection":"exception";Dr({actual:void 0,expected:n,operator:t.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:t})}if(n&&!Zz(e,n,r,t))throw e}function tU(t,e,n,r){if(e!==tm){if(typeof n=="string"&&(r=n,n=void 0),!n||Zz(e,n)){var i=r?": ".concat(r):".",o=t.name==="doesNotReject"?"rejection":"exception";Dr({actual:e,expected:n,operator:t.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}Me.throws=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];eU.apply(void 0,[t,Yz(e)].concat(r))};Me.rejects=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Xz(e).then(function(o){return eU.apply(void 0,[t,o].concat(r))})};Me.doesNotThrow=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];tU.apply(void 0,[t,Yz(e)].concat(r))};Me.doesNotReject=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Xz(e).then(function(o){return tU.apply(void 0,[t,o].concat(r))})};Me.ifError=function t(e){if(e!=null){var n="ifError got unwanted exception: ";Ir(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?n+=e.constructor.name:n+=e.message:n+=Zv(e);var r=new Bo({actual:e,expected:null,operator:"ifError",message:n,stackStartFn:t}),i=e.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var s=r.stack.split(`
`),a=0;a<o.length;a++){var c=s.indexOf(o[a]);if(c!==-1){s=s.slice(0,c);break}}r.stack="".concat(s.join(`
`),`
`).concat(o.join(`
`))}throw r}};function nU(t,e,n,r,i){if(!Yv(e))throw new iu("regexp","RegExp",e);var o=i==="match";if(typeof t!="string"||Xv(e,t)!==o){if(n instanceof Error)throw n;var s=!n;n=n||(typeof t!="string"?'The "string" argument must be of type string. Received type '+"".concat(Ir(t)," (").concat(Zv(t),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(Zv(e),`. Input:

`).concat(Zv(t),`
`));var a=new Bo({actual:t,expected:e,message:n,operator:i,stackStartFn:r});throw a.generatedMessage=s,a}}Me.match=function t(e,n,r){nU(e,n,r,t,"match")};Me.doesNotMatch=function t(e,n,r){nU(e,n,r,t,"doesNotMatch")};function rU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Jz.apply(void 0,[rU,e.length].concat(e))}Me.strict=Yre(rU,Me,{equal:Me.strictEqual,deepEqual:Me.deepStrictEqual,notEqual:Me.notStrictEqual,notDeepEqual:Me.notDeepStrictEqual});Me.strict.strict=Me.strict});var oU=h(L0=>{"use strict";Object.defineProperty(L0,"__esModule",{value:!0});function eie(t){return function(e,n){return new Promise((r,i)=>{t.call(this,e,n,(o,s)=>{o?i(o):r(s)})})}}L0.default=eie});var aU=h((q0,sU)=>{"use strict";var tie=q0&&q0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},nie=v_(),rie=tie(oU());function iie(t){return!!t&&typeof t.addRequest=="function"}function oie(t){return!!t&&typeof t.addRequest=="function"}function j0(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1)}function ou(t,e){return new ou.Agent(t,e)}(function(t){class e extends nie.EventEmitter{constructor(r,i){super(),this.promisifiedCallback=void 0;let o=i;typeof r=="function"?this.callback=r:r&&(o=r),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.options=o||{},this.maxFreeSockets=1,this.maxSockets=1,this.sockets=[],this.requests=[]}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:j0()?443:80}set defaultPort(r){this.explicitDefaultPort=r}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:j0()?"https:":"http:"}set protocol(r){this.explicitProtocol=r}callback(r,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(r,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=j0()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80);let s=Object.assign(Object.assign({},this.options),o);s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,r._last=!0,r.shouldKeepAlive=!1;let a=!1,c=null,u=this.timeout,l=this.freeSocket;function d(m){r._hadError||(r.emit("error",m),r._hadError=!0)}function p(){c=null,a=!0;let m=new Error(`A "socket" was not created for HTTP request before ${u}ms`);m.code="ETIMEOUT",d(m)}function f(m){a||(c!==null&&(clearTimeout(c),c=null),d(m))}function g(m){let y;function w(){l(y,s)}if(a)return;if(c!=null&&(clearTimeout(c),c=null),iie(m)||oie(m)){m.addRequest(r,s);return}if(m){y=m,y.on("free",w),r.onSocket(y);return}let b=new Error(`no Duplex stream was returned to agent-base for \`${r.method} ${r.path}\``);d(b)}if(typeof this.callback!="function"){d(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?this.promisifiedCallback=rie.default(this.callback):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(c=setTimeout(p,u)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{Promise.resolve(this.promisifiedCallback(r,s)).then(g,f)}catch(m){Promise.reject(m).catch(f)}}freeSocket(r,i){r.destroy()}destroy(){}}t.Agent=e})(ou||(ou={}));ou.prototype=ou.Agent.prototype;sU.exports=ou});var pU=h((Abe,dU)=>{"use strict";var cU=f_(),uU=h_(),sie=DB(),aie=qv(),lU=aU(),cie=Ws().inherits,Ks=m_()("https-proxy-agent");dU.exports=xd;function xd(t){if(!(this instanceof xd))return new xd(t);if(typeof t=="string"&&(t=sie.parse(t)),!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Ks("creating new HttpsProxyAgent instance: %o",t),lU.call(this,t);var e=Object.assign({},t);this.secureProxy=e.protocol?/^https:?$/i.test(e.protocol):!1,e.host=e.hostname||e.host,e.port=+e.port||(this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in e)&&(e.ALPNProtocols=["http 1.1"]),e.host&&e.path&&(delete e.path,delete e.pathname),this.proxy=e}cie(xd,lU);xd.prototype.callback=function(e,n,r){var i=this.proxy,o;this.secureProxy?o=uU.connect(i):o=cU.connect(i);var s=[],a=0;function c(){var C=o.read();C?f(C):o.once("readable",c)}function u(){o.removeListener("end",d),o.removeListener("error",p),o.removeListener("close",l),o.removeListener("readable",c)}function l(C){Ks("onclose had error %o",C)}function d(){Ks("onend")}function p(C){u(),r(C)}function f(C){s.push(C),a+=C.length;var _=Buffer.concat(s,a),U=_.toString("ascii");if(!~U.indexOf(`\r
\r
`)){Ks("have not received end of HTTP headers yet..."),c();return}var O=U.substring(0,U.indexOf(`\r
`)),de=+O.split(" ")[1];if(Ks("got proxy server response: %o",O),de==200){var ae=o;s=_=null,n.secureEndpoint&&(Ks("upgrading proxy-connected socket to TLS connection: %o",n.host),n.socket=o,n.servername=n.servername||n.host,n.host=null,n.hostname=null,n.port=null,ae=uU.connect(n)),u(),e.once("socket",uie),r(null,ae)}else u(),o.destroy(),o=new cU.Socket,o.readable=!0,s=_,e.once("socket",g),r(null,o)}function g(C){Ks("replaying proxy buffer for failed request"),aie(C.listenerCount("data")>0),C.push(s),s=null}o.on("error",p),o.on("close",l),o.on("end",d),c();var m=n.host+":"+n.port,y="CONNECT "+m+` HTTP/1.1\r
`,w=Object.assign({},i.headers);i.auth&&(w["Proxy-Authorization"]="Basic "+Buffer.from(i.auth).toString("base64"));var b=n.host;lie(n.port,n.secureEndpoint)||(b+=":"+n.port),w.Host=b,w.Connection="close",Object.keys(w).forEach(function(C){y+=C+": "+w[C]+`\r
`}),o.write(y+`\r
`)};function uie(t){t.resume()}function lie(t,e){return!!(!e&&t===80||e&&t===443)}});var hU=h((Mbe,fU)=>{"use strict";fU.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var V0=h(Xn=>{"use strict";var die=Xn&&Xn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),pie=Xn&&Xn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gU=Xn&&Xn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&die(e,t,n);return pie(e,t),e},B0=Xn&&Xn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.WebsocketMessageAdapter=void 0;var fie=gU(f_()),hie=gU(h_()),gie=B0(Vj()),vie=B0(pU()),mie=B0(hU()),yie=Bt(),Q=L(),nm=class t{constructor(e,n,r,i,o,s){if(!e)throw new Q.ArgumentNullError("uri");if(!r)throw new Q.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new Q.EventSource,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=Q.ConnectionState.None,this.privUri=e,this.privHeaders=o,this.privEnableCompression=s,this.privHeaders[yie.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===Q.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new Q.Deferred,this.privCertificateValidatedDeferral=new Q.Deferred,this.privConnectionState=Q.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!t.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let r=new URL(this.privUri).protocol;r?.toLocaleLowerCase()==="wss:"?r="https:":r?.toLocaleLowerCase()==="ws:"&&(r="http:"),e.agent.protocol=r,this.privWebsocketClient=new mie.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new Q.Queue,this.privDisconnectDeferral=new Q.Deferred,this.privSendMessageQueue=new Q.Queue,this.processSendQueue().catch(e=>{Q.Events.instance.onEvent(new Q.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new Q.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new Q.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=Q.ConnectionState.Connected,this.onEvent(new Q.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new Q.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new Q.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===Q.ConnectionState.Connecting?(this.privConnectionState=Q.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new Q.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=Q.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new Q.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(n=>{Q.Events.instance.onEvent(new Q.BackgroundEvent(n))})},this.privWebsocketClient.onmessage=e=>{let n=new Date().toISOString();if(this.privConnectionState===Q.ConnectionState.Connected){let r=new Q.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){let i=new Q.RawWebsocketMessage(Q.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new Q.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid binary message format. Error: ${o}`)})}else{let i=new Q.RawWebsocketMessage(Q.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new Q.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid text message format. Error: ${o}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==Q.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${Q.ConnectionState[this.privConnectionState]} state`);let n=new Q.Deferred,r=new Q.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then(i=>{r.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:n})},i=>{r.reject(`Error formatting the message. ${i}`)}),n.promise}read(){return this.privConnectionState!==Q.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==Q.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new Q.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(n){return Promise.reject(`websocket send error: ${n}`)}}onClose(e,n){return v(this,null,function*(){let r=`Connection closed. ${e}: ${n}`;this.privConnectionState=Q.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},r),yield this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(r)},r)})}processSendQueue(){return v(this,null,function*(){for(;;){let n=yield this.privSendMessageQueue.dequeue();if(!n)return;try{yield this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(r){n.sendStatusDeferral.reject(r)}}})}onEvent(e){this.privConnectionEvents.onEvent(e),Q.Events.instance.onEvent(e)}getAgent(){let e=new gie.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){let n={host:e.HostName,port:e.Port};return e.UserName?n.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:n.headers={},n.headers.requestOCSP="true",new vie.default(n)}createConnection(e,n){let r;if(n=ee(D({},n),{requestOCSP:!0,servername:n.host}),this.proxyInfo){let o=t.GetProxyAgent(this.proxyInfo);r=new Promise((s,a)=>{o.callback(e,n,(c,u)=>{c?a(c):s(u)})})}else n.secureEndpoint?r=Promise.resolve(hie.connect(n)):r=Promise.resolve(fie.connect(n));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};Xn.WebsocketMessageAdapter=nm;nm.forceNpmWebSocket=!1});var vU=h(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.WebsocketConnection=void 0;var z0=L(),Cie=V0(),U0=class{constructor(e,n,r,i,o,s=!1,a){if(this.privIsDisposed=!1,!e)throw new z0.ArgumentNullError("uri");if(!i)throw new z0.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(n){for(let l in n)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";let d=encodeURIComponent(l);c+=d;let p=n[l];p&&(p=encodeURIComponent(p),c+=`=${p}`),u++}}if(r){for(let l in r)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";let d=encodeURIComponent(r[l]);c+=`${l}=${d}`,u++}}this.privUri=e+c,this.privId=a||z0.createNoDashGuid(),this.privConnectionMessageAdapter=new Cie.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,o,r,s)}dispose(){return v(this,null,function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())})}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};rm.WebsocketConnection=U0});var mU=h(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.ReplayableAudioNode=void 0;var H0=class{constructor(e,n){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=n}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){let e=this.privReplayOffset-this.privBufferStartOffset,n=Math.round(e*this.privBytesPerSecond*1e-7);n%2!==0&&n++;let r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){let i=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new $0(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;let n=e-this.privBufferStartOffset,r=Math.round(n*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(let n of this.privBuffers){let r=n.byteOffset/this.privBytesPerSecond*1e7,i=r+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=r&&e<=i)return n.chunk.timeReceived}return 0}};im.ReplayableAudioNode=H0;var $0=class{constructor(e,n,r){this.chunk=e,this.serial=n,this.byteOffset=r}}});var K0=h(ei=>{"use strict";var Sie=ei&&ei.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),wie=ei&&ei.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bie=ei&&ei.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&Sie(e,t,n);return wie(e,t),e};Object.defineProperty(ei,"__esModule",{value:!0});ei.AudioFileWriter=void 0;var Nd=bie(a_()),W0=$(),G0=class{constructor(e){W0.Contracts.throwIfNullOrUndefined(Nd.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=Nd.openSync(e,"w")}set format(e){W0.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let n=0;this.privAudioFormat.hasHeader&&(n=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=Nd.createWriteStream("",{fd:this.privFd,start:n,autoClose:!1}))}write(e){W0.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),Nd.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),Nd.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};ei.AudioFileWriter=G0});var J0=h(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.PullAudioInputStreamImpl=er.PullAudioInputStream=er.PushAudioInputStreamImpl=er.PushAudioInputStream=er.AudioInputStream=void 0;var om=M(),Et=L(),yU=To(),Eie=I(),Iie=Oo(),kd=class{constructor(){}static createPushStream(e){return Fd.create(e)}static createPullStream(e,n){return Ld.create(e,n)}};er.AudioInputStream=kd;var Fd=class extends kd{static create(e){return new sm(e)}};er.PushAudioInputStream=Fd;var sm=class extends Fd{constructor(e){super(),e===void 0?this.privFormat=Iie.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=e,this.privEvents=new Et.EventSource,this.privId=yU.createNoDashGuid(),this.privStream=new Et.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new Et.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Et.AudioSourceReadyEvent(this.privId))}attach(e){return v(this,null,function*(){this.onEvent(new Et.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn();let n=this.privStream;return this.onEvent(new Et.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>v(this,null,function*(){return this.onEvent(new Et.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>n.read()}})}detach(e){this.onEvent(new Et.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:om.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:om.type.Stream})}onEvent(e){this.privEvents.onEvent(e),Et.Events.instance.onEvent(e)}toBuffer(e){let n=Buffer.alloc(e.byteLength),r=new Uint8Array(e);for(let i=0;i<n.length;++i)n[i]=r[i];return n}};er.PushAudioInputStreamImpl=sm;var Ld=class extends kd{constructor(){super()}static create(e,n){return new am(e,n)}};er.PullAudioInputStream=Ld;var am=class extends Ld{constructor(e,n){super(),n===void 0?this.privFormat=Eie.AudioStreamFormat.getDefaultInputFormat():this.privFormat=n,this.privEvents=new Et.EventSource,this.privId=yU.createNoDashGuid(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new Et.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Et.AudioSourceReadyEvent(this.privId))}attach(e){return v(this,null,function*(){return this.onEvent(new Et.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn(),this.onEvent(new Et.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new Et.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let n=0,r;for(;n<this.privBufferSize;){let i=new ArrayBuffer(this.privBufferSize-n),o=this.privCallback.read(i);if(r===void 0?r=i:new Int8Array(r).set(new Int8Array(i),n),o===0)break;n+=o}return Promise.resolve({buffer:r.slice(0,n),isEnd:this.privIsClosed||n===0,timeReceived:Date.now()})}}})}detach(e){this.onEvent(new Et.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:om.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:om.type.Stream})}onEvent(e){this.privEvents.onEvent(e),Et.Events.instance.onEvent(e)}};er.PullAudioInputStreamImpl=am});var Q0=h(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.SpeechSynthesisOutputFormat=void 0;var Die;(function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"})(Die=jd.SpeechSynthesisOutputFormat||(jd.SpeechSynthesisOutputFormat={}))});var su=h(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.AudioOutputFormatImpl=void 0;var oe=Q0(),Z=Oo(),cm=class t extends Z.AudioStreamFormatImpl{constructor(e,n,r,i,o,s,a,c,u){super(r,s,n,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=o,this.priAudioFormatString=a,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?t.getDefaultOutputFormat():t.fromSpeechSynthesisOutputFormatString(t.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new t(Z.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new t(Z.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new t(Z.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new t(Z.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new t(Z.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new t(Z.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new t(Z.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new t(Z.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new t(Z.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new t(Z.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new t(Z.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new t(Z.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new t(Z.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new t(Z.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new t(Z.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new t(Z.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new t(Z.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new t(Z.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new t(Z.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new t(Z.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new t(Z.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new t(Z.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new t(Z.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new t(Z.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new t(Z.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new t(Z.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new t(Z.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new t(Z.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new t(Z.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,e,e,!1);case"g722-16khz-64kbps":return new t(Z.AudioFormatTag.G722,1,16e3,8e3,2,16,e,e,!1);case"riff-16khz-16bit-mono-pcm":default:return new t(Z.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return t.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){let n=new DataView(this.privHeader);n.setUint32(4,e+this.privHeader.byteLength-8,!0),n.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);let n=new Uint8Array(e.byteLength+this.header.byteLength);return n.set(new Uint8Array(this.header),0),n.set(new Uint8Array(e),this.header.byteLength),n.buffer}};um.AudioOutputFormatImpl=cm;cm.SpeechSynthesisOutputFormatToString={[oe.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[oe.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[oe.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[oe.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[oe.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[oe.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[oe.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[oe.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[oe.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[oe.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[oe.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[oe.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[oe.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[oe.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"}});var Js=h(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.PushAudioOutputStreamImpl=tr.PushAudioOutputStream=tr.PullAudioOutputStreamImpl=tr.PullAudioOutputStream=tr.AudioOutputStream=void 0;var Z0=L(),_ie=$(),Rie=su(),qd=class{constructor(){}static createPullStream(){return Bd.create()}};tr.AudioOutputStream=qd;var Bd=class extends qd{static create(){return new lm}};tr.PullAudioOutputStream=Bd;var lm=class extends Bd{constructor(){super(),this.privId=Z0.createNoDashGuid(),this.privStream=new Z0.Stream}set format(e){e==null&&(this.privFormat=Rie.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return v(this,null,function*(){let n=new Int8Array(e),r=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return n.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);n.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<e.byteLength&&!this.privStream.isReadEnded;){let i=yield this.privStream.read();if(i!==void 0&&!i.isEnd){let o;i.buffer.byteLength>e.byteLength-r?(o=i.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-r))):o=i.buffer,n.set(new Int8Array(o),r),r+=o.byteLength}else this.privStream.readEnded()}return r})}write(e){_ie.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}};tr.PullAudioOutputStreamImpl=lm;var dm=class extends qd{constructor(){super()}static create(e){return new pm(e)}};tr.PushAudioOutputStream=dm;var pm=class extends dm{constructor(e){super(),this.privId=Z0.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}};tr.PushAudioOutputStreamImpl=pm});var Y0=h(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.AudioOutputConfigImpl=Vo.AudioConfigImpl=Vo.AudioConfig=void 0;var Qs=dt(),Pie=$(),Zs=I(),Tie=K0(),Aie=J0(),Mie=Js(),Vd=class t{static fromDefaultMicrophoneInput(){let e=new Qs.PcmRecorder(!0);return new zi(new Qs.MicAudioSource(e))}static fromMicrophoneInput(e){let n=new Qs.PcmRecorder(!0);return new zi(new Qs.MicAudioSource(n,e))}static fromWavFileInput(e,n="unnamedBuffer.wav"){return new zi(new Qs.FileAudioSource(e,n))}static fromStreamInput(e){if(e instanceof Zs.PullAudioInputStreamCallback)return new zi(new Aie.PullAudioInputStreamImpl(e));if(e instanceof Zs.AudioInputStream)return new zi(e);if(typeof MediaStream<"u"&&e instanceof MediaStream){let n=new Qs.PcmRecorder(!1);return new zi(new Qs.MicAudioSource(n,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new Ui(new Zs.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(e===void 0)return t.fromDefaultSpeakerOutput();if(e instanceof Zs.SpeakerAudioDestination)return new Ui(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new Ui(new Tie.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof Zs.PushAudioOutputStreamCallback)return new Ui(new Mie.PushAudioOutputStreamImpl(e));if(e instanceof Zs.PushAudioOutputStream)return new Ui(e);if(e instanceof Zs.PullAudioOutputStream)return new Ui(e);throw new Error("Not Supported Type")}};Vo.AudioConfig=Vd;var zi=class extends Vd{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,n){this.privSource.turnOff().then(()=>{e&&e()},r=>{n&&n(r)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,n){if(Pie.Contracts.throwIfNull(n,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(e,n);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(e,n){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(e,n);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}};Vo.AudioConfigImpl=zi;var Ui=class extends Vd{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}};Vo.AudioOutputConfigImpl=Ui});var CU=h(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.CancellationReason=void 0;var Oie;(function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"})(Oie=zd.CancellationReason||(zd.CancellationReason={}))});var SU=h(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.PullAudioInputStreamCallback=void 0;var X0=class{};fm.PullAudioInputStreamCallback=X0});var wU=h(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.PushAudioOutputStreamCallback=void 0;var eR=class{};hm.PushAudioOutputStreamCallback=eR});var EU=h(gm=>{"use strict";Object.defineProperty(gm,"__esModule",{value:!0});gm.KeywordRecognitionModel=void 0;var bU=$(),tR=class{constructor(){this.privDisposed=!1}static fromFile(e){throw bU.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw bU.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};gm.KeywordRecognitionModel=tR});var IU=h(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.SessionEventArgs=void 0;var nR=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}};vm.SessionEventArgs=nR});var DU=h(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.RecognitionEventArgs=void 0;var xie=I(),rR=class extends xie.SessionEventArgs{constructor(e,n){super(n),this.privOffset=e}get offset(){return this.privOffset}};mm.RecognitionEventArgs=rR});var _U=h(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.OutputFormat=void 0;var Nie;(function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"})(Nie=Ud.OutputFormat||(Ud.OutputFormat={}))});var RU=h(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.IntentRecognitionEventArgs=void 0;var kie=I(),iR=class extends kie.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};ym.IntentRecognitionEventArgs=iR});var PU=h(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.RecognitionResult=void 0;var oR=class{constructor(e,n,r,i,o,s,a,c,u,l){this.privResultId=e,this.privReason=n,this.privText=r,this.privDuration=i,this.privOffset=o,this.privLanguage=s,this.privLanguageDetectionConfidence=a,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};Cm.RecognitionResult=oR});var TU=h(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.SpeechRecognitionResult=void 0;var Fie=I(),sR=class extends Fie.RecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(e,n,r,i,o,s,a,u,l,d),this.privSpeakerId=c}get speakerId(){return this.privSpeakerId}};Sm.SpeechRecognitionResult=sR});var AU=h(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.IntentRecognitionResult=void 0;var Lie=I(),aR=class extends Lie.SpeechRecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(n,r,i,o,s,a,c,void 0,u,l,d),this.privIntentId=e}get intentId(){return this.privIntentId}};wm.IntentRecognitionResult=aR});var MU=h(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.LanguageUnderstandingModelImpl=uu.LanguageUnderstandingModel=void 0;var au=$(),bm=class{constructor(){}static fromEndpoint(e){au.Contracts.throwIfNull(e,"uri"),au.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");let n=new cu,r=e.host.indexOf(".");if(r===-1)throw new Error("Could not determine region from endpoint");n.region=e.host.substr(0,r);let i=e.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(n.appId=e.pathname.substr(i),n.subscriptionKey=e.searchParams.get("subscription-key"),n.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return n}static fromAppId(e){au.Contracts.throwIfNullOrWhitespace(e,"appId");let n=new cu;return n.appId=e,n}static fromSubscription(e,n,r){au.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),au.Contracts.throwIfNullOrWhitespace(n,"appId"),au.Contracts.throwIfNullOrWhitespace(r,"region");let i=new cu;return i.appId=n,i.region=r,i.subscriptionKey=e,i}};uu.LanguageUnderstandingModel=bm;var cu=class extends bm{};uu.LanguageUnderstandingModelImpl=cu});var xU=h(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.MeetingTranscriptionEventArgs=zo.ConversationTranscriptionEventArgs=zo.SpeechRecognitionEventArgs=void 0;var OU=I(),Em=class extends OU.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};zo.SpeechRecognitionEventArgs=Em;var cR=class extends OU.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};zo.ConversationTranscriptionEventArgs=cR;var uR=class extends Em{};zo.MeetingTranscriptionEventArgs=uR});var lu=h(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.CancellationEventArgsBase=void 0;var jie=I(),lR=class extends jie.RecognitionEventArgs{constructor(e,n,r,i,o){super(i,o),this.privReason=e,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};Im.CancellationEventArgsBase=lR});var NU=h(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.SpeechRecognitionCanceledEventArgs=void 0;var qie=lu(),dR=class extends qie.CancellationEventArgsBase{};Dm.SpeechRecognitionCanceledEventArgs=dR});var kU=h(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.TranslationRecognitionEventArgs=void 0;var Bie=I(),pR=class extends Bie.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};_m.TranslationRecognitionEventArgs=pR});var FU=h(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.TranslationSynthesisEventArgs=void 0;var Vie=I(),fR=class extends Vie.SessionEventArgs{constructor(e,n){super(n),this.privResult=e}get result(){return this.privResult}};Rm.TranslationSynthesisEventArgs=fR});var gR=h(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.TranslationRecognitionResult=void 0;var zie=I(),hR=class t extends zie.SpeechRecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(n,r,i,o,s,a,c,void 0,u,l,d),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new t(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}};Pm.TranslationRecognitionResult=hR});var LU=h(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.TranslationSynthesisResult=void 0;var vR=class{constructor(e,n){this.privReason=e,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}};Tm.TranslationSynthesisResult=vR});var jU=h(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.ResultReason=void 0;var Uie;(function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"})(Uie=Hd.ResultReason||(Hd.ResultReason={}))});var qU=h(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.SpeechConfigImpl=du.SpeechConfig=void 0;var $d=M(),Ys=$(),K=I(),Am=class{constructor(){}static fromSubscription(e,n){Ys.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),Ys.Contracts.throwIfNullOrWhitespace(n,"region");let r=new Xs;return r.setProperty(K.PropertyId.SpeechServiceConnection_Region,n),r.setProperty(K.PropertyId.SpeechServiceConnection_IntentRegion,n),r.setProperty(K.PropertyId.SpeechServiceConnection_Key,e),r}static fromEndpoint(e,n){Ys.Contracts.throwIfNull(e,"endpoint");let r=new Xs;return r.setProperty(K.PropertyId.SpeechServiceConnection_Endpoint,e.href),n!==void 0&&r.setProperty(K.PropertyId.SpeechServiceConnection_Key,n),r}static fromHost(e,n){Ys.Contracts.throwIfNull(e,"hostName");let r=new Xs;return r.setProperty(K.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(e.port===""?"":":"+e.port)),n!==void 0&&r.setProperty(K.PropertyId.SpeechServiceConnection_Key,n),r}static fromAuthorizationToken(e,n){Ys.Contracts.throwIfNull(e,"authorizationToken"),Ys.Contracts.throwIfNullOrWhitespace(n,"region");let r=new Xs;return r.setProperty(K.PropertyId.SpeechServiceConnection_Region,n),r.setProperty(K.PropertyId.SpeechServiceConnection_IntentRegion,n),r.authorizationToken=e,r}close(){}};du.SpeechConfig=Am;var Xs=class t extends Am{constructor(){super(),this.privProperties=new K.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=K.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(K.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(K.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(K.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(K.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return K.OutputFormat[this.privProperties.getProperty($d.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty($d.OutputFormatPropertyName,K.OutputFormat[e])}get endpointId(){return this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(K.PropertyId.SpeechServiceConnection_EndpointId,e)}setProperty(e,n){Ys.Contracts.throwIfNull(n,"value"),this.privProperties.setProperty(e,n)}getProperty(e,n){return this.privProperties.getProperty(e,n)}setProxy(e,n,r,i){this.setProperty(K.PropertyId[K.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(K.PropertyId[K.PropertyId.SpeechServiceConnection_ProxyPort],n),this.setProperty(K.PropertyId[K.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(K.PropertyId[K.PropertyId.SpeechServiceConnection_ProxyPassword],i)}setServiceProperty(e,n){let r=JSON.parse(this.privProperties.getProperty($d.ServicePropertiesPropertyName,"{}"));r[e]=n,this.privProperties.setProperty($d.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privProperties.setProperty(K.PropertyId.SpeechServiceResponse_ProfanityOption,K.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(K.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(K.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty($d.ForceDictationPropertyName,"true")}clone(){let e=new t;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(K.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(K.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return K.SpeechSynthesisOutputFormat[this.privProperties.getProperty(K.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(K.PropertyId.SpeechServiceConnection_SynthOutputFormat,K.SpeechSynthesisOutputFormat[e])}};du.SpeechConfigImpl=Xs});var BU=h(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.SpeechTranslationConfigImpl=pu.SpeechTranslationConfig=void 0;var Wd=M(),_r=$(),z=I(),Mm=class extends z.SpeechConfig{constructor(){super()}static fromSubscription(e,n){_r.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),_r.Contracts.throwIfNullOrWhitespace(n,"region");let r=new ea;return r.properties.setProperty(z.PropertyId.SpeechServiceConnection_Key,e),r.properties.setProperty(z.PropertyId.SpeechServiceConnection_Region,n),r}static fromAuthorizationToken(e,n){_r.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),_r.Contracts.throwIfNullOrWhitespace(n,"region");let r=new ea;return r.properties.setProperty(z.PropertyId.SpeechServiceAuthorization_Token,e),r.properties.setProperty(z.PropertyId.SpeechServiceConnection_Region,n),r}static fromHost(e,n){_r.Contracts.throwIfNull(e,"hostName");let r=new ea;return r.setProperty(z.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(e.port===""?"":":"+e.port)),n!==void 0&&r.setProperty(z.PropertyId.SpeechServiceConnection_Key,n),r}static fromEndpoint(e,n){_r.Contracts.throwIfNull(e,"endpoint"),_r.Contracts.throwIfNull(n,"subscriptionKey");let r=new ea;return r.properties.setProperty(z.PropertyId.SpeechServiceConnection_Endpoint,e.href),r.properties.setProperty(z.PropertyId.SpeechServiceConnection_Key,n),r}};pu.SpeechTranslationConfig=Mm;var ea=class extends Mm{constructor(){super(),this.privSpeechProperties=new z.PropertyCollection,this.outputFormat=z.OutputFormat.Simple}set authorizationToken(e){_r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){_r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return z.OutputFormat[this.privSpeechProperties.getProperty(Wd.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(Wd.OutputFormatPropertyName,z.OutputFormat[e])}get endpointId(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){_r.Contracts.throwIfNullOrWhitespace(e,"value");let n=this.targetLanguages;n.includes(e)||(n.push(e),this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){_r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_Region)}setProxy(e,n,r,i){this.setProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_ProxyPort],n),this.setProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_ProxyPassword],i)}getProperty(e,n){return this.privSpeechProperties.getProperty(e,n)}setProperty(e,n){this.privSpeechProperties.setProperty(e,n)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,n){let r=JSON.parse(this.privSpeechProperties.getProperty(Wd.ServicePropertiesPropertyName,"{}"));r[e]=n,this.privSpeechProperties.setProperty(Wd.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceResponse_ProfanityOption,z.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(Wd.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return z.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_SynthOutputFormat,z.SpeechSynthesisOutputFormat[e])}};pu.SpeechTranslationConfigImpl=ea});var yR=h(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.PropertyCollection=void 0;var VU=I(),mR=class t{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,n){let r;typeof e=="string"?r=e:r=VU.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===r)return this.privValues[i];if(n!==void 0)return String(n)}setProperty(e,n){let r;typeof e=="string"?r=e:r=VU.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===r){this.privValues[i]=n;return}this.privKeys.push(r),this.privValues.push(n)}clone(){let e=new t;for(let n=0;n<this.privKeys.length;n++)e.privKeys.push(this.privKeys[n]),e.privValues.push(this.privValues[n]);return e}mergeTo(e){this.privKeys.forEach(n=>{if(e.getProperty(n,void 0)===void 0){let r=this.getProperty(n);e.setProperty(n,r)}})}get keys(){return this.privKeys}};Om.PropertyCollection=mR});var xm=h(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.PropertyId=void 0;var Hie;(function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=16]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=25]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",t[t.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",t[t.Conversation_ApplicationId=46]="Conversation_ApplicationId",t[t.Conversation_DialogType=47]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=49]="Conversation_From_Id",t[t.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=56]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=57]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=59]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=67]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"})(Hie=Gd.PropertyId||(Gd.PropertyId={}))});var UU=h(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.Recognizer=void 0;var ta=M(),zU=L(),Nm=$(),km=I(),CR=class t{constructor(e,n,r){this.audioConfig=e!==void 0?e:km.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=n.clone(),this.privConnectionFactory=r,this.implCommonRecognizerSetup()}close(e,n){Nm.Contracts.throwIfDisposed(this.privDisposed),zU.marshalPromiseToCallbacks(this.dispose(!0),e,n)}get internalData(){return this.privReco}dispose(e){return v(this,null,function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return ta.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){ta.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e=typeof window<"u"?"Browser":"Node",n="unknown",r="unknown";typeof navigator<"u"&&(e=e+"/"+navigator.platform,n=navigator.userAgent,r=navigator.appVersion);let i=this.createRecognizerConfig(new ta.SpeechServiceConfig(new ta.Context(new ta.OS(e,n,r))));this.privReco=this.createServiceRecognizer(t.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,i)}recognizeOnceAsyncImpl(e){return v(this,null,function*(){Nm.Contracts.throwIfDisposed(this.privDisposed);let n=new zU.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(e,n.resolve,n.reject);let r=yield n.promise;return yield this.implRecognizerStop(),r})}startContinuousRecognitionAsyncImpl(e){return v(this,null,function*(){Nm.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return v(this,null,function*(){Nm.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return v(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuthFromProperties(e){let n=e.getProperty(km.PropertyId.SpeechServiceConnection_Key,void 0);return n&&n!==""?new ta.CognitiveSubscriptionKeyAuthentication(n):new ta.CognitiveTokenAuthentication(()=>{let i=e.getProperty(km.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)},()=>{let i=e.getProperty(km.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)})}};Fm.Recognizer=CR});var HU=h(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.SpeechRecognizer=void 0;var fu=M(),Lm=L(),Uo=$(),yn=I(),SR=class t extends yn.Recognizer{constructor(e,n){let r=e;Uo.Contracts.throwIfNull(r,"speechConfig"),Uo.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(yn.PropertyId.SpeechServiceConnection_RecoLanguage),yn.PropertyId[yn.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,r.properties,new fu.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(e,n,r){let i=e;return n.properties.mergeTo(i.properties),new t(e,r)}get endpointId(){return Uo.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(yn.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(yn.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Uo.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(yn.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return Uo.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(yn.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return Uo.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(fu.OutputFormatPropertyName,yn.OutputFormat[yn.OutputFormat.Simple])===yn.OutputFormat[yn.OutputFormat.Simple]?yn.OutputFormat.Simple:yn.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,n){Lm.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(fu.RecognitionMode.Interactive),e,n)}startContinuousRecognitionAsync(e,n){Lm.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(fu.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,n){Lm.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}startKeywordRecognitionAsync(e,n,r){Uo.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,n){Uo.Contracts.throwIfDisposed(this.privDisposedRecognizer),Lm.marshalPromiseToCallbacks(this.dispose(!0),e,n)}dispose(e){return v(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ze(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new fu.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new fu.SpeechServiceRecognizer(e,n,o,i,this)}};jm.SpeechRecognizer=SR});var $U=h(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.IntentRecognizer=void 0;var na=M(),qm=L(),zt=$(),Hi=I(),wR=class t extends Hi.Recognizer{constructor(e,n){zt.Contracts.throwIfNullOrUndefined(e,"speechConfig");let r=e;zt.Contracts.throwIfNullOrUndefined(r,"speechConfig"),super(n,r.properties,new na.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=r.properties,zt.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Hi.PropertyId.SpeechServiceConnection_RecoLanguage),Hi.PropertyId[Hi.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(Hi.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(Hi.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(Hi.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,n){if(zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){let r=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",r.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(r.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}qm.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(na.RecognitionMode.Interactive),e,n)}startContinuousRecognitionAsync(e,n){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){let r=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",r.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(r.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}qm.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(na.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,n){qm.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}startKeywordRecognitionAsync(e,n,r){zt.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e,n){if(e)try{e()}catch(r){n&&n(r)}}addIntent(e,n){zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),zt.Contracts.throwIfNullOrWhitespace(n,"intentId"),zt.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([n,e])}addIntentWithLanguageModel(e,n,r){zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),zt.Contracts.throwIfNullOrWhitespace(e,"intentId"),zt.Contracts.throwIfNull(n,"model");let i=n;zt.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privAddedLmIntents[e]=new na.AddedLmIntent(i,r)}addAllIntents(e,n){zt.Contracts.throwIfNull(e,"model");let r=e;zt.Contracts.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privUmbrellaIntent=new na.AddedLmIntent(r,n)}close(e,n){zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),qm.marshalPromiseToCallbacks(this.dispose(!0),e,n)}createRecognizerConfig(e){return new na.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new na.IntentServiceRecognizer(e,n,o,i,this)}dispose(e){return v(this,null,function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield Ze(t.prototype,this,"dispose").call(this,e))})}buildSpeechContext(){let e,n,r,i=[];this.privUmbrellaIntent!==void 0&&(e=this.privUmbrellaIntent.modelImpl.appId,n=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(let o of Object.keys(this.privAddedLmIntents)){let s=this.privAddedLmIntents[o];if(e===void 0)e=s.modelImpl.appId;else if(e!==s.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(n===void 0)n=s.modelImpl.region;else if(n!==s.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(r===void 0)r=s.modelImpl.subscriptionKey;else if(r!==s.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");let a="luis/"+e+"-PRODUCTION#"+o;i.push(a)}return{Intent:{id:e,key:r===void 0?this.privProperties.getProperty(Hi.PropertyId[Hi.PropertyId.SpeechServiceConnection_Key]):r,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?i:["luis/"+e+"-PRODUCTION"]}}};Bm.IntentRecognizer=wR});var WU=h(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.VoiceProfileType=void 0;var $ie;(function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"})($ie=Kd.VoiceProfileType||(Kd.VoiceProfileType={}))});var IR=h(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.ConnectionMessageImpl=hu.ConnectionMessage=void 0;var GU=Bt(),KU=L(),Wie=yR(),Gie=xm(),bR=class{};hu.ConnectionMessage=bR;var ER=class{constructor(e){this.privConnectionMessage=e,this.privProperties=new Wie.PropertyCollection,this.privConnectionMessage.headers[GU.HeaderNames.ConnectionId]&&this.privProperties.setProperty(Gie.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[GU.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(n=>{this.privProperties.setProperty(n,this.privConnectionMessage.headers[n])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>e.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===KU.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===KU.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}};hu.ConnectionMessageImpl=ER});var PR=h(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.Connection=void 0;var DR=M(),_R=L(),JU=IR(),Kie=$(),Jd=I(),RR=class t{static fromRecognizer(e){let n=e.internalData,r=new t;return r.privInternalData=n,r.setupEvents(),r}static fromSynthesizer(e){let n=e.internalData,r=new t;return r.privInternalData=n,r.setupEvents(),r}openConnection(e,n){_R.marshalPromiseToCallbacks(this.privInternalData.connect(),e,n)}closeConnection(e,n){if(this.privInternalData instanceof DR.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");_R.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,n)}setMessageProperty(e,n,r){if(Kie.Contracts.throwIfNullOrWhitespace(n,"propertyName"),this.privInternalData instanceof DR.ServiceRecognizerBase){if(e.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(n,r)}else if(this.privInternalData instanceof DR.SynthesisAdapterBase){if(e.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(n,r)}}sendMessageAsync(e,n,r,i){_R.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,n),r,i)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{e.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new Jd.ConnectionEventArgs(e.connectionId)):e.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new Jd.ConnectionEventArgs(e.connectionId)):e.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new Jd.ConnectionMessageEventArgs(new JU.ConnectionMessageImpl(e.message))):e.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new Jd.ConnectionMessageEventArgs(new JU.ConnectionMessageImpl(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new Jd.ServiceEventArgs(e.jsonString,e.name))})}};Vm.Connection=RR});var QU=h(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.TranslationRecognizer=void 0;var Qd=M(),zm=L(),Jie=PR(),Rr=$(),Be=I(),TR=class t extends Be.Recognizer{constructor(e,n,r){let i=e;Rr.Contracts.throwIfNull(i,"speechConfig"),super(n,i.properties,r||new Qd.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&Rr.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationVoice),Be.PropertyId[Be.PropertyId.SpeechServiceConnection_TranslationVoice]),Rr.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages),Be.PropertyId[Be.PropertyId.SpeechServiceConnection_TranslationToLanguages]),Rr.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_RecoLanguage),Be.PropertyId[Be.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(e,n,r){let i=e;return n.properties.mergeTo(i.properties),new t(e,r)}get speechRecognitionLanguage(){return Rr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return Rr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return Rr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Be.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(Be.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,n){Rr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),zm.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Qd.RecognitionMode.Interactive),e,n)}startContinuousRecognitionAsync(e,n){zm.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Qd.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,n){zm.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}removeTargetLanguage(e){if(Rr.Contracts.throwIfNullOrUndefined(e,"language to be removed"),this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){let n=this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),r=n.indexOf(e);r>-1&&(n.splice(r,1),this.properties.setProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")),this.updateLanguages(n))}}addTargetLanguage(e){Rr.Contracts.throwIfNullOrUndefined(e,"language to be added");let n=[];this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(n=this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),n.includes(e)||(n.push(e),this.properties.setProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")))):(this.properties.setProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),n=[e]),this.updateLanguages(n)}close(e,n){Rr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),zm.marshalPromiseToCallbacks(this.dispose(!0),e,n)}onConnection(){}dispose(e){return v(this,null,function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield Ze(t.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(e){return new Qd.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new Qd.TranslationServiceRecognizer(e,n,o,i,this)}updateLanguages(e){let n=Jie.Connection.fromRecognizer(this);n&&(n.setMessageProperty("speech.context","translationcontext",{to:e}),n.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}};Um.TranslationRecognizer=TR});var ZU=h(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.Translations=void 0;var Qie=I(),AR=class{constructor(){this.privMap=new Qie.PropertyCollection}get languages(){return this.privMap.keys}get(e,n){return this.privMap.getProperty(e,n)}set(e,n){this.privMap.setProperty(e,n)}};Hm.Translations=AR});var YU=h(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.NoMatchReason=void 0;var Zie;(function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(Zie=Zd.NoMatchReason||(Zd.NoMatchReason={}))});var XU=h(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.NoMatchDetails=void 0;var MR=M(),$m=I(),OR=class t{constructor(e){this.privReason=e}static fromResult(e){let n=MR.SimpleSpeechPhrase.fromJSON(e.json),r=$m.NoMatchReason.NotRecognized;switch(n.RecognitionStatus){case MR.RecognitionStatus.BabbleTimeout:r=$m.NoMatchReason.InitialBabbleTimeout;break;case MR.RecognitionStatus.InitialSilenceTimeout:r=$m.NoMatchReason.InitialSilenceTimeout;break;default:r=$m.NoMatchReason.NotRecognized;break}return new t(r)}get reason(){return this.privReason}};Wm.NoMatchDetails=OR});var e2=h(Gm=>{"use strict";Object.defineProperty(Gm,"__esModule",{value:!0});Gm.TranslationRecognitionCanceledEventArgs=void 0;var xR=class{constructor(e,n,r,i,o){this.privCancelReason=n,this.privErrorDetails=r,this.privResult=o,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};Gm.TranslationRecognitionCanceledEventArgs=xR});var t2=h(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.IntentRecognitionCanceledEventArgs=void 0;var Yie=I(),NR=class extends Yie.IntentRecognitionEventArgs{constructor(e,n,r,i,o,s){super(i,o,s),this.privReason=e,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};Km.IntentRecognitionCanceledEventArgs=NR});var FR=h(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.CancellationDetailsBase=void 0;var kR=class{constructor(e,n,r){this.privReason=e,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};Jm.CancellationDetailsBase=kR});var n2=h(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.CancellationDetails=void 0;var Qm=M(),Xie=FR(),gu=I(),LR=class t extends Xie.CancellationDetailsBase{constructor(e,n,r){super(e,n,r)}static fromResult(e){let n=gu.CancellationReason.Error,r=gu.CancellationErrorCode.NoError;if(e instanceof gu.RecognitionResult&&e.json){let i=Qm.SimpleSpeechPhrase.fromJSON(e.json);n=Qm.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus)}return e.properties&&(r=gu.CancellationErrorCode[e.properties.getProperty(Qm.CancellationErrorCodePropertyName,gu.CancellationErrorCode[gu.CancellationErrorCode.NoError])]),new t(n,e.errorDetails||Qm.EnumTranslation.implTranslateErrorDetails(r),r)}};Zm.CancellationDetails=LR});var r2=h(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.CancellationErrorCode=void 0;var eoe;(function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"})(eoe=Yd.CancellationErrorCode||(Yd.CancellationErrorCode={}))});var i2=h(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.ConnectionEventArgs=void 0;var toe=I(),jR=class extends toe.SessionEventArgs{};Ym.ConnectionEventArgs=jR});var o2=h(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.ServiceEventArgs=void 0;var noe=I(),qR=class extends noe.SessionEventArgs{constructor(e,n,r){super(r),this.privJsonResult=e,this.privEventName=n}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};Xm.ServiceEventArgs=qR});var s2=h(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.PhraseListGrammar=void 0;var BR=class t{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){let n=e.internalData;return new t(n)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}};ey.PhraseListGrammar=BR});var ny=h(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.DialogServiceConfigImpl=vu.DialogServiceConfig=void 0;var roe=$(),Xd=I(),ty=class{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};vu.DialogServiceConfig=ty;var VR=class extends ty{constructor(){super(),this.privSpeechConfig=new Xd.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){roe.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,n){this.privSpeechConfig.setProperty(e,n)}getProperty(e,n){return this.privSpeechConfig.getProperty(e)}setProxy(e,n,r,i){this.setProperty(Xd.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(Xd.PropertyId.SpeechServiceConnection_ProxyPort,`${n}`),r&&this.setProperty(Xd.PropertyId.SpeechServiceConnection_ProxyUserName,r),i&&this.setProperty(Xd.PropertyId.SpeechServiceConnection_ProxyPassword,i)}setServiceProperty(e,n,r){this.privSpeechConfig.setServiceProperty(e,n)}close(){}};vu.DialogServiceConfigImpl=VR});var a2=h(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.BotFrameworkConfig=void 0;var ra=$(),$i=ny(),Cn=I(),zR=class extends $i.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,n,r){ra.Contracts.throwIfNullOrWhitespace(e,"subscription"),ra.Contracts.throwIfNullOrWhitespace(n,"region");let i=new $i.DialogServiceConfigImpl;return i.setProperty(Cn.PropertyId.Conversation_DialogType,$i.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(Cn.PropertyId.SpeechServiceConnection_Key,e),i.setProperty(Cn.PropertyId.SpeechServiceConnection_Region,n),r&&i.setProperty(Cn.PropertyId.Conversation_ApplicationId,r),i}static fromAuthorizationToken(e,n,r){ra.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),ra.Contracts.throwIfNullOrWhitespace(n,"region");let i=new $i.DialogServiceConfigImpl;return i.setProperty(Cn.PropertyId.Conversation_DialogType,$i.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(Cn.PropertyId.SpeechServiceAuthorization_Token,e),i.setProperty(Cn.PropertyId.SpeechServiceConnection_Region,n),r&&i.setProperty(Cn.PropertyId.Conversation_ApplicationId,r),i}static fromHost(e,n,r){ra.Contracts.throwIfNullOrUndefined(e,"host");let i=e instanceof URL?e:new URL(`wss://${e}.convai.speech.azure.us`);ra.Contracts.throwIfNullOrUndefined(i,"resolvedHost");let o=new $i.DialogServiceConfigImpl;return o.setProperty(Cn.PropertyId.Conversation_DialogType,$i.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(Cn.PropertyId.SpeechServiceConnection_Host,i.toString()),n!==void 0&&o.setProperty(Cn.PropertyId.SpeechServiceConnection_Key,n),o}static fromEndpoint(e,n){ra.Contracts.throwIfNull(e,"endpoint");let r=new $i.DialogServiceConfigImpl;return r.setProperty(Cn.PropertyId.Conversation_DialogType,$i.DialogServiceConfig.DialogTypes.BotFramework),r.setProperty(Cn.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),n!==void 0&&r.setProperty(Cn.PropertyId.SpeechServiceConnection_Key,n),r}};ry.BotFrameworkConfig=zR});var c2=h(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});iy.CustomCommandsConfig=void 0;var ia=$(),ep=ny(),ti=I(),UR=class extends ep.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,n,r){ia.Contracts.throwIfNullOrWhitespace(e,"applicationId"),ia.Contracts.throwIfNullOrWhitespace(n,"subscription"),ia.Contracts.throwIfNullOrWhitespace(r,"region");let i=new ep.DialogServiceConfigImpl;return i.setProperty(ti.PropertyId.Conversation_DialogType,ep.DialogServiceConfig.DialogTypes.CustomCommands),i.setProperty(ti.PropertyId.Conversation_ApplicationId,e),i.setProperty(ti.PropertyId.SpeechServiceConnection_Key,n),i.setProperty(ti.PropertyId.SpeechServiceConnection_Region,r),i}static fromAuthorizationToken(e,n,r){ia.Contracts.throwIfNullOrWhitespace(e,"applicationId"),ia.Contracts.throwIfNullOrWhitespace(n,"authorizationToken"),ia.Contracts.throwIfNullOrWhitespace(r,"region");let i=new ep.DialogServiceConfigImpl;return i.setProperty(ti.PropertyId.Conversation_DialogType,ep.DialogServiceConfig.DialogTypes.CustomCommands),i.setProperty(ti.PropertyId.Conversation_ApplicationId,e),i.setProperty(ti.PropertyId.SpeechServiceAuthorization_Token,n),i.setProperty(ti.PropertyId.SpeechServiceConnection_Region,r),i}set applicationId(e){ia.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(ti.PropertyId.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(ti.PropertyId.Conversation_ApplicationId)}};iy.CustomCommandsConfig=UR});var Wi=h(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.QueryParameterNames=void 0;var Fe=class{};oy.QueryParameterNames=Fe;Fe.BotId="botid";Fe.CustomSpeechDeploymentId="cid";Fe.CustomVoiceDeploymentId="deploymentId";Fe.EnableAudioLogging="storeAudio";Fe.EnableLanguageId="lidEnabled";Fe.EnableWordLevelTimestamps="wordLevelTimestamps";Fe.EndSilenceTimeoutMs="endSilenceTimeoutMs";Fe.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";Fe.Format="format";Fe.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";Fe.Language="language";Fe.Profanity="profanity";Fe.RequestBotStatusMessages="enableBotMessageStatus";Fe.StableIntermediateThreshold="stableIntermediateThreshold";Fe.StableTranslation="stableTranslation";Fe.TestHooks="testhooks";Fe.Postprocessing="postprocessing";Fe.CtsMeetingId="meetingId";Fe.CtsDeviceId="deviceId";Fe.CtsIsParticipant="isParticipant";Fe.EnableAvatar="enableTalkingAvatar"});var nr=h(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0});sy.ConnectionFactoryBase=void 0;var ioe=M(),Ho=I(),$o=Wi(),HR=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,n,r){new Map([[Ho.PropertyId.Speech_SegmentationSilenceTimeoutMs,$o.QueryParameterNames.SegmentationSilenceTimeoutMs],[Ho.PropertyId.SpeechServiceConnection_EnableAudioLogging,$o.QueryParameterNames.EnableAudioLogging],[Ho.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,$o.QueryParameterNames.EndSilenceTimeoutMs],[Ho.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,$o.QueryParameterNames.InitialSilenceTimeoutMs],[Ho.PropertyId.SpeechServiceResponse_PostProcessingOption,$o.QueryParameterNames.Postprocessing],[Ho.PropertyId.SpeechServiceResponse_ProfanityOption,$o.QueryParameterNames.Profanity],[Ho.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,$o.QueryParameterNames.EnableWordLevelTimestamps],[Ho.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,$o.QueryParameterNames.StableIntermediateThreshold]]).forEach((s,a)=>{this.setUrlParameter(a,s,e,n,r)});let o=JSON.parse(e.parameters.getProperty(ioe.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach(s=>{n[s]=o[s]})}setUrlParameter(e,n,r,i,o){let s=r.parameters.getProperty(e,void 0);s&&(!o||o.search(n)===-1)&&(i[n]=s.toLocaleLowerCase())}};sy.ConnectionFactoryBase=HR});var p2=h(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});cy.DialogConnectionFactory=void 0;var u2=dt(),ooe=M(),Nn=I(),l2=nr(),soe=M(),d2=Bt(),ay=Wi(),tp=class t extends l2.ConnectionFactoryBase{create(e,n,r){let i=e.parameters.getProperty(Nn.PropertyId.Conversation_ApplicationId,""),o=e.parameters.getProperty(Nn.PropertyId.Conversation_DialogType),s=e.parameters.getProperty(Nn.PropertyId.SpeechServiceConnection_Region),a=e.parameters.getProperty(Nn.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),c=e.parameters.getProperty(Nn.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),u={};u[d2.HeaderNames.ConnectionId]=r,u[ay.QueryParameterNames.Format]=e.parameters.getProperty(ooe.OutputFormatPropertyName,Nn.OutputFormat[Nn.OutputFormat.Simple]).toLowerCase(),u[ay.QueryParameterNames.Language]=a,u[ay.QueryParameterNames.RequestBotStatusMessages]=c,i&&(u[ay.QueryParameterNames.BotId]=i,o===Nn.DialogServiceConfig.DialogTypes.CustomCommands&&(u[d2.HeaderNames.CustomCommandsAppId]=i));let l=o===Nn.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",d=o===Nn.DialogServiceConfig.DialogTypes.CustomCommands?"v1":o===Nn.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",p={};n.token!=null&&n.token!==""&&(p[n.headerName]=n.token);let f=e.parameters.getProperty(Nn.PropertyId.SpeechServiceConnection_Endpoint,"");if(!f){let m=l2.ConnectionFactoryBase.getHostSuffix(s),y=e.parameters.getProperty(Nn.PropertyId.SpeechServiceConnection_Host,`wss://${s}.${t.BaseUrl}${m}`);f=`${y.endsWith("/")?y:y+"/"}${l}${t.ApiKey}/${d}`}this.setCommonUrlParams(e,u,f);let g=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new u2.WebsocketConnection(f,u,p,new soe.WebsocketMessageFormatter,u2.ProxyInfo.fromRecognizerConfig(e),g,r)}};cy.DialogConnectionFactory=tp;tp.ApiKey="api";tp.BaseUrl="convai.speech"});var f2=h(ly=>{"use strict";Object.defineProperty(ly,"__esModule",{value:!0});ly.DialogServiceConnector=void 0;var aoe=p2(),$R=M(),mu=L(),uy=$(),coe=I(),Wo=xm(),WR=class t extends coe.Recognizer{constructor(e,n){let r=e;uy.Contracts.throwIfNull(e,"dialogConfig"),super(n,r.properties,new aoe.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=r.properties.clone();let i=this.buildAgentConfig();this.privReco.agentConfig.set(i)}connect(e,n){mu.marshalPromiseToCallbacks(this.privReco.connect(),e,n)}disconnect(e,n){mu.marshalPromiseToCallbacks(this.privReco.disconnect(),e,n)}get authorizationToken(){return this.properties.getProperty(Wo.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){uy.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Wo.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(Wo.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(Wo.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,n){if(this.isTurnComplete){uy.Contracts.throwIfDisposed(this.privIsDisposed);let i=v(this,null,function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;let o=new mu.Deferred;yield this.privReco.recognize($R.RecognitionMode.Conversation,o.resolve,o.reject);let s=yield o.promise;return yield this.implRecognizerStop(),s});i.catch(()=>{this.dispose(!0).catch(()=>{})}),mu.marshalPromiseToCallbacks(i.finally(()=>{this.isTurnComplete=!0}),e,n)}}sendActivityAsync(e,n,r){mu.marshalPromiseToCallbacks(this.privReco.sendMessage(e),n,r)}close(e,n){uy.Contracts.throwIfDisposed(this.privIsDisposed),mu.marshalPromiseToCallbacks(this.dispose(!0),e,n)}dispose(e){return v(this,null,function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield Ze(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new $R.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new $R.DialogServiceAdapter(e,n,o,i,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(Wo.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(Wo.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(Wo.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(Wo.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};ly.DialogServiceConnector=WR});var h2=h(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});dy.ActivityReceivedEventArgs=void 0;var GR=class{constructor(e,n){this.privActivity=e,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};dy.ActivityReceivedEventArgs=GR});var g2=h(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0});py.TurnStatusResponsePayload=void 0;var KR=class t{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}};py.TurnStatusResponsePayload=KR});var v2=h(fy=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0});fy.TurnStatusReceivedEventArgs=void 0;var uoe=g2(),JR=class{constructor(e){this.privTurnStatus=uoe.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};fy.TurnStatusReceivedEventArgs=JR});var m2=h(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.ServicePropertyChannel=void 0;var loe;(function(t){t[t.UriQueryParameter=0]="UriQueryParameter"})(loe=np.ServicePropertyChannel||(np.ServicePropertyChannel={}))});var y2=h(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.ProfanityOption=void 0;var doe;(function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"})(doe=rp.ProfanityOption||(rp.ProfanityOption={}))});var C2=h(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});hy.BaseAudioPlayer=void 0;var poe=wr(),foe=I(),hoe=Oo(),QR=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,e===void 0&&(e=foe.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,n,r){try{this.ensureInitializedContext();let i=this.formatAudioData(e),o=new Float32Array(this.samples.length+i.length);o.set(this.samples,0),o.set(i,this.samples.length),this.samples=o,n&&n()}catch(i){r&&r(i)}}stopAudio(e,n){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{e&&e()},r=>{n&&n(r)}),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();let e=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},e)}}createAudioContext(){this.audioContext=hoe.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new poe.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,n){let r=new Float32Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]/n;return r}updateAudioBuffer(){if(this.samples.length===0)return;let e=this.audioFormat.channels,n=this.audioContext.createBufferSource(),r=this.samples.length/e,i=this.audioContext.createBuffer(e,r,this.audioFormat.samplesPerSec);for(let o=0;o<e;o++){let s=o,a=i.getChannelData(o);for(let c=0;c<this.samples.length;c++,s+=e)a[c]=this.samples[s]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),n.buffer=i,n.connect(this.gainNode),n.start(this.startTime),this.startTime+=i.duration,this.samples=new Float32Array}playAudio(e){return v(this,null,function*(){this.audioContext===null&&this.createAudioContext();let n=this.audioContext.createBufferSource(),r=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,i=>{n.buffer=i,n.connect(r),n.start(0)})})}};hy.BaseAudioPlayer=QR});var S2=h(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.ConnectionMessageEventArgs=void 0;var ZR=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};gy.ConnectionMessageEventArgs=ZR});var w2=h(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});vy.VoiceProfile=void 0;var YR=class{constructor(e,n){this.privId=e,this.privProfileType=n}get profileId(){return this.privId}get profileType(){return this.privProfileType}};vy.VoiceProfile=YR});var E2=h(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.VoiceProfileEnrollmentCancellationDetails=yu.VoiceProfileEnrollmentResult=void 0;var b2=M(),It=I(),XR=class t{constructor(e,n,r){this.privReason=e,this.privProperties=new It.PropertyCollection,this.privReason!==It.ResultReason.Canceled?n&&(this.privDetails=JSON.parse(n),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=It.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=r,this.privProperties.setProperty(b2.CancellationErrorCodePropertyName,It.CancellationErrorCode[It.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){let n=[];for(let r of e.value){let i=r.enrollmentStatus.toLowerCase()==="enrolling"?It.ResultReason.EnrollingVoiceProfile:r.enrollmentStatus.toLowerCase()==="enrolled"?It.ResultReason.EnrolledVoiceProfile:It.ResultReason.Canceled,o=new t(i,null,null);o.privDetails=this.getIdentificationDetails(r),n.push(o)}return n}static FromVerificationProfileList(e){let n=[];for(let r of e.value){let i=r.enrollmentStatus.toLowerCase()==="enrolling"?It.ResultReason.EnrollingVoiceProfile:r.enrollmentStatus.toLowerCase()==="enrolled"?It.ResultReason.EnrolledVoiceProfile:It.ResultReason.Canceled,o=new t(i,null,null);o.privDetails=this.getVerificationDetails(r),n.push(o)}return n}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}};yu.VoiceProfileEnrollmentResult=XR;var eP=class t extends It.CancellationDetailsBase{constructor(e,n,r){super(e,n,r)}static fromResult(e){let n=It.CancellationReason.Error,r=It.CancellationErrorCode.NoError;return e.properties&&(r=It.CancellationErrorCode[e.properties.getProperty(b2.CancellationErrorCodePropertyName,It.CancellationErrorCode[It.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)}};yu.VoiceProfileEnrollmentCancellationDetails=eP});var D2=h(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.VoiceProfileCancellationDetails=Cu.VoiceProfileResult=void 0;var I2=M(),goe=$(),ni=I(),tP=class{constructor(e,n){this.privReason=e,this.privProperties=new ni.PropertyCollection,e===ni.ResultReason.Canceled&&(goe.Contracts.throwIfNullOrUndefined(n,"statusText"),this.privErrorDetails=n,this.privProperties.setProperty(I2.CancellationErrorCodePropertyName,ni.CancellationErrorCode[ni.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};Cu.VoiceProfileResult=tP;var nP=class t extends ni.CancellationDetailsBase{constructor(e,n,r){super(e,n,r)}static fromResult(e){let n=ni.CancellationReason.Error,r=ni.CancellationErrorCode.NoError;return e.properties&&(r=ni.CancellationErrorCode[e.properties.getProperty(I2.CancellationErrorCodePropertyName,ni.CancellationErrorCode[ni.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)}};Cu.VoiceProfileCancellationDetails=nP});var _2=h(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});my.VoiceProfilePhraseResult=void 0;var voe=$(),moe=I(),rP=class extends moe.VoiceProfileResult{constructor(e,n,r,i){super(e,n),this.privPhrases=[],voe.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=r,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}};my.VoiceProfilePhraseResult=rP});var R2=h(Cy=>{"use strict";Object.defineProperty(Cy,"__esModule",{value:!0});Cy.VoiceProfileClient=void 0;var iP=M(),yoe=Y0(),yy=$(),oa=I(),oP=class t extends oa.Recognizer{constructor(e){yy.Contracts.throwIfNullOrUndefined(e,"speechConfig");let n=e;yy.Contracts.throwIfNull(n,"speechConfig"),super(yoe.AudioConfig.fromStreamInput(oa.AudioInputStream.createPushStream()),n.properties,new iP.VoiceProfileConnectionFactory),this.privProperties=n.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(oa.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){yy.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(oa.PropertyId.SpeechServiceAuthorization_Token,e)}createProfileAsync(e,n){return v(this,null,function*(){let r=yield this.privVoiceAdapter.createProfile(e,n);return new oa.VoiceProfile(r[0],e)})}retrieveEnrollmentResultAsync(e){return v(this,null,function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(e)})}getAllProfilesAsync(e){return v(this,null,function*(){return this.privVoiceAdapter.getAllProfiles(e)})}getActivationPhrasesAsync(e,n){return v(this,null,function*(){return this.privVoiceAdapter.getActivationPhrases(e,n)})}enrollProfileAsync(e,n){return v(this,null,function*(){let r=n;return yy.Contracts.throwIfNullOrUndefined(r,"audioConfig"),this.audioConfig=n,this.privVoiceAdapter.SpeakerAudioSource=r,this.privVoiceAdapter.enrollProfile(e)})}deleteProfileAsync(e){return v(this,null,function*(){return this.privVoiceAdapter.deleteProfile(e)})}resetProfileAsync(e){return v(this,null,function*(){return this.privVoiceAdapter.resetProfile(e)})}close(){return v(this,null,function*(){yield this.dispose(!0)})}createServiceRecognizer(e,n,r,i){let o=r;return new iP.VoiceServiceRecognizer(e,n,o,i,this)}dispose(e){return v(this,null,function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&(yield Ze(t.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(e){return new iP.RecognizerConfig(e,this.properties)}getResult(e,n){return new oa.VoiceProfileResult(e.ok?n:oa.ResultReason.Canceled,e.statusText)}};Cy.VoiceProfileClient=oP});var P2=h(Sy=>{"use strict";Object.defineProperty(Sy,"__esModule",{value:!0});Sy.SpeakerRecognizer=void 0;var sP=M(),sa=$(),aP=I(),cP=class t extends aP.Recognizer{constructor(e,n){sa.Contracts.throwIfNullOrUndefined(e,"speechConfig");let r=e;sa.Contracts.throwIfNullOrUndefined(r,"speechConfig"),super(n,r.properties,new sP.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=n,sa.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=r.properties}get authorizationToken(){return this.properties.getProperty(aP.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){sa.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(aP.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e){return v(this,null,function*(){return sa.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)})}close(){return v(this,null,function*(){sa.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)})}recognizeSpeakerOnceAsyncImpl(e){return v(this,null,function*(){sa.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();let n=yield this.privReco.recognizeSpeaker(e);return yield this.implRecognizerStop(),n})}implRecognizerStop(){return v(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}createRecognizerConfig(e){return new sP.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new sP.SpeakerServiceRecognizer(e,n,o,i,this)}dispose(e){return v(this,null,function*(){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,yield Ze(t.prototype,this,"dispose").call(this,e))})}};Sy.SpeakerRecognizer=cP});var T2=h(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});wy.SpeakerIdentificationModel=void 0;var Coe=$(),Soe=I(),uP=class t{constructor(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],Coe.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),e.length===0)throw new Error("Empty Voice Profiles array");for(let n of e){if(n.profileType!==Soe.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+n.profileId);this.privVoiceProfiles.push(n),this.privProfileIds.push(n.profileId)}}static fromProfiles(e){return new t(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};wy.SpeakerIdentificationModel=uP});var M2=h(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});by.SpeakerVerificationModel=void 0;var woe=$(),A2=I(),lP=class t{constructor(e){if(woe.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===A2.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new t(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===A2.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};by.SpeakerVerificationModel=lP});var dP=h(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.LanguageIdMode=void 0;var boe;(function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"})(boe=ip.LanguageIdMode||(ip.LanguageIdMode={}))});var x2=h(Ey=>{"use strict";Object.defineProperty(Ey,"__esModule",{value:!0});Ey.AutoDetectSourceLanguageConfig=void 0;var Eoe=M(),Ioe=$(),ri=I(),O2=dP(),pP=class t{constructor(){this.privProperties=new ri.PropertyCollection,this.privProperties.setProperty(ri.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=O2.LanguageIdMode.AtStart}static fromOpenRange(){let e=new t;return e.properties.setProperty(ri.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,Eoe.AutoDetectSourceLanguagesOpenRangeOptionName),e}static fromLanguages(e){Ioe.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");let n=new t;return n.properties.setProperty(ri.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),n}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");let n=new t,r=[];return e.forEach(i=>{if(r.push(i.language),i.endpointId!==void 0&&i.endpointId!==""){let o=i.language+ri.PropertyId.SpeechServiceConnection_EndpointId.toString();n.properties.setProperty(o,i.endpointId)}}),n.properties.setProperty(ri.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.join()),n}get properties(){return this.privProperties}set mode(e){e===O2.LanguageIdMode.Continuous?(this.privProperties.setProperty(ri.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(ri.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(ri.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(ri.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}};Ey.AutoDetectSourceLanguageConfig=pP});var k2=h(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0});Iy.AutoDetectSourceLanguageResult=void 0;var N2=$(),fP=class t{constructor(e,n){N2.Contracts.throwIfNullOrUndefined(e,"language"),N2.Contracts.throwIfNullOrUndefined(n,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=n}static fromResult(e){return new t(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new t(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};Iy.AutoDetectSourceLanguageResult=fP});var F2=h(Dy=>{"use strict";Object.defineProperty(Dy,"__esModule",{value:!0});Dy.SourceLanguageConfig=void 0;var Doe=$(),hP=class t{constructor(e,n){Doe.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=n}static fromLanguage(e,n){return new t(e,n)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};Dy.SourceLanguageConfig=hP});var j2=h(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.SpeakerRecognitionCancellationDetails=Gi.SpeakerRecognitionResult=Gi.SpeakerRecognitionResultType=void 0;var L2=M(),Sn=I(),_y;(function(t){t[t.Verify=0]="Verify",t[t.Identify=1]="Identify"})(_y=Gi.SpeakerRecognitionResultType||(Gi.SpeakerRecognitionResultType={}));var gP=class{constructor(e,n=Sn.ResultReason.RecognizedSpeaker,r=Sn.CancellationErrorCode.NoError,i=""){this.privProperties=new Sn.PropertyCollection;let o=e.scenario==="TextIndependentIdentification"?_y.Identify:_y.Verify;this.privReason=n,this.privReason!==Sn.ResultReason.Canceled?o===_y.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=Sn.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,e.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=Sn.ResultReason.NoMatch),e.verificationResult.profileId!==void 0&&e.verificationResult.profileId!==""&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=i,this.privProperties.setProperty(L2.CancellationErrorCodePropertyName,Sn.CancellationErrorCode[r])),this.privProperties.setProperty(Sn.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};Gi.SpeakerRecognitionResult=gP;var vP=class t extends Sn.CancellationDetailsBase{constructor(e,n,r){super(e,n,r)}static fromResult(e){let n=Sn.CancellationReason.Error,r=Sn.CancellationErrorCode.NoError;return e.properties&&(r=Sn.CancellationErrorCode[e.properties.getProperty(L2.CancellationErrorCodePropertyName,Sn.CancellationErrorCode[Sn.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)}};Gi.SpeakerRecognitionCancellationDetails=vP});var mP=h(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.ConversationImpl=Su.Conversation=void 0;var Se=M(),op=L(),T=$(),Ce=I(),Ry=class{constructor(){}static createConversationAsync(e,n,r,i){T.Contracts.throwIfNullOrUndefined(e,Se.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),T.Contracts.throwIfNullOrUndefined(e.region,Se.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!e.subscriptionKey&&!e.getProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceAuthorization_Token])&&T.Contracts.throwIfNullOrUndefined(e.subscriptionKey,Se.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let o,s,a;return typeof n=="string"?(o=new sp(e,n),op.marshalPromiseToCallbacks(v(this,null,function*(){}),r,i)):(o=new sp(e),s=n,a=r,o.createConversationAsync(()=>{s&&s()},c=>{a&&a(c)})),o}};Su.Conversation=Ry;var sp=class extends Ry{constructor(e,n){if(super(),this.privErrors=Se.ConversationConnectionConfig.restErrors,this.onConnected=o=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,o)}catch{}},this.onDisconnected=o=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,o)}catch{}finally{this.close(!1)}},this.onCanceled=(o,s)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,s)}catch{}},this.onParticipantUpdateCommandReceived=(o,s)=>{try{let a=this.privParticipants.getParticipant(s.id);if(a!==void 0){switch(s.key){case Se.ConversationTranslatorCommandTypes.changeNickname:a.displayName=s.value;break;case Se.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=s.value;break;case Se.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=s.value;break;case Se.ConversationTranslatorCommandTypes.setMute:a.isMuted=s.value;break;case Se.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=s.value;break}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.Updated,[this.toParticipant(a)],s.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(o,s)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=a.isHost?!1:s.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.Updated,this.toParticipants(!1),s.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(o,s)=>{try{let a=this.privParticipants.addOrUpdateParticipant(s.participant);a!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],s.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(o,s)=>{try{let a=this.privParticipants.getParticipant(s.participant.id);a!==void 0&&(this.privParticipants.deleteParticipant(s.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],s.sessionId)))}catch{}},this.onTranslationReceived=(o,s)=>{try{switch(s.command){case Se.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new Ce.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break;case Se.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new Ce.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break;case Se.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new Ce.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break}}catch{}},this.onParticipantsListReceived=(o,s)=>{try{if(s.sessionToken!==void 0&&s.sessionToken!==null&&(this.privRoom.token=s.sessionToken),this.privParticipants.participants=[...s.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),s.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(Ce.PropertyId.ConversationTranslator_Name);a!==void 0&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch{}},this.onConversationExpiration=(o,s)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,s)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new Ce.PropertyCollection,this.privManager=new Se.ConversationManager,e.getProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceConnection_RecoLanguage],Se.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceConnection_RecoLanguage]),n)this.privConversationId=n;else{e.targetLanguages.length===0&&e.addTargetLanguage(this.privLanguage),e.getProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceResponse_ProfanityOption])||e.setProfanity(Ce.ProfanityOption.Masked);let s=e.getProperty(Ce.PropertyId[Ce.PropertyId.ConversationTranslator_Name]);s==null&&(s="Host"),T.Contracts.throwIfNullOrTooLong(s,"nickname",50),T.Contracts.throwIfNullOrTooShort(s,"nickname",2),e.setProperty(Ce.PropertyId[Ce.PropertyId.ConversationTranslator_Name],s)}this.privConfig=e;let i=e;T.Contracts.throwIfNull(i,"speechConfig"),this.privProperties=i.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Se.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){let e=this.conversationId,n=this.participants.map(o=>({id:o.id,preferredLanguage:o.preferredLanguage,voice:o.voice})),r={};for(let o of Se.ConversationConnectionConfig.transcriptionEventKeys){let s=this.properties.getProperty(o,"");s!==""&&(r[o]=s)}return{id:e,participants:n,conversationProperties:r}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(e){T.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),this.privManager.createOrJoin(this.privProperties,void 0,r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),n),this.privRoom=r,this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}startConversationAsync(e,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=Se.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}addParticipantAsync(e,n,r){T.Contracts.throwIfNullOrUndefined(e,"Participant"),op.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),n,r)}joinConversationAsync(e,n,r,i,o){try{T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),T.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),T.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,s=>{T.Contracts.throwIfNullOrUndefined(s,this.privErrors.permissionDeniedConnect),this.privRoom=s,this.privConfig.authorizationToken=s.cognitiveSpeechAuthToken,i&&i(s.cognitiveSpeechAuthToken)},s=>{this.handleError(s,o)})}catch(s){this.handleError(s,o)}}deleteConversationAsync(e,n){op.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,n)}deleteConversationImplAsync(){return v(this,null,function*(){T.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),T.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endConversationAsync(e,n){op.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,n)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,n){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}muteAllParticipantsAsync(e,n){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}muteParticipantAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(n,r)},o=>{this.handleError(o,r)})}catch(i){this.handleError(i,r)}}removeParticipantAsync(e,n,r){try{if(T.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))op.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),n,r);else{T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);let i="";typeof e=="string"?i=e:e.hasOwnProperty("id")?i=e.id:e.hasOwnProperty("userId")&&(i=e.userId),T.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(s=>s.id===i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),()=>{this.handleCallback(n,r)},s=>{this.handleError(s,r)})}}catch(i){this.handleError(i,r)}}unlockConversationAsync(e,n){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}unmuteAllParticipantsAsync(e,n){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}unmuteParticipantAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(n,r)},o=>{this.handleError(o,r)})}catch(i){this.handleError(i,r)}}sendTextMessageAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}setTranslatedLanguagesAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}changeNicknameAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return v(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this})}getKeepAlive(){let e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(this.privParticipants.addOrUpdateParticipant(e)!==void 0&&this.privTranscriberRecognizer){let r=this.conversationInfo;return r.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(r,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let n=this.conversationInfo;return n.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(n,"leave")}close(e){return v(this,null,function*(){try{this.privIsConnected=!1,yield this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(n){throw n}e&&this.dispose()})}handleCallback(e,n){if(e){try{e()}catch(r){n&&n(r)}e=void 0}}handleError(e,n){if(n)if(e instanceof Error){let r=e;n(r.name+": "+r.message)}else n(e)}toParticipants(e){let n=this.privParticipants.participants.map(r=>this.toParticipant(r));return e?n:n.filter(r=>r.isHost===!1)}toParticipant(e){return new Ce.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,n){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:n})}getLockCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(e,"nickname"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),T.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:Se.ConversationTranslatorMessageTypes.instantMessage})}};Su.ConversationImpl=sp});var q2=h(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});Py.ConversationCommon=void 0;var yP=class{constructor(e){this.privAudioConfig=e}handleCallback(e,n){if(e){try{e()}catch(r){n&&n(r)}e=void 0}}handleError(e,n){if(n)if(e instanceof Error){let r=e;n(r.name+": "+r.message)}else n(e)}};Py.ConversationCommon=yP});var B2=h(Ty=>{"use strict";Object.defineProperty(Ty,"__esModule",{value:!0});Ty.ConversationExpirationEventArgs=void 0;var _oe=I(),CP=class extends _oe.SessionEventArgs{constructor(e,n){super(n),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}};Ty.ConversationExpirationEventArgs=CP});var V2=h(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0});Ay.ConversationParticipantsChangedEventArgs=void 0;var Roe=I(),SP=class extends Roe.SessionEventArgs{constructor(e,n,r){super(r),this.privReason=e,this.privParticipant=n}get reason(){return this.privReason}get participants(){return this.privParticipant}};Ay.ConversationParticipantsChangedEventArgs=SP});var z2=h(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.ConversationTranslationCanceledEventArgs=void 0;var Poe=lu(),wP=class extends Poe.CancellationEventArgsBase{};My.ConversationTranslationCanceledEventArgs=wP});var U2=h(Oy=>{"use strict";Object.defineProperty(Oy,"__esModule",{value:!0});Oy.ConversationTranslationEventArgs=void 0;var Toe=I(),bP=class extends Toe.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};Oy.ConversationTranslationEventArgs=bP});var H2=h(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});xy.ConversationTranslationResult=void 0;var Aoe=gR(),EP=class extends Aoe.TranslationRecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(n,i,o,s,a,c,void 0,void 0,u,l,d),this.privId=e,this.privOrigLang=r}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};xy.ConversationTranslationResult=EP});var DP=h(Ny=>{"use strict";Object.defineProperty(Ny,"__esModule",{value:!0});Ny.StringUtils=void 0;var IP=class{static formatString(e,n){if(!e)return"";if(!n)return e;let r="",i="",o=c=>{r+=c},s=c=>{i+=c},a=o;for(let c=0;c<e.length;c++){let u=e[c],l=c+1<e.length?e[c+1]:"";switch(u){case"{":l==="{"?(a("{"),c++):a=s;break;case"}":l==="}"?(a("}"),c++):(n.hasOwnProperty(i)&&(r+=n[i]),a=o,i="");break;default:a(u);break}}return r}};Ny.StringUtils=IP});var G2=h(Ly=>{"use strict";Object.defineProperty(Ly,"__esModule",{value:!0});Ly.ConversationTranslatorConnectionFactory=void 0;var _P=dt(),$2=DP(),Moe=$(),ky=I(),Ooe=Bt(),rr=Wi(),W2=nr(),RP=M(),Fy=class t extends W2.ConnectionFactoryBase{constructor(e){super(),Moe.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(e,n,r){let i=e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",o=this.privConvGetter().room,s=o.cognitiveSpeechRegion||e.parameters.getProperty(ky.PropertyId.SpeechServiceConnection_Region,""),a={hostSuffix:W2.ConnectionFactoryBase.getHostSuffix(s),path:t.CTS_VIRT_MIC_PATH,region:encodeURIComponent(s)};a[rr.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(ky.PropertyId.SpeechServiceConnection_RecoLanguage,"")),a[rr.QueryParameterNames.CtsMeetingId]=encodeURIComponent(o.roomId),a[rr.QueryParameterNames.CtsDeviceId]=encodeURIComponent(o.participantId),a[rr.QueryParameterNames.CtsIsParticipant]=o.isHost?"":"&"+rr.QueryParameterNames.CtsIsParticipant;let c="",u={},l={};if(i){c=e.parameters.getProperty(ky.PropertyId.SpeechServiceConnection_Endpoint),c||(c="wss://"+e.parameters.getProperty(ky.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),c=$2.StringUtils.formatString(c,a);let p=new URL(c);p.searchParams.forEach((g,m)=>{u[m]=g}),new RP.TranscriberConnectionFactory().setQueryParams(u,e,c),u[rr.QueryParameterNames.CtsMeetingId]=a[rr.QueryParameterNames.CtsMeetingId],u[rr.QueryParameterNames.CtsDeviceId]=a[rr.QueryParameterNames.CtsDeviceId],o.isHost||(u[rr.QueryParameterNames.CtsIsParticipant]=""),rr.QueryParameterNames.Format in u||(u[rr.QueryParameterNames.Format]="simple"),p.searchParams.forEach((g,m)=>{p.searchParams.set(m,u[m]),delete u[m]}),c=p.toString()}else{let p=new RP.TranslationConnectionFactory;c=p.getEndpointUrl(e,!0),c=$2.StringUtils.formatString(c,a),p.setQueryParams(u,e,c)}l[Ooe.HeaderNames.ConnectionId]=r,l[_P.RestConfigBase.configParams.token]=o.token,n.token&&(l[n.headerName]=n.token);let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new _P.WebsocketConnection(c,u,l,new RP.WebsocketMessageFormatter,_P.ProxyInfo.fromRecognizerConfig(e),d,r)}};Ly.ConversationTranslatorConnectionFactory=Fy;Fy.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"});var J2=h(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.ConversationTranslator=aa.SpeechState=void 0;var ap=M(),xoe=G2(),jy=L(),Pr=$(),Oe=I(),Noe=mP(),K2=qy(),Tr;(function(t){t[t.Inactive=0]="Inactive",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected"})(Tr=aa.SpeechState||(aa.SpeechState={}));var PP=class extends Oe.TranslationRecognizer{constructor(e,n,r,i){super(e,n,new xoe.ConversationTranslatorConnectionFactory(i)),this.privSpeechState=Tr.Inactive,r&&(this.privTranslator=r,this.sessionStarted=()=>{this.privSpeechState=Tr.Connected},this.sessionStopped=()=>{this.privSpeechState=Tr.Inactive},this.recognizing=(o,s)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,s)},this.recognized=(o,s)=>v(this,null,function*(){s.result?.errorDetails?(yield this.cancelSpeech(),this.fireCancelEvent(s.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,s)}),this.canceled=()=>v(this,null,function*(){if(this.privSpeechState!==Tr.Inactive)try{yield this.cancelSpeech()}catch{this.privSpeechState=Tr.Inactive}}))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=Tr.Connected}onCancelSpeech(){return v(this,null,function*(){this.privSpeechState=Tr.Inactive,yield this.cancelSpeech()})}fireCancelEvent(e){try{if(this.privTranslator.canceled){let n=new K2.ConversationTranslationCanceledEventArgs(Oe.CancellationReason.Error,e,Oe.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,n)}}catch{}}cancelSpeech(){return v(this,null,function*(){try{this.stopContinuousRecognitionAsync(),yield this.privReco?.disconnect(),this.privSpeechState=Tr.Inactive}catch{}})}},TP=class extends K2.ConversationCommon{constructor(e){super(e),this.privErrors=ap.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new Oe.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===Tr.Connected||this.privCTRecognizer.state===Tr.Connecting||this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,n){let r=JSON.parse(this.privProperties.getProperty(ap.ServicePropertiesPropertyName,"{}"));r[e]=n,this.privProperties.setProperty(ap.ServicePropertiesPropertyName,JSON.stringify(r))}joinConversationAsync(e,n,r,i,o){try{if(typeof e=="string"){Pr.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Pr.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),o);let s=r;(s==null||s==="")&&(s=ap.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=Oe.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(Oe.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(s),this.privSpeechTranslationConfig.setProperty(Oe.PropertyId[Oe.PropertyId.SpeechServiceConnection_RecoLanguage],s),this.privSpeechTranslationConfig.setProperty(Oe.PropertyId[Oe.PropertyId.ConversationTranslator_Name],n);let a=[Oe.PropertyId.SpeechServiceConnection_Host,Oe.PropertyId.ConversationTranslator_Host,Oe.PropertyId.SpeechServiceConnection_Endpoint,Oe.PropertyId.SpeechServiceConnection_ProxyHostName,Oe.PropertyId.SpeechServiceConnection_ProxyPassword,Oe.PropertyId.SpeechServiceConnection_ProxyPort,Oe.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(let u of a){let l=this.privProperties.getProperty(u);if(l){let d=typeof u=="string"?u:Oe.PropertyId[u];this.privSpeechTranslationConfig.setProperty(d,l)}}let c=JSON.parse(this.privProperties.getProperty(ap.ServicePropertiesPropertyName,"{}"));for(let u of Object.keys(c))this.privSpeechTranslationConfig.setServiceProperty(u,c[u],Oe.ServicePropertyChannel.UriQueryParameter);this.privConversation=new Noe.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,n,s,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),o),this.privSpeechTranslationConfig.authorizationToken=u,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(i,o)},l=>{this.handleError(l,o)})},u=>{this.handleError(u,o)})}else typeof e=="object"?(Pr.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Pr.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(Oe.PropertyId.ConversationTranslator_Name,n),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,Pr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),Pr.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(r,i)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),i)}catch(s){this.handleError(s,typeof r=="string"?o:i)}}leaveConversationAsync(e,n){jy.marshalPromiseToCallbacks(v(this,null,function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()}),e,n)}sendTextMessageAsync(e,n,r){try{Pr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Pr.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,n,r)}catch(i){this.handleError(i,r)}}startTranscribingAsync(e,n){jy.marshalPromiseToCallbacks(v(this,null,function*(){try{Pr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Pr.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&(yield this.connectTranslatorRecognizer()),Pr.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(r){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),r}}),e,n)}stopTranscribingAsync(e,n){jy.marshalPromiseToCallbacks(v(this,null,function*(){try{if(!this.privIsSpeaking){yield this.cancelSpeech();return}this.privIsSpeaking=!1,yield new Promise((r,i)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(r,i)})}catch{yield this.cancelSpeech()}}),e,n)}isDisposed(){return this.privIsDisposed}dispose(e,n,r){jy.marshalPromiseToCallbacks(v(this,null,function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)}),n,r)}cancelSpeech(){return v(this,null,function*(){try{this.privIsSpeaking=!1,yield this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}})}connectTranslatorRecognizer(){return v(this,null,function*(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=Oe.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(Oe.PropertyId[Oe.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(Oe.PropertyId[Oe.PropertyId.SpeechServiceConnection_Key],"");let e=()=>this.privConversation;this.privCTRecognizer=new PP(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw yield this.cancelSpeech(),e}})}startContinuousRecognition(){return new Promise((e,n)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,n)})}};aa.ConversationTranslator=TP});var Q2=h(By=>{"use strict";Object.defineProperty(By,"__esModule",{value:!0});By.ConversationTranscriber=void 0;var cp=M(),AP=L(),ca=$(),on=I(),MP=class t extends on.Recognizer{constructor(e,n){let r=e;ca.Contracts.throwIfNull(r,"speechConfig"),ca.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(on.PropertyId.SpeechServiceConnection_RecoLanguage),on.PropertyId[on.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,r.properties,new cp.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(on.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,n,r){let i=e;return n.properties.mergeTo(i.properties),new t(e,r)}get endpointId(){return ca.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(on.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(on.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){ca.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(on.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return ca.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(on.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return ca.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(cp.OutputFormatPropertyName,on.OutputFormat[on.OutputFormat.Simple])===on.OutputFormat[on.OutputFormat.Simple]?on.OutputFormat.Simple:on.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,n){AP.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(cp.RecognitionMode.Conversation),e,n)}stopTranscribingAsync(e,n){AP.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}close(e,n){ca.Contracts.throwIfDisposed(this.privDisposedRecognizer),AP.marshalPromiseToCallbacks(this.dispose(!0),e,n)}dispose(e){return v(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ze(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new cp.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return i.isSpeakerDiarizationEnabled=!0,new cp.ConversationTranscriptionServiceRecognizer(e,n,o,i,this)}};By.ConversationTranscriber=MP});var Z2=h(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.Participant=wu.User=void 0;var koe=I(),OP=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};wu.User=OP;var xP=class t{constructor(e,n,r,i,o,s,a,c){this.privId=e,this.privAvatar=n,this.privDisplayName=r,this.privIsHost=i,this.privIsMuted=o,this.privIsUsingTts=s,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new koe.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,n,r){return new t(e,"",e,!1,!1,!1,n,r)}};wu.Participant=xP});var Y2=h(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.ParticipantChangedReason=void 0;var Foe;(function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"})(Foe=up.ParticipantChangedReason||(up.ParticipantChangedReason={}))});var X2=h(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.MeetingImpl=bu.Meeting=void 0;var Ee=M(),lp=L(),A=$(),Le=I(),Vy=class{constructor(){}static createMeetingAsync(e,n,r,i){if(A.Contracts.throwIfNullOrUndefined(e,Ee.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),A.Contracts.throwIfNullOrUndefined(e.region,Ee.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),A.Contracts.throwIfNull(n,"meetingId"),n.length===0)throw new Error("meetingId cannot be empty");!e.subscriptionKey&&!e.getProperty(Le.PropertyId[Le.PropertyId.SpeechServiceAuthorization_Token])&&A.Contracts.throwIfNullOrUndefined(e.subscriptionKey,Ee.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let o=new zy(e,n);return lp.marshalPromiseToCallbacks(v(this,null,function*(){}),r,i),o}};bu.Meeting=Vy;var zy=class extends Vy{constructor(e,n){super(),this.privErrors=Ee.ConversationConnectionConfig.restErrors,this.onConnected=o=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,o)}catch{}},this.onDisconnected=o=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,o)}catch{}finally{this.close(!1)}},this.onCanceled=(o,s)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,s)}catch{}},this.onParticipantUpdateCommandReceived=(o,s)=>{try{let a=this.privParticipants.getParticipant(s.id);if(a!==void 0){switch(s.key){case Ee.ConversationTranslatorCommandTypes.changeNickname:a.displayName=s.value;break;case Ee.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=s.value;break;case Ee.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=s.value;break;case Ee.ConversationTranslatorCommandTypes.setMute:a.isMuted=s.value;break;case Ee.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=s.value;break}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Le.ConversationParticipantsChangedEventArgs(Le.ParticipantChangedReason.Updated,[this.toParticipant(a)],s.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(o,s)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=a.isHost?!1:s.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Le.ConversationParticipantsChangedEventArgs(Le.ParticipantChangedReason.Updated,this.toParticipants(!1),s.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(o,s)=>{try{let a=this.privParticipants.addOrUpdateParticipant(s.participant);a!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Le.ConversationParticipantsChangedEventArgs(Le.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],s.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(o,s)=>{try{let a=this.privParticipants.getParticipant(s.participant.id);a!==void 0&&(this.privParticipants.deleteParticipant(s.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Le.ConversationParticipantsChangedEventArgs(Le.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],s.sessionId)))}catch{}},this.onTranslationReceived=(o,s)=>{try{switch(s.command){case Ee.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new Le.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break;case Ee.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new Le.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break;case Ee.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new Le.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break}}catch{}},this.onParticipantsListReceived=(o,s)=>{try{if(s.sessionToken!==void 0&&s.sessionToken!==null&&(this.privRoom.token=s.sessionToken),this.privParticipants.participants=[...s.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Le.ConversationParticipantsChangedEventArgs(Le.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),s.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(Le.PropertyId.ConversationTranslator_Name);a!==void 0&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch{}},this.onConversationExpiration=(o,s)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,s)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new Le.PropertyCollection,this.privManager=new Ee.ConversationManager,e.getProperty(Le.PropertyId[Le.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(Le.PropertyId[Le.PropertyId.SpeechServiceConnection_RecoLanguage],Ee.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(Le.PropertyId[Le.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=n,this.privConfig=e;let i=e;A.Contracts.throwIfNull(i,"speechConfig"),this.privProperties=i.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Ee.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){let e=this.meetingId,n=this.participants.map(o=>({id:o.id,preferredLanguage:o.preferredLanguage,voice:o.voice})),r={};for(let o of Ee.ConversationConnectionConfig.transcriptionEventKeys){let s=this.properties.getProperty(o,"");s!==""&&(r[o]=s)}return{id:e,participants:n,meetingProperties:r}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(e){A.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),this.privManager.createOrJoin(this.privProperties,void 0,r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),n),this.privRoom=r,this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}startMeetingAsync(e,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}addParticipantAsync(e,n,r){A.Contracts.throwIfNullOrUndefined(e,"Participant"),lp.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),n,r)}joinMeetingAsync(e,n,r,i,o){try{A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),A.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,s=>{A.Contracts.throwIfNullOrUndefined(s,this.privErrors.permissionDeniedConnect),this.privRoom=s,this.privConfig.authorizationToken=s.cognitiveSpeechAuthToken,i&&i(s.cognitiveSpeechAuthToken)},s=>{this.handleError(s,o)})}catch(s){this.handleError(s,o)}}deleteMeetingAsync(e,n){lp.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),e,n)}deleteMeetingImplAsync(){return v(this,null,function*(){A.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),A.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endMeetingAsync(e,n){lp.marshalPromiseToCallbacks(this.endMeetingImplAsync(),e,n)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}muteAllParticipantsAsync(e,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}muteParticipantAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(n,r)},o=>{this.handleError(o,r)})}catch(i){this.handleError(i,r)}}removeParticipantAsync(e,n,r){try{if(A.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))lp.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),n,r);else{A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);let i="";typeof e=="string"?i=e:e.hasOwnProperty("id")?i=e.id:e.hasOwnProperty("userId")&&(i=e.userId),A.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(s=>s.id===i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),()=>{this.handleCallback(n,r)},s=>{this.handleError(s,r)})}}catch(i){this.handleError(i,r)}}unlockMeetingAsync(e,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}unmuteAllParticipantsAsync(e,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}unmuteParticipantAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(n,r)},o=>{this.handleError(o,r)})}catch(i){this.handleError(i,r)}}sendTextMessageAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}setTranslatedLanguagesAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}changeNicknameAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return v(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this})}getKeepAlive(){let e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(this.privParticipants.addOrUpdateParticipant(e)!==void 0&&this.privTranscriberRecognizer){let r=this.meetingInfo;return r.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(r,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let n=this.meetingInfo;return n.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(n,"leave")}close(e){return v(this,null,function*(){try{this.privIsConnected=!1,yield this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(n){throw n}e&&this.dispose()})}handleCallback(e,n){if(e){try{e()}catch(r){n&&n(r)}e=void 0}}handleError(e,n){if(n)if(e instanceof Error){let r=e;n(r.name+": "+r.message)}else n(e)}toParticipants(e){let n=this.privParticipants.participants.map(r=>this.toParticipant(r));return e?n:n.filter(r=>r.isHost===!1)}toParticipant(e){return new Le.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,n){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:n})}getLockCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(e,"nickname"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),A.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:Ee.ConversationTranslatorMessageTypes.instantMessage})}};bu.MeetingImpl=zy});var eH=h(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0});Uy.MeetingTranscriptionCanceledEventArgs=void 0;var Loe=lu(),NP=class extends Loe.CancellationEventArgsBase{};Uy.MeetingTranscriptionCanceledEventArgs=NP});var tH=h(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});Hy.MeetingTranscriber=void 0;var joe=M(),kP=L(),dp=$(),pp=I(),qoe=qy(),FP=class{constructor(e){this.privAudioConfig=e,this.privProperties=new pp.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return dp.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(pp.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return pp.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(pp.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){dp.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(pp.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(e,n,r){let i=e;dp.Contracts.throwIfNullOrUndefined(qoe.MeetingImpl,"Meeting"),this.privRecognizer=new joe.TranscriberRecognizer(e.config,this.privAudioConfig),dp.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),kP.marshalPromiseToCallbacks(i.connectTranscriberRecognizer(this.privRecognizer),n,r)}startTranscribingAsync(e,n){this.privRecognizer.startContinuousRecognitionAsync(e,n)}stopTranscribingAsync(e,n){this.privRecognizer.stopContinuousRecognitionAsync(e,n)}leaveMeetingAsync(e,n){this.privRecognizer.disconnectCallbacks(),kP.marshalPromiseToCallbacks(v(this,null,function*(){}),e,n)}close(e,n){dp.Contracts.throwIfDisposed(this.privDisposedRecognizer),kP.marshalPromiseToCallbacks(this.dispose(!0),e,n)}dispose(e){return v(this,null,function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))})}};Hy.MeetingTranscriber=FP});var nH=h($y=>{"use strict";Object.defineProperty($y,"__esModule",{value:!0});$y.ConversationTranscriptionResult=void 0;var Boe=I(),LP=class extends Boe.RecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(e,n,r,i,o,s,a,u,l,d),this.privSpeakerId=c}get speakerId(){return this.privSpeakerId}};$y.ConversationTranscriptionResult=LP});var qy=h(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});var rH=mP();Object.defineProperty(tt,"Conversation",{enumerable:!0,get:function(){return rH.Conversation}});Object.defineProperty(tt,"ConversationImpl",{enumerable:!0,get:function(){return rH.ConversationImpl}});var Voe=q2();Object.defineProperty(tt,"ConversationCommon",{enumerable:!0,get:function(){return Voe.ConversationCommon}});var zoe=B2();Object.defineProperty(tt,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return zoe.ConversationExpirationEventArgs}});var Uoe=V2();Object.defineProperty(tt,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Uoe.ConversationParticipantsChangedEventArgs}});var Hoe=z2();Object.defineProperty(tt,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Hoe.ConversationTranslationCanceledEventArgs}});var $oe=U2();Object.defineProperty(tt,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return $oe.ConversationTranslationEventArgs}});var Woe=H2();Object.defineProperty(tt,"ConversationTranslationResult",{enumerable:!0,get:function(){return Woe.ConversationTranslationResult}});var Goe=J2();Object.defineProperty(tt,"ConversationTranslator",{enumerable:!0,get:function(){return Goe.ConversationTranslator}});var Koe=Q2();Object.defineProperty(tt,"ConversationTranscriber",{enumerable:!0,get:function(){return Koe.ConversationTranscriber}});var iH=Z2();Object.defineProperty(tt,"Participant",{enumerable:!0,get:function(){return iH.Participant}});Object.defineProperty(tt,"User",{enumerable:!0,get:function(){return iH.User}});var Joe=Y2();Object.defineProperty(tt,"ParticipantChangedReason",{enumerable:!0,get:function(){return Joe.ParticipantChangedReason}});var oH=X2();Object.defineProperty(tt,"Meeting",{enumerable:!0,get:function(){return oH.Meeting}});Object.defineProperty(tt,"MeetingImpl",{enumerable:!0,get:function(){return oH.MeetingImpl}});var Qoe=eH();Object.defineProperty(tt,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Qoe.MeetingTranscriptionCanceledEventArgs}});var Zoe=tH();Object.defineProperty(tt,"MeetingTranscriber",{enumerable:!0,get:function(){return Zoe.MeetingTranscriber}});var Yoe=nH();Object.defineProperty(tt,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Yoe.ConversationTranscriptionResult}})});var Wy=h(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.SynthesisRequest=Eu.Synthesizer=void 0;var ua=M(),Xoe=L(),sH=$(),Go=I(),jP=class t{constructor(e){let n=e;sH.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new Xoe.Queue}get authorizationToken(){return this.properties.getProperty(Go.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){sH.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Go.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(Go.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===ua.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){let n={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"},r=this.properties.getProperty(Go.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),i=this.properties.getProperty(Go.PropertyId.SpeechServiceConnection_SynthVoice,""),o=t.XMLEncode(e);return this.autoDetectSourceLanguage?r="en-US":i=i||n[r],i&&(o=`<voice name='${i}'>${o}</voice>`),o=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${r}'>${o}</speak>`,o}dispose(e){return v(this,null,function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}adapterSpeak(){return v(this,null,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;let e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}})}createSynthesizerConfig(e){return new ua.SynthesizerConfig(e,this.privProperties)}implCommonSynthesizeSetup(){let e=typeof window<"u"?"Browser":"Node",n="unknown",r="unknown";typeof navigator<"u"&&(e=e+"/"+navigator.platform,n=navigator.userAgent,r=navigator.appVersion);let i=this.createSynthesizerConfig(new ua.SpeechServiceConfig(new ua.Context(new ua.OS(e,n,r)))),o=this.privProperties.getProperty(Go.PropertyId.SpeechServiceConnection_Key,void 0),s=o&&o!==""?new ua.CognitiveSubscriptionKeyAuthentication(o):new ua.CognitiveTokenAuthentication(()=>{let a=this.privProperties.getProperty(Go.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(a)},()=>{let a=this.privProperties.getProperty(Go.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(a)});this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,i),this.privRestAdapter=this.createRestSynthesisAdapter(s,i)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Eu.Synthesizer=jP;var qP=class{constructor(e,n,r,i,o,s){this.requestId=e,this.text=n,this.isSSML=r,this.cb=i,this.err=o,this.dataStream=s}};Eu.SynthesisRequest=qP});var cH=h(Gy=>{"use strict";Object.defineProperty(Gy,"__esModule",{value:!0});Gy.SpeechSynthesizer=void 0;var BP=M(),VP=L(),ese=K0(),tse=su(),nse=Js(),aH=$(),Ko=I(),rse=Wy(),zP=class t extends Ko.Synthesizer{constructor(e,n){super(e),n!==null&&(n===void 0?this.audioConfig=typeof window>"u"?void 0:Ko.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=n),this.privConnectionFactory=new BP.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,n,r){let i=e;return n.properties.mergeTo(i.properties),new t(e,r)}speakTextAsync(e,n,r,i){this.speakImpl(e,!1,n,r,i)}speakSsmlAsync(e,n,r,i){this.speakImpl(e,!0,n,r,i)}getVoicesAsync(e=""){return v(this,null,function*(){return this.getVoices(e)})}close(e,n){aH.Contracts.throwIfDisposed(this.privDisposed),VP.marshalPromiseToCallbacks(this.dispose(!0),e,n)}get internalData(){return this.privAdapter}createSynthesisAdapter(e,n,r){return new BP.SpeechSynthesisAdapter(e,n,r,this,this.audioConfig)}createRestSynthesisAdapter(e,n){return new BP.SynthesisRestAdapter(n,e)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=tse.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Ko.SpeechSynthesisOutputFormat[this.properties.getProperty(Ko.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,n,r,i,o){try{aH.Contracts.throwIfDisposed(this.privDisposed);let s=VP.createNoDashGuid(),a;o instanceof Ko.PushAudioOutputStreamCallback?a=new nse.PushAudioOutputStreamImpl(o):o instanceof Ko.PullAudioOutputStream?a=o:o!==void 0?a=new ese.AudioFileWriter(o):a=void 0,this.synthesisRequestQueue.enqueue(new rse.SynthesisRequest(s,e,n,c=>{if(this.privSynthesizing=!1,r)try{r(c)}catch(u){i&&i(u)}r=void 0,this.adapterSpeak().catch(()=>{})},c=>{i&&i(c)},a)),this.adapterSpeak().catch(()=>{})}catch(s){if(i)if(s instanceof Error){let a=s;i(a.name+": "+a.message)}else i(s);this.dispose(!0).catch(()=>{})}}getVoices(e){return v(this,null,function*(){let n=VP.createNoDashGuid(),r=yield this.privRestAdapter.getVoicesList(n);if(r.ok&&Array.isArray(r.json)){let i=r.json;return e&&e.length>0&&(i=i.filter(o=>!!o.Locale&&o.Locale.toLowerCase()===e.toLowerCase())),new Ko.SynthesisVoicesResult(n,i,void 0)}else return new Ko.SynthesisVoicesResult(n,void 0,`Error: ${r.status}: ${r.statusText}`)})}};Gy.SpeechSynthesizer=zP});var uH=h(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0});Ky.SynthesisResult=void 0;var UP=class{constructor(e,n,r,i){this.privResultId=e,this.privReason=n,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};Ky.SynthesisResult=UP});var lH=h(Jy=>{"use strict";Object.defineProperty(Jy,"__esModule",{value:!0});Jy.SpeechSynthesisResult=void 0;var ise=I(),HP=class extends ise.SynthesisResult{constructor(e,n,r,i,o,s){super(e,n,i,o),this.privAudioData=r,this.privAudioDuration=s}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};Jy.SpeechSynthesisResult=HP});var dH=h(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0});Qy.SpeechSynthesisEventArgs=void 0;var $P=class{constructor(e){this.privResult=e}get result(){return this.privResult}};Qy.SpeechSynthesisEventArgs=$P});var pH=h(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0});Zy.SpeechSynthesisWordBoundaryEventArgs=void 0;var WP=class{constructor(e,n,r,i,o,s){this.privAudioOffset=e,this.privDuration=n,this.privText=r,this.privWordLength=i,this.privTextOffset=o,this.privBoundaryType=s}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};Zy.SpeechSynthesisWordBoundaryEventArgs=WP});var fH=h(Yy=>{"use strict";Object.defineProperty(Yy,"__esModule",{value:!0});Yy.SpeechSynthesisBookmarkEventArgs=void 0;var GP=class{constructor(e,n){this.privAudioOffset=e,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};Yy.SpeechSynthesisBookmarkEventArgs=GP});var hH=h(Xy=>{"use strict";Object.defineProperty(Xy,"__esModule",{value:!0});Xy.SpeechSynthesisVisemeEventArgs=void 0;var KP=class{constructor(e,n,r){this.privAudioOffset=e,this.privVisemeId=n,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};Xy.SpeechSynthesisVisemeEventArgs=KP});var gH=h(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.SpeechSynthesisBoundaryType=void 0;var ose;(function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"})(ose=fp.SpeechSynthesisBoundaryType||(fp.SpeechSynthesisBoundaryType={}))});var vH=h(eC=>{"use strict";Object.defineProperty(eC,"__esModule",{value:!0});eC.SynthesisVoicesResult=void 0;var Iu=I(),JP=class extends Iu.SynthesisResult{constructor(e,n,r){if(Array.isArray(n)){super(e,Iu.ResultReason.VoicesListRetrieved,void 0,new Iu.PropertyCollection),this.privVoices=[];for(let i of n)this.privVoices.push(new Iu.VoiceInfo(i))}else super(e,Iu.ResultReason.Canceled,r||"Error information unavailable",new Iu.PropertyCollection)}get voices(){return this.privVoices}};eC.SynthesisVoicesResult=JP});var mH=h(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.VoiceInfo=ii.SynthesisVoiceType=ii.SynthesisVoiceGender=void 0;var Ar;(function(t){t[t.Unknown=0]="Unknown",t[t.Female=1]="Female",t[t.Male=2]="Male",t[t.Neutral=3]="Neutral"})(Ar=ii.SynthesisVoiceGender||(ii.SynthesisVoiceGender={}));var QP;(function(t){t[t.OnlineNeural=1]="OnlineNeural",t[t.OnlineStandard=2]="OnlineStandard",t[t.OfflineNeural=3]="OfflineNeural",t[t.OfflineStandard=4]="OfflineStandard"})(QP=ii.SynthesisVoiceType||(ii.SynthesisVoiceType={}));var sse={[Ar[Ar.Neutral]]:Ar.Neutral,[Ar[Ar.Male]]:Ar.Male,[Ar[Ar.Female]]:Ar.Female},ZP=class{constructor(e){if(this.privStyleList=[],e){if(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?QP.OnlineStandard:QP.OnlineNeural,this.privGender=sse[e.Gender]||Ar.Unknown,e.StyleList&&Array.isArray(e.StyleList))for(let n of e.StyleList)this.privStyleList.push(n);this.privSampleRateHertz=e.SampleRateHertz,this.privStatus=e.Status,e.ExtendedPropertyMap&&(this.privExtendedPropertyMap=e.ExtendedPropertyMap),this.privWordsPerMinute=e.WordsPerMinute,Array.isArray(e.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...e.SecondaryLocaleList]),Array.isArray(e.RolePlayList)&&(this.privRolePlayList=[...e.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}};ii.VoiceInfo=ZP});var CH=h(tC=>{"use strict";Object.defineProperty(tC,"__esModule",{value:!0});tC.SpeakerAudioDestination=void 0;var la=L(),ase=Js(),wn=Oo(),cse=60*30,yH={[wn.AudioFormatTag.PCM]:"audio/wav",[wn.AudioFormatTag.MuLaw]:"audio/x-wav",[wn.AudioFormatTag.MP3]:"audio/mpeg",[wn.AudioFormatTag.OGG_OPUS]:"audio/ogg",[wn.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[wn.AudioFormatTag.ALaw]:"audio/x-wav",[wn.AudioFormatTag.FLAC]:"audio/flac",[wn.AudioFormatTag.AMR_WB]:"audio/amr-wb",[wn.AudioFormatTag.G722]:"audio/G722"},YP=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||la.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,n,r){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{n&&n()},i=>{r&&r(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,n){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},r=>{n&&n(r)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===wn.AudioFormatTag.PCM||this.privFormat.formatTag===wn.AudioFormatTag.MuLaw||this.privFormat.formatTag===wn.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);let i=new Blob([r],{type:yH[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{e&&e()},o=>{n&&n(o)})},i=>{n&&n(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;let n=yH[this.privFormat.formatTag];n===void 0?console.warn(`Unknown mimeType for format ${wn.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=cse,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(n),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(r=>{la.Events.instance.onEvent(new la.BackgroundEvent(r))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(r=>{la.Events.instance.onEvent(new la.BackgroundEvent(r))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(r=>{la.Events.instance.onEvent(new la.BackgroundEvent(r))})):(console.warn(`Format ${wn.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new ase.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,n){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},r=>{n&&n(r)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return v(this,null,function*(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;let e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return v(this,null,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return v(this,null,function*(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};tC.SpeakerAudioDestination=YP});var SH=h(nC=>{"use strict";Object.defineProperty(nC,"__esModule",{value:!0});nC.ConversationTranscriptionCanceledEventArgs=void 0;var use=lu(),XP=class extends use.CancellationEventArgsBase{};nC.ConversationTranscriptionCanceledEventArgs=XP});var wH=h(rC=>{"use strict";Object.defineProperty(rC,"__esModule",{value:!0});rC.MeetingTranscriptionCanceledEventArgs=void 0;var lse=lu(),eT=class extends lse.CancellationEventArgsBase{};rC.MeetingTranscriptionCanceledEventArgs=eT});var bH=h(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.PronunciationAssessmentGradingSystem=void 0;var dse;(function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"})(dse=hp.PronunciationAssessmentGradingSystem||(hp.PronunciationAssessmentGradingSystem={}))});var EH=h(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.PronunciationAssessmentGranularity=void 0;var pse;(function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"})(pse=gp.PronunciationAssessmentGranularity||(gp.PronunciationAssessmentGranularity={}))});var IH=h(oC=>{"use strict";Object.defineProperty(oC,"__esModule",{value:!0});oC.PronunciationAssessmentConfig=void 0;var iC=$(),Ve=I(),tT=class t{constructor(e,n=Ve.PronunciationAssessmentGradingSystem.FivePoint,r=Ve.PronunciationAssessmentGranularity.Phoneme,i=!1){iC.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new Ve.PropertyCollection,this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_GradingSystem,Ve.PronunciationAssessmentGradingSystem[n]),this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_Granularity,Ve.PronunciationAssessmentGranularity[r]),this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_EnableMiscue,String(i))}static fromJSON(e){iC.Contracts.throwIfNullOrUndefined(e,"json");let n=new t("");return n.privProperties=new Ve.PropertyCollection,n.properties.setProperty(Ve.PropertyId.PronunciationAssessment_Json,e),n}toJSON(){return this.updateJson(),this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();let n=e.internalData;n.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,n.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(Ve.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,n.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(Ve.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(e){iC.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(Ve.PropertyId.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){iC.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set enableMiscue(e){let n=e?"true":"false";this.properties.setProperty(Ve.PropertyId.PronunciationAssessment_EnableMiscue,n)}get enableMiscue(){return this.properties.getProperty(Ve.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}enableContentAssessmentWithTopic(e){this.privContentAssessmentTopic=e}get properties(){return this.privProperties}updateJson(){let e=this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_Json,"{}"),n=JSON.parse(e),r=this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_ReferenceText);r&&(n.referenceText=r);let i=this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_GradingSystem);i&&(n.gradingSystem=i);let o=this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_Granularity);o&&(n.granularity=o),this.privPhonemeAlphabet&&(n.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(n.nbestPhonemeCount=this.privNBestPhonemeCount),n.enableProsodyAssessment=this.privEnableProsodyAssessment,n.dimension="Comprehensive",this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_EnableMiscue)&&(n.enableMiscue=this.enableMiscue),this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_Params,JSON.stringify(n))}};oC.PronunciationAssessmentConfig=tT});var DH=h(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.PronunciationAssessmentResult=Du.ContentAssessmentResult=void 0;var nT=$(),fse=I(),sC=class{constructor(e){this.privPronJson=e}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}};Du.ContentAssessmentResult=sC;var rT=class t{constructor(e){let n=JSON.parse(e);nT.Contracts.throwIfNullOrUndefined(n.NBest[0],"NBest"),this.privPronJson=n.NBest[0]}static fromResult(e){nT.Contracts.throwIfNullOrUndefined(e,"result");let n=e.properties.getProperty(fse.PropertyId.SpeechServiceResponse_JsonResult);return nT.Contracts.throwIfNullOrUndefined(n,"json"),new t(n)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new sC(this.detailResult)}};Du.PronunciationAssessmentResult=rT});var _H=h(aC=>{"use strict";Object.defineProperty(aC,"__esModule",{value:!0});aC.AvatarConfig=void 0;var hse=$(),gse=I(),iT=class{constructor(e,n,r){this.privCustomized=!1,hse.Contracts.throwIfNullOrWhitespace(e,"character"),this.character=e,this.style=n,r===void 0&&(r=new gse.AvatarVideoFormat),this.videoFormat=r}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(e){this.privBackgroundImage=e}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(e){this.privRemoteIceServers=e}};aC.AvatarConfig=iT});var RH=h(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.AvatarEventArgs=da.AvatarEventTypes=void 0;var vse;(function(t){t.SwitchedToSpeaking="SwitchedToSpeaking",t.SwitchedToIdle="SwitchedToIdle",t.SessionClosed="SessionClosed"})(vse=da.AvatarEventTypes||(da.AvatarEventTypes={}));var oT=class{constructor(e,n){this.privOffset=e,this.privDescription=n}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}};da.AvatarEventArgs=oT});var aT=h(uC=>{"use strict";Object.defineProperty(uC,"__esModule",{value:!0});uC.SpeechSynthesisConnectionFactory=void 0;var PH=dt(),vp=I(),mse=nr(),yse=M(),Cse=Bt(),cC=Wi(),sT=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,n,r){let i=e.parameters.getProperty(vp.PropertyId.SpeechServiceConnection_Endpoint,void 0),o=e.parameters.getProperty(vp.PropertyId.SpeechServiceConnection_Region,void 0),s=mse.ConnectionFactoryBase.getHostSuffix(o),a=e.parameters.getProperty(vp.PropertyId.SpeechServiceConnection_EndpointId,void 0),c=a===void 0?"tts":"voice",u=e.parameters.getProperty(vp.PropertyId.SpeechServiceConnection_Host,"wss://"+o+"."+c+".speech"+s),l={},d={};n.token!==void 0&&n.token!==""&&(d[n.headerName]=n.token),d[Cse.HeaderNames.ConnectionId]=r,a!==void 0&&a!==""&&(!i||i.search(cC.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(l[cC.QueryParameterNames.CustomVoiceDeploymentId]=a),e.avatarEnabled&&(!i||i.search(cC.QueryParameterNames.EnableAvatar)===-1)&&(l[cC.QueryParameterNames.EnableAvatar]="true"),i||(i=u+this.synthesisUri),e.parameters.setProperty(vp.PropertyId.SpeechServiceConnection_Url,i);let p=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new PH.WebsocketConnection(i,l,d,new yse.WebsocketMessageFormatter,PH.ProxyInfo.fromParameters(e.parameters),p,r)}};uC.SpeechSynthesisConnectionFactory=sT});var TH=h(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0});dC.AvatarSynthesizer=void 0;var Sse=aT(),wse=M(),Ge=L(),bse=su(),Ki=I(),lC=$(),Ese=Wy(),cT=class extends Ki.Synthesizer{constructor(e,n){super(e),lC.Contracts.throwIfNullOrUndefined(n,"avatarConfig"),this.privConnectionFactory=new Sse.SpeechSynthesisConnectionFactory,this.privAvatarConfig=n,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=bse.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Ki.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(e){return v(this,null,function*(){lC.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,lC.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");let n=new Ge.Deferred;e.onicegatheringstatechange=()=>{Ge.Events.instance.onEvent(new Ge.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,Ge.EventType.Debug)),e.iceGatheringState==="complete"&&(Ge.Events.instance.onEvent(new Ge.PlatformEvent("peer connection: ice gathering complete.",Ge.EventType.Info)),n.resolve())},e.onicecandidate=a=>{a.candidate?Ge.Events.instance.onEvent(new Ge.PlatformEvent("peer connection: ice candidate: "+a.candidate.candidate,Ge.EventType.Debug)):(Ge.Events.instance.onEvent(new Ge.PlatformEvent("peer connection: ice candidate: complete",Ge.EventType.Debug)),n.resolve())},setTimeout(()=>{e.iceGatheringState!=="complete"&&(Ge.Events.instance.onEvent(new Ge.PlatformEvent("peer connection: ice gathering timeout.",Ge.EventType.Warning)),n.resolve())},2e3);let r=yield e.createOffer();yield e.setLocalDescription(r),yield n.promise,Ge.Events.instance.onEvent(new Ge.PlatformEvent("peer connection: got local SDP.",Ge.EventType.Info)),this.privProperties.setProperty(Ki.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));let i=yield this.speak("",!1);if(i.reason!==Ki.ResultReason.SynthesizingAudioCompleted)return new Ki.SynthesisResult(i.resultId,i.reason,i.errorDetails,i.properties);let o=atob(i.properties.getProperty(Ki.PropertyId.TalkingAvatarService_WebRTC_SDP)),s=new RTCSessionDescription(JSON.parse(o));return yield e.setRemoteDescription(s),new Ki.SynthesisResult(i.resultId,i.reason,void 0,i.properties)})}speakTextAsync(e){return v(this,null,function*(){let n=yield this.speak(e,!1);return new Ki.SynthesisResult(n.resultId,n.reason,n.errorDetails,n.properties)})}speakSsmlAsync(e){return v(this,null,function*(){let n=yield this.speak(e,!0);return new Ki.SynthesisResult(n.resultId,n.reason,n.errorDetails,n.properties)})}stopSpeakingAsync(){return v(this,null,function*(){for(;this.synthesisRequestQueue.length()>0;)(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()})}stopAvatarAsync(){return v(this,null,function*(){return lC.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)})}close(){return v(this,null,function*(){if(!this.privDisposed)return this.dispose(!0)})}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,n,r){return new wse.AvatarSynthesisAdapter(e,n,r,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,n){}createSynthesizerConfig(e){let n=super.createSynthesizerConfig(e);return n.avatarEnabled=!0,n}speak(e,n){return v(this,null,function*(){let r=Ge.createNoDashGuid(),i=new Ge.Deferred;return this.synthesisRequestQueue.enqueue(new Ese.SynthesisRequest(r,e,n,o=>{i.resolve(o),this.privSynthesizing=!1,this.adapterSpeak()},o=>{i.reject(o),this.privSynthesizing=!1})),this.adapterSpeak(),i.promise})}};dC.AvatarSynthesizer=cT});var AH=h(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.AvatarVideoFormat=_u.Coordinate=void 0;var uT=class{constructor(e,n){this.x=e,this.y=n}};_u.Coordinate=uT;var lT=class{constructor(e="H264",n=2e6,r=1920,i=1080){this.codec=e,this.bitrate=n,this.width=r,this.height=i}setCropRange(e,n){this.cropRange={bottomRight:n,topLeft:e}}};_u.AvatarVideoFormat=lT});var MH=h(pC=>{"use strict";Object.defineProperty(pC,"__esModule",{value:!0});pC.AvatarWebRTCConnectionResult=void 0;var Ise=I(),dT=class extends Ise.SynthesisResult{constructor(e,n,r,i,o){super(n,r,i,o),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}};pC.AvatarWebRTCConnectionResult=dT});var OH=h(hC=>{"use strict";Object.defineProperty(hC,"__esModule",{value:!0});hC.Diagnostics=void 0;var Dse=dt(),_se=L(),fC=class{static SetLoggingLevel(e){this.privListener=new Dse.ConsoleLoggingListener(e),_se.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if(typeof window>"u")this.privListener&&(this.privListener.logPath=e);else throw new Error("File system logging not available in browser.")}static set onLogOutput(e){this.privListener&&(this.privListener.logCallback=e)}};hC.Diagnostics=fC;fC.privListener=void 0});var I=h(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});var Rse=Y0();Object.defineProperty(S,"AudioConfig",{enumerable:!0,get:function(){return Rse.AudioConfig}});var xH=Oo();Object.defineProperty(S,"AudioStreamFormat",{enumerable:!0,get:function(){return xH.AudioStreamFormat}});Object.defineProperty(S,"AudioFormatTag",{enumerable:!0,get:function(){return xH.AudioFormatTag}});var pT=J0();Object.defineProperty(S,"AudioInputStream",{enumerable:!0,get:function(){return pT.AudioInputStream}});Object.defineProperty(S,"PullAudioInputStream",{enumerable:!0,get:function(){return pT.PullAudioInputStream}});Object.defineProperty(S,"PushAudioInputStream",{enumerable:!0,get:function(){return pT.PushAudioInputStream}});var fT=Js();Object.defineProperty(S,"AudioOutputStream",{enumerable:!0,get:function(){return fT.AudioOutputStream}});Object.defineProperty(S,"PullAudioOutputStream",{enumerable:!0,get:function(){return fT.PullAudioOutputStream}});Object.defineProperty(S,"PushAudioOutputStream",{enumerable:!0,get:function(){return fT.PushAudioOutputStream}});var Pse=CU();Object.defineProperty(S,"CancellationReason",{enumerable:!0,get:function(){return Pse.CancellationReason}});var Tse=SU();Object.defineProperty(S,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return Tse.PullAudioInputStreamCallback}});var Ase=wU();Object.defineProperty(S,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return Ase.PushAudioOutputStreamCallback}});var Mse=EU();Object.defineProperty(S,"KeywordRecognitionModel",{enumerable:!0,get:function(){return Mse.KeywordRecognitionModel}});var Ose=IU();Object.defineProperty(S,"SessionEventArgs",{enumerable:!0,get:function(){return Ose.SessionEventArgs}});var xse=DU();Object.defineProperty(S,"RecognitionEventArgs",{enumerable:!0,get:function(){return xse.RecognitionEventArgs}});var Nse=_U();Object.defineProperty(S,"OutputFormat",{enumerable:!0,get:function(){return Nse.OutputFormat}});var kse=RU();Object.defineProperty(S,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return kse.IntentRecognitionEventArgs}});var Fse=PU();Object.defineProperty(S,"RecognitionResult",{enumerable:!0,get:function(){return Fse.RecognitionResult}});var Lse=TU();Object.defineProperty(S,"SpeechRecognitionResult",{enumerable:!0,get:function(){return Lse.SpeechRecognitionResult}});var jse=AU();Object.defineProperty(S,"IntentRecognitionResult",{enumerable:!0,get:function(){return jse.IntentRecognitionResult}});var qse=MU();Object.defineProperty(S,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return qse.LanguageUnderstandingModel}});var hT=xU();Object.defineProperty(S,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return hT.SpeechRecognitionEventArgs}});Object.defineProperty(S,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return hT.ConversationTranscriptionEventArgs}});Object.defineProperty(S,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return hT.MeetingTranscriptionEventArgs}});var Bse=NU();Object.defineProperty(S,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Bse.SpeechRecognitionCanceledEventArgs}});var Vse=kU();Object.defineProperty(S,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return Vse.TranslationRecognitionEventArgs}});var zse=FU();Object.defineProperty(S,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return zse.TranslationSynthesisEventArgs}});var Use=gR();Object.defineProperty(S,"TranslationRecognitionResult",{enumerable:!0,get:function(){return Use.TranslationRecognitionResult}});var Hse=LU();Object.defineProperty(S,"TranslationSynthesisResult",{enumerable:!0,get:function(){return Hse.TranslationSynthesisResult}});var $se=jU();Object.defineProperty(S,"ResultReason",{enumerable:!0,get:function(){return $se.ResultReason}});var NH=qU();Object.defineProperty(S,"SpeechConfig",{enumerable:!0,get:function(){return NH.SpeechConfig}});Object.defineProperty(S,"SpeechConfigImpl",{enumerable:!0,get:function(){return NH.SpeechConfigImpl}});var kH=BU();Object.defineProperty(S,"SpeechTranslationConfig",{enumerable:!0,get:function(){return kH.SpeechTranslationConfig}});Object.defineProperty(S,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return kH.SpeechTranslationConfigImpl}});var Wse=yR();Object.defineProperty(S,"PropertyCollection",{enumerable:!0,get:function(){return Wse.PropertyCollection}});var Gse=xm();Object.defineProperty(S,"PropertyId",{enumerable:!0,get:function(){return Gse.PropertyId}});var Kse=UU();Object.defineProperty(S,"Recognizer",{enumerable:!0,get:function(){return Kse.Recognizer}});var Jse=HU();Object.defineProperty(S,"SpeechRecognizer",{enumerable:!0,get:function(){return Jse.SpeechRecognizer}});var Qse=$U();Object.defineProperty(S,"IntentRecognizer",{enumerable:!0,get:function(){return Qse.IntentRecognizer}});var Zse=WU();Object.defineProperty(S,"VoiceProfileType",{enumerable:!0,get:function(){return Zse.VoiceProfileType}});var Yse=QU();Object.defineProperty(S,"TranslationRecognizer",{enumerable:!0,get:function(){return Yse.TranslationRecognizer}});var Xse=ZU();Object.defineProperty(S,"Translations",{enumerable:!0,get:function(){return Xse.Translations}});var eae=YU();Object.defineProperty(S,"NoMatchReason",{enumerable:!0,get:function(){return eae.NoMatchReason}});var tae=XU();Object.defineProperty(S,"NoMatchDetails",{enumerable:!0,get:function(){return tae.NoMatchDetails}});var nae=e2();Object.defineProperty(S,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return nae.TranslationRecognitionCanceledEventArgs}});var rae=t2();Object.defineProperty(S,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return rae.IntentRecognitionCanceledEventArgs}});var iae=FR();Object.defineProperty(S,"CancellationDetailsBase",{enumerable:!0,get:function(){return iae.CancellationDetailsBase}});var oae=n2();Object.defineProperty(S,"CancellationDetails",{enumerable:!0,get:function(){return oae.CancellationDetails}});var sae=r2();Object.defineProperty(S,"CancellationErrorCode",{enumerable:!0,get:function(){return sae.CancellationErrorCode}});var aae=i2();Object.defineProperty(S,"ConnectionEventArgs",{enumerable:!0,get:function(){return aae.ConnectionEventArgs}});var cae=o2();Object.defineProperty(S,"ServiceEventArgs",{enumerable:!0,get:function(){return cae.ServiceEventArgs}});var uae=PR();Object.defineProperty(S,"Connection",{enumerable:!0,get:function(){return uae.Connection}});var lae=s2();Object.defineProperty(S,"PhraseListGrammar",{enumerable:!0,get:function(){return lae.PhraseListGrammar}});var dae=ny();Object.defineProperty(S,"DialogServiceConfig",{enumerable:!0,get:function(){return dae.DialogServiceConfig}});var pae=a2();Object.defineProperty(S,"BotFrameworkConfig",{enumerable:!0,get:function(){return pae.BotFrameworkConfig}});var fae=c2();Object.defineProperty(S,"CustomCommandsConfig",{enumerable:!0,get:function(){return fae.CustomCommandsConfig}});var hae=f2();Object.defineProperty(S,"DialogServiceConnector",{enumerable:!0,get:function(){return hae.DialogServiceConnector}});var gae=h2();Object.defineProperty(S,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return gae.ActivityReceivedEventArgs}});var vae=v2();Object.defineProperty(S,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return vae.TurnStatusReceivedEventArgs}});var mae=m2();Object.defineProperty(S,"ServicePropertyChannel",{enumerable:!0,get:function(){return mae.ServicePropertyChannel}});var yae=y2();Object.defineProperty(S,"ProfanityOption",{enumerable:!0,get:function(){return yae.ProfanityOption}});var Cae=C2();Object.defineProperty(S,"BaseAudioPlayer",{enumerable:!0,get:function(){return Cae.BaseAudioPlayer}});var Sae=S2();Object.defineProperty(S,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return Sae.ConnectionMessageEventArgs}});var wae=IR();Object.defineProperty(S,"ConnectionMessage",{enumerable:!0,get:function(){return wae.ConnectionMessage}});var bae=w2();Object.defineProperty(S,"VoiceProfile",{enumerable:!0,get:function(){return bae.VoiceProfile}});var FH=E2();Object.defineProperty(S,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return FH.VoiceProfileEnrollmentResult}});Object.defineProperty(S,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return FH.VoiceProfileEnrollmentCancellationDetails}});var LH=D2();Object.defineProperty(S,"VoiceProfileResult",{enumerable:!0,get:function(){return LH.VoiceProfileResult}});Object.defineProperty(S,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return LH.VoiceProfileCancellationDetails}});var Eae=_2();Object.defineProperty(S,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return Eae.VoiceProfilePhraseResult}});var Iae=R2();Object.defineProperty(S,"VoiceProfileClient",{enumerable:!0,get:function(){return Iae.VoiceProfileClient}});var Dae=P2();Object.defineProperty(S,"SpeakerRecognizer",{enumerable:!0,get:function(){return Dae.SpeakerRecognizer}});var _ae=T2();Object.defineProperty(S,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return _ae.SpeakerIdentificationModel}});var Rae=M2();Object.defineProperty(S,"SpeakerVerificationModel",{enumerable:!0,get:function(){return Rae.SpeakerVerificationModel}});var Pae=x2();Object.defineProperty(S,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Pae.AutoDetectSourceLanguageConfig}});var Tae=k2();Object.defineProperty(S,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return Tae.AutoDetectSourceLanguageResult}});var Aae=F2();Object.defineProperty(S,"SourceLanguageConfig",{enumerable:!0,get:function(){return Aae.SourceLanguageConfig}});var gT=j2();Object.defineProperty(S,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return gT.SpeakerRecognitionResult}});Object.defineProperty(S,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return gT.SpeakerRecognitionResultType}});Object.defineProperty(S,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return gT.SpeakerRecognitionCancellationDetails}});var bn=qy();Object.defineProperty(S,"Conversation",{enumerable:!0,get:function(){return bn.Conversation}});Object.defineProperty(S,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return bn.ConversationExpirationEventArgs}});Object.defineProperty(S,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return bn.ConversationParticipantsChangedEventArgs}});Object.defineProperty(S,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return bn.ConversationTranslationCanceledEventArgs}});Object.defineProperty(S,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return bn.ConversationTranslationEventArgs}});Object.defineProperty(S,"ConversationTranslationResult",{enumerable:!0,get:function(){return bn.ConversationTranslationResult}});Object.defineProperty(S,"ConversationTranslator",{enumerable:!0,get:function(){return bn.ConversationTranslator}});Object.defineProperty(S,"ConversationTranscriber",{enumerable:!0,get:function(){return bn.ConversationTranscriber}});Object.defineProperty(S,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return bn.ConversationTranscriptionResult}});Object.defineProperty(S,"Meeting",{enumerable:!0,get:function(){return bn.Meeting}});Object.defineProperty(S,"MeetingTranscriber",{enumerable:!0,get:function(){return bn.MeetingTranscriber}});Object.defineProperty(S,"Participant",{enumerable:!0,get:function(){return bn.Participant}});Object.defineProperty(S,"ParticipantChangedReason",{enumerable:!0,get:function(){return bn.ParticipantChangedReason}});Object.defineProperty(S,"User",{enumerable:!0,get:function(){return bn.User}});var Mae=Wy();Object.defineProperty(S,"Synthesizer",{enumerable:!0,get:function(){return Mae.Synthesizer}});var Oae=Q0();Object.defineProperty(S,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Oae.SpeechSynthesisOutputFormat}});var xae=cH();Object.defineProperty(S,"SpeechSynthesizer",{enumerable:!0,get:function(){return xae.SpeechSynthesizer}});var Nae=uH();Object.defineProperty(S,"SynthesisResult",{enumerable:!0,get:function(){return Nae.SynthesisResult}});var kae=lH();Object.defineProperty(S,"SpeechSynthesisResult",{enumerable:!0,get:function(){return kae.SpeechSynthesisResult}});var Fae=dH();Object.defineProperty(S,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Fae.SpeechSynthesisEventArgs}});var Lae=pH();Object.defineProperty(S,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Lae.SpeechSynthesisWordBoundaryEventArgs}});var jae=fH();Object.defineProperty(S,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return jae.SpeechSynthesisBookmarkEventArgs}});var qae=hH();Object.defineProperty(S,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return qae.SpeechSynthesisVisemeEventArgs}});var Bae=gH();Object.defineProperty(S,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Bae.SpeechSynthesisBoundaryType}});var Vae=vH();Object.defineProperty(S,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Vae.SynthesisVoicesResult}});var zae=mH();Object.defineProperty(S,"VoiceInfo",{enumerable:!0,get:function(){return zae.VoiceInfo}});var Uae=CH();Object.defineProperty(S,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Uae.SpeakerAudioDestination}});var Hae=SH();Object.defineProperty(S,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Hae.ConversationTranscriptionCanceledEventArgs}});var $ae=wH();Object.defineProperty(S,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return $ae.MeetingTranscriptionCanceledEventArgs}});var Wae=bH();Object.defineProperty(S,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Wae.PronunciationAssessmentGradingSystem}});var Gae=EH();Object.defineProperty(S,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Gae.PronunciationAssessmentGranularity}});var Kae=IH();Object.defineProperty(S,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Kae.PronunciationAssessmentConfig}});var Jae=DH();Object.defineProperty(S,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Jae.PronunciationAssessmentResult}});var Qae=dP();Object.defineProperty(S,"LanguageIdMode",{enumerable:!0,get:function(){return Qae.LanguageIdMode}});var Zae=_H();Object.defineProperty(S,"AvatarConfig",{enumerable:!0,get:function(){return Zae.AvatarConfig}});var Yae=RH();Object.defineProperty(S,"AvatarEventArgs",{enumerable:!0,get:function(){return Yae.AvatarEventArgs}});var Xae=TH();Object.defineProperty(S,"AvatarSynthesizer",{enumerable:!0,get:function(){return Xae.AvatarSynthesizer}});var jH=AH();Object.defineProperty(S,"AvatarVideoFormat",{enumerable:!0,get:function(){return jH.AvatarVideoFormat}});Object.defineProperty(S,"Coordinate",{enumerable:!0,get:function(){return jH.Coordinate}});var ece=MH();Object.defineProperty(S,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return ece.AvatarWebRTCConnectionResult}});var tce=OH();Object.defineProperty(S,"Diagnostics",{enumerable:!0,get:function(){return tce.Diagnostics}});var nce=c_();Object.defineProperty(S,"LogLevel",{enumerable:!0,get:function(){return nce.LogLevel}})});var qH=h(vC=>{"use strict";Object.defineProperty(vC,"__esModule",{value:!0});vC.ProxyInfo=void 0;var gC=I(),vT=class t{constructor(e,n,r,i){this.privProxyHostName=e,this.privProxyPort=n,this.privProxyUserName=r,this.privProxyPassword=i}static fromParameters(e){return new t(e.getProperty(gC.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(gC.PropertyId.SpeechServiceConnection_ProxyPort),10),e.getProperty(gC.PropertyId.SpeechServiceConnection_ProxyUserName),e.getProperty(gC.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};vC.ProxyInfo=vT});var VH=h((hDe,BH)=>{"use strict";var rce=new Set(["json","buffer","string"]);BH.exports=t=>(...e)=>{let n=new Set,r,i,o,s="";return e.forEach(a=>{if(typeof a=="string")if(a.toUpperCase()===a)if(r){let c=`Can't set method to ${a}, already set to ${r}.`;throw new Error(c)}else r=a;else if(a.startsWith("http:")||a.startsWith("https:"))s=a;else if(rce.has(a))i=a;else throw new Error(`Unknown encoding, ${a}`);else if(typeof a=="number")n.add(a);else if(typeof a=="object")if(Array.isArray(a)||a instanceof Set)a.forEach(c=>n.add(c));else{if(o)throw new Error("Cannot set headers twice.");o=a}else throw new Error(`Unknown type: ${typeof a}`)}),r||(r="GET"),n.size===0&&n.add(200),t(n,r,i,o,s)}});var HH=h((zH,UH)=>{"use strict";var ice=VH(),mT=class t extends Error{constructor(e,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let r;Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(let[o,s]of e.headers.entries())this.headers[o.toLowerCase()]=s}},oce=(t,e,n,r,i)=>(c,u,...l)=>v(zH,[c,u,...l],function*(o,s,a={}){o=i+(o||"");let d=new URL(o);if(r||(r={}),d.username&&(r.Authorization="Basic "+btoa(d.username+":"+d.password),d=new URL(d.protocol+"//"+d.host+d.pathname+d.search)),d.protocol!=="https:"&&d.protocol!=="http:")throw new Error(`Unknown protocol, ${d.protocol}`);if(s&&!(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="string"))if(typeof s=="object")s=JSON.stringify(s),r["Content-Type"]="application/json";else throw new Error("Unknown body type.");a=new Headers(D(D({},r||{}),a));let p=yield fetch(d,{method:e,headers:a,body:s});if(p.statusCode=p.status,!t.has(p.status))throw new mT(p);return n==="json"?p.json():n==="buffer"?p.arrayBuffer():n==="string"?p.text():p});UH.exports=ice(oce)});var WH=h(Ji=>{"use strict";var sce=Ji&&Ji.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.RestMessageAdapter=Ji.RestRequestType=void 0;var ace=sce(HH()),$H=L(),mC;(function(t){t.Get="GET",t.Post="POST",t.Delete="DELETE",t.File="file"})(mC=Ji.RestRequestType||(Ji.RestRequestType={}));var yT=class{constructor(e){if(!e)throw new $H.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,n){let r="";try{let i=n.trim().split(/[\r\n]+/),o={};i.forEach(s=>{let a=s.split(": "),c=a.shift().toLowerCase(),u=a.join(": ");o[c]=u}),r=o[e.toLowerCase()]}catch{}return r}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,n){this.privHeaders[e]=n}request(e,n,r={},i=null){let o=new $H.Deferred,s=e===mC.File?"POST":e,a=(u,l={})=>{let d=u;return{data:JSON.stringify(l),headers:JSON.stringify(u.headers),json:l,ok:u.statusCode>=200&&u.statusCode<300,status:u.statusCode,statusText:l.error?l.error.message:d.statusText?d.statusText:d.statusMessage}},c=u=>{let l=ace.default(n,s,this.privHeaders,200,201,202,204,400,401,402,403,404),d=this.queryParams(r)===""?"":`?${this.queryParams(r)}`;l(d,u).then(p=>v(this,null,function*(){if(e===mC.Delete||p.statusCode===204)o.resolve(a(p));else try{let f=yield p.json();o.resolve(a(p,f))}catch{o.resolve(a(p))}})).catch(p=>{o.reject(p)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===mC.Post&&i&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),c(i),o.promise}queryParams(e={}){return Object.keys(e).map(n=>encodeURIComponent(n)+"="+encodeURIComponent(e[n])).join("&")}};Ji.RestMessageAdapter=yT});var CT=h(yC=>{"use strict";Object.defineProperty(yC,"__esModule",{value:!0});yC.RestConfigBase=void 0;var Ru=class t{static get requestOptions(){return t.privDefaultRequestOptions}static get configParams(){return t.privDefaultParams}static get restErrors(){return t.privRestErrors}};yC.RestConfigBase=Ru;Ru.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};Ru.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};Ru.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}});var dt=h(Dt=>{"use strict";var cce=Dt&&Dt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Mr=Dt&&Dt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&cce(e,t,n)};Object.defineProperty(Dt,"__esModule",{value:!0});Mr(gj(),Dt);Mr(mj(),Dt);Mr(Sj(),Dt);Mr(bj(),Dt);Mr(Ej(),Dt);Mr(vU(),Dt);Mr(V0(),Dt);Mr(mU(),Dt);Mr(qH(),Dt);Mr(WH(),Dt);Mr(CT(),Dt)});var JH=h(CC=>{"use strict";Object.defineProperty(CC,"__esModule",{value:!0});CC.IntentConnectionFactory=void 0;var GH=dt(),mp=I(),KH=nr(),uce=M(),lce=Bt(),ST=class extends KH.ConnectionFactoryBase{create(e,n,r){let i=e.parameters.getProperty(mp.PropertyId.SpeechServiceConnection_Endpoint);if(!i){let c=e.parameters.getProperty(mp.PropertyId.SpeechServiceConnection_IntentRegion),u=KH.ConnectionFactoryBase.getHostSuffix(c);i=e.parameters.getProperty(mp.PropertyId.SpeechServiceConnection_Host,"wss://"+c+".sr.speech"+u)+"/speech/recognition/interactive/cognitiveservices/v1"}let o={format:"simple",language:e.parameters.getProperty(mp.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,o,i);let s={};n.token!==void 0&&n.token!==""&&(s[n.headerName]=n.token),s[lce.HeaderNames.ConnectionId]=r,e.parameters.setProperty(mp.PropertyId.SpeechServiceConnection_Url,i);let a=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new GH.WebsocketConnection(i,o,s,new uce.WebsocketMessageFormatter,GH.ProxyInfo.fromRecognizerConfig(e),a,r)}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}};CC.IntentConnectionFactory=ST});var XH=h(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.VoiceProfileConnectionFactory=Pu.SpeakerRecognitionConnectionFactory=void 0;var QH=dt(),pa=I(),ZH=nr(),dce=M(),YH=Bt(),SC=class extends ZH.ConnectionFactoryBase{create(e,n,r,i){let o=e.parameters.getProperty(pa.PropertyId.SpeechServiceConnection_Endpoint);if(!o){let u=e.parameters.getProperty(pa.PropertyId.SpeechServiceConnection_Region),l=ZH.ConnectionFactoryBase.getHostSuffix(u),d=e.parameters.getProperty(pa.PropertyId.SpeechServiceConnection_Host,`wss://${u}.spr-frontend.speech${l}`),p=e.parameters.getProperty(pa.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");o=`${d}/speaker/ws/${this.scenarioToPath(p)}/${r}`}let s={format:"simple",language:e.parameters.getProperty(pa.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,s,o);let a={};n.token!==void 0&&n.token!==""&&(a[n.headerName]=n.token),a[YH.HeaderNames.ConnectionId]=i,a[YH.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(pa.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(pa.PropertyId.SpeechServiceConnection_Url,o);let c=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new QH.WebsocketConnection(o,s,a,new dce.WebsocketMessageFormatter,QH.ProxyInfo.fromRecognizerConfig(e),c,i)}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}},wT=class extends SC{create(e,n,r){return super.create(e,n,"recognition",r)}};Pu.SpeakerRecognitionConnectionFactory=wT;var bT=class extends SC{create(e,n,r){return super.create(e,n,"profile",r)}};Pu.VoiceProfileConnectionFactory=bT});var bC=h(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.RecognitionEndedEvent=_t.RecognitionCompletionStatus=_t.RecognitionStartedEvent=_t.ConnectingToServiceEvent=_t.ListeningStartedEvent=_t.RecognitionTriggeredEvent=_t.SpeechRecognitionEvent=void 0;var wC=L(),Jo=class extends wC.PlatformEvent{constructor(e,n,r,i=wC.EventType.Info){super(e,i),this.privRequestId=n,this.privSessionId=r}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}};_t.SpeechRecognitionEvent=Jo;var ET=class extends Jo{constructor(e,n,r,i){super("RecognitionTriggeredEvent",e,n),this.privAudioSourceId=r,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};_t.RecognitionTriggeredEvent=ET;var IT=class extends Jo{constructor(e,n,r,i){super("ListeningStartedEvent",e,n),this.privAudioSourceId=r,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};_t.ListeningStartedEvent=IT;var DT=class extends Jo{constructor(e,n,r){super("ConnectingToServiceEvent",e,r),this.privAuthFetchEventid=n}get authFetchEventid(){return this.privAuthFetchEventid}};_t.ConnectingToServiceEvent=DT;var _T=class extends Jo{constructor(e,n,r,i,o){super("RecognitionStartedEvent",e,o),this.privAudioSourceId=n,this.privAudioNodeId=r,this.privAuthFetchEventId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}};_t.RecognitionStartedEvent=_T;var e$;(function(t){t[t.Success=0]="Success",t[t.AudioSourceError=1]="AudioSourceError",t[t.AudioSourceTimeout=2]="AudioSourceTimeout",t[t.AuthTokenFetchError=3]="AuthTokenFetchError",t[t.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",t[t.UnAuthorized=5]="UnAuthorized",t[t.ConnectTimeout=6]="ConnectTimeout",t[t.ConnectError=7]="ConnectError",t[t.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",t[t.UnknownError=9]="UnknownError"})(e$=_t.RecognitionCompletionStatus||(_t.RecognitionCompletionStatus={}));var RT=class extends Jo{constructor(e,n,r,i,o,s,a,c){super("RecognitionEndedEvent",e,o,a===e$.Success?wC.EventType.Info:wC.EventType.Error),this.privAudioSourceId=n,this.privAudioNodeId=r,this.privAuthFetchEventId=i,this.privStatus=a,this.privError=c,this.privServiceTag=s}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}};_t.RecognitionEndedEvent=RT});var fa=h(EC=>{"use strict";Object.defineProperty(EC,"__esModule",{value:!0});EC.SpeechConnectionMessage=void 0;var PT=L(),Qi=Bt(),TT=class t extends PT.ConnectionMessage{constructor(e,n,r,i,o,s,a,c){if(!n)throw new PT.ArgumentNullError("path");if(!r)throw new PT.ArgumentNullError("requestId");let u={};if(u[Qi.HeaderNames.Path]=n,u[Qi.HeaderNames.RequestId]=r,u[Qi.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[Qi.HeaderNames.ContentType]=i),s&&(u[Qi.HeaderNames.RequestStreamId]=s),a)for(let l in a)l&&(u[l]=a[l]);c?super(e,o,u,c):super(e,o,u),this.privPath=n,this.privRequestId=r,this.privContentType=i,this.privStreamId=s,this.privAdditionalHeaders=a}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let n=null,r=null,i=null,o=null,s={};if(e.headers)for(let a in e.headers)a&&(a.toLowerCase()===Qi.HeaderNames.Path.toLowerCase()?n=e.headers[a]:a.toLowerCase()===Qi.HeaderNames.RequestId.toLowerCase()?r=e.headers[a]:a.toLowerCase()===Qi.HeaderNames.ContentType.toLowerCase()?i=e.headers[a]:a.toLowerCase()===Qi.HeaderNames.RequestStreamId.toLowerCase()?o=e.headers[a]:s[a]=e.headers[a]);return new t(e.messageType,n,r,i,e.body,o,s,e.id)}};EC.SpeechConnectionMessage=TT});var t$=h(DC=>{"use strict";Object.defineProperty(DC,"__esModule",{value:!0});DC.ServiceRecognizerBase=void 0;var pce=dt(),Ke=L(),Pe=I(),oi=M(),Qo=fa(),IC=class t{constructor(e,n,r,i,o){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new Ke.ArgumentNullError("authentication");if(!n)throw new Ke.ArgumentNullError("connectionFactory");if(!r)throw new Ke.ArgumentNullError("audioSource");if(!i)throw new Ke.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=i.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=n,this.privAudioSource=r,this.privRecognizerConfig=i,this.privIsDisposed=!1,this.privRecognizer=o,this.privRequestSession=new oi.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new Ke.EventSource,this.privServiceEvents=new Ke.EventSource,this.privDynamicGrammar=new oi.DynamicGrammarBuilder,this.privSpeechContext=new oi.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new oi.AgentConfig,this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=Ke.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(a=>{if(a.name==="ConnectionClosedEvent"){let c=a;(c.statusCode===1003||c.statusCode===1007||c.statusCode===1002||c.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(Pe.CancellationReason.Error,c.statusCode===1007?Pe.CancellationErrorCode.BadRequestParameters:Pe.CancellationErrorCode.ConnectionFailure,`${c.reason} websocket error code: ${c.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=Ke.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){let e=this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(e!==void 0){let n=e.split(","),r=this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),i=r!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:i},output:{interimResults:{mode:"Always"}},targetLanguages:n}),r!==void 0){let o={};for(let s of n)o[s]=r;this.privSpeechContext.setSection("synthesis",{defaultVoices:o})}}}setSpeechSegmentationTimeoutJson(){let e=this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(e!==void 0){let n=this.recognitionMode===oi.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===oi.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",r=parseInt(e,10),i=this.privSpeechContext.getSection("phraseDetection");i.mode=n,i[n]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:r}},this.privSpeechContext.setSection("phraseDetection",i)}}setLanguageIdJson(){let e=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){let r=this.privRecognizerConfig.autoDetectSourceLanguages.split(","),i;this.privRecognizerConfig.languageIdMode==="Continuous"?i="DetectContinuous":i="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:r,mode:i,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});let o=this.privRecognizerConfig.sourceLanguageModels;o!==void 0&&(e.customModels=o,e.onInterim={action:"None"},e.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(e.onInterim={action:"Translate"},e.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",e)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(oi.OutputFormatPropertyName,Pe.OutputFormat[Pe.OutputFormat.Simple]).toLowerCase()===Pe.OutputFormat[Pe.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(Pe.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(Pe.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}dispose(e){return v(this,null,function*(){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{yield(yield this.privConnectionConfigurationPromise).dispose(e)}catch{return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,n,r){return v(this,null,function*(){if(this.recognizeOverride!==void 0){yield this.recognizeOverride(e,n,r);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=n,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);let i=this.connectImpl(),o;try{let c=yield this.audioSource.attach(this.privRequestSession.audioNodeId),u=yield this.audioSource.format,l=yield this.audioSource.deviceInfo;this.privIsLiveAudio=l.type&&l.type===oi.type.Microphones,o=new pce.ReplayableAudioNode(c,u.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(o,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l}}catch(c){throw yield this.privRequestSession.onStopRecognizing(),c}try{yield i}catch(c){yield this.cancelRecognitionLocal(Pe.CancellationReason.Error,Pe.CancellationErrorCode.ConnectionFailure,c);return}let s=new Pe.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,s),this.receiveMessage(),this.sendAudio(o).catch(c=>v(this,null,function*(){yield this.cancelRecognitionLocal(Pe.CancellationReason.Error,Pe.CancellationErrorCode.RuntimeError,c)}))})}stopRecognizing(){return v(this,null,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return v(this,null,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(e,n){this.connectImpl().then(()=>{try{e&&e()}catch(r){n&&n(r)}},r=>{try{n&&n(r)}catch{}})}disconnect(){return v(this,null,function*(){if(yield this.cancelRecognitionLocal(Pe.CancellationReason.Error,Pe.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&(yield this.disconnectOverride()),this.privConnectionPromise!==void 0)try{yield(yield this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0})}sendMessage(e){}sendNetworkMessage(e,n){return v(this,null,function*(){let r=typeof n=="string"?Ke.MessageType.Text:Ke.MessageType.Binary,i=typeof n=="string"?"application/json":"";return(yield this.fetchConnection()).send(new Qo.SpeechConnectionMessage(r,e,this.privRequestSession.requestId,i,n))})}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}sendTelemetryData(){return v(this,null,function*(){let e=this.privRequestSession.getTelemetry();if(t.telemetryDataEnabled!==!0||this.privIsDisposed||e===null)return;if(t.telemetryData)try{t.telemetryData(e)}catch{}yield(yield this.fetchConnection()).send(new Qo.SpeechConnectionMessage(Ke.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))})}cancelRecognitionLocal(e,n,r){return v(this,null,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,n,r))})}receiveMessage(){return v(this,null,function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection(),n=yield e.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!n)return this.receiveMessage();this.privServiceHasSentMessage=!0;let r=Qo.SpeechConnectionMessage.fromConnectionMessage(n);if(r.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":let i=oi.SpeechDetected.fromJSON(r.textBody),o=new Pe.RecognitionEventArgs(i.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,o);break;case"speech.enddetected":let s;r.textBody.length>0?s=r.textBody:s="{ Offset: 0 }";let a=oi.SpeechDetected.fromJSON(s),c=new Pe.RecognitionEventArgs(a.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,c);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(Pe.CancellationReason.EndOfStream,Pe.CancellationErrorCode.NoError,void 0));let u=new Pe.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,u);return}else e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(r))||this.privServiceEvents&&this.serviceEvents.onEvent(new Ke.ServiceEvent(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch{return null}})}updateSpeakerDiarizationAudioOffset(){let n=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(n)}sendSpeechContext(e,n){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();let r=this.speechContext.toJSON();if(n&&this.privRequestSession.onSpeechContext(),r)return e.send(new Qo.SpeechConnectionMessage(Ke.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",r))}noOp(){}sendPrePayloadJSON(e,n=!0){return v(this,null,function*(){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,n),yield this.sendWaveHeader(e)})}sendWaveHeader(e){return v(this,null,function*(){let n=yield this.audioSource.format;return e.send(new Qo.SpeechConnectionMessage(Ke.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",n.header))})}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(e=>e.state()===Ke.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,n,r){if(n.onSpeechContext(),t.telemetryDataEnabled!==!0){let o={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(o)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){let i=JSON.parse(r);i.context.DisableReferenceChannel="True",i.context.MicSpec="1_0_0",r=JSON.stringify(i)}if(r)return e.send(new Qo.SpeechConnectionMessage(Ke.MessageType.Text,"speech.config",n.requestId,"application/json",r))}fetchConnection(){return v(this,null,function*(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(e=>e.state()===Ke.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(e){return v(this,null,function*(){let n=yield this.audioSource.format;this.privAverageBytesPerMs=n.avgBytesPerSec/1e3;let r=Date.now(),i=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),o=n.avgBytesPerSec/1e3*parseInt(i,10),s=this.privRequestSession.recogNumber,a=()=>v(this,null,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s){let c=yield this.fetchConnection(),u=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let l,d;if(!u||u.isEnd?(l=null,d=0):(l=u.buffer,this.privRequestSession.onAudioSent(l.byteLength),o>=this.privRequestSession.bytesSent?d=0:d=Math.max(0,r-Date.now())),d!==0&&(yield this.delay(d)),l!==null&&(r=Date.now()+l.byteLength*1e3/(n.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s)if(c.send(new Qo.SpeechConnectionMessage(Ke.MessageType.Binary,"audio",this.privRequestSession.requestId,null,l)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),u?.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return a()}});return a()})}retryableConnect(){return v(this,null,function*(){let e=!1;this.privAuthFetchEventId=Ke.createNoDashGuid();let n=this.privRequestSession.sessionId;this.privConnectionId=n!==void 0?n:Ke.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let r=0,i="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){let s=yield e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);yield this.privRequestSession.onAuthCompleted(!1);let a=this.privConnectionFactory.create(this.privRecognizerConfig,s,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(a.events),a.events.attach(u=>{this.connectionEvents.onEvent(u)});let c=yield a.open();if(c.statusCode===200)return yield this.privRequestSession.onConnectionEstablishCompleted(c.statusCode),Promise.resolve(a);c.statusCode===1006&&(e=!0),r=c.statusCode,i=c.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(r,i),Promise.reject(`Unable to contact server. StatusCode: ${r}, ${this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${i}`)})}delay(e){return new Promise(n=>this.privSetTimeout(n,e))}writeBufferToConsole(e){let n="Buffer Size: ";if(e===null)n+="null";else{let r=new Uint8Array(e);n+=`${e.byteLength}\r
`;for(let i=0;i<e.byteLength;i++)n+=r[i].toString(16).padStart(2,"0")+" ",(i+1)%16===0&&(console.info(n),n="")}console.info(n)}sendFinalAudio(){return v(this,null,function*(){yield(yield this.fetchConnection()).send(new Qo.SpeechConnectionMessage(Ke.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return v(this,null,function*(){let e=yield this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)})}};DC.ServiceRecognizerBase=IC;IC.telemetryDataEnabled=!0});var n$=h(_C=>{"use strict";Object.defineProperty(_C,"__esModule",{value:!0});_C.ConversationServiceRecognizer=void 0;var ir=I(),si=M(),AT=class extends si.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.handleSpeechPhraseMessage=s=>v(this,null,function*(){return this.handleSpeechPhrase(s)}),this.handleSpeechHypothesisMessage=s=>this.handleSpeechHypothesis(s)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,n,r){}handleRecognizingCallback(e,n,r){}processSpeechMessages(e){return v(this,null,function*(){let n=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),n=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(e.textBody)),n=!0;break;default:break}return n})}cancelRecognition(e,n,r,i,o){}handleSpeechPhrase(e){return v(this,null,function*(){let n=si.SimpleSpeechPhrase.fromJSON(e),r=si.EnumTranslation.implTranslateRecognitionResult(n.RecognitionStatus),i,o=new ir.PropertyCollection;o.setProperty(ir.PropertyId.SpeechServiceResponse_JsonResult,e);let s=n.Offset+this.privRequestSession.currentTurnAudioOffset,a=s;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),ir.ResultReason.Canceled===r){let c=si.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus),u=si.EnumTranslation.implTranslateCancelErrorCode(n.RecognitionStatus);yield this.cancelRecognitionLocal(c,u,si.EnumTranslation.implTranslateErrorDetails(u))}else if(!(this.privRequestSession.isSpeechEnded&&r===ir.ResultReason.NoMatch&&n.RecognitionStatus!==si.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(si.OutputFormatPropertyName)===ir.OutputFormat[ir.OutputFormat.Simple])i=new ir.SpeechRecognitionResult(this.privRequestSession.requestId,r,n.DisplayText,n.Duration,s,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,e,o);else{let c=si.DetailedSpeechPhrase.fromJSON(e),u=c.Offset+this.privRequestSession.currentTurnAudioOffset,l=c.getJsonWithCorrectedOffsets(u);i=new ir.SpeechRecognitionResult(this.privRequestSession.requestId,r,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,l,o),a=i.offset}this.handleRecognizedCallback(i,a,this.privRequestSession.sessionId)}})}handleSpeechHypothesis(e){let n=si.SpeechHypothesis.fromJSON(e),r=n.Offset+this.privRequestSession.currentTurnAudioOffset,i=new ir.PropertyCollection;i.setProperty(ir.PropertyId.SpeechServiceResponse_JsonResult,e);let o=new ir.SpeechRecognitionResult(this.privRequestSession.requestId,ir.ResultReason.RecognizingSpeech,n.Text,n.Duration,r,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,e,i);this.privRequestSession.onHypothesis(r),this.handleRecognizingCallback(o,n.Duration,this.privRequestSession.sessionId)}};_C.ConversationServiceRecognizer=AT});var i$=h(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.RecognizerConfig=ai.SpeechResultFormat=ai.RecognitionMode=void 0;var RC=I(),r$=M(),PC;(function(t){t[t.Interactive=0]="Interactive",t[t.Conversation=1]="Conversation",t[t.Dictation=2]="Dictation"})(PC=ai.RecognitionMode||(ai.RecognitionMode={}));var fce;(function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"})(fce=ai.SpeechResultFormat||(ai.SpeechResultFormat={}));var MT=class{constructor(e,n){this.privSpeechServiceConfig=e||new r$.SpeechServiceConfig(new r$.Context(null)),this.privParameters=n,this.privMaxRetryCount=parseInt(n.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=n.getProperty(RC.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===PC.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=PC[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==PC.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(RC.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(RC.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){let e=[],n=!1;if(this.autoDetectSourceLanguages!==void 0)for(let r of this.autoDetectSourceLanguages.split(",")){let i=r+RC.PropertyId.SpeechServiceConnection_EndpointId.toString(),o=this.parameters.getProperty(i,void 0);o!==void 0?(e.push({language:r,endpoint:o}),n=!0):e.push({language:r,endpoint:""})}return n?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}};ai.RecognizerConfig=MT});var s$=h(o$=>{"use strict";Object.defineProperty(o$,"__esModule",{value:!0})});var c$=h(TC=>{"use strict";Object.defineProperty(TC,"__esModule",{value:!0});TC.WebsocketMessageFormatter=void 0;var or=L(),a$=`\r
`,OT=class{toConnectionMessage(e){let n=new or.Deferred;try{if(e.messageType===or.MessageType.Text){let r=e.textContent,i={},o=null;if(r){let s=r.split(`\r
\r
`);s&&s.length>0&&(i=this.parseHeaders(s[0]),s.length>1&&(o=s[1]))}n.resolve(new or.ConnectionMessage(e.messageType,o,i,e.id))}else if(e.messageType===or.MessageType.Binary){let r=e.binaryContent,i={},o=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");let s=new DataView(r),a=s.getInt16(0);if(r.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<a;u++)c+=String.fromCharCode(s.getInt8(u+2));i=this.parseHeaders(c),r.byteLength>a+2&&(o=r.slice(2+a)),n.resolve(new or.ConnectionMessage(e.messageType,o,i,e.id))}}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(e){let n=new or.Deferred;try{if(e.messageType===or.MessageType.Text){let r=`${this.makeHeaders(e)}${a$}${e.textBody?e.textBody:""}`;n.resolve(new or.RawWebsocketMessage(or.MessageType.Text,r,e.id))}else if(e.messageType===or.MessageType.Binary){let r=this.makeHeaders(e),i=e.binaryBody,o=this.stringToArrayBuffer(r),s=new Int8Array(o),a=s.byteLength,c=new Int8Array(2+a+(i?i.byteLength:0));if(c[0]=a>>8&255,c[1]=a&255,c.set(s,2),i){let l=new Int8Array(i);c.set(l,2+a)}let u=c.buffer;n.resolve(new or.RawWebsocketMessage(or.MessageType.Binary,u,e.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}makeHeaders(e){let n="";if(e.headers)for(let r in e.headers)r&&(n+=`${r}: ${e.headers[r]}${a$}`);return n}parseHeaders(e){let n={};if(e){let r=e.match(/[^\r\n]+/g);if(n){for(let i of r)if(i){let o=i.indexOf(":"),s=o>0?i.substr(0,o).trim().toLowerCase():i,a=o>0&&i.length>o+1?i.substr(o+1).trim():"";n[s]=a}}}return n}stringToArrayBuffer(e){let n=new ArrayBuffer(e.length),r=new DataView(n);for(let i=0;i<e.length;i++)r.setUint8(i,e.charCodeAt(i));return n}};TC.WebsocketMessageFormatter=OT});var p$=h(AC=>{"use strict";Object.defineProperty(AC,"__esModule",{value:!0});AC.SpeechConnectionFactory=void 0;var u$=dt(),l$=M(),Zo=I(),d$=nr(),xT=M(),hce=Bt(),ha=Wi(),NT=class extends d$.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(e,n,r){let i=e.parameters.getProperty(Zo.PropertyId.SpeechServiceConnection_Endpoint,void 0),o=e.parameters.getProperty(Zo.PropertyId.SpeechServiceConnection_Region,void 0),s=d$.ConnectionFactoryBase.getHostSuffix(o),a=e.parameters.getProperty(Zo.PropertyId.SpeechServiceConnection_Host,"wss://"+o+".stt.speech"+s),c={},u=e.parameters.getProperty(Zo.PropertyId.SpeechServiceConnection_EndpointId,void 0),l=e.parameters.getProperty(Zo.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(u?(!i||i.search(ha.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(c[ha.QueryParameterNames.CustomSpeechDeploymentId]=u):l&&(!i||i.search(ha.QueryParameterNames.Language)===-1)&&(c[ha.QueryParameterNames.Language]=l),(!i||i.search(ha.QueryParameterNames.Format)===-1)&&(c[ha.QueryParameterNames.Format]=e.parameters.getProperty(l$.OutputFormatPropertyName,Zo.OutputFormat[Zo.OutputFormat.Simple]).toLowerCase()),e.autoDetectSourceLanguages!==void 0&&(c[ha.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,c,i),!i)switch(e.recognitionMode){case xT.RecognitionMode.Conversation:e.parameters.getProperty(l$.ForceDictationPropertyName,"false")==="true"?i=a+this.dictationRelativeUri:e.recognitionEndpointVersion!==void 0&&parseInt(e.recognitionEndpointVersion,10)>1?i=`${a}${this.universalUri}${e.recognitionEndpointVersion}`:i=a+this.conversationRelativeUri;break;case xT.RecognitionMode.Dictation:i=a+this.dictationRelativeUri;break;default:e.recognitionEndpointVersion!==void 0&&parseInt(e.recognitionEndpointVersion,10)>1?i=`${a}${this.universalUri}${e.recognitionEndpointVersion}`:i=a+this.interactiveRelativeUri;break}let d={};n.token!==void 0&&n.token!==""&&(d[n.headerName]=n.token),d[hce.HeaderNames.ConnectionId]=r;let p=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",f=new u$.WebsocketConnection(i,c,d,new xT.WebsocketMessageFormatter,u$.ProxyInfo.fromRecognizerConfig(e),p,r),g=f.uri;return e.parameters.setProperty(Zo.PropertyId.SpeechServiceConnection_Url,g),f}};AC.SpeechConnectionFactory=NT});var g$=h(MC=>{"use strict";Object.defineProperty(MC,"__esModule",{value:!0});MC.ConversationTranscriberConnectionFactory=void 0;var f$=dt(),kn=I(),gce=M(),h$=nr(),vce=M(),mce=Bt(),sr=Wi(),kT=class extends h$.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(e,n,r){let i=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_Endpoint,void 0),o=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_Region,void 0),s=h$.ConnectionFactoryBase.getHostSuffix(o),a=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_Host,"wss://"+o+".stt.speech"+s),c={},u=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_EndpointId,void 0),l=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);u?(!i||i.search(sr.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(c[sr.QueryParameterNames.CustomSpeechDeploymentId]=u):l&&(!i||i.search(sr.QueryParameterNames.Language)===-1)&&(c[sr.QueryParameterNames.Language]=l),e.autoDetectSourceLanguages!==void 0&&(c[sr.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,c,i),i||(i=`${a}${this.universalUri}`);let d={};n.token!==void 0&&n.token!==""&&(d[n.headerName]=n.token),d[mce.HeaderNames.ConnectionId]=r;let p=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",f=new f$.WebsocketConnection(i,c,d,new vce.WebsocketMessageFormatter,f$.ProxyInfo.fromRecognizerConfig(e),p,r),g=f.uri;return e.parameters.setProperty(kn.PropertyId.SpeechServiceConnection_Url,g),f}setV2UrlParams(e,n,r){new Map([[kn.PropertyId.Speech_SegmentationSilenceTimeoutMs,sr.QueryParameterNames.SegmentationSilenceTimeoutMs],[kn.PropertyId.SpeechServiceConnection_EnableAudioLogging,sr.QueryParameterNames.EnableAudioLogging],[kn.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,sr.QueryParameterNames.EndSilenceTimeoutMs],[kn.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,sr.QueryParameterNames.InitialSilenceTimeoutMs],[kn.PropertyId.SpeechServiceResponse_PostProcessingOption,sr.QueryParameterNames.Postprocessing],[kn.PropertyId.SpeechServiceResponse_ProfanityOption,sr.QueryParameterNames.Profanity],[kn.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,sr.QueryParameterNames.StableIntermediateThreshold]]).forEach((s,a)=>{this.setUrlParameter(a,s,e,n,r)});let o=JSON.parse(e.parameters.getProperty(gce.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach(s=>{n[s]=o[s]})}};MC.ConversationTranscriberConnectionFactory=kT});var C$=h(OC=>{"use strict";Object.defineProperty(OC,"__esModule",{value:!0});OC.TranscriberConnectionFactory=void 0;var v$=dt(),Fn=I(),m$=nr(),y$=M(),yce=Bt(),yp=Wi(),FT=class extends m$.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(e,n,r){let i=e.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_Endpoint,void 0),o=e.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_Region,"centralus"),s=m$.ConnectionFactoryBase.getHostSuffix(o),a="wss://transcribe."+o+".cts.speech"+s+this.multiaudioRelativeUri,c=e.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_Host,a),u={};this.setQueryParams(u,e,i),i||(i=c);let l={};n.token!==void 0&&n.token!==""&&(l[n.headerName]=n.token),l[yce.HeaderNames.ConnectionId]=r,e.parameters.setProperty(Fn.PropertyId.SpeechServiceConnection_Url,i);let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new v$.WebsocketConnection(i,u,l,new y$.WebsocketMessageFormatter,v$.ProxyInfo.fromRecognizerConfig(e),d,r)}setQueryParams(e,n,r){let i=n.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_EndpointId,void 0),o=n.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);i&&!(yp.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[yp.QueryParameterNames.CustomSpeechDeploymentId]=i),o&&!(yp.QueryParameterNames.Language in e)&&(e[yp.QueryParameterNames.Language]=o);let s=n.parameters.getProperty(Fn.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",a=n.parameters.getProperty(y$.OutputFormatPropertyName,Fn.OutputFormat[Fn.OutputFormat.Simple])!==Fn.OutputFormat[Fn.OutputFormat.Simple];(s||a)&&(e[yp.QueryParameterNames.Format]=Fn.OutputFormat[Fn.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(n,e,r)}};OC.TranscriberConnectionFactory=FT});var E$=h(xC=>{"use strict";Object.defineProperty(xC,"__esModule",{value:!0});xC.TranslationConnectionFactory=void 0;var S$=dt(),Cce=DP(),Zi=I(),w$=nr(),LT=M(),Sce=Bt(),b$=Wi(),jT=class extends w$.ConnectionFactoryBase{create(e,n,r){let i=this.getEndpointUrl(e),o={};e.autoDetectSourceLanguages!==void 0&&(o[b$.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(o,e,i);let s={};n.token!==void 0&&n.token!==""&&(s[n.headerName]=n.token),s[Sce.HeaderNames.ConnectionId]=r,e.parameters.setProperty(Zi.PropertyId.SpeechServiceConnection_Url,i);let a=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new S$.WebsocketConnection(i,o,s,new LT.WebsocketMessageFormatter,S$.ProxyInfo.fromRecognizerConfig(e),a,r)}getEndpointUrl(e,n){let r=e.parameters.getProperty(Zi.PropertyId.SpeechServiceConnection_Region),i=w$.ConnectionFactoryBase.getHostSuffix(r),o=e.parameters.getProperty(Zi.PropertyId.SpeechServiceConnection_Endpoint,void 0);return o||(e.autoDetectSourceLanguages!==void 0?o=e.parameters.getProperty(Zi.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+i)+"/speech/universal/v2":o=e.parameters.getProperty(Zi.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+i)+"/speech/translation/cognitiveservices/v1"),n===!0?o:Cce.StringUtils.formatString(o,{region:r})}setQueryParams(e,n,r){e.from=n.parameters.getProperty(Zi.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=n.parameters.getProperty(Zi.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=n.recognitionMode===LT.RecognitionMode.Interactive?"interactive":n.recognitionMode===LT.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(n,e,r),this.setUrlParameter(Zi.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,b$.QueryParameterNames.StableTranslation,n,e,r);let i=n.parameters.getProperty(Zi.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);i!==void 0&&(e.voice=i,e.features="texttospeech")}};xC.TranslationConnectionFactory=jT});var I$=h(NC=>{"use strict";Object.defineProperty(NC,"__esModule",{value:!0});NC.EnumTranslation=void 0;var gt=I(),nt=M(),qT=class{static implTranslateRecognitionResult(e,n=!1){let r=gt.ResultReason.Canceled;switch(e){case nt.RecognitionStatus.Success:r=gt.ResultReason.RecognizedSpeech;break;case nt.RecognitionStatus.EndOfDictation:r=n?gt.ResultReason.RecognizedSpeech:gt.ResultReason.NoMatch;break;case nt.RecognitionStatus.NoMatch:case nt.RecognitionStatus.InitialSilenceTimeout:case nt.RecognitionStatus.BabbleTimeout:r=gt.ResultReason.NoMatch;break;case nt.RecognitionStatus.Error:case nt.RecognitionStatus.BadRequest:case nt.RecognitionStatus.Forbidden:default:r=gt.ResultReason.Canceled;break}return r}static implTranslateCancelResult(e){let n=gt.CancellationReason.EndOfStream;switch(e){case nt.RecognitionStatus.Success:case nt.RecognitionStatus.EndOfDictation:case nt.RecognitionStatus.NoMatch:n=gt.CancellationReason.EndOfStream;break;case nt.RecognitionStatus.InitialSilenceTimeout:case nt.RecognitionStatus.BabbleTimeout:case nt.RecognitionStatus.Error:case nt.RecognitionStatus.BadRequest:case nt.RecognitionStatus.Forbidden:default:n=gt.CancellationReason.Error;break}return n}static implTranslateCancelErrorCode(e){let n=gt.CancellationErrorCode.NoError;switch(e){case nt.RecognitionStatus.Error:n=gt.CancellationErrorCode.ServiceError;break;case nt.RecognitionStatus.TooManyRequests:n=gt.CancellationErrorCode.TooManyRequests;break;case nt.RecognitionStatus.BadRequest:n=gt.CancellationErrorCode.BadRequestParameters;break;case nt.RecognitionStatus.Forbidden:n=gt.CancellationErrorCode.Forbidden;break;default:n=gt.CancellationErrorCode.NoError;break}return n}static implTranslateErrorDetails(e){let n="The speech service encountered an internal error and could not continue.";switch(e){case gt.CancellationErrorCode.Forbidden:n="The recognizer is using a free subscription that ran out of quota.";break;case gt.CancellationErrorCode.BadRequestParameters:n="Invalid parameter or unsupported audio format in the request.";break;case gt.CancellationErrorCode.TooManyRequests:n="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break;default:break}return n}};NC.EnumTranslation=qT});var D$=h(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.RecognitionStatus=Yo.SynthesisStatus=void 0;var wce;(function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"})(wce=Yo.SynthesisStatus||(Yo.SynthesisStatus={}));var bce;(function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"})(bce=Yo.RecognitionStatus||(Yo.RecognitionStatus={}))});var R$=h(kC=>{"use strict";Object.defineProperty(kC,"__esModule",{value:!0});kC.TranslationSynthesisEnd=void 0;var _$=M(),BT=class t{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=_$.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=_$.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new t(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};kC.TranslationSynthesisEnd=BT});var P$=h(FC=>{"use strict";Object.defineProperty(FC,"__esModule",{value:!0});FC.TranslationHypothesis=void 0;var Ece=$(),Ice=kg(),VT=class t{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=Ice.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new t(JSON.parse(e))}static fromTranslationResponse(e){Ece.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");let n=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,n.Translation=e,new t(n)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}};FC.TranslationHypothesis=VT});var T$=h(LC=>{"use strict";Object.defineProperty(LC,"__esModule",{value:!0});LC.TranslationPhrase=void 0;var Dce=$(),_ce=M(),Rce=kg(),zT=class t{constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=_ce.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=Rce.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new t(JSON.parse(e))}static fromTranslationResponse(e){Dce.Contracts.throwIfNullOrUndefined(e,"translationResponse");let n=e.SpeechPhrase;return e.SpeechPhrase=void 0,n.Translation=e,n.Text=n.DisplayText,new t(n)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};LC.TranslationPhrase=zT});var M$=h(jC=>{"use strict";Object.defineProperty(jC,"__esModule",{value:!0});jC.TranslationServiceRecognizer=void 0;var A$=L(),we=I(),Ut=M(),UT=class extends Ut.ConversationServiceRecognizer{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privTranslationRecognizer=o,this.connectionEvents.attach(s=>{s.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}processTypeSpecificMessages(e){return v(this,null,function*(){let n=new we.PropertyCollection,r=yield this.processSpeechMessages(e);if(r)return!0;let i=s=>v(this,null,function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),s.RecognitionStatus===Ut.RecognitionStatus.Success){let a=this.fireEventForResult(s,n);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,a)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a.result)}catch(c){this.privErrorCallback&&this.privErrorCallback(c)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{let a=Ut.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus),c=new we.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,a,s.Text,s.Duration,this.privRequestSession.currentTurnAudioOffset+s.Offset,s.Language,s.Confidence,void 0,e.textBody,n);if(a===we.ResultReason.Canceled){let u=Ut.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),l=Ut.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);yield this.cancelRecognitionLocal(u,l,Ut.EnumTranslation.implTranslateErrorDetails(l))}else{if(!(this.privRequestSession.isSpeechEnded&&a===we.ResultReason.NoMatch&&s.RecognitionStatus!==Ut.RecognitionStatus.InitialSilenceTimeout)){let u=new we.TranslationRecognitionEventArgs(c,c.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(c)}catch(u){this.privErrorCallback&&this.privErrorCallback(u)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}r=!0}}),o=(s,a)=>{let c=this.fireEventForResult(s,a);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+c.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}r=!0};switch(e.messageType===A$.MessageType.Text&&n.setProperty(we.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":o(Ut.TranslationHypothesis.fromJSON(e.textBody),n);break;case"translation.response":let s=JSON.parse(e.textBody);if(s.SpeechPhrase)yield i(Ut.TranslationPhrase.fromTranslationResponse(s));else{let c=JSON.parse(e.textBody);c.SpeechHypothesis&&o(Ut.TranslationHypothesis.fromTranslationResponse(c),n)}break;case"translation.phrase":yield i(Ut.TranslationPhrase.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),r=!0;break;case"audio.end":case"translation.synthesis.end":let a=Ut.TranslationSynthesisEnd.fromJSON(e.textBody);switch(a.SynthesisStatus){case Ut.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){let c=new we.TranslationSynthesisResult(we.ResultReason.Canceled,void 0),u=new we.TranslationSynthesisEventArgs(c,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}if(this.privTranslationRecognizer.canceled){let c=new we.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,we.CancellationReason.Error,a.FailureReason,we.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,c)}catch{}}break;case Ut.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break;default:break}r=!0;break;default:break}return r})}cancelRecognition(e,n,r,i,o){let s=new we.PropertyCollection;if(s.setProperty(Ut.CancellationErrorCodePropertyName,we.CancellationErrorCode[i]),this.privTranslationRecognizer.canceled){let a=new we.TranslationRecognitionCanceledEventArgs(e,r,o,i,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new we.TranslationRecognitionResult(void 0,n,we.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(e,n,r){try{let i=new we.TranslationRecognitionEventArgs(we.TranslationRecognitionResult.fromSpeechRecognitionResult(e),n,r);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch{}}handleRecognizedCallback(e,n,r){try{let i=new we.TranslationRecognitionEventArgs(we.TranslationRecognitionResult.fromSpeechRecognitionResult(e),n,r);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,i)}catch{}}fireEventForResult(e,n){let r;if(e.Translation.Translations!==void 0){r=new we.Translations;for(let l of e.Translation.Translations)r.set(l.Language,l.Text||l.DisplayText)}let i,o;e instanceof Ut.TranslationPhrase?(e.Translation&&e.Translation.TranslationStatus===A$.TranslationStatus.Success?i=we.ResultReason.TranslatedSpeech:i=we.ResultReason.RecognizedSpeech,o=e.Confidence):i=we.ResultReason.TranslatingSpeech;let s=e.Language,a=e.Offset+this.privRequestSession.currentTurnAudioOffset,c=new we.TranslationRecognitionResult(r,this.privRequestSession.requestId,i,e.Text,e.Duration,a,s,o,e.Translation.FailureReason,JSON.stringify(e),n);return new we.TranslationRecognitionEventArgs(c,a,this.privRequestSession.sessionId)}sendSynthesisAudio(e,n){let r=e===void 0?we.ResultReason.SynthesizingAudioCompleted:we.ResultReason.SynthesizingAudio,i=new we.TranslationSynthesisResult(r,e),o=new we.TranslationSynthesisEventArgs(i,n);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,o)}catch{}}};jC.TranslationServiceRecognizer=UT});var O$=h(qC=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0});qC.SpeechDetected=void 0;var HT=class t{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new t(e)}get Offset(){return this.privSpeechStartDetected.Offset}};qC.SpeechDetected=HT});var x$=h(BC=>{"use strict";Object.defineProperty(BC,"__esModule",{value:!0});BC.SpeechHypothesis=void 0;var $T=class t{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new t(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};BC.SpeechHypothesis=$T});var N$=h(VC=>{"use strict";Object.defineProperty(VC,"__esModule",{value:!0});VC.SpeechKeyword=void 0;var WT=class t{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new t(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}};VC.SpeechKeyword=WT});var k$=h(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0});zC.SpeechServiceRecognizer=void 0;var Rt=I(),ar=M(),GT=class extends ar.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privSpeechRecognizer=o}processTypeSpecificMessages(e){return v(this,null,function*(){let n,r=new Rt.PropertyCollection;r.setProperty(Rt.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let i=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let o=ar.SpeechHypothesis.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset;n=new Rt.SpeechRecognitionResult(this.privRequestSession.requestId,Rt.ResultReason.RecognizingSpeech,o.Text,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(s);let a=new Rt.SpeechRecognitionEventArgs(n,o.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,a)}catch{}i=!0;break;case"speech.phrase":let c=ar.SimpleSpeechPhrase.fromJSON(e.textBody),u=ar.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+c.Offset+c.Duration),Rt.ResultReason.Canceled===u){let l=ar.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),d=ar.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(l,d,ar.EnumTranslation.implTranslateErrorDetails(d))}else{if(!(this.privRequestSession.isSpeechEnded&&u===Rt.ResultReason.NoMatch&&c.RecognitionStatus!==ar.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(ar.OutputFormatPropertyName)===Rt.OutputFormat[Rt.OutputFormat.Simple])n=new Rt.SpeechRecognitionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,e.textBody,r);else{let d=ar.DetailedSpeechPhrase.fromJSON(e.textBody),p=d.Offset+this.privRequestSession.currentTurnAudioOffset,f=d.getJsonWithCorrectedOffsets(p);n=new Rt.SpeechRecognitionResult(this.privRequestSession.requestId,u,d.RecognitionStatus===ar.RecognitionStatus.Success?d.NBest[0].Display:void 0,d.Duration,p,d.Language,d.LanguageDetectionConfidence,void 0,void 0,f,r)}let l=new Rt.SpeechRecognitionEventArgs(n,n.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(n)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0;break;default:break}return i})}cancelRecognition(e,n,r,i,o){let s=new Rt.PropertyCollection;if(s.setProperty(ar.CancellationErrorCodePropertyName,Rt.CancellationErrorCode[i]),this.privSpeechRecognizer.canceled){let a=new Rt.SpeechRecognitionCanceledEventArgs(r,o,i,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Rt.SpeechRecognitionResult(n,Rt.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}};zC.SpeechServiceRecognizer=GT});var F$=h(UC=>{"use strict";Object.defineProperty(UC,"__esModule",{value:!0});UC.ConversationTranscriptionServiceRecognizer=void 0;var sn=I(),cr=M(),KT=class extends cr.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privConversationTranscriber=o,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){let e=this.privSpeechContext.getSection("phraseDetection");e.mode="Conversation";let n={};n.mode="Anonymous",n.audioSessionId=this.privDiarizationSessionId,n.audioOffsetMs=0,e.speakerDiarization=n,this.privSpeechContext.setSection("phraseDetection",e)}}processTypeSpecificMessages(e){return v(this,null,function*(){let n,r=new sn.PropertyCollection;r.setProperty(sn.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let i=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let o=cr.SpeechHypothesis.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset;n=new sn.ConversationTranscriptionResult(this.privRequestSession.requestId,sn.ResultReason.RecognizingSpeech,o.Text,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(s);let a=new sn.ConversationTranscriptionEventArgs(n,o.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,a)}catch{}i=!0;break;case"speech.phrase":let c=cr.SimpleSpeechPhrase.fromJSON(e.textBody),u=cr.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+c.Offset+c.Duration),sn.ResultReason.Canceled===u){let l=cr.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),d=cr.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(l,d,cr.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&u===sn.ResultReason.NoMatch&&c.RecognitionStatus!==cr.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(cr.OutputFormatPropertyName)===sn.OutputFormat[sn.OutputFormat.Simple])n=new sn.ConversationTranscriptionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,e.textBody,r);else{let d=cr.DetailedSpeechPhrase.fromJSON(e.textBody),p=d.Offset+this.privRequestSession.currentTurnAudioOffset,f=d.getJsonWithCorrectedOffsets(p);n=new sn.ConversationTranscriptionResult(this.privRequestSession.requestId,u,d.RecognitionStatus===cr.RecognitionStatus.Success?d.NBest[0].Display:void 0,d.Duration,p,d.Language,d.LanguageDetectionConfidence,c.SpeakerId,void 0,f,r)}let l=new sn.ConversationTranscriptionEventArgs(n,n.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,l)}catch{}}i=!0;break;default:break}return i})}cancelRecognition(e,n,r,i,o){if(new sn.PropertyCollection().setProperty(cr.CancellationErrorCodePropertyName,sn.CancellationErrorCode[i]),this.privConversationTranscriber.canceled){let a=new sn.ConversationTranscriptionCanceledEventArgs(r,o,i,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,a)}catch{}}}};UC.ConversationTranscriptionServiceRecognizer=KT});var j$=h(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0});HC.TranscriptionServiceRecognizer=void 0;var Pce=L(),Yi=I(),L$=M(),Tce=fa(),JT=class extends L$.ConversationServiceRecognizer{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privTranscriberRecognizer=o,this.sendPrePayloadJSONOverride=s=>this.sendTranscriptionStartJSON(s),this.privRecognizerConfig.parameters.getProperty(Yi.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(e,n){return v(this,null,function*(){if(this.privRequestSession.isRecognizing){let r=yield this.fetchConnection();yield this.sendSpeechEvent(r,this.createSpeechEventPayload(e,n))}})}sendMeetingSpeechEventAsync(e,n){return v(this,null,function*(){if(this.privRequestSession.isRecognizing){let r=yield this.fetchConnection();yield this.sendSpeechEvent(r,this.createMeetingSpeechEventPayload(e,n))}})}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,n,r){try{let i=new Yi.SpeechRecognitionEventArgs(e,n,r);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,i),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(o){this.privErrorCallback&&this.privErrorCallback(o)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(e,n,r){try{let i=new Yi.SpeechRecognitionEventArgs(e,n,r);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,i)}catch{}}cancelRecognition(e,n,r,i,o){let s=new Yi.PropertyCollection;if(s.setProperty(L$.CancellationErrorCodePropertyName,Yi.CancellationErrorCode[i]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){let a=new Yi.MeetingTranscriptionCanceledEventArgs(r,o,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch{}}}else if(this.privTranscriberRecognizer.canceled){let a=new Yi.ConversationTranscriptionCanceledEventArgs(r,o,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Yi.SpeechRecognitionResult(n,Yi.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}sendTranscriptionStartJSON(e){return v(this,null,function*(){if(yield this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){let n=this.privTranscriberRecognizer.getMeetingInfo(),r=this.createMeetingSpeechEventPayload(n,"start");yield this.sendSpeechEvent(e,r)}else{let n=this.privTranscriberRecognizer.getConversationInfo(),r=this.createSpeechEventPayload(n,"start");yield this.sendSpeechEvent(e,r)}yield this.sendWaveHeader(e)})}sendSpeechEvent(e,n){let r=JSON.stringify(n);if(r)return e.send(new Tce.SpeechConnectionMessage(Pce.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",r))}createSpeechEventPayload(e,n){let r={id:"meeting",name:n,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r}createMeetingSpeechEventPayload(e,n){let r={id:"meeting",name:n,meeting:e.meetingProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r}};HC.TranscriptionServiceRecognizer=JT});var q$=h($C=>{"use strict";Object.defineProperty($C,"__esModule",{value:!0});$C.DetailedSpeechPhrase=void 0;var Ace=M(),QT=class t{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=Ace.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new t(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let n;for(let r of this.privDetailedSpeechPhrase.NBest)if(r.Words&&r.Words[0]){n=r.Words[0].Offset;break}if(n&&n<e){let r=e-n;for(let i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(let o of i.Words)o.Offset+=r;if(i.DisplayWords)for(let o of i.DisplayWords)o.Offset+=r}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};$C.DetailedSpeechPhrase=QT});var B$=h(WC=>{"use strict";Object.defineProperty(WC,"__esModule",{value:!0});WC.SimpleSpeechPhrase=void 0;var Mce=M(),ZT=class t{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=Mce.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new t(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};WC.SimpleSpeechPhrase=ZT});var V$=h(GC=>{"use strict";Object.defineProperty(GC,"__esModule",{value:!0});GC.AddedLmIntent=void 0;var YT=class{constructor(e,n){this.modelImpl=e,this.intentName=n}};GC.AddedLmIntent=YT});var U$=h(KC=>{"use strict";Object.defineProperty(KC,"__esModule",{value:!0});KC.IntentServiceRecognizer=void 0;var z$=L(),rt=I(),Tu=M(),XT=class extends Tu.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privIntentRecognizer=o,this.privIntentDataSent=!1}setIntents(e,n){this.privAddedLmIntents=e,this.privUmbrellaIntent=n,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let n,r,i=!1,o=new rt.PropertyCollection;switch(e.messageType===z$.MessageType.Text&&o.setProperty(rt.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":let a=Tu.SpeechHypothesis.fromJSON(e.textBody);if(n=new rt.IntentRecognitionResult(void 0,this.privRequestSession.requestId,rt.ResultReason.RecognizingIntent,a.Text,a.Duration,a.Offset+this.privRequestSession.currentTurnAudioOffset,a.Language,a.LanguageDetectionConfidence,void 0,e.textBody,o),this.privRequestSession.onHypothesis(n.offset),r=new rt.IntentRecognitionEventArgs(n,a.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,r)}catch{}i=!0;break;case"speech.phrase":let c=Tu.SimpleSpeechPhrase.fromJSON(e.textBody);n=new rt.IntentRecognitionResult(void 0,this.privRequestSession.requestId,Tu.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus),c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,e.textBody,o),r=new rt.IntentRecognitionEventArgs(n,n.offset,this.privRequestSession.sessionId);let u=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(n)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||rt.ResultReason.NoMatch===r.result.reason?(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),u()):this.privPendingIntentArgs=r,i=!0;break;case"response":if(r=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,r===void 0){if(e.textBody==="")return;r=new rt.IntentRecognitionEventArgs(new rt.IntentRecognitionResult,0,this.privRequestSession.sessionId)}let l=Tu.IntentResponse.fromJSON(e.textBody);if(l!==null&&l.topScoringIntent&&l.topScoringIntent.intent){let d=this.privAddedLmIntents[l.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(d=this.privUmbrellaIntent),d){let p=d===void 0||d.intentName===void 0?l.topScoringIntent.intent:d.intentName,f=r.result.reason;p!==void 0&&(f=rt.ResultReason.RecognizedIntent);let g=r.result.properties!==void 0?r.result.properties:new rt.PropertyCollection;g.setProperty(rt.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),r=new rt.IntentRecognitionEventArgs(new rt.IntentRecognitionResult(p,r.result.resultId,f,r.result.text,r.result.duration,r.result.offset,void 0,void 0,r.result.errorDetails,r.result.json,g),r.offset,r.sessionId)}}if(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(r.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}i=!0;break;default:break}let s=new z$.Deferred;return s.resolve(i),s.promise}cancelRecognition(e,n,r,i,o){let s=new rt.PropertyCollection;if(s.setProperty(Tu.CancellationErrorCodePropertyName,rt.CancellationErrorCode[i]),this.privIntentRecognizer.canceled){let a=new rt.IntentRecognitionCanceledEventArgs(r,o,i,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new rt.IntentRecognitionResult(void 0,n,rt.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}};KC.IntentServiceRecognizer=XT});var H$=h(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});JC.IntentResponse=void 0;var eA=class t{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}};JC.IntentResponse=eA});var W$=h($$=>{"use strict";Object.defineProperty($$,"__esModule",{value:!0})});var K$=h(QC=>{"use strict";Object.defineProperty(QC,"__esModule",{value:!0});QC.ServiceTelemetryListener=void 0;var Xi=L(),G$=bC(),tA=class{constructor(e,n,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=n,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof G$.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof Xi.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Xi.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Xi.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Xi.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Xi.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof G$.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof Xi.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof Xi.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Xi.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Xi.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){let e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});let n={Metrics:e,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(n);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}};QC.ServiceTelemetryListener=tA});var J$=h(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});YC.RequestSession=void 0;var Au=L(),ZC=bC(),Oce=K$(),nA=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=Au.createNoDashGuid(),this.privAudioNodeId=Au.createNoDashGuid(),this.privTurnDeferral=new Au.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new Oce.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new ZC.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,n){return v(this,null,function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,n?yield this.onComplete():this.onEvent(new ZC.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(e,n){this.privAuthFetchEventId=e,this.privSessionId=n,this.onEvent(new ZC.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return v(this,null,function*(){e&&(yield this.onComplete())})}onConnectionEstablishCompleted(e,n){return v(this,null,function*(){if(e===200){this.onEvent(new ZC.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&(yield this.onComplete())})}onServiceTurnEndResponse(e){return v(this,null,function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=Au.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new Au.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return v(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(let e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return v(this,null,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),Au.Events.instance.onEvent(e)}onComplete(){return v(this,null,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return v(this,null,function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}};YC.RequestSession=nA});var Q$=h(XC=>{"use strict";Object.defineProperty(XC,"__esModule",{value:!0});XC.SpeechContext=void 0;var rA=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,n){this.privContext[e]=n}setPronunciationAssessmentParams(e,n,r=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),r&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),n&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:n},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){let e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}};XC.SpeechContext=rA});var Z$=h(eS=>{"use strict";Object.defineProperty(eS,"__esModule",{value:!0});eS.DynamicGrammarBuilder=void 0;var iA=class{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;let e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){let n=[];this.privPhrases.forEach(r=>{n.push({Text:r})}),e.Groups=[{Type:"Generic",Items:n}]}return e}};eS.DynamicGrammarBuilder=iA});var X$=h(Y$=>{"use strict";Object.defineProperty(Y$,"__esModule",{value:!0})});var sA=h(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.MessageDataStreamType=ga.ActivityPayloadResponse=void 0;var oA=class t{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}};ga.ActivityPayloadResponse=oA;var xce;(function(t){t[t.None=0]="None",t[t.TextToSpeechAudio=1]="TextToSpeechAudio"})(xce=ga.MessageDataStreamType||(ga.MessageDataStreamType={}))});var e3=h(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});tS.DialogServiceTurnState=void 0;var Nce=su(),kce=Js(),Fce=sA(),aA=class{constructor(e,n){this.privRequestId=n,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,n){return e.messageDataStreamType===Fce.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=kce.AudioOutputStream.createPullStream(),this.privAudioStream.format=n!==void 0?n:Nce.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};tS.DialogServiceTurnState=aA});var n3=h(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});nS.DialogServiceTurnStateManager=void 0;var t3=wr(),Lce=e3(),cA=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new t3.InvalidOperationError("Service error: There is already a turn with id:"+e);let n=new Lce.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,n),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new t3.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);let n=this.privTurnMap.get(e);return n.complete(),this.privTurnMap.delete(e),n}};nS.DialogServiceTurnStateManager=cA});var r3=h(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});iS.DialogServiceAdapter=void 0;var jce=dt(),qce=_D(),Ht=L(),Bce=su(),ge=I(),Vce=n3(),ci=M(),zce=sA(),rS=fa(),uA=class extends ci.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privEvents=new Ht.EventSource,this.privDialogServiceConnector=o,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new Vce.DialogServiceTurnStateManager,this.recognizeOverride=(s,a,c)=>this.listenOnce(s,a,c),this.postConnectImplOverride=s=>this.dialogConnectImpl(s),this.configConnectionOverride=s=>this.configConnection(s),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=r,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(s=>{s.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}sendMessage(e){return v(this,null,function*(){let n=Ht.createGuid(),r=Ht.createNoDashGuid(),i={context:{interactionId:n},messagePayload:JSON.parse(e),version:.5},o=JSON.stringify(i);yield(yield this.fetchConnection()).send(new rS.SpeechConnectionMessage(Ht.MessageType.Text,"agent",r,"application/json",o))})}privDisconnect(){return v(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ge.CancellationReason.Error,ge.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1})}processTypeSpecificMessages(e){let n=new ge.PropertyCollection;e.messageType===Ht.MessageType.Text&&n.setProperty(ge.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let r,i;switch(e.path.toLowerCase()){case"speech.phrase":let s=ci.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),s.RecognitionStatus!==ci.RecognitionStatus.TooManyRequests&&s.RecognitionStatus!==ci.RecognitionStatus.Error){let p=this.fireEventForResult(s,n);if(this.privLastResult=p.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,p)}catch{}}i=!0;break;case"speech.hypothesis":let a=ci.SpeechHypothesis.fromJSON(e.textBody),c=a.Offset+this.privRequestSession.currentTurnAudioOffset;r=new ge.SpeechRecognitionResult(this.privRequestSession.requestId,ge.ResultReason.RecognizingSpeech,a.Text,a.Duration,c,a.Language,a.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(c);let u=new ge.SpeechRecognitionEventArgs(r,a.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,u)}catch{}i=!0;break;case"speech.keyword":let l=ci.SpeechKeyword.fromJSON(e.textBody);r=new ge.SpeechRecognitionResult(this.privRequestSession.requestId,l.Status==="Accepted"?ge.ResultReason.RecognizedKeyword:ge.ResultReason.NoMatch,l.Text,l.Duration,l.Offset,void 0,void 0,void 0,void 0,e.textBody,n),l.Status!=="Accepted"&&(this.privLastResult=r);let d=new ge.SpeechRecognitionEventArgs(r,r.duration,r.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,d)}catch{}i=!0;break;case"audio":{let p=e.requestId.toUpperCase(),f=this.privTurnStateManager.GetTurn(p);try{e.binaryBody?f.audioStream.write(e.binaryBody):f.endAudioStream()}catch{}}i=!0;break;case"response":this.handleResponseMessage(e),i=!0;break;default:break}let o=new Ht.Deferred;return o.resolve(i),o.promise}cancelRecognition(e,n,r,i,o){return v(this,null,function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){let s=new ge.PropertyCollection;s.setProperty(ci.CancellationErrorCodePropertyName,ge.CancellationErrorCode[i]);let a=new ge.SpeechRecognitionCanceledEventArgs(r,o,i,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,a)}catch{}if(this.privSuccessCallback){let c=new ge.SpeechRecognitionResult(void 0,ge.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(c),this.privSuccessCallback=void 0}catch{}}}})}listenOnce(e,n,r){return v(this,null,function*(){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=n,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(ge.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let i=this.connectImpl(),o=this.sendPreAudioMessages(),s=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,u=new jce.ReplayableAudioNode(s,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield i,yield o}catch(p){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ge.CancellationReason.Error,ge.CancellationErrorCode.ConnectionFailure,p),Promise.resolve()}let l=new ge.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.sendAudio(u).then(()=>{},p=>v(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ge.CancellationReason.Error,ge.CancellationErrorCode.RuntimeError,p)}))})}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){let e=new Ht.Deferred,n=()=>v(this,null,function*(){try{let r=this.isDisposed(),i=!this.isDisposed()&&this.terminateMessageLoop;if(r||i){e.resolve(void 0);return}let s=yield(yield this.fetchConnection()).read();if(!s)return n();let a=rS.SpeechConnectionMessage.fromConnectionMessage(s);switch(a.path.toLowerCase()){case"turn.start":{let g=a.requestId.toUpperCase(),m=this.privRequestSession.requestId.toUpperCase();g!==m?this.privTurnStateManager.StartTurn(g):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":let u=ci.SpeechDetected.fromJSON(a.textBody),l=new ge.RecognitionEventArgs(u.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,l);break;case"speech.enddetected":let d;a.textBody.length>0?d=a.textBody:d="{ Offset: 0 }";let p=ci.SpeechDetected.fromJSON(d);this.privRequestSession.onServiceRecognized(p.Offset+this.privRequestSession.currentTurnAudioOffset);let f=new ge.RecognitionEventArgs(p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f);break;case"turn.end":{let g=a.requestId.toUpperCase(),m=this.privRequestSession.requestId.toUpperCase();if(g!==m)this.privTurnStateManager.CompleteTurn(g);else{let y=new ge.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,y),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(w){this.privErrorCallback&&this.privErrorCallback(w)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(a))||this.serviceEvents&&this.serviceEvents.onEvent(new Ht.ServiceEvent(a.path.toLowerCase(),a.textBody))}catch{}}return n()}catch{this.terminateMessageLoop=!0,e.resolve()}});return n().catch(r=>{Ht.Events.instance.onEvent(new Ht.BackgroundEvent(r))}),e.promise}startMessageLoop(){return v(this,null,function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ge.CancellationReason.Error,ge.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()})}configConnection(e){return v(this,null,function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)})}sendPreAudioMessages(){return v(this,null,function*(){let e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e,!0),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)})}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(ge.PropertyId.Conversation_DialogType)===ge.DialogServiceConfig.DialogTypes.CustomCommands){let r=this.agentConfig.get();r.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(ge.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(r)}this.onEvent(new qce.SendingAgentContextMessageEvent(this.agentConfig));let n=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new rS.SpeechConnectionMessage(Ht.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",n))}}sendAgentContext(e){let n=Ht.createGuid(),r=this.privDialogServiceConnector.properties.getProperty(ge.PropertyId.Conversation_Speech_Activity_Template),o=JSON.stringify({channelData:"",context:{interactionId:n},messagePayload:typeof r===void 0?void 0:r,version:.5});return e.send(new rS.SpeechConnectionMessage(Ht.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",o))}fireEventForResult(e,n){let r=ci.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),i=e.Offset+this.privRequestSession.currentTurnAudioOffset,o=new ge.SpeechRecognitionResult(this.privRequestSession.requestId,r,e.DisplayText,e.Duration,i,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),n);return new ge.SpeechRecognitionEventArgs(o,i,this.privRequestSession.sessionId)}handleResponseMessage(e){let n=JSON.parse(e.textBody);switch(n.messageType.toLowerCase()){case"message":let r=e.requestId.toUpperCase(),i=zce.ActivityPayloadResponse.fromJSON(e.textBody),o=this.privTurnStateManager.GetTurn(r);if(i.conversationId){let c=this.agentConfig.get();c.botInfo.conversationId=i.conversationId,this.agentConfig.set(c)}let s=o.processActivityPayload(i,Bce.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(ge.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),a=new ge.ActivityReceivedEventArgs(i.messagePayload,s);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,a)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new ge.TurnStatusReceivedEventArgs(e.textBody))}catch{}break;default:Ht.Events.instance.onEvent(new Ht.BackgroundEvent(`Unexpected response of type ${n.messageType}. Ignoring.`));break}}onEvent(e){this.privEvents.onEvent(e),Ht.Events.instance.onEvent(e)}addKeywordContextData(){let e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(e===void 0)return;let n=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),i=e.split(";"),o=n===void 0?[]:n.split(";"),s=r===void 0?[]:r.split(";"),a=[];for(let c=0;c<i.length;c++){let u={};u.text=i[c],c<o.length&&(u.offset=Number(o[c])),c<s.length&&(u.duration=Number(s[c])),a.push(u)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:a,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};iS.DialogServiceAdapter=uA});var i3=h(oS=>{"use strict";Object.defineProperty(oS,"__esModule",{value:!0});oS.AgentConfig=void 0;var lA=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}};oS.AgentConfig=lA});var aS=h(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});sS.ConversationConnectionConfig=void 0;var Uce=CT(),ui=class t extends Uce.RestConfigBase{static get host(){return t.privHost}static get apiVersion(){return t.privApiVersion}static get clientAppId(){return t.privClientAppId}static get defaultLanguageCode(){return t.privDefaultLanguageCode}static get restPath(){return t.privRestPath}static get webSocketPath(){return t.privWebSocketPath}static get transcriptionEventKeys(){return t.privTranscriptionEventKeys}};sS.ConversationConnectionConfig=ui;ui.privHost="dev.microsofttranslator.com";ui.privRestPath="/capito/room";ui.privApiVersion="2.0";ui.privDefaultLanguageCode="en-US";ui.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";ui.privWebSocketPath="/capito/translate";ui.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]});var o3=h(uS=>{"use strict";Object.defineProperty(uS,"__esModule",{value:!0});uS.ConversationManager=void 0;var cS=dt(),Xo=$(),eo=I(),va=aS(),dA=class{constructor(){this.privRequestParams=va.ConversationConnectionConfig.configParams,this.privErrors=va.ConversationConnectionConfig.restErrors,this.privHost=va.ConversationConnectionConfig.host,this.privApiVersion=va.ConversationConnectionConfig.apiVersion,this.privRestPath=va.ConversationConnectionConfig.restPath,this.privRestAdapter=new cS.RestMessageAdapter({})}createOrJoin(e,n,r,i){try{Xo.Contracts.throwIfNullOrUndefined(e,"args");let o=e.getProperty(eo.PropertyId.SpeechServiceConnection_RecoLanguage,va.ConversationConnectionConfig.defaultLanguageCode),s=e.getProperty(eo.PropertyId.ConversationTranslator_Name,"conversation_host"),a=e.getProperty(eo.PropertyId.ConversationTranslator_Host,this.privHost),c=e.getProperty(eo.PropertyId.ConversationTranslator_CorrelationId),u=e.getProperty(eo.PropertyId.SpeechServiceConnection_Key),l=e.getProperty(eo.PropertyId.SpeechServiceConnection_Region),d=e.getProperty(eo.PropertyId.SpeechServiceAuthorization_Token);Xo.Contracts.throwIfNullOrWhitespace(o,"languageCode"),Xo.Contracts.throwIfNullOrWhitespace(s,"nickname"),Xo.Contracts.throwIfNullOrWhitespace(a,"endpointHost");let p={};p[this.privRequestParams.apiVersion]=this.privApiVersion,p[this.privRequestParams.languageCode]=o,p[this.privRequestParams.nickname]=s;let f={};c&&(f[this.privRequestParams.correlationId]=c),f[this.privRequestParams.clientAppId]=va.ConversationConnectionConfig.clientAppId,n!==void 0?p[this.privRequestParams.roomId]=n:(Xo.Contracts.throwIfNullOrUndefined(l,this.privErrors.authInvalidSubscriptionRegion),f[this.privRequestParams.subscriptionRegion]=l,u?f[this.privRequestParams.subscriptionKey]=u:d?f[this.privRequestParams.authorization]=`Bearer ${d}`:Xo.Contracts.throwIfNullOrUndefined(u,this.privErrors.authInvalidSubscriptionKey));let g={};g.headers=f,this.privRestAdapter.options=g;let m=`https://${a}${this.privRestPath}`;this.privRestAdapter.request(cS.RestRequestType.Post,m,p,null).then(y=>{let w=cS.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,y.headers);if(!y.ok){if(i){let C=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",y.status.toString()),_;try{_=JSON.parse(y.data),C+=` [${_.error.code}: ${_.error.message}]`}catch{C+=` [${y.data}]`}w&&(C+=` ${w}`),i(C)}return}let b=JSON.parse(y.data);if(b&&(b.requestId=w),r){try{r(b)}catch(C){i&&i(C)}r=void 0}}).catch(()=>{})}catch(o){if(i)if(o instanceof Error){let s=o;i(s.name+": "+s.message)}else i(o)}}leave(e,n){return new Promise((r,i)=>{try{Xo.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),Xo.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","token"));let o=e.getProperty(eo.PropertyId.ConversationTranslator_Host,this.privHost),s=e.getProperty(eo.PropertyId.ConversationTranslator_CorrelationId),a={};a[this.privRequestParams.apiVersion]=this.privApiVersion,a[this.privRequestParams.sessionToken]=n;let c={};s&&(c[this.privRequestParams.correlationId]=s);let u={};u.headers=c,this.privRestAdapter.options=u;let l=`https://${o}${this.privRestPath}`;this.privRestAdapter.request(cS.RestRequestType.Delete,l,a,null).then(d=>{d.ok,r()}).catch(()=>{})}catch(o){if(o instanceof Error){let s=o;i(s.name+": "+s.message)}else i(o)}})}};uS.ConversationManager=dA});var fA=h(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0});lS.ConversationConnectionMessage=void 0;var Hce=L(),pA=class extends Hce.ConnectionMessage{constructor(e,n,r,i){super(e,n,r,i);let o=JSON.parse(this.textBody);o.type!==void 0&&(this.privConversationMessageType=o.type)}get conversationMessageType(){return this.privConversationMessageType}};lS.ConversationConnectionMessage=pA});var a3=h(dS=>{"use strict";Object.defineProperty(dS,"__esModule",{value:!0});dS.ConversationWebsocketMessageFormatter=void 0;var ma=L(),s3=fA(),hA=class{toConnectionMessage(e){let n=new ma.Deferred;try{if(e.messageType===ma.MessageType.Text){let r=new s3.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);n.resolve(r)}else e.messageType===ma.MessageType.Binary&&n.resolve(new s3.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(e){let n=new ma.Deferred;try{if(e.messageType===ma.MessageType.Text){let r=`${e.textBody?e.textBody:""}`;n.resolve(new ma.RawWebsocketMessage(ma.MessageType.Text,r,e.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}};dS.ConversationWebsocketMessageFormatter=hA});var u3=h(pS=>{"use strict";Object.defineProperty(pS,"__esModule",{value:!0});pS.ConversationConnectionFactory=void 0;var c3=dt(),$ce=L(),Wce=$(),gA=I(),Gce=nr(),Mu=aS(),Kce=a3(),vA=class extends Gce.ConnectionFactoryBase{create(e,n,r){let i=e.parameters.getProperty(gA.PropertyId.ConversationTranslator_Host,Mu.ConversationConnectionConfig.host),o=e.parameters.getProperty(gA.PropertyId.ConversationTranslator_CorrelationId,$ce.createGuid()),s=`wss://${i}${Mu.ConversationConnectionConfig.webSocketPath}`,a=e.parameters.getProperty(gA.PropertyId.ConversationTranslator_Token,void 0);Wce.Contracts.throwIfNullOrUndefined(a,"token");let c={};c[Mu.ConversationConnectionConfig.configParams.apiVersion]=Mu.ConversationConnectionConfig.apiVersion,c[Mu.ConversationConnectionConfig.configParams.token]=a,c[Mu.ConversationConnectionConfig.configParams.correlationId]=o;let u=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new c3.WebsocketConnection(s,c,{},new Kce.ConversationWebsocketMessageFormatter,c3.ProxyInfo.fromRecognizerConfig(e),u,r)}};pS.ConversationConnectionFactory=vA});var l3=h(fS=>{"use strict";Object.defineProperty(fS,"__esModule",{value:!0});fS.ConversationRequestSession=void 0;var mA=L(),yA=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=mA.createNoDashGuid(),this.privRequestCompletionDeferral=new mA.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,n){this.privSessionId=n}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=mA.createNoDashGuid():this.onComplete()}dispose(){return v(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(let e of this.privDetachables)yield e.detach()}})}onComplete(){}};fS.ConversationRequestSession=yA});var DA=h(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.ConversationReceivedTranslationEventArgs=En.ParticipantsListEventArgs=En.ParticipantAttributeEventArgs=En.ParticipantEventArgs=En.LockRoomEventArgs=En.MuteAllEventArgs=void 0;var Cp=I(),CA=class extends Cp.SessionEventArgs{constructor(e,n){super(n),this.privIsMuted=e}get isMuted(){return this.privIsMuted}};En.MuteAllEventArgs=CA;var SA=class extends Cp.SessionEventArgs{constructor(e,n){super(n),this.privIsLocked=e}get isMuted(){return this.privIsLocked}};En.LockRoomEventArgs=SA;var wA=class extends Cp.SessionEventArgs{constructor(e,n){super(n),this.privParticipant=e}get participant(){return this.privParticipant}};En.ParticipantEventArgs=wA;var bA=class extends Cp.SessionEventArgs{constructor(e,n,r,i){super(i),this.privKey=n,this.privValue=r,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}};En.ParticipantAttributeEventArgs=bA;var EA=class extends Cp.SessionEventArgs{constructor(e,n,r,i,o,s,a,c,u){super(u),this.privRoomId=e,this.privSessionToken=n,this.privTranslateTo=r,this.privProfanityFilter=i,this.privRoomProfanityFilter=o,this.privIsRoomLocked=s,this.privIsRoomLocked=a,this.privParticipants=c}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}};En.ParticipantsListEventArgs=EA;var IA=class{constructor(e,n,r){this.privPayload=n,this.privCommand=e,this.privSessionId=r}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}};En.ConversationReceivedTranslationEventArgs=IA});var RA=h(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.ConversationTranslatorCommandTypes=es.ConversationTranslatorMessageTypes=es.InternalParticipants=void 0;var _A=class{constructor(e=[],n){this.participants=e,this.meId=n}addOrUpdateParticipant(e){if(e===void 0)return;let n=this.getParticipantIndex(e.id);return n>-1?this.participants.splice(n,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(n=>n.id===e)}getParticipant(e){return this.participants.find(n=>n.id===e)}deleteParticipant(e){this.participants=this.participants.filter(n=>n.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}};es.InternalParticipants=_A;es.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};es.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}});var d3=h(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});hS.CommandResponsePayload=void 0;var Jce=t=>JSON.parse(t),PA=class t{constructor(e){this.privCommandResponse=Jce(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new t(e)}};hS.CommandResponsePayload=PA});var p3=h(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.ParticipantPayloadResponse=Ou.ParticipantsListPayloadResponse=void 0;var Qce=t=>JSON.parse(t),Zce=t=>JSON.parse(t),TA=class t{constructor(e){this.privParticipantsPayloadResponse=Qce(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new t(e)}};Ou.ParticipantsListPayloadResponse=TA;var AA=class t{constructor(e){this.privParticipantPayloadResponse=Zce(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new t(e)}};Ou.ParticipantPayloadResponse=AA});var f3=h(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.TextResponsePayload=xu.SpeechResponsePayload=void 0;var Yce=t=>JSON.parse(t),Xce=t=>JSON.parse(t),MA=class t{constructor(e){this.privSpeechResponse=Yce(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new t(e)}};xu.SpeechResponsePayload=MA;var OA=class t{constructor(e){this.privTextResponse=Xce(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new t(e)}};xu.TextResponsePayload=OA});var v3=h(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});var eue=d3();Object.defineProperty(ya,"CommandResponsePayload",{enumerable:!0,get:function(){return eue.CommandResponsePayload}});var h3=p3();Object.defineProperty(ya,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return h3.ParticipantsListPayloadResponse}});Object.defineProperty(ya,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return h3.ParticipantPayloadResponse}});var g3=f3();Object.defineProperty(ya,"SpeechResponsePayload",{enumerable:!0,get:function(){return g3.SpeechResponsePayload}});Object.defineProperty(ya,"TextResponsePayload",{enumerable:!0,get:function(){return g3.TextResponsePayload}})});var C3=h(gS=>{"use strict";Object.defineProperty(gS,"__esModule",{value:!0});gS.ConversationServiceAdapter=void 0;var Sp=L(),Or=I(),m3=M(),y3=fA(),tue=l3(),Ln=DA(),ts=RA(),wp=v3(),xA=class t extends m3.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=o,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=s=>this.conversationConnectImpl(s),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new tue.ConversationRequestSession(Sp.createNoDashGuid()),this.privConversationConnectionFactory=n,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){return v(this,null,function*(){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&(yield(yield this.privConnectionConfigPromise).dispose(e)),yield Ze(t.prototype,this,"dispose").call(this,e)})}sendMessage(e){return v(this,null,function*(){return(yield this.fetchConnection()).send(new y3.ConversationConnectionMessage(Sp.MessageType.Text,e))})}sendMessageAsync(e){return v(this,null,function*(){yield(yield this.fetchConnection()).send(new y3.ConversationConnectionMessage(Sp.MessageType.Text,e))})}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,Or.CancellationReason.Error,Or.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return v(this,null,function*(){return!0})}cancelRecognition(e,n,r,i,o){this.terminateMessageLoop=!0;let s=new Or.ConversationTranslationCanceledEventArgs(r,o,i,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,s)}catch{}}conversationConnectImpl(e){return v(this,null,function*(){return this.privConnectionLoop=this.startMessageLoop(),e})}receiveConversationMessageOverride(){return v(this,null,function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();let e=new Sp.Deferred;try{let r=yield(yield this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!r)return this.receiveConversationMessageOverride();let i=this.privConversationRequestSession.sessionId,o=r.conversationMessageType.toLowerCase(),s=!1;try{switch(o){case"info":case"participant_command":case"command":let a=wp.CommandResponsePayload.fromJSON(r.textBody);switch(a.command.toLowerCase()){case"participantlist":let f=wp.ParticipantsListPayloadResponse.fromJSON(r.textBody),g=f.participants.map(_=>({avatar:_.avatar,displayName:_.nickname,id:_.participantId,isHost:_.ishost,isMuted:_.ismuted,isUsingTts:_.usetts,preferredLanguage:_.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new Ln.ParticipantsListEventArgs(f.roomid,f.token,f.translateTo,f.profanityFilter,f.roomProfanityFilter,f.roomLocked,f.muteAll,g,i));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Ln.ParticipantAttributeEventArgs(a.participantId,ts.ConversationTranslatorCommandTypes.setTranslateToLanguages,a.value,i));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Ln.ParticipantAttributeEventArgs(a.participantId,ts.ConversationTranslatorCommandTypes.setProfanityFiltering,a.value,i));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Ln.ParticipantAttributeEventArgs(a.participantId,ts.ConversationTranslatorCommandTypes.setMute,a.value,i));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new Ln.MuteAllEventArgs(a.value,i));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new Or.ConversationExpirationEventArgs(a.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Ln.ParticipantAttributeEventArgs(a.participantId,ts.ConversationTranslatorCommandTypes.setUseTTS,a.value,i));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new Ln.LockRoomEventArgs(a.value,i));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Ln.ParticipantAttributeEventArgs(a.participantId,ts.ConversationTranslatorCommandTypes.changeNickname,a.value,i));break;case"joinsession":let m=wp.ParticipantPayloadResponse.fromJSON(r.textBody),y={avatar:m.avatar,displayName:m.nickname,id:m.participantId,isHost:m.ishost,isMuted:m.ismuted,isUsingTts:m.usetts,preferredLanguage:m.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new Ln.ParticipantEventArgs(y,i));break;case"leavesession":let w={id:a.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new Ln.ParticipantEventArgs(w,i));break;case"disconnectsession":let b={id:a.participantId};break;case"token":let C=new m3.CognitiveTokenAuthentication(()=>{let _=a.token;return Promise.resolve(_)},()=>{let _=a.token;return Promise.resolve(_)});this.authentication=C,this.privConversationServiceConnector.onToken(C);break;default:break}break;case"partial":case"final":let c=wp.SpeechResponsePayload.fromJSON(r.textBody),u=o==="final"?Or.ResultReason.TranslatedParticipantSpeech:Or.ResultReason.TranslatingParticipantSpeech,l=new Or.ConversationTranslationResult(c.participantId,this.getTranslations(c.translations),c.language,c.id,u,c.recognition,void 0,void 0,r.textBody,void 0);c.isFinal?((l.text!==void 0&&l.text.length>0||c.id===this.privLastPartialUtteranceId)&&(s=!0),s&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Ln.ConversationReceivedTranslationEventArgs(ts.ConversationTranslatorMessageTypes.final,l,i))):l.text!==void 0&&(this.privLastPartialUtteranceId=c.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Ln.ConversationReceivedTranslationEventArgs(ts.ConversationTranslatorMessageTypes.partial,l,i)));break;case"translated_message":let d=wp.TextResponsePayload.fromJSON(r.textBody),p=new Or.ConversationTranslationResult(d.participantId,this.getTranslations(d.translations),d.language,void 0,void 0,d.originalText,void 0,void 0,void 0,r.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Ln.ConversationReceivedTranslationEventArgs(ts.ConversationTranslatorMessageTypes.instantMessage,p,i));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return e.promise})}startMessageLoop(){return v(this,null,function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;let e=this.receiveConversationMessageOverride();try{return yield e}catch(n){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",Or.CancellationReason.Error,Or.CancellationErrorCode.RuntimeError,n),null}})}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(e=>e.state()===Sp.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(e=>e),this.privConnectionConfigPromise)}getTranslations(e){let n;if(e!==void 0){n=new Or.Translations;for(let r of e)n.set(r.lang,r.translation)}return n}};gS.ConversationServiceAdapter=xA});var S3=h(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.ConversationTranslatorRecognizer=Fu.ConversationRecognizerFactory=void 0;var nue=M(),Nu=L(),ku=$(),NA=I(),rue=u3(),iue=C3(),kA=class{static fromConfig(e,n,r){return new vS(e,n,r)}};Fu.ConversationRecognizerFactory=kA;var vS=class t extends NA.Recognizer{constructor(e,n,r){let i=n;ku.Contracts.throwIfNull(i,"speechConfig");let o=e;ku.Contracts.throwIfNull(o,"conversationImpl"),super(r,i.properties,new rue.ConversationConnectionFactory),this.privConversation=o,this.privIsDisposed=!1,this.privProperties=i.properties.clone(),this.privConnection=NA.Connection.fromRecognizer(this),this.privProperties.getProperty(NA.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=Nu.Timeout.setTimeout,this.privClearTimeout=Nu.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,n,r){try{ku.Contracts.throwIfDisposed(this.privIsDisposed),ku.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(n,r)}catch(i){if(r)if(i instanceof Error){let o=i;r(o.name+": "+o.message)}else r(i)}}disconnect(e,n){try{ku.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{e&&e()},r=>{n&&n(r)})}catch(r){if(n)if(r instanceof Error){let i=r;n(i.name+": "+i.message)}else n(r);this.dispose(!0).catch(i=>{Nu.Events.instance.onEvent(new Nu.BackgroundEvent(i))})}}sendRequest(e,n,r){try{ku.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,n,r)}catch(i){if(r)if(i instanceof Error){let o=i;r(o.name+": "+o.message)}else r(i);this.dispose(!0).catch(o=>{Nu.Events.instance.onEvent(new Nu.BackgroundEvent(o))})}}onToken(e){this.privConversation.onToken(e)}close(){return v(this,null,function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))})}dispose(e){return v(this,null,function*(){this.privIsDisposed||e&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield Ze(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new nue.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new iue.ConversationServiceAdapter(e,n,o,i,this)}sendMessage(e,n,r){let i=this.privReco;((s,a,c)=>{s!==void 0?s.then(()=>{try{a&&a()}catch(u){c&&c(`'Unhandled error on promise callback: ${u}'`)}},u=>{try{c&&c(u)}catch{}}):c&&c("Null promise")})(i.sendMessageAsync(e),n,r),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};Fu.ConversationTranslatorRecognizer=vS});var b3=h(yS=>{"use strict";Object.defineProperty(yS,"__esModule",{value:!0});yS.TranscriberRecognizer=void 0;var w3=L(),xr=$(),Lu=I(),mS=M(),FA=class t extends Lu.Recognizer{constructor(e,n){let r=e;xr.Contracts.throwIfNull(r,"speechTranslationConfig");let i=n;xr.Contracts.throwIfNull(i,"audioConfigImpl"),xr.Contracts.throwIfNullOrWhitespace(r.speechRecognitionLanguage,Lu.PropertyId[Lu.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,r.properties,new mS.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return xr.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Lu.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Lu.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){xr.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Lu.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){xr.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return xr.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){xr.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return xr.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(e,n){w3.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(mS.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,n){w3.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}close(){return v(this,null,function*(){this.privDisposedRecognizer||(yield this.dispose(!0))})}pushConversationEvent(e,n){return v(this,null,function*(){let r=this.privReco;xr.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),yield r.sendSpeechEventAsync(e,n)})}pushMeetingEvent(e,n){return v(this,null,function*(){let r=this.privReco;xr.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),yield r.sendMeetingSpeechEventAsync(e,n)})}enforceAudioGating(){return v(this,null,function*(){let r=(yield this.audioConfig.format).channels;if(r===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(r!==8)throw new Error(`Unsupported audio configuration: Detected ${r}-channel audio`)})}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(n,r)=>{e.canceled&&e.canceled(e,r)},this.recognizing=(n,r)=>{e.transcribing&&e.transcribing(e,r)},this.recognized=(n,r)=>{e.transcribed&&e.transcribed(e,r)},this.sessionStarted=(n,r)=>{e.sessionStarted&&e.sessionStarted(e,r)},this.sessionStopped=(n,r)=>{e.sessionStopped&&e.sessionStopped(e,r)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){return v(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ze(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new mS.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,n,r,i){let o=r;return new mS.TranscriptionServiceRecognizer(e,n,o,i,this)}};yS.TranscriberRecognizer=FA});var E3=h(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var oue=o3();Object.defineProperty(an,"ConversationManager",{enumerable:!0,get:function(){return oue.ConversationManager}});var sue=aS();Object.defineProperty(an,"ConversationConnectionConfig",{enumerable:!0,get:function(){return sue.ConversationConnectionConfig}});var aue=S3();Object.defineProperty(an,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return aue.ConversationRecognizerFactory}});var cue=b3();Object.defineProperty(an,"TranscriberRecognizer",{enumerable:!0,get:function(){return cue.TranscriberRecognizer}});var ju=DA();Object.defineProperty(an,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return ju.ConversationReceivedTranslationEventArgs}});Object.defineProperty(an,"LockRoomEventArgs",{enumerable:!0,get:function(){return ju.LockRoomEventArgs}});Object.defineProperty(an,"MuteAllEventArgs",{enumerable:!0,get:function(){return ju.MuteAllEventArgs}});Object.defineProperty(an,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return ju.ParticipantAttributeEventArgs}});Object.defineProperty(an,"ParticipantEventArgs",{enumerable:!0,get:function(){return ju.ParticipantEventArgs}});Object.defineProperty(an,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return ju.ParticipantsListEventArgs}});var LA=RA();Object.defineProperty(an,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return LA.ConversationTranslatorCommandTypes}});Object.defineProperty(an,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return LA.ConversationTranslatorMessageTypes}});Object.defineProperty(an,"InternalParticipants",{enumerable:!0,get:function(){return LA.InternalParticipants}})});var qA=h(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.SynthesisAudioMetadata=Ca.MetadataType=void 0;var uue;(function(t){t.WordBoundary="WordBoundary",t.Bookmark="Bookmark",t.Viseme="Viseme",t.SentenceBoundary="SentenceBoundary",t.SessionEnd="SessionEnd",t.AvatarSignal="TalkingAvatarSignal"})(uue=Ca.MetadataType||(Ca.MetadataType={}));var jA=class t{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new t(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}};Ca.SynthesisAudioMetadata=jA});var D3=h(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.SynthesisStartedEvent=li.ConnectingToSynthesisServiceEvent=li.SynthesisTriggeredEvent=li.SpeechSynthesisEvent=void 0;var I3=L(),qu=class extends I3.PlatformEvent{constructor(e,n,r=I3.EventType.Info){super(e,r),this.privRequestId=n}get requestId(){return this.privRequestId}};li.SpeechSynthesisEvent=qu;var BA=class extends qu{constructor(e,n,r){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=n,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};li.SynthesisTriggeredEvent=BA;var VA=class extends qu{constructor(e,n){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}};li.ConnectingToSynthesisServiceEvent=VA;var zA=class extends qu{constructor(e,n){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}};li.SynthesisStartedEvent=zA});var _3=h(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0});wS.SynthesisTurn=void 0;var CS=L(),lue=Js(),SS=I(),due=qA(),UA=D3(),HA=class t{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=CS.createNoDashGuid(),this.privTurnDeferral=new CS.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){let e=new SS.PropertyCollection;return e.setProperty(SS.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}getAllReceivedAudio(){return v(this,null,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return v(this,null,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){let e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()})}startNewSynthesis(e,n,r,i){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=n,this.privIsSSML=r,this.privAudioOutputStream=new lue.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",i!==void 0&&(this.privTurnAudioDestination=i,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new UA.SynthesisTriggeredEvent(this.requestId,void 0,i===void 0?void 0:i.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new UA.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(e===200){this.onEvent(new UA.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else e===403&&this.onComplete()}onServiceResponseMessage(e){let n=JSON.parse(e);this.streamId=n.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(e){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new CS.Deferred;let n=JSON.parse(e);n.webrtc&&(this.privWebRTCSDP=n.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){e.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}constructSynthesisResult(){return v(this,null,function*(){let e=yield this.getAllReceivedAudioWithHeader();return new SS.SpeechSynthesisResult(this.requestId,SS.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)})}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){let e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){CS.Events.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&e[0]==="<"&&e[e.length-1]===">"}updateTextOffset(e,n){n===due.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!t.isXmlTag(e)&&this.updateTextOffset(e,n))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!t.isXmlTag(e)&&this.updateTextOffset(e,n)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return v(this,null,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}};wS.SynthesisTurn=HA});var R3=h(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});ES.SynthesisAdapterBase=void 0;var $t=L(),jn=I(),ur=M(),Bu=fa(),bS=class{constructor(e,n,r,i){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new $t.ArgumentNullError("authentication");if(!n)throw new $t.ArgumentNullError("connectionFactory");if(!r)throw new $t.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=n,this.privSynthesizerConfig=r,this.privIsDisposed=!1,this.privSessionAudioDestination=i,this.privSynthesisTurn=new ur.SynthesisTurn,this.privConnectionEvents=new $t.EventSource,this.privServiceEvents=new $t.EventSource,this.privSynthesisContext=new ur.SynthesisContext,this.privAgentConfig=new ur.AgentConfig,this.connectionEvents.attach(o=>{if(o.name==="ConnectionClosedEvent"){let s=o;s.statusCode!==1e3&&this.cancelSynthesisLocal(jn.CancellationReason.Error,s.statusCode===1007?jn.CancellationErrorCode.BadRequestParameters:jn.CancellationErrorCode.ConnectionFailure,`${s.reason} websocket error code: ${s.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=e),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}dispose(e){return v(this,null,function*(){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&(yield(yield this.privConnectionConfigurationPromise).dispose(e))})}connect(){return v(this,null,function*(){yield this.connectImpl()})}sendNetworkMessage(e,n){return v(this,null,function*(){let r=typeof n=="string"?$t.MessageType.Text:$t.MessageType.Binary,i=typeof n=="string"?"application/json":"";return(yield this.fetchConnection()).send(new Bu.SpeechConnectionMessage(r,e,this.privSynthesisTurn.requestId,i,n))})}Speak(e,n,r,i,o,s){return v(this,null,function*(){let a;if(n?a=e:a=this.privSynthesizer.buildSsml(e),this.speakOverride!==void 0)return this.speakOverride(a,r,i,o);this.privSuccessCallback=i,this.privErrorCallback=o,this.privSynthesisTurn.startNewSynthesis(r,e,n,s);try{yield this.connectImpl();let c=yield this.fetchConnection();yield this.sendSynthesisContext(c),yield this.sendSsmlMessage(c,a,r),this.onSynthesisStarted(r),this.receiveMessage()}catch(c){return this.cancelSynthesisLocal(jn.CancellationReason.Error,jn.CancellationErrorCode.ConnectionFailure,c),Promise.reject(c)}})}stopSpeaking(){return v(this,null,function*(){return yield this.connectImpl(),(yield this.fetchConnection()).send(new Bu.SpeechConnectionMessage($t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))})}cancelSynthesis(e,n,r,i){let o=new jn.PropertyCollection;o.setProperty(ur.CancellationErrorCodePropertyName,jn.CancellationErrorCode[r]);let s=new jn.SpeechSynthesisResult(e,jn.ResultReason.Canceled,void 0,i,o);if(this.onSynthesisCancelled(s),this.privSuccessCallback)try{this.privSuccessCallback(s)}catch{}}cancelSynthesisLocal(e,n,r){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,n,r))}processTypeSpecificMessages(e){return!0}receiveMessage(){return v(this,null,function*(){try{let n=yield(yield this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!n)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;let r=Bu.SpeechConnectionMessage.fromConnectionMessage(n);if(r.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(r.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(r.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===r.streamId.toLowerCase()&&r.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(r.binaryBody),this.onSynthesizing(r.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(r.binaryBody));break;case"audio.metadata":let i=ur.SynthesisAudioMetadata.fromJSON(r.textBody).Metadata;for(let s of i)switch(s.Type){case ur.MetadataType.WordBoundary:case ur.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(s);let a=new jn.SpeechSynthesisWordBoundaryEventArgs(s.Data.Offset,s.Data.Duration,s.Data.text.Text,s.Data.text.Length,s.Type===ur.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,s.Data.text.BoundaryType);this.onWordBoundary(a);break;case ur.MetadataType.Bookmark:let c=new jn.SpeechSynthesisBookmarkEventArgs(s.Data.Offset,s.Data.Bookmark);this.onBookmarkReached(c);break;case ur.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(s),s.Data.IsLastAnimation){let u=new jn.SpeechSynthesisVisemeEventArgs(s.Data.Offset,s.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(u)}break;case ur.MetadataType.AvatarSignal:this.onAvatarEvent(s);break;case ur.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(s);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let o;try{o=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(o)}catch(s){this.privErrorCallback&&this.privErrorCallback(s)}this.onSynthesisCompleted(o);break;default:this.processTypeSpecificMessages(r)||this.privServiceEvents&&this.serviceEvents.onEvent(new $t.ServiceEvent(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch{}})}sendSynthesisContext(e){this.setSynthesisContextSynthesisSection();let n=this.synthesisContext.toJSON();if(n)return e.send(new Bu.SpeechConnectionMessage($t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",n))}setSpeechConfigSynthesisSection(){}connectImpl(e=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(r=>r.state()===$t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=$t.createNoDashGuid(),this.privConnectionId=$t.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);let n=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=n.then(r=>v(this,null,function*(){this.privSynthesisTurn.onAuthCompleted(!1);let i=this.privConnectionFactory.create(this.privSynthesizerConfig,r,this.privConnectionId);i.events.attach(s=>{this.connectionEvents.onEvent(s)});let o=yield i.open();return o.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(o.statusCode),Promise.resolve(i)):o.statusCode===403&&!e?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(o.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${o.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(jn.PropertyId.SpeechServiceConnection_Url)} Reason: ${o.reason}`))}),r=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(r)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(e,n){if(n)return e.send(new Bu.SpeechConnectionMessage($t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",n))}sendSsmlMessage(e,n,r){return e.send(new Bu.SpeechConnectionMessage($t.MessageType.Text,"ssml",r,"application/ssml+xml",n))}fetchConnection(){return v(this,null,function*(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(e=>e.state()===$t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return v(this,null,function*(){let e=yield this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)})}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}};ES.SynthesisAdapterBase=bS;bS.telemetryDataEnabled=!0});var T3=h(IS=>{"use strict";Object.defineProperty(IS,"__esModule",{value:!0});IS.AvatarSynthesisAdapter=void 0;var P3=I(),pue=M(),$A=class extends pue.SynthesisAdapterBase{constructor(e,n,r,i,o){super(e,n,r,void 0),this.privAvatarSynthesizer=i,this.privSynthesizer=i,this.privAvatarConfig=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(P3.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(e){if(this.privAvatarSynthesizer.avatarEventReceived){let n=new P3.AvatarEventArgs(e.Data.Offset,e.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,n)}catch{}}}};IS.AvatarSynthesisAdapter=$A});var A3=h(DS=>{"use strict";Object.defineProperty(DS,"__esModule",{value:!0});DS.SpeechSynthesisAdapter=void 0;var ns=I(),fue=M(),WA=class extends fue.SynthesisAdapterBase{constructor(e,n,r,i,o){super(e,n,r,o),this.privSpeechSynthesizer=i,this.privSynthesizer=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(e){let n=new ns.SpeechSynthesisEventArgs(new ns.SpeechSynthesisResult(e,ns.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,n)}onSynthesizing(e){if(this.privSpeechSynthesizer.synthesizing)try{let n=this.privSynthesisTurn.audioOutputFormat.addHeader(e),r=new ns.SpeechSynthesisEventArgs(new ns.SpeechSynthesisResult(this.privSynthesisTurn.requestId,ns.ResultReason.SynthesizingAudio,n));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,r)}catch{}}onSynthesisCancelled(e){if(this.privSpeechSynthesizer.SynthesisCanceled){let n=new ns.SpeechSynthesisEventArgs(e);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,n)}catch{}}}onSynthesisCompleted(e){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new ns.SpeechSynthesisEventArgs(e))}catch{}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch{}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch{}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch{}}};DS.SpeechSynthesisAdapter=WA});var M3=h(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});_S.SynthesisRestAdapter=void 0;var GA=dt(),KA=I(),hue=nr(),gue=Bt(),JA=class{constructor(e,n){let r=e.parameters.getProperty(KA.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!r){let o=e.parameters.getProperty(KA.PropertyId.SpeechServiceConnection_Region,"westus"),s=hue.ConnectionFactoryBase.getHostSuffix(o);r=e.parameters.getProperty(KA.PropertyId.SpeechServiceConnection_Host,`https://${o}.tts.speech${s}`)}this.privUri=`${r}/cognitiveservices/voices/list`;let i=GA.RestConfigBase.requestOptions;this.privRestAdapter=new GA.RestMessageAdapter(i),this.privAuthentication=n}getVoicesList(e){return this.privRestAdapter.setHeaders(gue.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then(n=>(this.privRestAdapter.setHeaders(n.headerName,n.token),this.privRestAdapter.request(GA.RestRequestType.Get,this.privUri)))}};_S.SynthesisRestAdapter=JA});var N3=h(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.SynthesizerConfig=Sa.SynthesisServiceType=void 0;var O3=M(),x3;(function(t){t[t.Standard=0]="Standard",t[t.Custom=1]="Custom"})(x3=Sa.SynthesisServiceType||(Sa.SynthesisServiceType={}));var QA=class{constructor(e,n){this.privSynthesisServiceType=x3.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new O3.SpeechServiceConfig(new O3.Context(null)),this.privParameters=n}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}};Sa.SynthesizerConfig=QA});var k3=h(RS=>{"use strict";Object.defineProperty(RS,"__esModule",{value:!0});RS.SynthesisContext=void 0;var ZA=I(),YA=class{constructor(){this.privContext={}}setSection(e,n){this.privContext[e]=n}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){let n=this.buildSynthesisContext(e);this.setSection("synthesis",n)}buildSynthesisContext(e){return{audio:{metadataOptions:{bookmarkEnabled:!!e?.bookmarkReached,punctuationBoundaryEnabled:e?.properties.getProperty(ZA.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!e?.wordBoundary),sentenceBoundaryEnabled:e?.properties.getProperty(ZA.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!e?.visemeReceived,wordBoundaryEnabled:e?.properties.getProperty(ZA.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!e?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:e?.autoDetectSourceLanguage}}}};RS.SynthesisContext=YA});var F3=h(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0});PS.SpeakerRecognitionConfig=void 0;var vue=M(),XA=class{constructor(e,n){this.privContext=e||new vue.Context(null),this.privParameters=n}get parameters(){return this.privParameters}get Context(){return this.privContext}};PS.SpeakerRecognitionConfig=XA});var j3=h(AS=>{"use strict";Object.defineProperty(AS,"__esModule",{value:!0});AS.SpeakerServiceRecognizer=void 0;var mue=dt(),TS=L(),Pt=I(),L3=M(),yue=fa(),eM=class extends L3.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privSpeakerRecognizer=o,this.privSpeakerAudioSource=r,this.recognizeSpeaker=s=>this.recognizeSpeakerOnce(s),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let n=!1,r=new Pt.PropertyCollection;switch(e.messageType===TS.MessageType.Text&&r.setProperty(Pt.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.response":let o=JSON.parse(e.textBody),s;o.status.statusCode.toLowerCase()!=="success"?s=new Pt.SpeakerRecognitionResult(o,Pt.ResultReason.Canceled,Pt.CancellationErrorCode.ServiceError,o.status.reason):s=new Pt.SpeakerRecognitionResult(o,Pt.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(s),n=!0;break;default:break}let i=new TS.Deferred;return i.resolve(n),i.promise}cancelRecognition(e,n,r,i,o){if(new Pt.PropertyCollection().setProperty(L3.CancellationErrorCodePropertyName,Pt.CancellationErrorCode[i]),this.privResultDeferral){let a=new Pt.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:o,reason:o}},Pt.ResultReason.Canceled,i,o);try{this.privResultDeferral.resolve(a)}catch(c){this.privResultDeferral.reject(c)}}}recognizeSpeakerOnce(e){return v(this,null,function*(){this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new TS.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(Pt.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let n=this.connectImpl(),r=this.sendPreAudioMessages(this.extractSpeakerContext(e)),i=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),o=yield this.privSpeakerAudioSource.format,s=yield this.privSpeakerAudioSource.deviceInfo,a=new mue.ReplayableAudioNode(i,o.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(a,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:s};try{yield n,yield r}catch(l){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Pt.CancellationReason.Error,Pt.CancellationErrorCode.ConnectionFailure,l)}let c=new Pt.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,c),this.receiveMessage(),this.sendAudio(a).then(()=>{},l=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Pt.CancellationReason.Error,Pt.CancellationErrorCode.RuntimeError,l)}),this.privResultDeferral.promise})}sendPreAudioMessages(e){return v(this,null,function*(){let n=yield this.fetchConnection();yield this.sendSpeakerRecognition(n,e)})}sendSpeakerRecognition(e,n){return v(this,null,function*(){let r=JSON.stringify(n);return e.send(new yue.SpeechConnectionMessage(TS.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",r))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}};AS.SpeakerServiceRecognizer=eM});var B3=h(MS=>{"use strict";Object.defineProperty(MS,"__esModule",{value:!0});MS.VoiceServiceRecognizer=void 0;var Cue=dt(),di=L(),Ie=I(),q3=M(),tM=fa(),nM=class extends q3.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privDeferralMap=new di.DeferralMap,this.privSpeakerAudioSource=r,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let n=!1,r=new Ie.PropertyCollection;switch(e.messageType===di.MessageType.Text&&r.setProperty(Ie.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":let o=JSON.parse(e.textBody);switch(o.operation.toLowerCase()){case"create":this.handleCreateResponse(o,e.requestId);break;case"delete":case"reset":this.handleResultResponse(o,e.requestId);break;case"fetch":let u=JSON.parse(e.textBody);this.handleFetchResponse(u,e.requestId);break;default:break}n=!0;break;case"speaker.phrases":let s=JSON.parse(e.textBody);this.handlePhrasesResponse(s,e.requestId),n=!0;break;case"speaker.profile.enrollment":let a=JSON.parse(e.textBody),c=new Ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(a.enrollment?a.enrollment.enrollmentStatus:a.status.statusCode),a.enrollment?JSON.stringify(a.enrollment):void 0,a.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,c),this.privRequestSession.onSpeechEnded(),n=!0;break;default:break}let i=new di.Deferred;return i.resolve(n),i.promise}cancelRecognition(e,n,r,i,o){new Ie.PropertyCollection().setProperty(q3.CancellationErrorCodePropertyName,Ie.CancellationErrorCode[i]);let a=new Ie.VoiceProfileEnrollmentResult(Ie.ResultReason.Canceled,o,o);this.privDeferralMap.getId(n)&&this.privDeferralMap.complete(n,a)}createProfile(e,n){return v(this,null,function*(){this.voiceProfileType=e.toString();let r=this.connectImpl();try{let i=new di.Deferred;return yield r,yield this.sendCreateProfile(i,e,n),this.receiveMessage(),i.promise}catch(i){throw i}})}resetProfile(e){return v(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)})}deleteProfile(e){return v(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)})}retrieveEnrollmentResult(e){return v(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)})}getAllProfiles(e){return v(this,null,function*(){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)})}getActivationPhrases(e,n){return v(this,null,function*(){this.voiceProfileType=e.toString();let r=this.connectImpl();try{let i=new di.Deferred;return yield r,yield this.sendPhrasesRequest(i,e,n),this.receiveMessage(),i.promise}catch(i){throw i}})}enrollProfile(e){return v(this,null,function*(){this.voiceProfileType=e.profileType.toString();let n=new di.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(Ie.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let r=this.connectImpl(),i=this.sendPreAudioMessages(e,n),o=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),s=yield this.privSpeakerAudioSource.format,a=yield this.privSpeakerAudioSource.deviceInfo,c=new Cue.ReplayableAudioNode(o,s.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(c,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:a};try{yield r,yield i}catch(d){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Ie.CancellationReason.Error,Ie.CancellationErrorCode.ConnectionFailure,d)}let u=new Ie.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.receiveMessage(),this.sendAudio(c).then(()=>{},d=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Ie.CancellationReason.Error,Ie.CancellationErrorCode.RuntimeError,d)}),n.promise})}sendPreAudioMessages(e,n){return v(this,null,function*(){let r=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,n),yield this.sendBaseRequest(r,"enroll",this.scenarioFrom(e.profileType),e)})}sendPhrasesRequest(e,n,r){return v(this,null,function*(){let i=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let o=this.scenarioFrom(n),s={locale:r,scenario:o};return i.send(new tM.SpeechConnectionMessage(di.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))})}sendCreateProfile(e,n,r){return v(this,null,function*(){let i=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let o=n===Ie.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":n===Ie.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",s={locale:r,number:"1",scenario:o};return i.send(new tM.SpeechConnectionMessage(di.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))})}sendCommonRequest(e,n,r=void 0){return v(this,null,function*(){let i=this.connectImpl();try{let o=new di.Deferred;this.privRequestSession.onSpeechContext(),yield i;let s=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,o),yield this.sendBaseRequest(s,e,this.scenarioFrom(n),r),this.receiveMessage(),o.promise}catch(o){throw o}})}sendBaseRequest(e,n,r,i){return v(this,null,function*(){let o={scenario:r};return i?o.profileIds=[i.profileId]:o.maxPageSize=-1,e.send(new tM.SpeechConnectionMessage(di.MessageType.Text,`speaker.profile.${n}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,n){if(this.privDeferralMap.getId(n))if(e.status.statusCode.toLowerCase()!=="success"){let r=Ie.ResultReason.Canceled,i=new Ie.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(n,i)}else if(e.phrases&&e.phrases.length>0){let r=Ie.ResultReason.EnrollingVoiceProfile,i=new Ie.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(n,i)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${n} not found`)}handleCreateResponse(e,n){if(e.profiles&&e.profiles.length>0)if(this.privDeferralMap.getId(n)){let r=e.profiles.map(i=>i.profileId);this.privDeferralMap.complete(n,r)}else throw new Error(`Voice Profile create request for requestID ${n} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(e,n){if(this.privDeferralMap.getId(n)){let r=e.operation.toLowerCase()==="delete"?Ie.ResultReason.DeletedVoiceProfile:Ie.ResultReason.ResetVoiceProfile,i=e.status.statusCode.toLowerCase()==="success"?r:Ie.ResultReason.Canceled,o=new Ie.VoiceProfileResult(i,`statusCode: ${e.status.statusCode}, errorDetails: ${e.status.reason}`);this.privDeferralMap.complete(n,o)}else throw new Error(`Voice Profile create request for requestID ${n} not found`)}handleFetchResponse(e,n){if(this.privDeferralMap.getId(n)&&e.profiles[0]){if(this.privExpectedProfileId&&e.profiles.length===1&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;let r=e.profiles[0],i=new Ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(r.enrollmentStatus),JSON.stringify(r),e.status.reason);this.privDeferralMap.complete(n,i)}else if(e.profiles.length>0){let r=e.profiles,i=[];for(let o of r)i.push(new Ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(o.enrollmentStatus),JSON.stringify(o),e.status.reason));this.privDeferralMap.complete(n,i)}}else throw new Error(`Voice Profile fetch request for requestID ${n} not found`)}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return Ie.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return Ie.ResultReason.Canceled;default:return Ie.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===Ie.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===Ie.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};MS.VoiceServiceRecognizer=nM});var V3=h(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.type=vt.connectivity=vt.Device=vt.OS=vt.System=vt.Context=vt.SpeechServiceConfig=void 0;var rM=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,(e,n)=>{if(n&&typeof n=="object"&&!Array.isArray(n)){let r={};for(let i in n)Object.hasOwnProperty.call(n,i)&&(r[i&&i.charAt(0).toLowerCase()+i.substring(1)]=n[i]);return r}return n})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}};vt.SpeechServiceConfig=rM;var iM=class{constructor(e){this.system=new OS,this.os=e}};vt.Context=iM;var OS=class{constructor(){let e="1.40.0";this.name="SpeechSDK",this.version=e,this.build="JavaScript",this.lang="JavaScript"}};vt.System=OS;var oM=class{constructor(e,n,r){this.platform=e,this.name=n,this.version=r}};vt.OS=oM;var sM=class{constructor(e,n,r){this.manufacturer=e,this.model=n,this.version=r}};vt.Device=sM;var Sue;(function(t){t.Bluetooth="Bluetooth",t.Wired="Wired",t.WiFi="WiFi",t.Cellular="Cellular",t.InBuilt="InBuilt",t.Unknown="Unknown"})(Sue=vt.connectivity||(vt.connectivity={}));var wue;(function(t){t.Phone="Phone",t.Speaker="Speaker",t.Car="Car",t.Headset="Headset",t.Thermostat="Thermostat",t.Microphones="Microphones",t.Deskphone="Deskphone",t.RemoteControl="RemoteControl",t.Unknown="Unknown",t.File="File",t.Stream="Stream"})(wue=vt.type||(vt.type={}))});var M=h(R=>{"use strict";var bue=R&&R.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),j=R&&R.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&bue(e,t,n)};Object.defineProperty(R,"__esModule",{value:!0});R.AutoDetectSourceLanguagesOpenRangeOptionName=R.ForceDictationPropertyName=R.ServicePropertiesPropertyName=R.CancellationErrorCodePropertyName=R.OutputFormatPropertyName=void 0;j(oj(),R);j(uj(),R);j(Vg(),R);j(dj(),R);j(fj(),R);j(JH(),R);j(XH(),R);j(bC(),R);j(t$(),R);j(n$(),R);j(i$(),R);j(s$(),R);j(c$(),R);j(p$(),R);j(g$(),R);j(C$(),R);j(E$(),R);j(aT(),R);j(I$(),R);j(D$(),R);j(R$(),R);j(P$(),R);j(T$(),R);j(M$(),R);j(O$(),R);j(x$(),R);j(N$(),R);j(k$(),R);j(F$(),R);j(j$(),R);j(q$(),R);j(B$(),R);j(V$(),R);j(U$(),R);j(H$(),R);j(W$(),R);j(J$(),R);j(Q$(),R);j(Z$(),R);j(X$(),R);j(r3(),R);j(i3(),R);j(E3(),R);j(qA(),R);j(_3(),R);j(R3(),R);var Eue=T3();Object.defineProperty(R,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return Eue.AvatarSynthesisAdapter}});var Iue=A3();Object.defineProperty(R,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return Iue.SpeechSynthesisAdapter}});j(M3(),R);j(N3(),R);j(k3(),R);j(F3(),R);j(j3(),R);j(B3(),R);j(V3(),R);R.OutputFormatPropertyName="OutputFormat";R.CancellationErrorCodePropertyName="CancellationErrorCode";R.ServicePropertiesPropertyName="ServiceProperties";R.ForceDictationPropertyName="ForceDictation";R.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"});var z3=h(wa=>{"use strict";var Due=wa&&wa.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),_ue=wa&&wa.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&Due(e,t,n)};Object.defineProperty(wa,"__esModule",{value:!0});var Rue=M();new Rue.AgentConfig;_ue(I(),wa)});function dM(t,e){return Object.is(t,e)}var it=null,bp=!1,Ep=1,fi=Symbol("SIGNAL");function ce(t){let e=it;return it=t,e}function pM(){return it}var zu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function LS(t){if(bp)throw new Error("");if(it===null)return;it.consumerOnSignalRead(t);let e=it.nextProducerIndex++;if(Rp(it),e<it.producerNode.length&&it.producerNode[e]!==t&&Vu(it)){let n=it.producerNode[e];_p(n,it.producerIndexOfThis[e])}it.producerNode[e]!==t&&(it.producerNode[e]=t,it.producerIndexOfThis[e]=Vu(it)?vM(t,it,e):0),it.producerLastReadVersion[e]=t.version}function e8(){Ep++}function fM(t){if(!(Vu(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ep)){if(!t.producerMustRecompute(t)&&!qS(t)){t.dirty=!1,t.lastCleanEpoch=Ep;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ep}}function hM(t){if(t.liveConsumerNode===void 0)return;let e=bp;bp=!0;try{for(let n of t.liveConsumerNode)n.dirty||t8(n)}finally{bp=e}}function gM(){return it?.consumerAllowSignalWrites!==!1}function t8(t){t.dirty=!0,hM(t),t.consumerMarkedDirty?.(t)}function Dp(t){return t&&(t.nextProducerIndex=0),ce(t)}function jS(t,e){if(ce(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Vu(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)_p(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function qS(t){Rp(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fM(n),r!==n.version))return!0}return!1}function BS(t){if(Rp(t),Vu(t))for(let e=0;e<t.producerNode.length;e++)_p(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function vM(t,e,n){if(mM(t),t.liveConsumerNode.length===0&&yM(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=vM(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function _p(t,e){if(mM(t),t.liveConsumerNode.length===1&&yM(t))for(let r=0;r<t.producerNode.length;r++)_p(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Rp(i),i.producerIndexOfThis[r]=e}}function Vu(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Rp(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function mM(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function yM(t){return t.producerNode!==void 0}function CM(t){let e=Object.create(n8);e.computation=t;let n=()=>{if(fM(e),LS(e),e.value===Ip)throw e.error;return e.value};return n[fi]=e,n}var kS=Symbol("UNSET"),FS=Symbol("COMPUTING"),Ip=Symbol("ERRORED"),n8=ee(D({},zu),{value:kS,dirty:!0,error:null,equal:dM,producerMustRecompute(t){return t.value===kS||t.value===FS},producerRecomputeValue(t){if(t.value===FS)throw new Error("Detected cycle in computations.");let e=t.value;t.value=FS;let n=Dp(t),r;try{r=t.computation()}catch(i){r=Ip,t.error=i}finally{jS(t,n)}if(e!==kS&&e!==Ip&&r!==Ip&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function r8(){throw new Error}var SM=r8;function wM(){SM()}function bM(t){SM=t}var i8=null;function EM(t){let e=Object.create(DM);e.value=t;let n=()=>(LS(e),e.value);return n[fi]=e,n}function VS(t,e){gM()||wM(),t.equal(t.value,e)||(t.value=e,o8(t))}function IM(t,e){gM()||wM(),VS(t,e(t.value))}var DM=ee(D({},zu),{equal:dM,value:void 0});function o8(t){t.version++,e8(),hM(t),i8?.()}function q(t){return typeof t=="function"}function ba(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Pp=ba(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ss(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(o){e=o instanceof Pp?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_M(o)}catch(s){e=e??[],s instanceof Pp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Pp(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_M(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ss(n,e)}remove(e){let{_finalizers:n}=this;n&&ss(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var zS=xe.EMPTY;function Tp(t){return t instanceof xe||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function _M(t){q(t)?t():t.unsubscribe()}var fr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ea={setTimeout(t,e,...n){let{delegate:r}=Ea;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ea;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ap(t){Ea.setTimeout(()=>{let{onUnhandledError:e}=fr;if(e)e(t);else throw t})}function Uu(){}var RM=US("C",void 0,void 0);function PM(t){return US("E",void 0,t)}function TM(t){return US("N",t,void 0)}function US(t,e,n){return{kind:t,value:e,error:n}}var as=null;function Ia(t){if(fr.useDeprecatedSynchronousErrorHandling){let e=!as;if(e&&(as={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=as;if(as=null,n)throw r}}else t()}function AM(t){fr.useDeprecatedSynchronousErrorHandling&&as&&(as.errorThrown=!0,as.error=t)}var cs=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tp(e)&&e.add(this)):this.destination=c8}static create(e,n,r){return new Da(e,n,r)}next(e){this.isStopped?$S(TM(e),this):this._next(e)}error(e){this.isStopped?$S(PM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$S(RM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},s8=Function.prototype.bind;function HS(t,e){return s8.call(t,e)}var WS=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Mp(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Mp(r)}else Mp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Mp(n)}}},Da=class extends cs{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&fr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&HS(e.next,o),error:e.error&&HS(e.error,o),complete:e.complete&&HS(e.complete,o)}):i=e}this.destination=new WS(i)}};function Mp(t){fr.useDeprecatedSynchronousErrorHandling?AM(t):Ap(t)}function a8(t){throw t}function $S(t,e){let{onStoppedNotification:n}=fr;n&&Ea.setTimeout(()=>n(t,e))}var c8={closed:!0,next:Uu,error:a8,complete:Uu};var _a=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dn(t){return t}function GS(...t){return KS(t)}function KS(t){return t.length===0?Dn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=l8(n)?n:new Da(n,r,i);return Ia(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=MM(r),new r((i,o)=>{let s=new Da({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[_a](){return this}pipe(...n){return KS(n)(this)}toPromise(n){return n=MM(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function MM(t){var e;return(e=t??fr.Promise)!==null&&e!==void 0?e:Promise}function u8(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function l8(t){return t&&t instanceof cs||u8(t)&&Tp(t)}function JS(t){return q(t?.lift)}function me(t){return e=>{if(JS(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,r,i){return new QS(t,e,n,r,i)}var QS=class extends cs{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ra(){return me((t,e)=>{let n=null;t._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Pa=class extends se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,JS(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let n=this.getSubject();e.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return Ra()(this)}};var Ta={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:r}=Ta;r&&(e=r.requestAnimationFrame,n=r.cancelAnimationFrame);let i=e(o=>{n=void 0,t(o)});return new xe(()=>n?.(i))},requestAnimationFrame(...t){let{delegate:e}=Ta;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=Ta;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var OM=ba(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class t extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Op(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new OM}next(n){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zS:(this.currentObservers=null,o.push(n),new xe(()=>{this.currentObservers=null,ss(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new se;return n.source=this,n}}return t.create=(e,n)=>new Op(e,n),t})(),Op=class extends Ye{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:zS}};var yt=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ZS={now(){return(ZS.delegate||Date).now()},delegate:void 0};var xp=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var Hu={setInterval(t,e,...n){let{delegate:r}=Hu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Hu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Aa=class extends xp{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Hu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Hu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ss(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ma=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ma.now=ZS.now;var Oa=class extends Ma{constructor(e,n=Ma.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var d8=new Oa(Aa),xM=d8;var Np=class extends Aa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return r!==null&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e._scheduled||(e._scheduled=Ta.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,n,r);let{actions:o}=e;n!=null&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==n&&(Ta.cancelAnimationFrame(n),e._scheduled=void 0)}};var kp=class extends Oa{flush(e){this._active=!0;let n=this._scheduled;this._scheduled=void 0;let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw i}}};var YS=new kp(Np);var Jt=new se(t=>t.complete());function Fp(t){return t&&q(t.schedule)}function XS(t){return t[t.length-1]}function Lp(t){return q(XS(t))?t.pop():void 0}function Fr(t){return Fp(XS(t))?t.pop():void 0}function NM(t,e){return typeof XS(t)=="number"?t.pop():e}function jp(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function qp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function FM(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function kM(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function us(t){return this instanceof us?(this.v=t,this):new us(t)}function LM(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(g){return Promise.resolve(g).then(f,d)}}function a(f,g){r[f]&&(i[f]=function(m){return new Promise(function(y,w){o.push([f,m,y,w])>1||c(f,m)})},g&&(i[f]=g(i[f])))}function c(f,g){try{u(r[f](g))}catch(m){p(o[0][3],m)}}function u(f){f.value instanceof us?Promise.resolve(f.value.v).then(l,d):p(o[0][2],f)}function l(f){c("next",f)}function d(f){c("throw",f)}function p(f,g){f(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function jM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof kM=="function"?kM(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var xa=t=>t&&typeof t.length=="number"&&typeof t!="function";function Bp(t){return q(t?.then)}function Vp(t){return q(t[_a])}function zp(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function Up(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function p8(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hp=p8();function $p(t){return q(t?.[Hp])}function Wp(t){return LM(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield us(n.read());if(i)return yield us(void 0);yield yield us(r)}}finally{n.releaseLock()}})}function Gp(t){return q(t?.getReader)}function Ne(t){if(t instanceof se)return t;if(t!=null){if(Vp(t))return f8(t);if(xa(t))return h8(t);if(Bp(t))return g8(t);if(zp(t))return qM(t);if($p(t))return v8(t);if(Gp(t))return m8(t)}throw Up(t)}function f8(t){return new se(e=>{let n=t[_a]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function h8(t){return new se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function g8(t){return new se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ap)})}function v8(t){return new se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function qM(t){return new se(e=>{y8(t,e).catch(n=>e.error(n))})}function m8(t){return qM(Wp(t))}function y8(t,e){var n,r,i,o;return FM(this,void 0,void 0,function*(){try{for(n=jM(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function cn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Kp(t,e=0){return me((n,r)=>{n.subscribe(pe(r,i=>cn(r,t,()=>r.next(i),e),()=>cn(r,t,()=>r.complete(),e),i=>cn(r,t,()=>r.error(i),e)))})}function Jp(t,e=0){return me((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function BM(t,e){return Ne(t).pipe(Jp(e),Kp(e))}function VM(t,e){return Ne(t).pipe(Jp(e),Kp(e))}function zM(t,e){return new se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function UM(t,e){return new se(n=>{let r;return cn(n,e,()=>{r=t[Hp](),cn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function Qp(t,e){if(!t)throw new Error("Iterable cannot be null");return new se(n=>{cn(n,e,()=>{let r=t[Symbol.asyncIterator]();cn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function HM(t,e){return Qp(Wp(t),e)}function $M(t,e){if(t!=null){if(Vp(t))return BM(t,e);if(xa(t))return zM(t,e);if(Bp(t))return VM(t,e);if(zp(t))return Qp(t,e);if($p(t))return UM(t,e);if(Gp(t))return HM(t,e)}throw Up(t)}function Te(t,e){return e?$M(t,e):Ne(t)}function B(...t){let e=Fr(t);return Te(t,e)}function Na(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new se(e?i=>e.schedule(r,0,i):r)}function ew(t){return!!t&&(t instanceof se||q(t.lift)&&q(t.subscribe))}var hi=ba(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function WM(t){return t instanceof Date&&!isNaN(t)}function J(t,e){return me((n,r)=>{let i=0;n.subscribe(pe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:C8}=Array;function S8(t,e){return C8(e)?t(...e):t(e)}function ka(t){return J(e=>S8(t,e))}var{isArray:w8}=Array,{getPrototypeOf:b8,prototype:E8,keys:I8}=Object;function Zp(t){if(t.length===1){let e=t[0];if(w8(e))return{args:e,keys:null};if(D8(e)){let n=I8(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function D8(t){return t&&typeof t=="object"&&b8(t)===E8}function Yp(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function $u(...t){let e=Fr(t),n=Lp(t),{args:r,keys:i}=Zp(t);if(r.length===0)return Te([],e);let o=new se(_8(r,e,i?s=>Yp(i,s):Dn));return n?o.pipe(ka(n)):o}function _8(t,e,n=Dn){return r=>{GM(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)GM(e,()=>{let u=Te(t[c],e),l=!1;u.subscribe(pe(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function GM(t,e,n){t?cn(n,t,e):e()}function KM(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,p=()=>{d&&!c.length&&!u&&e.complete()},f=m=>u<r?g(m):c.push(m),g=m=>{o&&e.next(m),u++;let y=!1;Ne(n(m,l++)).subscribe(pe(e,w=>{i?.(w),o?f(w):e.next(w)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){let w=c.shift();s?cn(e,s,()=>g(w)):g(w)}p()}catch(w){e.error(w)}}))};return t.subscribe(pe(e,f,()=>{d=!0,p()})),()=>{a?.()}}function ze(t,e,n=1/0){return q(e)?ze((r,i)=>J((o,s)=>e(r,o,i,s))(Ne(t(r,i))),n):(typeof e=="number"&&(n=e),me((r,i)=>KM(r,i,t,n)))}function no(t=1/0){return ze(Dn,t)}function JM(){return no(1)}function Fa(...t){return JM()(Te(t,Fr(t)))}function Xp(t){return new se(e=>{Ne(t()).subscribe(e)})}function tw(...t){let e=Lp(t),{args:n,keys:r}=Zp(t),i=new se(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;Ne(n[l]).subscribe(pe(o,p=>{d||(d=!0,u--),a[l]=p},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?Yp(r,a):a),o.complete())}))}});return e?i.pipe(ka(e)):i}var R8=["addListener","removeListener"],P8=["addEventListener","removeEventListener"],T8=["on","off"];function La(t,e,n,r){if(q(n)&&(r=n,n=void 0),r)return La(t,e,n).pipe(ka(r));let[i,o]=O8(t)?P8.map(s=>a=>t[s](e,a,n)):A8(t)?R8.map(QM(t,e)):M8(t)?T8.map(QM(t,e)):[];if(!i&&xa(t))return ze(s=>La(s,e,n))(Ne(t));if(!i)throw new TypeError("Invalid event target");return new se(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function QM(t,e){return n=>r=>t[n](e,r)}function A8(t){return q(t.addListener)&&q(t.removeListener)}function M8(t){return q(t.on)&&q(t.off)}function O8(t){return q(t.addEventListener)&&q(t.removeEventListener)}function nw(t=0,e,n=xM){let r=-1;return e!=null&&(Fp(e)?n=e:r=e),new se(i=>{let o=WM(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function rw(...t){let e=Fr(t),n=NM(t,1/0),r=t;return r.length?r.length===1?Ne(r[0]):no(n)(Te(r,e)):Jt}function Qt(t,e){return me((n,r)=>{let i=0;n.subscribe(pe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function gi(t){return me((e,n)=>{let r=null,i=!1,o;r=e.subscribe(pe(n,void 0,void 0,s=>{o=Ne(t(s,gi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function ZM(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(pe(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function vi(t,e){return q(e)?ze(t,e,1):ze(t,1)}function ro(t){return me((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mi(t){return t<=0?()=>Jt:me((e,n)=>{let r=0;e.subscribe(pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function iw(t){return J(()=>t)}function ef(t=x8){return me((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function x8(){return new hi}function hr(t){return me((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Lr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Qt((i,o)=>t(i,o,r)):Dn,mi(1),n?ro(e):ef(()=>new hi))}function ja(t){return t<=0?()=>Jt:me((e,n)=>{let r=[];e.subscribe(pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ow(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Qt((i,o)=>t(i,o,r)):Dn,ja(1),n?ro(e):ef(()=>new hi))}function sw(t,e){return me(ZM(t,e,arguments.length>=2,!0))}function aw(...t){let e=Fr(t);return me((n,r)=>{(e?Fa(t,n,e):Fa(t,n)).subscribe(r)})}function Zt(t,e){return me((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(pe(r,c=>{i?.unsubscribe();let u=0,l=o++;Ne(t(c,l)).subscribe(i=pe(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function tf(t){return me((e,n)=>{Ne(t).subscribe(pe(n,()=>n.complete(),Uu)),!n.closed&&e.subscribe(n)})}function ot(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?me((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Dn}var zO="https://g.co/ng/security#xss",F=class extends Error{constructor(e,n){super(jf(e,n)),this.code=e}};function jf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function rl(t){return{toString:t}.toString()}var nf="__parameters__";function N8(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function UO(t,e,n){return rl(()=>{let r=N8(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(nf)?c[nf]:Object.defineProperty(c,nf,{value:[]})[nf];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ku=globalThis;function Ae(t){for(let e in t)if(t[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function k8(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Xt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Xt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ew(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var F8=Ae({__forward_ref__:Ae});function Ss(t){return t.__forward_ref__=Ss,t.toString=function(){return Xt(this())},t}function Yt(t){return HO(t)?t():t}function HO(t){return typeof t=="function"&&t.hasOwnProperty(F8)&&t.__forward_ref__===Ss}function P(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function qf(t){return YM(t,WO)||YM(t,GO)}function $O(t){return qf(t)!==null}function YM(t,e){return t.hasOwnProperty(e)?t[e]:null}function L8(t){let e=t&&(t[WO]||t[GO]);return e||null}function XM(t){return t&&(t.hasOwnProperty(eO)||t.hasOwnProperty(j8))?t[eO]:null}var WO=Ae({\u0275prov:Ae}),eO=Ae({\u0275inj:Ae}),GO=Ae({ngInjectableDef:Ae}),j8=Ae({ngInjectorDef:Ae}),N=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KO(t){return t&&!!t.\u0275providers}var q8=Ae({\u0275cmp:Ae}),B8=Ae({\u0275dir:Ae}),V8=Ae({\u0275pipe:Ae}),z8=Ae({\u0275mod:Ae}),hf=Ae({\u0275fac:Ae}),Gu=Ae({__NG_ELEMENT_ID__:Ae}),tO=Ae({__NG_ENV_ID__:Ae});function il(t){return typeof t=="string"?t:t==null?"":String(t)}function U8(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():il(t)}function H8(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new F(-200,t)}function Rb(t,e){throw new F(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),Iw;function JO(){return Iw}function Vn(t){let e=Iw;return Iw=t,e}function QO(t,e,n){let r=qf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;Rb(t,"Injector")}var $8={},Ju=$8,Dw="__NG_DI_FLAG__",gf="ngTempTokenPath",W8="ngTokenPath",G8=/\n/gm,K8="\u0275",nO="__source",za;function J8(){return za}function io(t){let e=za;return za=t,e}function Q8(t,e=te.Default){if(za===void 0)throw new F(-203,!1);return za===null?QO(t,void 0,e):za.get(t,e&te.Optional?null:void 0,e)}function x(t,e=te.Default){return(JO()||Q8)(Yt(t),e)}function E(t,e=te.Default){return x(t,Bf(e))}function Bf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function _w(t){let e=[];for(let n=0;n<t.length;n++){let r=Yt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,o=te.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Z8(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(x(i,o))}else e.push(x(r))}return e}function ZO(t,e){return t[Dw]=e,t.prototype[Dw]=e,t}function Z8(t){return t[Dw]}function Y8(t,e,n,r){let i=t[gf];throw e[nO]&&i.unshift(e[nO]),t.message=X8(`
`+t.message,i,n,r),t[W8]=i,t[gf]=null,t}function X8(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==K8?t.slice(2):t;let i=Xt(e);if(Array.isArray(e))i=e.map(Xt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Xt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(G8,`
  `)}`}var Vf=ZO(UO("Optional"),8);var Pb=ZO(UO("SkipSelf"),4);function Ha(t,e){let n=t.hasOwnProperty(hf);return n?t[hf]:null}function e6(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function t6(t){return t.flat(Number.POSITIVE_INFINITY)}function Tb(t,e){t.forEach(n=>Array.isArray(n)?Tb(n,e):e(n))}function YO(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function vf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function n6(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function r6(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function zf(t,e,n){let r=ol(t,e);return r>=0?t[r|1]=n:(r=~r,r6(t,r,e,n)),r}function cw(t,e){let n=ol(t,e);if(n>=0)return t[n|1]}function ol(t,e){return i6(t,e,1)}function i6(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var $a={},un=[],Wa=new N(""),XO=new N("",-1),ex=new N(""),mf=class{get(e,n=Ju){if(n===Ju){let r=new Error(`NullInjectorError: No provider for ${Xt(e)}!`);throw r.name="NullInjectorError",r}return n}},tx=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(tx||{}),Br=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Br||{}),ao=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ao||{});function o6(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Rw(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];s6(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function nx(t){return t===3||t===4||t===6}function s6(t){return t.charCodeAt(0)===64}function Qu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?rO(t,n,i,null,e[++r]):rO(t,n,i,null,null))}}return t}function rO(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var rx="ng-template";function a6(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&o6(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ab(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ab(t){return t.type===4&&t.value!==rx}function c6(t,e,n){let r=t.type===4&&!n?rx:t.value;return e===r}function u6(t,e,n){let r=4,i=t.attrs,o=i!==null?p6(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!gr(r)&&!gr(c))return!1;if(s&&gr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!c6(t,c,n)||c===""&&e.length===1){if(gr(r))return!1;s=!0}}else if(r&8){if(i===null||!a6(t,i,c,n)){if(gr(r))return!1;s=!0}}else{let u=e[++a],l=l6(c,i,Ab(t),n);if(l===-1){if(gr(r))return!1;s=!0;continue}if(u!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(gr(r))return!1;s=!0}}}}return gr(r)||s}function gr(t){return(t&1)===0}function l6(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return f6(e,t)}function ix(t,e,n=!1){for(let r=0;r<e.length;r++)if(u6(t,e[r],n))return!0;return!1}function d6(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function p6(t){for(let e=0;e<t.length;e++){let n=t[e];if(nx(n))return e}return t.length}function f6(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function h6(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function iO(t,e){return t?":not("+e.trim()+")":e}function g6(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!gr(s)&&(e+=iO(o,i),i=""),r=s,o=o||!gr(r);n++}return i!==""&&(e+=iO(o,i)),e}function v6(t){return t.map(g6).join(",")}function m6(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!gr(i))break;i=o}r++}return{attrs:e,classes:n}}function Ur(t){return rl(()=>{let e=ux(t),n=ee(D({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===tx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Br.Emulated,styles:t.styles||un,_:null,schemas:t.schemas||null,tView:null,id:""});lx(n);let r=t.dependencies;return n.directiveDefs=sO(r,!1),n.pipeDefs=sO(r,!0),n.id=S6(n),n})}function y6(t){return co(t)||ox(t)}function C6(t){return t!==null}function pn(t){return rl(()=>({type:t.type,bootstrap:t.bootstrap||un,declarations:t.declarations||un,imports:t.imports||un,exports:t.exports||un,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function oO(t,e){if(t==null)return $a;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=ao.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==ao.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Xe(t){return rl(()=>{let e=ux(t);return lx(e),e})}function co(t){return t[q8]||null}function ox(t){return t[B8]||null}function sx(t){return t[V8]||null}function ax(t){let e=co(t)||ox(t)||sx(t);return e!==null?e.standalone:!1}function cx(t,e){let n=t[z8]||null;if(!n&&e===!0)throw new Error(`Type ${Xt(t)} does not have '\u0275mod' property.`);return n}function ux(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||$a,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||un,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oO(t.inputs,e),outputs:oO(t.outputs),debugInfo:null}}function lx(t){t.features?.forEach(e=>e(t))}function sO(t,e){if(!t)return null;let n=e?sx:y6;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(C6)}function S6(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rc(t){return{\u0275providers:t}}function w6(...t){return{\u0275providers:dx(!0,t),\u0275fromNgModule:!0}}function dx(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Tb(e,s=>{let a=s;Pw(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&px(i,o),n}function px(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Mb(i,o=>{e(o,r)})}}function Pw(t,e,n,r){if(t=Yt(t),!t)return!1;let i=null,o=XM(t),s=!o&&co(t);if(!o&&!s){let c=t.ngModule;if(o=XM(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Pw(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Tb(o.imports,l=>{Pw(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&px(u,e)}if(!a){let u=Ha(i)||(()=>new i);e({provide:i,useFactory:u,deps:un},i),e({provide:ex,useValue:i,multi:!0},i),e({provide:Wa,useValue:()=>x(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;Mb(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Mb(t,e){for(let n of t)KO(n)&&(n=n.\u0275providers),Array.isArray(n)?Mb(n,e):e(n)}var b6=Ae({provide:String,useValue:Ae});function fx(t){return t!==null&&typeof t=="object"&&b6 in t}function E6(t){return!!(t&&t.useExisting)}function I6(t){return!!(t&&t.useFactory)}function Ga(t){return typeof t=="function"}function D6(t){return!!t.useClass}var Uf=new N(""),uf={},_6={},uw;function Ob(){return uw===void 0&&(uw=new mf),uw}var en=class{},Zu=class extends en{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Aw(e,s=>this.processProvider(s)),this.records.set(XO,qa(void 0,this)),i.has("environment")&&this.records.set(en,qa(void 0,this));let o=this.records.get(Uf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ex,un,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=io(this),r=Vn(void 0),i;try{return e()}finally{io(n),Vn(r)}}get(e,n=Ju,r=te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(tO))return e[tO](this);r=Bf(r);let i,o=io(this),s=Vn(void 0);try{if(!(r&te.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=M6(e)&&qf(e);u&&this.injectableDefInScope(u)?c=qa(Tw(e),uf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&te.Self?Ob():this.parent;return n=r&te.Optional&&n===Ju?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[gf]=a[gf]||[]).unshift(Xt(e)),o)throw a;return Y8(a,e,"R3InjectorError",this.source)}else throw a}finally{Vn(s),io(o)}}resolveInjectorInitializers(){let e=ce(null),n=io(this),r=Vn(void 0),i;try{let o=this.get(Wa,un,te.Self);for(let s of o)s()}finally{io(n),Vn(r),ce(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Xt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){e=Yt(e);let n=Ga(e)?e:Yt(e&&e.provide),r=P6(e);if(!Ga(e)&&e.multi===!0){let i=this.records.get(n);i||(i=qa(void 0,uf,!0),i.factory=()=>_w(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ce(null);try{return n.value===uf&&(n.value=_6,n.value=n.factory()),typeof n.value=="object"&&n.value&&A6(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Yt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Tw(t){let e=qf(t),n=e!==null?e.factory:Ha(t);if(n!==null)return n;if(t instanceof N)throw new F(204,!1);if(t instanceof Function)return R6(t);throw new F(204,!1)}function R6(t){if(t.length>0)throw new F(204,!1);let n=L8(t);return n!==null?()=>n.factory(t):()=>new t}function P6(t){if(fx(t))return qa(void 0,t.useValue);{let e=hx(t);return qa(e,uf)}}function hx(t,e,n){let r;if(Ga(t)){let i=Yt(t);return Ha(i)||Tw(i)}else if(fx(t))r=()=>Yt(t.useValue);else if(I6(t))r=()=>t.useFactory(..._w(t.deps||[]));else if(E6(t))r=()=>x(Yt(t.useExisting));else{let i=Yt(t&&(t.useClass||t.provide));if(T6(t))r=()=>new i(..._w(t.deps));else return Ha(i)||Tw(i)}return r}function qa(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function T6(t){return!!t.deps}function A6(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function M6(t){return typeof t=="function"||typeof t=="object"&&t instanceof N}function Aw(t,e){for(let n of t)Array.isArray(n)?Aw(n,e):n&&KO(n)?Aw(n.\u0275providers,e):e(n)}function Rn(t,e){t instanceof Zu&&t.assertNotDestroyed();let n,r=io(t),i=Vn(void 0);try{return e()}finally{io(r),Vn(i)}}function gx(){return JO()!==void 0||J8()!=null}function O6(t){if(!gx())throw new F(-203,!1)}function x6(t){return typeof t=="function"}var bi=0,G=1,H=2,Ot=3,vr=4,fn=5,Ka=6,yf=7,At=8,Ja=9,Vr=10,qe=11,Yu=12,aO=13,ic=14,_n=15,ps=16,Ba=17,yi=18,Hf=19,vx=20,oo=21,lw=22,zn=23,tn=25,mx=1;var fs=7,Cf=8,Qa=9,Mt=10,Sf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Sf||{});function so(t){return Array.isArray(t)&&typeof t[mx]=="object"}function Ei(t){return Array.isArray(t)&&t[mx]===!0}function xb(t){return(t.flags&4)!==0}function $f(t){return t.componentOffset>-1}function Wf(t){return(t.flags&1)===1}function uo(t){return!!t.template}function Mw(t){return(t[H]&512)!==0}var Ow=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function yx(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ii(){return Cx}function Cx(t){return t.type.prototype.ngOnChanges&&(t.setInput=k6),N6}Ii.ngInherit=!0;function N6(){let t=wx(this),e=t?.current;if(e){let n=t.previous;if(n===$a)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function k6(t,e,n,r,i){let o=this.declaredInputs[r],s=wx(t)||F6(t,{previous:$a,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ow(u&&u.currentValue,n,c===$a),yx(t,e,i,n)}var Sx="__ngSimpleChanges__";function wx(t){return t[Sx]||null}function F6(t,e){return t[Sx]=e}var cO=null;var jr=function(t,e,n){cO?.(t,e,n)},L6="svg",j6="math";function zr(t){for(;Array.isArray(t);)t=t[bi];return t}function bx(t,e){return zr(e[t])}function Hn(t,e){return zr(e[t.index])}function Nb(t,e){return t.data[e]}function q6(t,e){return t[e]}function vo(t,e){let n=e[t];return so(n)?n:n[bi]}function B6(t){return(t[H]&4)===4}function kb(t){return(t[H]&128)===128}function V6(t){return Ei(t[Ot])}function lo(t,e){return e==null?null:t[e]}function Ex(t){t[Ba]=0}function Ix(t){t[H]&1024||(t[H]|=1024,kb(t)&&Gf(t))}function z6(t,e){for(;t>0;)e=e[ic],t--;return e}function Xu(t){return!!(t[H]&9216||t[zn]?.dirty)}function xw(t){t[Vr].changeDetectionScheduler?.notify(7),t[H]&64&&(t[H]|=1024),Xu(t)&&Gf(t)}function Gf(t){t[Vr].changeDetectionScheduler?.notify(0);let e=hs(t);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!kb(e)));)e=hs(e)}function Dx(t,e){if((t[H]&256)===256)throw new F(911,!1);t[oo]===null&&(t[oo]=[]),t[oo].push(e)}function U6(t,e){if(t[oo]===null)return;let n=t[oo].indexOf(e);n!==-1&&t[oo].splice(n,1)}function hs(t){let e=t[Ot];return Ei(e)?e[Ot]:e}var re={lFrame:Lx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _x=!1;function H6(){return re.lFrame.elementDepthCount}function $6(){re.lFrame.elementDepthCount++}function W6(){re.lFrame.elementDepthCount--}function Rx(){return re.bindingsEnabled}function Px(){return re.skipHydrationRootTNode!==null}function G6(t){return re.skipHydrationRootTNode===t}function K6(){re.skipHydrationRootTNode=null}function X(){return re.lFrame.lView}function We(){return re.lFrame.tView}function Tx(t){return re.lFrame.contextLView=t,t[At]}function Ax(t){return re.lFrame.contextLView=null,t}function Nt(){let t=Mx();for(;t!==null&&t.type===64;)t=t.parent;return t}function Mx(){return re.lFrame.currentTNode}function J6(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ws(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function Fb(){return re.lFrame.isParent}function Lb(){re.lFrame.isParent=!1}function Q6(){return re.lFrame.contextLView}function Ox(){return _x}function uO(t){_x=t}function jb(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Z6(t){return re.lFrame.bindingIndex=t}function oc(){return re.lFrame.bindingIndex++}function xx(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Y6(){return re.lFrame.inI18n}function X6(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Nw(e)}function e4(){return re.lFrame.currentDirectiveIndex}function Nw(t){re.lFrame.currentDirectiveIndex=t}function t4(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Nx(){return re.lFrame.currentQueryIndex}function qb(t){re.lFrame.currentQueryIndex=t}function n4(t){let e=t[G];return e.type===2?e.declTNode:e.type===1?t[fn]:null}function kx(t,e,n){if(n&te.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=n4(o),i===null||(o=o[ic],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=Fx();return r.currentTNode=e,r.lView=t,!0}function Bb(t){let e=Fx(),n=t[G];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Fx(){let t=re.lFrame,e=t===null?null:t.child;return e===null?Lx(t):e}function Lx(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function jx(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var qx=jx;function Vb(){let t=jx();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function r4(t){return(re.lFrame.contextLView=z6(t,re.lFrame.contextLView))[At]}function mo(){return re.lFrame.selectedIndex}function gs(t){re.lFrame.selectedIndex=t}function Kf(){let t=re.lFrame;return Nb(t.tView,t.selectedIndex)}function i4(){return re.lFrame.currentNamespace}var Bx=!0;function Jf(){return Bx}function Qf(t){Bx=t}function o4(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Cx(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Zf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function lf(t,e,n){Vx(t,e,3,n)}function df(t,e,n,r){(t[H]&3)===n&&Vx(t,e,n,r)}function dw(t,e){let n=t[H];(n&3)===e&&(n&=16383,n+=1,t[H]=n)}function Vx(t,e,n,r){let i=r!==void 0?t[Ba]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ba]+=65536),(a<o||o==-1)&&(s4(t,n,e,c),t[Ba]=(t[Ba]&4294901760)+c+2),c++}function lO(t,e){jr(4,t,e);let n=ce(null);try{e.call(t)}finally{ce(n),jr(5,t,e)}}function s4(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[H]>>14<t[Ba]>>16&&(t[H]&3)===e&&(t[H]+=16384,lO(a,o)):lO(a,o)}var Ua=-1,vs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function a4(t){return t instanceof vs}function c4(t){return(t.flags&8)!==0}function u4(t){return(t.flags&16)!==0}var pw={},kw=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Bf(r);let i=this.injector.get(e,pw,r);return i!==pw||n===pw?i:this.parentInjector.get(e,n,r)}};function zx(t){return t!==Ua}function wf(t){return t&32767}function l4(t){return t>>16}function bf(t,e){let n=l4(t),r=e;for(;n>0;)r=r[ic],n--;return r}var Fw=!0;function dO(t){let e=Fw;return Fw=t,e}var d4=256,Ux=d4-1,Hx=5,p4=0,qr={};function f4(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Gu)&&(r=n[Gu]),r==null&&(r=n[Gu]=p4++);let i=r&Ux,o=1<<i;e.data[t+(i>>Hx)]|=o}function Ef(t,e){let n=$x(t,e);if(n!==-1)return n;let r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,fw(r.data,t),fw(e,null),fw(r.blueprint,null));let i=zb(t,e),o=t.injectorIndex;if(zx(i)){let s=wf(i),a=bf(i,e),c=a[G].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function fw(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $x(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function zb(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Qx(i),r===null)return Ua;if(n++,i=i[ic],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ua}function Lw(t,e,n){f4(t,e,n)}function h4(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(nx(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function Wx(t,e,n){if(n&te.Optional||t!==void 0)return t;Rb(e,"NodeInjector")}function Gx(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let i=t[Ja],o=Vn(void 0);try{return i?i.get(e,r,n&te.Optional):QO(e,r,n&te.Optional)}finally{Vn(o)}}return Wx(r,e,n)}function Kx(t,e,n,r=te.Default,i){if(t!==null){if(e[H]&2048&&!(r&te.Self)){let s=y4(t,e,n,r,qr);if(s!==qr)return s}let o=Jx(t,e,n,r,qr);if(o!==qr)return o}return Gx(e,n,r,i)}function Jx(t,e,n,r,i){let o=v4(n);if(typeof o=="function"){if(!kx(e,t,r))return r&te.Host?Wx(i,n,r):Gx(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&te.Optional))Rb(n);else return s}finally{qx()}}else if(typeof o=="number"){let s=null,a=$x(t,e),c=Ua,u=r&te.Host?e[_n][fn]:null;for((a===-1||r&te.SkipSelf)&&(c=a===-1?zb(t,e):e[a+8],c===Ua||!fO(r,!1)?a=-1:(s=e[G],a=wf(c),e=bf(c,e)));a!==-1;){let l=e[G];if(pO(o,a,l.data)){let d=g4(a,e,n,s,r,u);if(d!==qr)return d}c=e[a+8],c!==Ua&&fO(r,e[G].data[a+8]===u)&&pO(o,a,e)?(s=l,a=wf(c),e=bf(c,e)):a=-1}}return i}function g4(t,e,n,r,i,o){let s=e[G],a=s.data[t+8],c=r==null?$f(a)&&Fw:r!=s&&(a.type&3)!==0,u=i&te.Host&&o===a,l=pf(a,s,n,c,u);return l!==null?ms(e,s,l,a):qr}function pf(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,p=i?a+l:u;for(let f=d;f<p;f++){let g=s[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=s[c];if(f&&uo(f)&&f.type===n)return c}return null}function ms(t,e,n,r){let i=t[n],o=e.data;if(a4(i)){let s=i;s.resolving&&H8(U8(o[n]));let a=dO(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Vn(s.injectImpl):null,l=kx(t,r,te.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&o4(n,o[n],e)}finally{u!==null&&Vn(u),dO(a),s.resolving=!1,qx()}}return i}function v4(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Gu)?t[Gu]:void 0;return typeof e=="number"?e>=0?e&Ux:m4:e}function pO(t,e,n){let r=1<<t;return!!(n[e+(t>>Hx)]&r)}function fO(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var ds=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Kx(this._tNode,this._lView,e,Bf(r),n)}};function m4(){return new ds(Nt(),X())}function sl(t){return rl(()=>{let e=t.prototype.constructor,n=e[hf]||jw(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[hf]||jw(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function jw(t){return HO(t)?()=>{let e=jw(Yt(t));return e&&e()}:Ha(t)}function y4(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[H]&2048&&!(s[H]&512);){let a=Jx(o,s,n,r|te.Self,qr);if(a!==qr)return a;let c=o.parent;if(!c){let u=s[vx];if(u){let l=u.get(n,qr,r);if(l!==qr)return l}c=Qx(s),s=s[ic]}o=c}return i}function Qx(t){let e=t[G],n=e.type;return n===2?e.declTNode:n===1?t[fn]:null}function Ub(t){return h4(Nt(),t)}function hO(t,e=null,n=null,r){let i=Zx(t,e,n,r);return i.resolveInjectorInitializers(),i}function Zx(t,e=null,n=null,r,i=new Set){let o=[n||un,w6(t)];return r=r||(typeof t=="object"?void 0:Xt(t)),new Zu(o,e||Ob(),r||null,i)}var ls=class ls{static create(e,n){if(Array.isArray(e))return hO({name:""},n,e,"");{let r=e.name??"";return hO({name:r},e.parent,e.providers,r)}}};ls.THROW_IF_NOT_FOUND=Ju,ls.NULL=new mf,ls.\u0275prov=P({token:ls,providedIn:"any",factory:()=>x(XO)}),ls.__NG_ELEMENT_ID__=-1;var xt=ls;var C4=new N("");C4.__NG_ELEMENT_ID__=t=>{let e=Nt();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(t&te.Optional)return null;throw new F(204,!1)};var S4="ngOriginalError";function hw(t){return t[S4]}var Hb=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=w4,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),qw=class extends Hb{constructor(e){super(),this._lView=e}onDestroy(e){return Dx(this._lView,e),()=>U6(this._lView,e)}};function w4(){return new qw(X())}var Di=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Bw=class extends Ye{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,gx()&&(this.destroyRef=E(Hb,{optional:!0})??void 0,this.pendingTasks=E(Di,{optional:!0})??void 0)}emit(e){let n=ce(null);try{super.next(e)}finally{ce(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof xe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ne=Bw;function If(...t){}function Yx(t){let e,n;function r(){t=If;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function gO(t){return queueMicrotask(()=>t()),()=>{t=If}}var _e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ne(!1),this.onMicrotaskEmpty=new ne(!1),this.onStable=new ne(!1),this.onError=new ne(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,I4(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,b4,If,If);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},b4={};function $b(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function E4(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{Yx(()=>{t.callbackScheduled=!1,Vw(t),t.isCheckStableRunning=!0,$b(t),t.isCheckStableRunning=!1})}),Vw(t))}function I4(t){let e=()=>{E4(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(D4(a))return n.invokeTask(i,o,s,a);try{return vO(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),mO(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return vO(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!_4(a)&&e(),mO(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Vw(t),$b(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Vw(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function vO(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mO(t){t._nesting--,$b(t)}var zw=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ne,this.onMicrotaskEmpty=new ne,this.onStable=new ne,this.onError=new ne}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function D4(t){return Xx(t,"__ignore_ng_zone__")}function _4(t){return Xx(t,"__scheduler_tick__")}function Xx(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Ci=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&hw(e);for(;n&&hw(n);)n=hw(n);return n||null}},R4=new N("",{providedIn:"root",factory:()=>{let t=E(_e),e=E(Ci);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function P4(){return sc(Nt(),X())}function sc(t,e){return new pt(Hn(t,e))}var pt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=P4;let t=e;return t})();function T4(t){return t instanceof pt?t.nativeElement:t}function A4(){return this._results[Symbol.iterator]()}var Uw=class t{get changes(){return this._changes??=new ne}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=A4)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=t6(e);(this._changesDetected=!e6(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function eN(t){return(t.flags&128)===128}var tN=new Map,M4=0;function O4(){return M4++}function x4(t){tN.set(t[Hf],t)}function N4(t){tN.delete(t[Hf])}var yO="__ngContext__";function po(t,e){so(e)?(t[yO]=e[Hf],x4(e)):t[yO]=e}function nN(t){return iN(t[Yu])}function rN(t){return iN(t[vr])}function iN(t){for(;t!==null&&!Ei(t);)t=t[vr];return t}var Hw;function oN(t){Hw=t}function sN(){if(Hw!==void 0)return Hw;if(typeof document<"u")return document;throw new F(210,!1)}var Wb=new N("",{providedIn:"root",factory:()=>k4}),k4="ng",Gb=new N(""),$n=new N("",{providedIn:"platform",factory:()=>"unknown"});var Kb=new N("",{providedIn:"root",factory:()=>sN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var F4="h",L4="b";var j4=()=>null;function Jb(t,e,n=!1){return j4(t,e,n)}var aN=!1,q4=new N("",{providedIn:"root",factory:()=>aN});var rf;function B4(){if(rf===void 0&&(rf=null,Ku.trustedTypes))try{rf=Ku.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return rf}function Yf(t){return B4()?.createHTML(t)||t}var of;function cN(){if(of===void 0&&(of=null,Ku.trustedTypes))try{of=Ku.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return of}function CO(t){return cN()?.createHTML(t)||t}function SO(t){return cN()?.createScriptURL(t)||t}var Df=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zO})`}};function yo(t){return t instanceof Df?t.changingThisBreaksApplicationSecurity:t}function Xf(t,e){let n=V4(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${zO})`)}return n===e}function V4(t){return t instanceof Df&&t.getTypeName()||null}function z4(t){let e=new Ww(t);return U4()?new $w(e):e}var $w=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Yf(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},Ww=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Yf(e),n}};function U4(){try{return!!new window.DOMParser().parseFromString(Yf(""),"text/html")}catch{return!1}}var H4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qb(t){return t=String(t),t.match(H4)?t:"unsafe:"+t}function _i(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function al(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var uN=_i("area,br,col,hr,img,wbr"),lN=_i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dN=_i("rp,rt"),$4=al(dN,lN),W4=al(lN,_i("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),G4=al(dN,_i("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wO=al(uN,W4,G4,$4),pN=_i("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),K4=_i("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),J4=_i("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Q4=al(pN,K4,J4),Z4=_i("script,style,template"),Gw=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=eW(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=X4(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=bO(e).toLowerCase();if(!wO.hasOwnProperty(n))return this.sanitizedSomething=!0,!Z4.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!Q4.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;pN[a]&&(c=Qb(c)),this.buf.push(" ",s,'="',EO(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=bO(e).toLowerCase();wO.hasOwnProperty(n)&&!uN.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(EO(e))}};function Y4(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function X4(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw fN(e);return e}function eW(t){let e=t.firstChild;if(e&&Y4(t,e))throw fN(e);return e}function bO(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function fN(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var tW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nW=/([^\#-~ |!])/g;function EO(t){return t.replace(/&/g,"&amp;").replace(tW,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(nW,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var sf;function hN(t,e){let n=null;try{sf=sf||z4(t);let r=e?String(e):"";n=sf.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=sf.getInertBodyElement(r)}while(r!==o);let a=new Gw().sanitizeChildren(IO(n)||n);return Yf(a)}finally{if(n){let r=IO(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function IO(t){return"content"in t&&rW(t)?t.content:null}function rW(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var cl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(cl||{});function Rve(t){let e=Zb();return e?CO(e.sanitize(cl.HTML,t)||""):Xf(t,"HTML")?CO(yo(t)):hN(sN(),il(t))}function iW(t){let e=Zb();return e?e.sanitize(cl.URL,t)||"":Xf(t,"URL")?yo(t):Qb(il(t))}function oW(t){let e=Zb();if(e)return SO(e.sanitize(cl.RESOURCE_URL,t)||"");if(Xf(t,"ResourceURL"))return SO(yo(t));throw new F(904,!1)}function sW(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?oW:iW}function gN(t,e,n){return sW(e,n)(t)}function Zb(){let t=X();return t&&t[Vr].sanitizer}var aW=/^>|^->|<!--|-->|--!>|<!-$/g,cW=/(<|>)/g,uW="\u200B$1\u200B";function lW(t){return t.replace(aW,e=>e.replace(cW,uW))}function Pve(t){return t.ownerDocument.defaultView}function Tve(t){return t.ownerDocument}function vN(t){return t instanceof Function?t():t}function dW(t){return(t??E(xt)).get($n)==="browser"}var Si=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Si||{}),pW;function Yb(t,e){return pW(t,e)}function Va(t,e,n,r,i){if(r!=null){let o,s=!1;Ei(r)?o=r:so(r)&&(s=!0,r=r[bi]);let a=zr(r);t===0&&n!==null?i==null?wN(e,n,a):_f(e,n,a,i||null,!0):t===1&&n!==null?_f(e,n,a,i||null,!0):t===2?RW(e,a,s):t===3&&e.destroyNode(a),o!=null&&TW(e,t,o,n,i)}}function fW(t,e){return t.createText(e)}function hW(t,e,n){t.setValue(e,n)}function gW(t,e){return t.createComment(lW(e))}function mN(t,e,n){return t.createElement(e,n)}function vW(t,e){yN(t,e),e[bi]=null,e[fn]=null}function mW(t,e,n,r,i,o){r[bi]=i,r[fn]=e,nh(t,r,n,1,i,o)}function yN(t,e){e[Vr].changeDetectionScheduler?.notify(8),nh(t,e,e[qe],2,null,null)}function yW(t){let e=t[Yu];if(!e)return gw(t[G],t);for(;e;){let n=null;if(so(e))n=e[Yu];else{let r=e[Mt];r&&(n=r)}if(!n){for(;e&&!e[vr]&&e!==t;)so(e)&&gw(e[G],e),e=e[Ot];e===null&&(e=t),so(e)&&gw(e[G],e),n=e&&e[vr]}e=n}}function CW(t,e,n,r){let i=Mt+r,o=n.length;r>0&&(n[i-1][vr]=e),r<o-Mt?(e[vr]=n[i],YO(n,Mt+r,e)):(n.push(e),e[vr]=null),e[Ot]=n;let s=e[ps];s!==null&&n!==s&&CN(s,e);let a=e[yi];a!==null&&a.insertView(t),xw(e),e[H]|=128}function CN(t,e){let n=t[Qa],r=e[Ot];if(so(r))t[H]|=Sf.HasTransplantedViews;else{let i=r[Ot][_n];e[_n]!==i&&(t[H]|=Sf.HasTransplantedViews)}n===null?t[Qa]=[e]:n.push(e)}function Xb(t,e){let n=t[Qa],r=n.indexOf(e);n.splice(r,1)}function el(t,e){if(t.length<=Mt)return;let n=Mt+e,r=t[n];if(r){let i=r[ps];i!==null&&i!==t&&Xb(i,r),e>0&&(t[n-1][vr]=r[vr]);let o=vf(t,Mt+e);vW(r[G],r);let s=o[yi];s!==null&&s.detachView(o[G]),r[Ot]=null,r[vr]=null,r[H]&=-129}return r}function eh(t,e){if(!(e[H]&256)){let n=e[qe];n.destroyNode&&nh(t,e,n,3,null,null),yW(e)}}function gw(t,e){if(e[H]&256)return;let n=ce(null);try{e[H]&=-129,e[H]|=256,e[zn]&&BS(e[zn]),wW(t,e),SW(t,e),e[G].type===1&&e[qe].destroy();let r=e[ps];if(r!==null&&Ei(e[Ot])){r!==e[Ot]&&Xb(r,e);let i=e[yi];i!==null&&i.detachView(t)}N4(e)}finally{ce(n)}}function SW(t,e){let n=t.cleanup,r=e[yf];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[yf]=null);let i=e[oo];if(i!==null){e[oo]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function wW(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof vs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];jr(4,a,c);try{c.call(a)}finally{jr(5,a,c)}}else{jr(4,i,o);try{o.call(i)}finally{jr(5,i,o)}}}}}function SN(t,e,n){return bW(t,e.parent,n)}function bW(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[bi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Br.None||o===Br.Emulated)return null}return Hn(r,n)}}function _f(t,e,n,r,i){t.insertBefore(e,n,r,i)}function wN(t,e,n){t.appendChild(e,n)}function DO(t,e,n,r,i){r!==null?_f(t,e,n,r,i):wN(t,e,n)}function EW(t,e,n,r){t.removeChild(e,n,r)}function eE(t,e){return t.parentNode(e)}function IW(t,e){return t.nextSibling(e)}function bN(t,e,n){return _W(t,e,n)}function DW(t,e,n){return t.type&40?Hn(t,n):null}var _W=DW,_O;function th(t,e,n,r){let i=SN(t,r,e),o=e[qe],s=r.parent||e[fn],a=bN(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)DO(o,i,n[c],a,!1);else DO(o,i,n,a,!1);_O!==void 0&&_O(o,r,e,n,i)}function Wu(t,e){if(e!==null){let n=e.type;if(n&3)return Hn(e,t);if(n&4)return Kw(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Wu(t,r);{let i=t[e.index];return Ei(i)?Kw(-1,i):zr(i)}}else{if(n&128)return Wu(t,e.next);if(n&32)return Yb(e,t)()||zr(t[e.index]);{let r=EN(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=hs(t[_n]);return Wu(i,r)}else return Wu(t,e.next)}}}return null}function EN(t,e){if(e!==null){let r=t[_n][fn],i=e.projection;return r.projection[i]}return null}function Kw(t,e){let n=Mt+t+1;if(n<e.length){let r=e[n],i=r[G].firstChild;if(i!==null)return Wu(r,i)}return e[fs]}function RW(t,e,n){let r=eE(t,e);r&&EW(t,r,e,n)}function tE(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&po(zr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)tE(t,e,n.child,r,i,o,!1),Va(e,t,i,a,o);else if(c&32){let u=Yb(n,r),l;for(;l=u();)Va(e,t,i,l,o);Va(e,t,i,a,o)}else c&16?IN(t,e,r,n,i,o):Va(e,t,i,a,o);n=s?n.projectionNext:n.next}}function nh(t,e,n,r,i,o){tE(n,r,t.firstChild,e,i,o,!1)}function PW(t,e,n){let r=e[qe],i=SN(t,n,e),o=n.parent||e[fn],s=bN(o,n,e);IN(r,0,e,n,i,s)}function IN(t,e,n,r,i,o){let s=n[_n],c=s[fn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Va(e,t,i,l,o)}else{let u=c,l=s[Ot];eN(r)&&(u.flags|=128),tE(t,e,u,l,i,o,!0)}}function TW(t,e,n,r,i){let o=n[fs],s=zr(n);o!==s&&Va(e,t,r,o,i);for(let a=Mt;a<n.length;a++){let c=n[a];nh(c[G],c,t,e,r,o)}}function AW(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Si.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Si.Important),t.setStyle(n,r,i,o))}}function MW(t,e,n){t.setAttribute(e,"style",n)}function DN(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _N(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Rw(t,e,r),i!==null&&DN(t,e,i),o!==null&&MW(t,e,o)}var mr={};function bs(t=1){RN(We(),X(),mo()+t,!1)}function RN(t,e,n,r){if(!r)if((e[H]&3)===3){let o=t.preOrderCheckHooks;o!==null&&lf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&df(e,o,0,n)}gs(n)}function V(t,e=te.Default){let n=X();if(n===null)return x(t,e);let r=Nt();return Kx(r,n,Yt(t),e)}function PN(){let t="invalid";throw new Error(t)}function TN(t,e,n,r,i,o){let s=ce(null);try{let a=null;i&ao.SignalBased&&(a=e[r][fi]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ao.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):yx(e,a,r,o)}finally{ce(s)}}function OW(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)gs(~i);else{let o=i,s=n[++r],a=n[++r];X6(s,o);let c=e[o];a(2,c)}}}finally{gs(-1)}}function rh(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[bi]=i,d[H]=r|4|128|8|64,(u!==null||t&&t[H]&2048)&&(d[H]|=2048),Ex(d),d[Ot]=d[ic]=t,d[At]=n,d[Vr]=s||t&&t[Vr],d[qe]=a||t&&t[qe],d[Ja]=c||t&&t[Ja]||null,d[fn]=o,d[Hf]=O4(),d[Ka]=l,d[vx]=u,d[_n]=e.type==2?t[_n]:d,d}function ac(t,e,n,r,i){let o=t.data[e];if(o===null)o=xW(t,e,n,r,i),Y6()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=J6();o.injectorIndex=s===null?-1:s.injectorIndex}return ws(o,!0),o}function xW(t,e,n,r,i){let o=Mx(),s=Fb(),a=s?o:o&&o.parent,c=t.data[e]=qW(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function AN(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function MN(t,e,n,r,i){let o=mo(),s=r&2;try{gs(-1),s&&e.length>tn&&RN(t,e,tn,!1),jr(s?2:0,i),n(r,i)}finally{gs(o),jr(s?3:1,i)}}function nE(t,e,n){if(xb(e)){let r=ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{ce(r)}}}function rE(t,e,n){Rx()&&($W(t,e,n,Hn(n,e)),(n.flags&64)===64&&NN(t,e,n))}function iE(t,e,n=Hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function ON(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=oE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function oE(t,e,n,r,i,o,s,a,c,u,l){let d=tn+r,p=d+i,f=NW(d,p),g=typeof u=="function"?u():u;return f[G]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function NW(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:mr);return n}function kW(t,e,n,r){let o=r.get(q4,aN)||n===Br.ShadowDom,s=t.selectRootElement(e,o);return FW(s),s}function FW(t){LW(t)}var LW=()=>null;function jW(t,e,n,r){let i=LN(e);i.push(n),t.firstCreatePass&&jN(t).push(r,i.length-1)}function qW(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Px()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function RO(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=ao.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?PO(r,n,u,a,c):PO(r,n,u,a)}return r}function PO(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function BW(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],p=n?n.get(d):null,f=p?p.inputs:null,g=p?p.outputs:null;c=RO(0,d.inputs,l,c,f),u=RO(1,d.outputs,l,u,g);let m=c!==null&&s!==null&&!Ab(e)?nG(c,l,s):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function VW(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function sE(t,e,n,r,i,o,s,a){let c=Hn(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(cE(t,n,l,r,i),$f(e)&&zW(n,e.index)):e.type&3?(r=VW(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function zW(t,e){let n=vo(e,t);n[H]&16||(n[H]|=64)}function aE(t,e,n,r){if(Rx()){let i=r===null?null:{"":-1},o=GW(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&xN(t,e,n,s,i,a),i&&KW(n,r,i)}n.mergedAttrs=Qu(n.mergedAttrs,n.attrs)}function xN(t,e,n,r,i,o){for(let u=0;u<r.length;u++)Lw(Ef(n,e),t,r[u].type);QW(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=AN(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Qu(n.mergedAttrs,l.hostAttrs),ZW(t,n,e,c,l),JW(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}BW(t,n,o)}function UW(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;HW(s)!=a&&s.push(a),s.push(n,r,o)}}function HW(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function $W(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;$f(n)&&YW(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ef(n,e),po(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=ms(e,t,a,n);if(po(u,e),s!==null&&tG(e,a-i,u,c,n,s),uo(c)){let l=vo(n.index,e);l[At]=ms(e,t,a,n)}}}function NN(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=e4();try{gs(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Nw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&WW(c,u)}}finally{gs(-1),Nw(s)}}function WW(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function GW(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(ix(e,s.selectors,!1))if(r||(r=[]),uo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Jw(t,e,c)}else r.unshift(s),Jw(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Jw(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function KW(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new F(-301,!1);r.push(e[i],o)}}}function JW(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;uo(e)&&(n[""]=t)}}function QW(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ZW(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ha(i.type,!0)),s=new vs(o,uo(i),V);t.blueprint[r]=s,n[r]=s,UW(t,e,r,AN(t,n,i.hostVars,mr),i)}function YW(t,e,n){let r=Hn(e,t),i=ON(n),o=t[Vr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ih(t,rh(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function XW(t,e,n,r,i,o){let s=Hn(t,e);eG(e[qe],s,o,t.value,n,r,i)}function eG(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?il(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function tG(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];TN(r,n,c,u,l,d)}}function nG(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function kN(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function FN(t,e){let n=t.contentQueries;if(n!==null){let r=ce(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];qb(o),a.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function ih(t,e){return t[Yu]?t[aO][vr]=e:t[Yu]=e,t[aO]=e,e}function Qw(t,e,n){qb(0);let r=ce(null);try{e(t,n)}finally{ce(r)}}function LN(t){return t[yf]??=[]}function jN(t){return t.cleanup??=[]}function qN(t,e){let n=t[Ja],r=n?n.get(Ci,null):null;r&&r.handleError(e)}function cE(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],l=t.data[s];TN(l,u,r,a,c,i)}}function rG(t,e,n){let r=bx(e,t);hW(t[qe],r,n)}function iG(t,e){let n=vo(e,t),r=n[G];oG(r,n);let i=n[bi];i!==null&&n[Ka]===null&&(n[Ka]=Jb(i,n[Ja])),uE(r,n,n[At])}function oG(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function uE(t,e,n){Bb(e);try{let r=t.viewQuery;r!==null&&Qw(1,r,n);let i=t.template;i!==null&&MN(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[yi]?.finishViewCreation(t),t.staticContentQueries&&FN(t,e),t.staticViewQueries&&Qw(2,t.viewQuery,n);let o=t.components;o!==null&&sG(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[H]&=-5,Vb()}}function sG(t,e){for(let n=0;n<e.length;n++)iG(t,e[n])}function ul(t,e,n,r){let i=ce(null);try{let o=e.tView,a=t[H]&4096?4096:16,c=rh(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[ps]=u;let l=t[yi];return l!==null&&(c[yi]=l.createEmbeddedView(o)),uE(o,c,n),c}finally{ce(i)}}function BN(t,e){let n=Mt+e;if(n<t.length)return t[n]}function Za(t,e){return!e||e.firstChild===null||eN(t)}function ll(t,e,n,r=!0){let i=e[G];if(CW(i,e,t,n),r){let s=Kw(n,t),a=e[qe],c=eE(a,t[fs]);c!==null&&mW(i,t[fn],a,e,c,s)}let o=e[Ka];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function VN(t,e){let n=el(t,e);return n!==void 0&&eh(n[G],n),n}function Rf(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(zr(o)),Ei(o)&&aG(o,r);let s=n.type;if(s&8)Rf(t,e,n.child,r);else if(s&32){let a=Yb(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=EN(e,n);if(Array.isArray(a))r.push(...a);else{let c=hs(e[_n]);Rf(c[G],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function aG(t,e){for(let n=Mt;n<t.length;n++){let r=t[n],i=r[G].firstChild;i!==null&&Rf(r[G],r,i,e)}t[fs]!==t[bi]&&e.push(t[fs])}var zN=[];function cG(t){return t[zn]??uG(t)}function uG(t){let e=zN.pop()??Object.create(dG);return e.lView=t,e}function lG(t){t.lView[zn]!==t&&(t.lView=null,zN.push(t))}var dG=ee(D({},zu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Gf(t.lView)},consumerOnSignalRead(){this.lView[zn]=this}});function pG(t){let e=t[zn]??Object.create(fG);return e.lView=t,e}var fG=ee(D({},zu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=hs(t.lView);for(;e&&!UN(e[G]);)e=hs(e);e&&Ix(e)},consumerOnSignalRead(){this.lView[zn]=this}});function UN(t){return t.type!==2}var hG=100;function HN(t,e=!0,n=0){let r=t[Vr],i=r.rendererFactory,o=!1;o||i.begin?.();try{gG(t,n)}catch(s){throw e&&qN(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function gG(t,e){let n=Ox();try{uO(!0),Zw(t,e);let r=0;for(;Xu(t);){if(r===hG)throw new F(103,!1);r++,Zw(t,1)}}finally{uO(n)}}function vG(t,e,n,r){let i=e[H];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Vr].inlineEffectRunner?.flush(),Bb(e);let a=!0,c=null,u=null;o||(UN(t)?(u=cG(e),c=Dp(u)):pM()===null?(a=!1,u=pG(e),c=Dp(u)):e[zn]&&(BS(e[zn]),e[zn]=null));try{Ex(e),Z6(t.bindingStartIndex),n!==null&&MN(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let f=t.preOrderCheckHooks;f!==null&&lf(e,f,null)}else{let f=t.preOrderHooks;f!==null&&df(e,f,0,null),dw(e,0)}if(s||mG(e),$N(e,0),t.contentQueries!==null&&FN(t,e),!o)if(l){let f=t.contentCheckHooks;f!==null&&lf(e,f)}else{let f=t.contentHooks;f!==null&&df(e,f,1),dw(e,1)}OW(t,e);let d=t.components;d!==null&&GN(e,d,0);let p=t.viewQuery;if(p!==null&&Qw(2,p,r),!o)if(l){let f=t.viewCheckHooks;f!==null&&lf(e,f)}else{let f=t.viewHooks;f!==null&&df(e,f,2),dw(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[lw]){for(let f of e[lw])f();e[lw]=null}o||(e[H]&=-73)}catch(l){throw o||Gf(e),l}finally{u!==null&&(jS(u,c),a&&lG(u)),Vb()}}function $N(t,e){for(let n=nN(t);n!==null;n=rN(n))for(let r=Mt;r<n.length;r++){let i=n[r];WN(i,e)}}function mG(t){for(let e=nN(t);e!==null;e=rN(e)){if(!(e[H]&Sf.HasTransplantedViews))continue;let n=e[Qa];for(let r=0;r<n.length;r++){let i=n[r];Ix(i)}}}function yG(t,e,n){let r=vo(e,t);WN(r,n)}function WN(t,e){kb(t)&&Zw(t,e)}function Zw(t,e){let r=t[G],i=t[H],o=t[zn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qS(o)),s||=!1,o&&(o.dirty=!1),t[H]&=-9217,s)vG(r,t,r.template,t[At]);else if(i&8192){$N(t,1);let a=r.components;a!==null&&GN(t,a,1)}}function GN(t,e,n){for(let r=0;r<e.length;r++)yG(t,e[r],n)}function lE(t,e){let n=Ox()?64:1088;for(t[Vr].changeDetectionScheduler?.notify(e);t;){t[H]|=n;let r=hs(t);if(Mw(t)&&!r)return t;t=r}return null}var ys=class{get rootNodes(){let e=this._lView,n=e[G];return Rf(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[At]}set context(e){this._lView[At]=e}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ot];if(Ei(e)){let n=e[Cf],r=n?n.indexOf(this):-1;r>-1&&(el(e,r),vf(n,r))}this._attachedToViewContainer=!1}eh(this._lView[G],this._lView)}onDestroy(e){Dx(this._lView,e)}markForCheck(){lE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[H]&=-129}reattach(){xw(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,HN(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Mw(this._lView),n=this._lView[ps];n!==null&&!e&&Xb(n,this._lView),yN(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let n=Mw(this._lView),r=this._lView[ps];r!==null&&!n&&CN(r,this._lView),xw(this._lView)}},wi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wG;let t=e;return t})(),CG=wi,SG=class extends CG{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=ul(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ys(i)}};function wG(){return oh(Nt(),X())}function oh(t,e){return t.type&4?new SG(e,t,sc(t,e)):null}var Mve=new RegExp(`^(\\d+)*(${L4}|${F4})*(.*)`);var bG=()=>null;function Ya(t,e){return bG(t,e)}var Xa=class{},dE=new N("",{providedIn:"root",factory:()=>!1});var KN=new N(""),Yw=class{},Pf=class{};function EG(t){let e=Error(`No component factory found for ${Xt(t)}.`);return e[IG]=t,e}var IG="ngComponent";var Xw=class{resolveComponentFactory(e){throw EG(e)}},wE=class wE{};wE.NULL=new Xw;var fo=wE,ho=class{},Hr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>DG();let t=e;return t})();function DG(){let t=X(),e=Nt(),n=vo(e.index,t);return(so(n)?n:t)[qe]}var _G=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var TO=new Set;function Ri(t){TO.has(t)||(TO.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ln=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ln||{}),RG={destroy(){}};function pE(t,e){!e&&O6(pE);let n=e?.injector??E(xt);return dW(n)?(Ri("NgAfterNextRender"),TG(t,n,!0,e?.phase??ln.MixedReadWrite)):RG}function PG(t,e){if(t instanceof Function)switch(e){case ln.EarlyRead:return{earlyRead:t};case ln.Write:return{write:t};case ln.MixedReadWrite:return{mixedReadWrite:t};case ln.Read:return{read:t}}return t}function TG(t,e,n,r){let i=PG(t,r),o=e.get(fE),s=o.handler??=new tb,a=[],c=[],u=()=>{for(let f of c)s.unregister(f);l()},l=e.get(Hb).onDestroy(u),d=0,p=(f,g)=>{if(!g)return;let m=n?(...w)=>(d--,d<1&&u(),g(...w)):g,y=Rn(e,()=>new eb(f,a,m));s.register(y),c.push(y),d++};return p(ln.EarlyRead,i.earlyRead),p(ln.Write,i.write),p(ln.MixedReadWrite,i.mixedReadWrite),p(ln.Read,i.read),{destroy:u}}var eb=class{constructor(e,n,r){this.phase=e,this.pipelinedArgs=n,this.callbackFn=r,this.zone=E(_e),this.errorHandler=E(Ci,{optional:!0}),E(Xa,{optional:!0})?.notify(6)}invoke(){try{let e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}},tb=class{constructor(){this.executingCallbacks=!1,this.buckets={[ln.EarlyRead]:new Set,[ln.Write]:new Set,[ln.MixedReadWrite]:new Set,[ln.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},fE=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Tf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ew(i,a);else if(o==2){let c=a,u=e[++s];r=Ew(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Af=class extends fo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=co(e);return new ec(n,this.ngModule)}};function AO(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:ao.None;e?n.push({propName:s,templateName:r,isSignal:(a&ao.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function AG(t){let e=t.toLowerCase();return e==="svg"?L6:e==="math"?j6:null}var ec=class extends Pf{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=AO(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return AO(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=v6(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=ce(null);try{i=i||this.ngModule;let s=i instanceof en?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new kw(e,s):e,c=a.get(ho,null);if(c===null)throw new F(407,!1);let u=a.get(_G,null),l=a.get(fE,null),d=a.get(Xa,null),p={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=r?kW(f,r,this.componentDef.encapsulation,a):mN(f,g,AG(g)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let w=null;m!==null&&(w=Jb(m,a,!0));let b=oE(0,null,null,1,0,null,null,null,null,null,null),C=rh(null,b,null,y,null,null,p,f,a,null,w);Bb(C);let _,U;try{let O=this.componentDef,de,ae=null;O.findHostDirectiveDefs?(de=[],ae=new Map,O.findHostDirectiveDefs(O,de,ae),de.push(O)):de=[O];let De=MG(C,m),Je=OG(De,m,O,de,C,p,f);U=Nb(b,tn),m&&kG(f,O,m,r),n!==void 0&&FG(U,this.ngContentSelectors,n),_=NG(Je,O,de,ae,C,[LG]),uE(b,C,null)}finally{Vb()}return new nb(this.componentType,_,sc(U,C),C,U)}finally{ce(o)}}},nb=class extends Yw{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ys(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;cE(o[G],o,i,e,n),this.previousInputValues.set(e,n);let s=vo(this._tNode.index,o);lE(s,1)}}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function MG(t,e){let n=t[G],r=tn;return t[r]=e,ac(n,r,2,"#host",null)}function OG(t,e,n,r,i,o,s){let a=i[G];xG(r,t,e,s);let c=null;e!==null&&(c=Jb(e,i[Ja]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=rh(i,ON(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&Jw(a,t,r.length-1),ih(i,d),i[t.index]=d}function xG(t,e,n,r){for(let i of t)e.mergedAttrs=Qu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Tf(e,e.mergedAttrs,!0),n!==null&&_N(r,n,e))}function NG(t,e,n,r,i,o){let s=Nt(),a=i[G],c=Hn(s,i);xN(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,p=ms(i,a,d,s);po(p,i)}NN(a,i,s),c&&po(c,i);let u=ms(i,a,s.directiveStart+s.componentOffset,s);if(t[At]=i[At]=u,o!==null)for(let l of o)l(u,e);return nE(a,s,i),u}function kG(t,e,n,r){if(r)Rw(t,n,["ng-version","18.1.3"]);else{let{attrs:i,classes:o}=m6(e.selectors[0]);i&&Rw(t,n,i),o&&o.length>0&&DN(t,n,o.join(" "))}}function FG(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function LG(){let t=Nt();Zf(X()[G],t)}var yr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jG;let t=e;return t})();function jG(){let t=Nt();return QN(t,X())}var qG=yr,JN=class extends qG{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return sc(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){let e=zb(this._hostTNode,this._hostLView);if(zx(e)){let n=bf(e,this._hostLView),r=wf(e),i=n[G].data[r+8];return new ds(i,n)}else return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=MO(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Mt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ya(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Za(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!x6(e),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?e:new ec(co(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(s?u:this.parentInjector).get(en,null);m&&(o=m)}let l=co(c.componentType??{}),d=Ya(this._lContainer,l?.id??null),p=d?.firstChild??null,f=c.create(u,i,p,o);return this.insertImpl(f.hostView,a,Za(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(V6(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ot],u=new JN(c,c[fn],c[Ot]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ll(s,i,o,r),e.attachToViewContainerRef(),YO(vw(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=MO(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=el(this._lContainer,n);r&&(vf(vw(this._lContainer),n),eh(r[G],r))}detach(e){let n=this._adjustIndex(e,-1),r=el(this._lContainer,n);return r&&vf(vw(this._lContainer),n)!=null?new ys(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function MO(t){return t[Cf]}function vw(t){return t[Cf]||(t[Cf]=[])}function QN(t,e){let n,r=e[t.index];return Ei(r)?n=r:(n=kN(r,e,null,t),e[t.index]=n,ih(e,n)),VG(n,e,t,r),new JN(n,t,e)}function BG(t,e){let n=t[qe],r=n.createComment(""),i=Hn(e,t),o=eE(n,i);return _f(n,o,r,IW(n,i),!1),r}var VG=HG,zG=()=>!1;function UG(t,e,n){return zG(t,e,n)}function HG(t,e,n,r){if(t[fs])return;let i;n.type&8?i=zr(r):i=BG(e,n),t[fs]=i}var rb=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},ib=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)hE(e,n).matches!==null&&this.queries[n].setDirty()}},ob=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=YG(e):this.predicate=e}},sb=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ab=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,$G(n,o)),this.matchTNodeWithReadOption(e,n,pf(n,e,o,!1,!1))}else r===wi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,pf(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===pt||i===yr||i===wi&&n.type&4)this.addMatch(n.index,-2);else{let o=pf(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function $G(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function WG(t,e){return t.type&11?sc(t,e):t.type&4?oh(t,e):null}function GG(t,e,n,r){return n===-1?WG(e,t):n===-2?KG(t,e,r):ms(t,t[G],n,e)}function KG(t,e,n){if(n===pt)return sc(e,t);if(n===wi)return oh(e,t);if(n===yr)return QN(e,t)}function ZN(t,e,n,r){let i=e[yi].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=o[u];a.push(GG(e,l,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function cb(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=ZN(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],l=e[-c];for(let d=Mt;d<l.length;d++){let p=l[d];p[ps]===p[Ot]&&cb(p[G],p,u,r)}if(l[Qa]!==null){let d=l[Qa];for(let p=0;p<d.length;p++){let f=d[p];cb(f[G],f,u,r)}}}}}return r}function JG(t,e){return t[yi].queries[e].queryList}function QG(t,e,n){let r=new Uw((n&4)===4);return jW(t,e,r,r.destroy),(e[yi]??=new ib).queries.push(new rb(r))-1}function ZG(t,e,n){let r=We();return r.firstCreatePass&&(XG(r,new ob(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),QG(r,X(),e)}function YG(t){return t.split(",").map(e=>e.trim())}function XG(t,e,n){t.queries===null&&(t.queries=new sb),t.queries.track(new ab(e,n))}function hE(t,e){return t.queries.getByIndex(e)}function e5(t,e){let n=t[G],r=hE(n,e);return r.crossesNgTemplate?cb(n,t,e,[]):ZN(n,t,r,e)}function t5(t){return typeof t=="function"&&t[fi]!==void 0}function dl(t,e){Ri("NgSignals");let n=EM(t),r=n[fi];return e?.equal&&(r.equal=e.equal),n.set=i=>VS(r,i),n.update=i=>IM(r,i),n.asReadonly=n5.bind(n),n}function n5(){let t=this[fi];if(t.readonlyFn===void 0){let e=()=>this();e[fi]=t,t.readonlyFn=e}return t.readonlyFn}function YN(t){return t5(t)&&typeof t.set=="function"}function r5(t){return Object.getPrototypeOf(t.prototype).constructor}function Pi(t){let e=r5(t.type),n=!0,r=[t];for(;e;){let i;if(uo(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=af(t.inputs),s.inputTransforms=af(t.inputTransforms),s.declaredInputs=af(t.declaredInputs),s.outputs=af(t.outputs);let a=i.hostBindings;a&&c5(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&s5(t,c),u&&a5(t,u),i5(t,i),k8(t.outputs,i.outputs),uo(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Pi&&(n=!1)}}e=Object.getPrototypeOf(e)}o5(r)}function i5(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function o5(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qu(i.hostAttrs,n=Qu(n,i.hostAttrs))}}function af(t){return t===$a?{}:t===un?[]:t}function s5(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function a5(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function c5(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function gE(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var go=class{},tl=class{};var ub=class extends go{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Af(this);let i=cx(e);this._bootstrapComponents=vN(i.bootstrap),this._r3Injector=Zx(e,n,[{provide:go,useValue:this},{provide:fo,useValue:this.componentFactoryResolver},...r],Xt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lb=class extends tl{constructor(e){super(),this.moduleType=e}create(e){return new ub(this.moduleType,e,[])}};var Mf=class extends go{constructor(e){super(),this.componentFactoryResolver=new Af(this),this.instance=null;let n=new Zu([...e.providers,{provide:go,useValue:this},{provide:fo,useValue:this.componentFactoryResolver}],e.parent||Ob(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sh(t,e,n=null){return new Mf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function XN(t){return l5(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function u5(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function l5(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function vE(t,e,n){return t[e]=n}function Un(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function e1(t,e,n,r){let i=Un(t,e,n);return Un(t,e+1,r)||i}function d5(t,e,n,r,i){let o=e1(t,e,n,r);return Un(t,e+2,i)||o}function p5(t){return(t.flags&32)===32}function f5(t,e,n,r,i,o,s,a,c){let u=e.consts,l=ac(e,t,4,s||null,a||null);aE(e,n,l,lo(u,c)),Zf(e,l);let d=l.tView=oE(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Of(t,e,n,r,i,o,s,a,c,u){let l=n+tn,d=e.firstCreatePass?f5(l,e,t,r,i,o,s,a,c):e.data[l];ws(d,!1);let p=h5(e,t,d,n);Jf()&&th(e,t,p,d),po(p,t);let f=kN(p,t,p,d);return t[l]=f,ih(t,f),UG(f,d,t),Wf(d)&&rE(e,t,d),c!=null&&iE(t,d,u),d}function ah(t,e,n,r,i,o,s,a){let c=X(),u=We(),l=lo(u.consts,o);return Of(c,u,t,e,n,r,i,l,s,a),ah}var h5=g5;function g5(t,e,n,r){return Qf(!0),e[qe].createComment("")}function cc(t,e,n,r){let i=X(),o=oc();if(Un(i,o,e)){let s=We(),a=Kf();XW(a,i,t,e,n,r)}return cc}function t1(t,e,n,r){return Un(t,oc(),n)?e+il(n)+r:mr}function cf(t,e){return t<<17|e<<2}function Cs(t){return t>>17&32767}function v5(t){return(t&2)==2}function m5(t,e){return t&131071|e<<17}function db(t){return t|2}function tc(t){return(t&131068)>>2}function mw(t,e){return t&-131069|e<<2}function y5(t){return(t&1)===1}function pb(t){return t|1}function C5(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Cs(s),c=tc(s);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||ol(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let p=Cs(t[a+1]);t[r+1]=cf(p,a),p!==0&&(t[p+1]=mw(t[p+1],r)),t[a+1]=m5(t[a+1],r)}else t[r+1]=cf(a,0),a!==0&&(t[a+1]=mw(t[a+1],r)),a=r;else t[r+1]=cf(c,0),a===0?a=r:t[c+1]=mw(t[c+1],r),c=r;u&&(t[r+1]=db(t[r+1])),OO(t,l,r,!0),OO(t,l,r,!1),S5(e,l,t,r,o),s=cf(a,c),o?e.classBindings=s:e.styleBindings=s}function S5(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ol(o,e)>=0&&(n[r+1]=pb(n[r+1]))}function OO(t,e,n,r){let i=t[n+1],o=e===null,s=r?Cs(i):tc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];w5(c,e)&&(a=!0,t[s+1]=r?pb(u):db(u)),s=r?Cs(u):tc(u)}a&&(t[n+1]=r?db(i):pb(i))}function w5(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ol(t,e)>=0:!1}var st={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function n1(t){return t.substring(st.key,st.keyEnd)}function b5(t){return t.substring(st.value,st.valueEnd)}function E5(t){return o1(t),r1(t,nc(t,0,st.textEnd))}function r1(t,e){let n=st.textEnd;return n===e?-1:(e=st.keyEnd=D5(t,st.key=e,n),nc(t,e,n))}function I5(t){return o1(t),i1(t,nc(t,0,st.textEnd))}function i1(t,e){let n=st.textEnd,r=st.key=nc(t,e,n);return n===r?-1:(r=st.keyEnd=_5(t,r,n),r=xO(t,r,n,58),r=st.value=nc(t,r,n),r=st.valueEnd=R5(t,r,n),xO(t,r,n,59))}function o1(t){st.key=0,st.keyEnd=0,st.value=0,st.valueEnd=0,st.textEnd=t.length}function nc(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function D5(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function _5(t,e,n){let r;for(;e<n&&((r=t.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function xO(t,e,n,r){return e=nc(t,e,n),e<n&&e++,e}function R5(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){let c=t.charCodeAt(s++);if(c===59)return a;c===34||c===39?a=s=NO(t,c,s,n):e===s-4&&o===85&&i===82&&r===76&&c===40?a=s=NO(t,41,s,n):c>32&&(a=s),o=i,i=r,r=c&-33}return a}function NO(t,e,n,r){let i=-1,o=n;for(;o<r;){let s=t.charCodeAt(o++);if(s==e&&i!==92)return o;s==92&&i===92?i=0:i=s}throw new Error}function Wn(t,e,n){let r=X(),i=oc();if(Un(r,i,e)){let o=We(),s=Kf();sE(o,s,r,t,e,r[qe],n,!1)}return Wn}function fb(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";cE(t,n,o[s],s,r)}function ch(t,e){return A5(t,e,null,!0),ch}function xve(t){s1(u1,P5,t,!1)}function P5(t,e){for(let n=I5(e);n>=0;n=i1(e,n))u1(t,n1(e),b5(e))}function uc(t){s1(F5,T5,t,!0)}function T5(t,e){for(let n=E5(e);n>=0;n=r1(e,n))zf(t,n1(e),!0)}function A5(t,e,n,r){let i=X(),o=We(),s=xx(2);if(o.firstUpdatePass&&c1(o,t,s,r),e!==mr&&Un(i,s,e)){let a=o.data[mo()];l1(o,a,i,i[qe],t,i[s+1]=j5(e,n),r,s)}}function s1(t,e,n,r){let i=We(),o=xx(2);i.firstUpdatePass&&c1(i,null,o,r);let s=X();if(n!==mr&&Un(s,o,n)){let a=i.data[mo()];if(d1(a,r)&&!a1(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Ew(c,n||"")),fb(i,a,s,n,r)}else L5(i,a,s,s[qe],s[o+1],s[o+1]=k5(t,e,n),r,o)}}function a1(t,e){return e>=t.expandoStartIndex}function c1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[mo()],s=a1(t,n);d1(o,r)&&e===null&&!s&&(e=!1),e=M5(i,o,e,r),C5(i,o,e,n,s,r)}}function M5(t,e,n,r){let i=t4(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=yw(null,t,e,n,r),n=nl(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=yw(i,t,e,n,r),o===null){let c=O5(t,e,r);c!==void 0&&Array.isArray(c)&&(c=yw(null,t,e,c[1],r),c=nl(c,e.attrs,r),x5(t,e,r,c))}else o=N5(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function O5(t,e,n){let r=n?e.classBindings:e.styleBindings;if(tc(r)!==0)return t[Cs(r)]}function x5(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Cs(i)]=r}function N5(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=nl(r,s,n)}return nl(r,e.attrs,n)}function yw(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=nl(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function nl(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),zf(t,s,n?!0:e[++o]))}return t===void 0?null:t}function k5(t,e,n){if(n==null||n==="")return un;let r=[],i=yo(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function u1(t,e,n){zf(t,e,yo(n))}function F5(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&zf(t,r,n)}function L5(t,e,n,r,i,o,s,a){i===mr&&(i=un);let c=0,u=0,l=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;l!==null||d!==null;){let p=c<i.length?i[c+1]:void 0,f=u<o.length?o[u+1]:void 0,g=null,m;l===d?(c+=2,u+=2,p!==f&&(g=d,m=f)):d===null||l!==null&&l<d?(c+=2,g=l):(u+=2,g=d,m=f),g!==null&&l1(t,e,n,r,g,m,s,a),l=c<i.length?i[c]:null,d=u<o.length?o[u]:null}}function l1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=y5(u)?kO(c,e,n,i,tc(u),s):void 0;if(!xf(l)){xf(o)||v5(u)&&(o=kO(c,null,n,i,a,s));let d=bx(mo(),n);AW(r,s,d,i,o)}}function kO(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,p=n[i+1];p===mr&&(p=d?un:void 0);let f=d?cw(p,r):l===r?p:void 0;if(u&&!xf(f)&&(f=cw(c,r)),xf(f)&&(a=f,s))return a;let g=t[i+1];i=s?Cs(g):tc(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=cw(c,r))}return a}function xf(t){return t!==void 0}function j5(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Xt(yo(t)))),t}function d1(t,e){return(t.flags&(e?8:16))!==0}var hb=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Cw(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function q5(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=t.at(o),l=e[o],d=Cw(o,u,o,l,n);if(d!==0){d<0&&t.updateValue(o,l),o++;continue}let p=t.at(s),f=e[c],g=Cw(s,p,c,f,n);if(g!==0){g<0&&t.updateValue(s,f),s--,c--;continue}let m=n(o,u),y=n(s,p),w=n(o,l);if(Object.is(w,y)){let b=n(c,f);Object.is(b,m)?(t.swap(o,s),t.updateValue(s,f),c--,s--):t.move(s,o),t.updateValue(o,l),o++;continue}if(r??=new Nf,i??=LO(t,o,s,n),gb(t,r,o,w))t.updateValue(o,l),o++,s++;else if(i.has(w))r.set(m,t.detach(o)),s--;else{let b=t.create(o,e[o]);t.attach(o,b),o++,s++}}for(;o<=c;)FO(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let l=t.at(o),d=u.value,p=Cw(o,l,o,d,n);if(p!==0)p<0&&t.updateValue(o,d),o++,u=c.next();else{r??=new Nf,i??=LO(t,o,s,n);let f=n(o,d);if(gb(t,r,o,f))t.updateValue(o,d),o++,s++,u=c.next();else if(!i.has(f))t.attach(o,t.create(o,d)),o++,s++,u=c.next();else{let g=n(o,l);r.set(g,t.detach(o)),s--}}}for(;!u.done;)FO(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function gb(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function FO(t,e,n,r,i){if(gb(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function LO(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Nf=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Nve(t,e){Ri("NgControlFlow");let n=X(),r=oc(),i=n[r]!==mr?n[r]:-1,o=i!==-1?kf(n,tn+i):void 0,s=0;if(Un(n,r,t)){let a=ce(null);try{if(o!==void 0&&VN(o,s),t!==-1){let c=tn+t,u=kf(n,c),l=Cb(n[G],c),d=Ya(u,l.tView.ssrId),p=ul(n,l,e,{dehydratedView:d});ll(u,p,s,Za(l,d))}}finally{ce(a)}}else if(o!==void 0){let a=BN(o,s);a!==void 0&&(a[At]=e)}}var vb=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Mt}};function kve(t,e){return e}var mb=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Fve(t,e,n,r,i,o,s,a,c,u,l,d,p){Ri("NgControlFlow");let f=X(),g=We(),m=c!==void 0,y=X(),w=a?s.bind(y[_n][At]):s,b=new mb(m,w);y[tn+t]=b,Of(f,g,t+1,e,n,r,i,lo(g.consts,o)),m&&Of(f,g,t+2,c,u,l,d,lo(g.consts,p))}var yb=class extends hb{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Mt}at(e){return this.getLView(e)[At].$implicit}attach(e,n){let r=n[Ka];this.needsIndexUpdate||=e!==this.length,ll(this.lContainer,n,e,Za(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,B5(this.lContainer,e)}create(e,n){let r=Ya(this.lContainer,this.templateTNode.tView.ssrId),i=ul(this.hostLView,this.templateTNode,new vb(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){eh(e[G],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[At].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[At].$index=e}getLView(e){return V5(this.lContainer,e)}};function Lve(t){let e=ce(null),n=mo();try{let r=X(),i=r[G],o=r[n],s=n+1,a=kf(r,s);if(o.liveCollection===void 0){let u=Cb(i,s);o.liveCollection=new yb(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(q5(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=oc(),l=c.length===0;if(Un(r,u,l)){let d=n+2,p=kf(r,d);if(l){let f=Cb(i,d),g=Ya(p,f.tView.ssrId),m=ul(r,f,void 0,{dehydratedView:g});ll(p,m,0,Za(f,g))}else VN(p,0)}}}finally{ce(e)}}function kf(t,e){return t[e]}function B5(t,e){return el(t,e)}function V5(t,e){return BN(t,e)}function Cb(t,e){return Nb(t,e)}function z5(t,e,n,r,i,o){let s=e.consts,a=lo(s,i),c=ac(e,t,2,r,a);return aE(e,n,c,lo(s,o)),c.attrs!==null&&Tf(c,c.attrs,!1),c.mergedAttrs!==null&&Tf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function kt(t,e,n,r){let i=X(),o=We(),s=tn+t,a=i[qe],c=o.firstCreatePass?z5(s,o,i,e,n,r):o.data[s],u=U5(o,i,c,a,e,t);i[s]=u;let l=Wf(c);return ws(c,!0),_N(a,u,c),!p5(c)&&Jf()&&th(o,i,u,c),H6()===0&&po(u,i),$6(),l&&(rE(o,i,c),nE(o,c,i)),r!==null&&iE(i,c),kt}function hn(){let t=Nt();Fb()?Lb():(t=t.parent,ws(t,!1));let e=t;G6(e)&&K6(),W6();let n=We();return n.firstCreatePass&&(Zf(n,t),xb(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&c4(e)&&fb(n,e,X(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&u4(e)&&fb(n,e,X(),e.stylesWithoutHost,!1),hn}function $r(t,e,n,r){return kt(t,e,n,r),hn(),$r}var U5=(t,e,n,r,i,o)=>(Qf(!0),mN(r,i,i4()));function H5(t,e,n,r,i){let o=e.consts,s=lo(o,r),a=ac(e,t,8,"ng-container",s);s!==null&&Tf(a,s,!0);let c=lo(o,i);return aE(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function p1(t,e,n){let r=X(),i=We(),o=t+tn,s=i.firstCreatePass?H5(o,i,r,e,n):i.data[o];ws(s,!0);let a=W5(i,r,s,t);return r[o]=a,Jf()&&th(i,r,a,s),po(a,r),Wf(s)&&(rE(i,r,s),nE(i,s,r)),n!=null&&iE(r,s),p1}function f1(){let t=Nt(),e=We();return Fb()?Lb():(t=t.parent,ws(t,!1)),e.firstCreatePass&&(Zf(e,t),xb(t)&&e.queries.elementEnd(t)),f1}function $5(t,e,n){return p1(t,e,n),f1(),$5}var W5=(t,e,n,r)=>(Qf(!0),gW(e[qe],""));function h1(){return X()}var Ff="en-US";var G5=Ff;function K5(t){typeof t=="string"&&(G5=t.toLowerCase().replace(/_/g,"-"))}var J5=(t,e,n)=>{};function Pn(t,e,n,r){let i=X(),o=We(),s=Nt();return g1(o,i,i[qe],s,t,e,r),Pn}function Q5(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[yf],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function g1(t,e,n,r,i,o,s){let a=Wf(r),u=t.firstCreatePass&&jN(t),l=e[At],d=LN(e),p=!0;if(r.type&3||s){let m=Hn(r,e),y=s?s(m):m,w=d.length,b=s?_=>s(zr(_[r.index])):r.index,C=null;if(!s&&a&&(C=Q5(t,e,i,r.index)),C!==null){let _=C.__ngLastListenerFn__||C;_.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,p=!1}else{o=qO(r,e,l,o),J5(m,i,o);let _=n.listen(y,i,o);d.push(o,_),u&&u.push(i,b,w,w+1)}}else o=qO(r,e,l,o);let f=r.outputs,g;if(p&&f!==null&&(g=f[i])){let m=g.length;if(m)for(let y=0;y<m;y+=2){let w=g[y],b=g[y+1],U=e[w][b].subscribe(o),O=d.length;d.push(o,U),u&&u.push(i,r.index,O,-(O+1))}}}function jO(t,e,n,r){let i=ce(null);try{return jr(6,e,n),n(r)!==!1}catch(o){return qN(t,o),!1}finally{jr(7,e,n),ce(i)}}function qO(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?vo(t.index,e):e;lE(s,5);let a=jO(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=jO(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function mE(t=1){return r4(t)}function Z5(t,e){let n=null,r=d6(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?ix(t,o,!0):h6(r,o))return i}return n}function uh(t){let e=X()[_n][fn];if(!e.projection){let n=t?t.length:1,r=e.projection=n6(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?Z5(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function lh(t,e=0,n,r,i,o){let s=X(),a=We(),c=r?t+1:null;c!==null&&Of(s,a,c,r,i,o,null,n);let u=ac(a,tn+t,16,null,n||null);u.projection===null&&(u.projection=e),Lb();let d=!s[Ka]||Px();s[_n][fn].projection[u.projection]===null&&c!==null?Y5(s,a,c):d&&(u.flags&32)!==32&&PW(a,s,u)}function Y5(t,e,n){let r=tn+n,i=e.data[r],o=t[r],s=Ya(o,i.tView.ssrId),a=ul(t,i,void 0,{dehydratedView:s});ll(o,a,0,Za(i,s))}function X5(t,e,n){return v1(t,"",e,"",n),X5}function v1(t,e,n,r,i){let o=X(),s=t1(o,e,n,r);if(s!==mr){let a=We(),c=Kf();sE(a,c,o,t,s,o[qe],i,!1)}return v1}function jve(t,e,n){ZG(t,e,n)}function e9(t){let e=X(),n=We(),r=Nx();qb(r+1);let i=hE(n,r);if(t.dirty&&B6(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=e5(e,r);t.reset(o,T4),t.notifyOnChanges()}return!0}return!1}function t9(){return JG(X(),Nx())}function qve(t){let e=Q6();return q6(e,tn+t)}function Es(t,e=""){let n=X(),r=We(),i=t+tn,o=r.firstCreatePass?ac(r,i,1,e,null):r.data[i],s=n9(r,n,o,e,t);n[i]=s,Jf()&&th(r,n,s,o),ws(o,!1)}var n9=(t,e,n,r,i)=>(Qf(!0),fW(e[qe],r));function r9(t){return m1("",t,""),r9}function m1(t,e,n){let r=X(),i=t1(r,t,e,n);return i!==mr&&rG(r,mo(),i),m1}function i9(t,e,n){YN(e)&&(e=e());let r=X(),i=oc();if(Un(r,i,e)){let o=We(),s=Kf();sE(o,s,r,t,e,r[qe],n,!1)}return i9}function Bve(t,e){let n=YN(t);return n&&t.set(e),n}function o9(t,e){let n=X(),r=We(),i=Nt();return g1(r,n,n[qe],i,t,e),o9}function s9(t,e,n){let r=We();if(r.firstCreatePass){let i=uo(t);Sb(n,r.data,r.blueprint,i,!0),Sb(e,r.data,r.blueprint,i,!1)}}function Sb(t,e,n,r,i){if(t=Yt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Sb(t[o],e,n,r,i);else{let o=We(),s=X(),a=Nt(),c=Ga(t)?t:Yt(t.provide),u=hx(t),l=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(Ga(t)||!t.multi){let f=new vs(u,i,V),g=ww(c,e,i?l:l+p,d);g===-1?(Lw(Ef(a,s),o,c),Sw(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[g]=f,s[g]=f)}else{let f=ww(c,e,l+p,d),g=ww(c,e,l,l+p),m=f>=0&&n[f],y=g>=0&&n[g];if(i&&!y||!i&&!m){Lw(Ef(a,s),o,c);let w=u9(i?c9:a9,n.length,i,r,u);!i&&y&&(n[g].providerFactory=w),Sw(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),s.push(w)}else{let w=y1(n[i?g:f],u,!i&&r);Sw(o,t,f>-1?f:g,w)}!i&&r&&y&&n[g].componentProviders++}}}function Sw(t,e,n,r){let i=Ga(e),o=D6(e);if(i||o){let c=(o?Yt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function y1(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ww(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function a9(t,e,n,r){return wb(this.multi,[])}function c9(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ms(n,n[G],this.providerFactory.index,r);o=a.slice(0,s),wb(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],wb(i,o);return o}function wb(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function u9(t,e,n,r,i){let o=new vs(t,n,V);return o.multi=[],o.index=e,o.componentProviders=0,y1(o,i,r&&!n),o}function pl(t,e=[]){return n=>{n.providersResolver=(r,i)=>s9(r,i?i(t):t,e)}}var l9=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=dx(!1,r.type),o=i.length>0?sh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(x(en))});let t=e;return t})();function lc(t){Ri("NgStandalone"),t.getStandaloneInjector=e=>e.get(l9).getOrCreateStandaloneInjector(t)}function dc(t,e,n,r){return d9(X(),jb(),t,e,n,r)}function Vve(t,e,n,r,i){return p9(X(),jb(),t,e,n,r,i)}function zve(t,e,n,r,i,o){return f9(X(),jb(),t,e,n,r,i,o)}function yE(t,e){let n=t[e];return n===mr?void 0:n}function d9(t,e,n,r,i,o){let s=e+n;return Un(t,s,i)?vE(t,s+1,o?r.call(o,i):r(i)):yE(t,s+1)}function p9(t,e,n,r,i,o,s){let a=e+n;return e1(t,a,i,o)?vE(t,a+2,s?r.call(s,i,o):r(i,o)):yE(t,a+2)}function f9(t,e,n,r,i,o,s,a){let c=e+n;return d5(t,c,i,o,s)?vE(t,c+3,a?r.call(a,i,o,s):r(i,o,s)):yE(t,c+3)}function Uve(t,e){return oh(t,e)}var dh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var C1=new N("");function Is(t){return!!t&&typeof t.then=="function"}function S1(t){return!!t&&typeof t.subscribe=="function"}var ph=new N(""),w1=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=E(ph,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Is(s))r.push(s);else if(S1(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fl=new N("");function h9(){bM(()=>{throw new F(600,!1)})}function g9(t){return t.isBoundToModule}var v9=10;function m9(t,e,n){try{let r=n();return Is(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ti=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(R4),this.afterRenderEffectManager=E(fE),this.zonelessEnabled=E(dE),this.externalTestViews=new Set,this.beforeRender=new Ye,this.afterTick=new Ye,this.componentTypes=[],this.components=[],this.isStable=E(Di).hasPendingTasks.pipe(J(r=>!r)),this._injector=E(en)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Pf;if(!this._injector.get(w1).done){let f=!o&&ax(r),g=!1;throw new F(405,g)}let a;o?a=r:a=this._injector.get(fo).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=g9(a)?void 0:this._injector.get(go),u=i||a.selector,l=a.create(xt.NULL,[],u,c),d=l.location.nativeElement,p=l.injector.get(C1,null);return p?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),bw(this.components,l),p?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new F(101,!1);let i=ce(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,ce(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(ho,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<v9;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)y9(c,u,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Xu(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>Xu(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;bw(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(fl,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>bw(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new F(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bw(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function y9(t,e,n,r){if(!n&&!Xu(t))return;HN(t,e,n&&!r?0:1)}var bb=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},fh=(()=>{let e=class e{compileModuleSync(r){return new lb(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=cx(r),s=vN(o.declarations).reduce((a,c)=>{let u=co(c);return u&&a.push(new ec(u)),a},[]);return new bb(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var C9=(()=>{let e=class e{constructor(){this.zone=E(_e),this.changeDetectionScheduler=E(Xa),this.applicationRef=E(Ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),S9=new N("",{factory:()=>!1});function b1({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new _e(E1()),[{provide:_e,useFactory:t},{provide:Wa,multi:!0,useFactory:()=>{let n=E(C9,{optional:!0});return()=>n.initialize()}},{provide:Wa,multi:!0,useFactory:()=>{let n=E(w9);return()=>{n.initialize()}}},e===!0?{provide:KN,useValue:!0}:[]]}function Hve(t){let e=t?.ignoreChangesOutsideZone,n=b1({ngZoneFactory:()=>{let r=E1(t);return r.shouldCoalesceEventChangeDetection&&Ri("NgZone_CoalesceEvent"),new _e(r)},ignoreChangesOutsideZone:e});return rc([{provide:S9,useValue:!0},{provide:dE,useValue:!1},n])}function E1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var w9=(()=>{let e=class e{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=E(_e),this.pendingTasks=E(Di)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var b9=(()=>{let e=class e{constructor(){this.appRef=E(Ti),this.taskService=E(Di),this.ngZone=E(_e),this.zonelessEnabled=E(dE),this.disableScheduling=E(KN,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new xe,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof zw||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?gO:Yx;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&_e.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gO(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function E9(){return typeof $localize<"u"&&$localize.locale||Ff}var CE=new N("",{providedIn:"root",factory:()=>E(CE,te.Optional|te.SkipSelf)||E9()});var I1=new N("");var ff=null;function I9(t=[],e){return xt.create({name:e,providers:[{provide:Uf,useValue:"platform"},{provide:I1,useValue:new Set([()=>ff=null])},...t]})}function D9(t=[]){if(ff)return ff;let e=I9(t);return ff=e,h9(),_9(e),e}function _9(t){t.get(Gb,null)?.forEach(n=>n())}function D1(){return!1}var Ai=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=R9;let t=e;return t})();function R9(t){return P9(Nt(),X(),(t&16)===16)}function P9(t,e,n){if($f(t)&&!n){let r=vo(t.index,e);return new ys(r,r)}else if(t.type&175){let r=e[_n];return new ys(r,e)}return null}var Eb=class{constructor(){}supports(e){return XN(e)}create(e){return new Ib(e)}},T9=(t,e)=>e,Ib=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||T9}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<BO(r,i,o)?n:r,a=BO(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let p=0;p<u;p++){let f=p<o.length?o[p]:o[p]=0,g=f+p;l<=g&&g<u&&(o[p]=f+1)}let d=s.previousIndex;o[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!XN(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,u5(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Db(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Lf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Db=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},_b=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Lf=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new _b,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function BO(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function VO(){return new SE([new Eb])}var SE=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||VO()),deps:[[e,new Pb,new Vf]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new F(901,!1)}};e.\u0275prov=P({token:e,providedIn:"root",factory:VO});let t=e;return t})();function _1(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=D9(r),o=[b1({}),{provide:Xa,useExisting:b9},...n||[]],a=new Mf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(_e);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Ci,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),p=i.get(I1);return p.add(d),a.onDestroy(()=>{l.unsubscribe(),p.delete(d)}),m9(u,c,()=>{let f=a.get(w1);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(CE,Ff);K5(g||Ff);let m=a.get(Ti);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}var R1=new N("");function Ds(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function hl(t,e){Ri("NgSignals");let n=CM(t);return e?.equal&&(n[fi].equal=e.equal),n}function Mi(t){let e=ce(null);try{return t()}finally{ce(e)}}function P1(t){let e=co(t);if(!e)return null;let n=new ec(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var N1=null;function xi(){return N1}function k1(t){N1??=t}var hh=class{};var at=new N(""),PE=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(M9),providedIn:"platform"});let t=e;return t})(),F1=new N(""),M9=(()=>{let e=class e extends PE{constructor(){super(),this._doc=E(at),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xi().getBaseHref(this._doc)}onPopState(r){let i=xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function TE(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function T1(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Oi(t){return t&&t[0]!=="?"?"?"+t:t}var Ni=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(AE),providedIn:"root"});let t=e;return t})(),L1=new N(""),AE=(()=>{let e=class e extends Ni{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??E(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return TE(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Oi(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Oi(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Oi(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(PE),x(L1,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),j1=(()=>{let e=class e extends Ni{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=TE(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Oi(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Oi(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(PE),x(L1,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),fc=(()=>{let e=class e{constructor(r){this._subject=new ne,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=N9(T1(A1(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Oi(i))}normalize(r){return e.stripTrailingSlash(x9(this._basePath,A1(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Oi(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Oi(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Oi,e.joinWithSlash=TE,e.stripTrailingSlash=T1,e.\u0275fac=function(i){return new(i||e)(x(Ni))},e.\u0275prov=P({token:e,factory:()=>O9(),providedIn:"root"});let t=e;return t})();function O9(){return new fc(x(Ni))}function x9(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function A1(t){return t.replace(/\/index.html$/,"")}function N9(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function gh(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var bE=/\s+/,M1=[],hc=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=M1,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(bE):M1}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(bE):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(bE).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(V(pt),V(Hr))},e.\u0275dir=Xe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var EE=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},vme=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new EE(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),O1(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);O1(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(V(yr),V(wi),V(SE))},e.\u0275dir=Xe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function O1(t,e){t.context.$implicit=e.item}var q1=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new IE,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){x1("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){x1("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(V(yr),V(wi))},e.\u0275dir=Xe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),IE=class{constructor(){this.$implicit=null,this.ngIf=null}};function x1(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Xt(e)}'.`)}var mme=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,o):!1,get:(r,i,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,o)}})}};e.\u0275fac=function(i){return new(i||e)(V(yr))},e.\u0275dir=Xe({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ii]});let t=e;return t})();var ki=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({});let t=e;return t})(),ME="browser",k9="server";function OE(t){return t===ME}function vh(t){return t===k9}var B1=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>OE(E($n))?new DE(E(at),window):new _E});let t=e;return t})(),DE=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=F9(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function F9(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var _E=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},pc=class{};var ml=class{},yh=class{},Gn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var NE=class{encodeKey(e){return V1(e)}encodeValue(e){return V1(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function L9(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var j9=/%(\d[a-f0-9])/gi,q9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function V1(t){return encodeURIComponent(t).replace(j9,(e,n)=>q9[n]??e)}function mh(t){return`${t}`}var So=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new NE,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=L9(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(mh):[mh(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(mh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(mh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var kE=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function B9(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function z1(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function U1(t){return typeof Blob<"u"&&t instanceof Blob}function H1(t){return typeof FormData<"u"&&t instanceof FormData}function V9(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var vl=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(B9(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Gn,this.context??=new kE,!this.params)this.params=new So,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||z1(this.body)||U1(this.body)||H1(this.body)||V9(this.body)?this.body:this.body instanceof So?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||H1(this.body)?null:U1(this.body)?this.body.type||null:z1(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof So?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,l=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,f)=>p.set(f,e.setHeaders[f]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((p,f)=>p.set(f,e.setParams[f]),l)),new t(n,r,s,{params:l,headers:u,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},wo=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(wo||{}),yl=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Gn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ch=class t extends yl{constructor(e={}){super(e),this.type=wo.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cl=class t extends yl{constructor(e={}){super(e),this.type=wo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Co=class extends yl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},J1=200,z9=204;function xE(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Sl=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof vl)s=r;else{let u;o.headers instanceof Gn?u=o.headers:u=new Gn(o.headers);let l;o.params&&(o.params instanceof So?l=o.params:l=new So({fromObject:o.params})),s=new vl(r,i,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=B(s).pipe(vi(u=>this.handler.handle(u)));if(r instanceof vl||o.observe==="events")return a;let c=a.pipe(Qt(u=>u instanceof Cl));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(J(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new So().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,xE(o,i))}post(r,i,o={}){return this.request("POST",r,xE(o,i))}put(r,i,o={}){return this.request("PUT",r,xE(o,i))}};e.\u0275fac=function(i){return new(i||e)(x(ml))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),U9=/^\)\]\}',?\n/,H9="X-Request-URL";function $1(t){if(t.url)return t.url;let e=H9.toLocaleLowerCase();return t.headers.get(e)}var $9=(()=>{let e=class e{constructor(){this.fetchImpl=E(FE,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=E(_e)}handle(r){return new se(i=>{let o=new AbortController;return this.doRequest(r,o.signal,i).then(LE,s=>i.error(new Co({error:s}))),()=>o.abort()})}doRequest(r,i,o){return v(this,null,function*(){let s=this.createRequestInit(r),a;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,D({signal:i},s)));W9(g),o.next({type:wo.Sent}),a=yield g}catch(g){o.error(new Co({error:g,status:g.status??0,statusText:g.statusText,url:r.urlWithParams,headers:g.headers}));return}let c=new Gn(a.headers),u=a.statusText,l=$1(a)??r.urlWithParams,d=a.status,p=null;if(r.reportProgress&&o.next(new Ch({headers:c,status:d,statusText:u,url:l})),a.body){let g=a.headers.get("content-length"),m=[],y=a.body.getReader(),w=0,b,C,_=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){let{done:O,value:de}=yield y.read();if(O)break;if(m.push(de),w+=de.length,r.reportProgress){C=r.responseType==="text"?(C??"")+(b??=new TextDecoder).decode(de,{stream:!0}):void 0;let ae=()=>o.next({type:wo.DownloadProgress,total:g?+g:void 0,loaded:w,partialText:C});_?_.run(ae):ae()}}}));let U=this.concatChunks(m,w);try{let O=a.headers.get("Content-Type")??"";p=this.parseBody(r,U,O)}catch(O){o.error(new Co({error:O,headers:new Gn(a.headers),status:a.status,statusText:a.statusText,url:$1(a)??r.urlWithParams}));return}}d===0&&(d=p?J1:0),d>=200&&d<300?(o.next(new Cl({body:p,headers:c,status:d,statusText:u,url:l})),o.complete()):o.error(new Co({error:p,headers:c,status:d,statusText:u,url:l}))})}parseBody(r,i,o){switch(r.responseType){case"json":let s=new TextDecoder().decode(i).replace(U9,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:o});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},o=r.withCredentials?"include":void 0;if(r.headers.forEach((s,a)=>i[s]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let s=r.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:o}}concatChunks(r,i){let o=new Uint8Array(i),s=0;for(let a of r)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),FE=class{};function LE(){}function W9(t){t.then(LE,LE)}function Q1(t,e){return e(t)}function G9(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function K9(t,e,n){return(r,i)=>Rn(n,()=>e(r,o=>t(o,i)))}var J9=new N(""),jE=new N(""),Q9=new N(""),Z1=new N("",{providedIn:"root",factory:()=>!0});function Z9(){let t=null;return(e,n)=>{t===null&&(t=(E(J9,{optional:!0})??[]).reduceRight(G9,Q1));let r=E(Di);if(E(Z1)){let o=r.add();return t(e,n).pipe(hr(()=>r.remove(o)))}else return t(e,n)}}var W1=(()=>{let e=class e extends ml{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=E(Di),this.contributeToStability=E(Z1)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(jE),...this.injector.get(Q9,[])]));this.chain=i.reduceRight((o,s)=>K9(o,s,this.injector),Q1)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(hr(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(x(yh),x(en))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();var Y9=/^\)\]\}',?\n/;function X9(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var G1=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new F(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Te(i.\u0275loadImpl()):B(null)).pipe(Zt(()=>new se(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((y,w)=>a.setRequestHeader(y,w.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let y=r.detectContentTypeHeader();y!==null&&a.setRequestHeader("Content-Type",y)}if(r.responseType){let y=r.responseType.toLowerCase();a.responseType=y!=="json"?y:"text"}let c=r.serializeBody(),u=null,l=()=>{if(u!==null)return u;let y=a.statusText||"OK",w=new Gn(a.getAllResponseHeaders()),b=X9(a)||r.url;return u=new Ch({headers:w,status:a.status,statusText:y,url:b}),u},d=()=>{let{headers:y,status:w,statusText:b,url:C}=l(),_=null;w!==z9&&(_=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=_?J1:0);let U=w>=200&&w<300;if(r.responseType==="json"&&typeof _=="string"){let O=_;_=_.replace(Y9,"");try{_=_!==""?JSON.parse(_):null}catch(de){_=O,U&&(U=!1,_={error:de,text:_})}}U?(s.next(new Cl({body:_,headers:y,status:w,statusText:b,url:C||void 0})),s.complete()):s.error(new Co({error:_,headers:y,status:w,statusText:b,url:C||void 0}))},p=y=>{let{url:w}=l(),b=new Co({error:y,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});s.error(b)},f=!1,g=y=>{f||(s.next(l()),f=!0);let w={type:wo.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),r.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),s.next(w)},m=y=>{let w={type:wo.UploadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),s.next(w)};return a.addEventListener("load",d),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),r.reportProgress&&(a.addEventListener("progress",g),c!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(c),s.next({type:wo.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",d),a.removeEventListener("timeout",p),r.reportProgress&&(a.removeEventListener("progress",g),c!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(x(pc))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Y1=new N(""),eK="XSRF-TOKEN",tK=new N("",{providedIn:"root",factory:()=>eK}),nK="X-XSRF-TOKEN",rK=new N("",{providedIn:"root",factory:()=>nK}),Sh=class{},iK=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=gh(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(x(at),x($n),x(tK))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function oK(t,e){let n=t.url.toLowerCase();if(!E(Y1)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=E(Sh).getToken(),i=E(rK);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var X1=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(X1||{});function sK(t,e){return{\u0275kind:t,\u0275providers:e}}function Mme(...t){let e=[Sl,G1,W1,{provide:ml,useExisting:W1},{provide:yh,useFactory:()=>E($9,{optional:!0})??E(G1)},{provide:jE,useValue:oK,multi:!0},{provide:Y1,useValue:!0},{provide:Sh,useClass:iK}];for(let n of t)e.push(...n.\u0275providers);return rc(e)}var K1=new N("");function Ome(){return sK(X1.LegacyInterceptors,[{provide:K1,useFactory:Z9},{provide:jE,useExisting:K1,multi:!0}])}var VE=class extends hh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},zE=class t extends VE{static makeCurrent(){k1(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=aK();return n==null?null:cK(n)}resetBaseElement(){wl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return gh(document.cookie,e)}},wl=null;function aK(){return wl=wl||document.querySelector("base"),wl?wl.getAttribute("href"):null}function cK(t){return new URL(t,document.baseURI).pathname}var uK=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),wh=new N(""),rk=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new F(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(x(wh),x(_e))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),bl=class{constructor(e){this._doc=e}},qE="ng-app-id",ik=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vh(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${qE}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(qE),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(qE,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(x(at),x(Wb),x(Kb,8),x($n))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),BE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},HE=/%COMP%/g,ok="%COMP%",lK=`_nghost-${ok}`,dK=`_ngcontent-${ok}`,pK=!0,fK=new N("",{providedIn:"root",factory:()=>pK});function hK(t){return dK.replace(HE,t)}function gK(t){return lK.replace(HE,t)}function sk(t,e){return e.map(n=>n.replace(HE,t))}var ek=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=vh(c),this.defaultRenderer=new El(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Br.ShadowDom&&(i=ee(D({},i),{encapsulation:Br.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof bh?o.applyToHost(r):o instanceof Il&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Br.Emulated:s=new bh(u,l,i,this.appId,d,a,c,p);break;case Br.ShadowDom:return new UE(u,l,r,i,a,c,this.nonce,p);default:s=new Il(u,l,i,d,a,c,p);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(x(rk),x(ik),x(Wb),x(fK),x(at),x($n),x(_e),x(Kb))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),El=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(BE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(tk(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(tk(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=BE[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=BE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Si.DashCase|Si.Important)?e.style.setProperty(n,r,i&Si.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Si.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=xi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function tk(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var UE=class extends El{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=sk(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Il=class extends El{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?sk(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},bh=class extends Il{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=hK(u),this.hostAttr=gK(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},vK=(()=>{let e=class e extends bl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),mK=(()=>{let e=class e extends bl{constructor(r){super(r),this.delegate=E(R1,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),nk=["alt","control","meta","shift"],yK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CK={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},SK=(()=>{let e=class e extends bl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xi().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),nk.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=yK[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),nk.forEach(a=>{if(a!==o){let c=CK[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function rye(t,e){return _1(D({rootComponent:t},wK(e)))}function wK(t){return{appProviders:[..._K,...t?.providers??[]],platformProviders:DK}}function bK(){zE.makeCurrent()}function EK(){return new Ci}function IK(){return oN(document),document}var DK=[{provide:$n,useValue:ME},{provide:Gb,useValue:bK,multi:!0},{provide:at,useFactory:IK,deps:[]}];var _K=[{provide:Uf,useValue:"root"},{provide:Ci,useFactory:EK,deps:[]},{provide:wh,useClass:vK,multi:!0,deps:[at,_e,$n]},{provide:wh,useClass:SK,multi:!0,deps:[at]},{provide:wh,useClass:mK,multi:!0},ek,ik,rk,{provide:ho,useExisting:ek},{provide:pc,useClass:uK,deps:[]},[]];var ak=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Y="primary",ql=Symbol("RouteTitle"),JE=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Sc(t){return new JE(t)}function PK(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function TK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Wr(t[n],e[n]))return!1;return!0}function Wr(t,e){let n=t?QE(t):void 0,r=e?QE(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!yk(t[i],e[i]))return!1;return!0}function QE(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function yk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Ck(t){return t.length>0?t[t.length-1]:null}function Io(t){return ew(t)?t:Is(t)?Te(Promise.resolve(t)):B(t)}var AK={exact:wk,subset:bk},Sk={exact:MK,subset:OK,ignored:()=>!0};function ck(t,e,n){return AK[n.paths](t.root,e.root,n.matrixParams)&&Sk[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function MK(t,e){return Wr(t,e)}function wk(t,e,n){if(!Rs(t.segments,e.segments)||!Dh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!wk(t.children[r],e.children[r],n))return!1;return!0}function OK(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>yk(t[n],e[n]))}function bk(t,e,n){return Ek(t,e,e.segments,n)}function Ek(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Rs(i,n)||e.hasChildren()||!Dh(i,n,r))}else if(t.segments.length===n.length){if(!Rs(t.segments,n)||!Dh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!bk(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Rs(t.segments,i)||!Dh(t.segments,i,r)||!t.children[Y]?!1:Ek(t.children[Y],e,o,r)}}function Dh(t,e,n){return e.every((r,i)=>Sk[n](t[i].parameters,r.parameters))}var Li=class{constructor(e=new be([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Sc(this.queryParams),this._queryParamMap}toString(){return kK.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _h(this)}},_s=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Sc(this.parameters),this._parameterMap}toString(){return Dk(this)}};function xK(t,e){return Rs(t,e)&&t.every((n,r)=>Wr(n.parameters,e[r].parameters))}function Rs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function NK(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Y&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Y&&(n=n.concat(e(i,r)))}),n}var Bl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new wc,providedIn:"root"});let t=e;return t})(),wc=class{parse(e){let n=new YE(e);return new Li(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Dl(e.root,!0)}`,r=jK(e.queryParams),i=typeof e.fragment=="string"?`#${FK(e.fragment)}`:"";return`${n}${r}${i}`}},kK=new wc;function _h(t){return t.segments.map(e=>Dk(e)).join("/")}function Dl(t,e){if(!t.hasChildren())return _h(t);if(e){let n=t.children[Y]?Dl(t.children[Y],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Y&&r.push(`${i}:${Dl(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=NK(t,(r,i)=>i===Y?[Dl(t.children[Y],!1)]:[`${i}:${Dl(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Y]!=null?`${_h(t)}/${n[0]}`:`${_h(t)}/(${n.join("//")})`}}function Ik(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eh(t){return Ik(t).replace(/%3B/gi,";")}function FK(t){return encodeURI(t)}function ZE(t){return Ik(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rh(t){return decodeURIComponent(t)}function uk(t){return Rh(t.replace(/\+/g,"%20"))}function Dk(t){return`${ZE(t.path)}${LK(t.parameters)}`}function LK(t){return Object.entries(t).map(([e,n])=>`;${ZE(e)}=${ZE(n)}`).join("")}function jK(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Eh(n)}=${Eh(i)}`).join("&"):`${Eh(n)}=${Eh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var qK=/^[^\/()?;#]+/;function $E(t){let e=t.match(qK);return e?e[0]:""}var BK=/^[^\/()?;=#]+/;function VK(t){let e=t.match(BK);return e?e[0]:""}var zK=/^[^=?&#]+/;function UK(t){let e=t.match(zK);return e?e[0]:""}var HK=/^[^&#]+/;function $K(t){let e=t.match(HK);return e?e[0]:""}var YE=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Y]=new be(e,n)),r}parseSegment(){let e=$E(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new _s(Rh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=VK(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=$E(this.remaining);i&&(r=i,this.capture(r))}e[Rh(n)]=Rh(r)}parseQueryParam(e){let n=UK(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=$K(this.remaining);s&&(r=s,this.capture(r))}let i=uk(n),o=uk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=$E(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Y);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Y]:new be([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function _k(t){return t.segments.length>0?new be([],{[Y]:t}):t}function Rk(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Rk(i);if(r===Y&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new be(t.segments,e);return WK(n)}function WK(t){if(t.numberOfChildren===1&&t.children[Y]){let e=t.children[Y];return new be(t.segments.concat(e.segments),e.children)}return t}function Ps(t){return t instanceof Li}function GK(t,e,n=null,r=null){let i=Pk(t);return Tk(i,e,n,r)}function Pk(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new be(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=_k(r);return e??i}function Tk(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return WE(i,i,i,n,r);let o=KK(e);if(o.toRoot())return WE(i,i,new be([],{}),n,r);let s=JK(o,i,t),a=s.processChildren?Pl(s.segmentGroup,s.index,o.commands):Mk(s.segmentGroup,s.index,o.commands);return WE(i,s.segmentGroup,a,n,r)}function Ph(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ml(t){return typeof t=="object"&&t!=null&&t.outlets}function WE(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=Ak(t,e,n);let a=_k(Rk(s));return new Li(a,o,i)}function Ak(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Ak(o,e,n)}),new be(t.segments,r)}var Th=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ph(r[0]))throw new F(4003,!1);let i=r.find(Ml);if(i&&i!==Ck(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function KK(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Th(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Th(n,e,r)}var mc=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function JK(t,e,n){if(t.isAbsolute)return new mc(e,!0,0);if(!n)return new mc(e,!1,NaN);if(n.parent===null)return new mc(n,!0,0);let r=Ph(t.commands[0])?0:1,i=n.segments.length-1+r;return QK(n,i,t.numberOfDoubleDots)}function QK(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new mc(r,!1,i-o)}function ZK(t){return Ml(t[0])?t[0].outlets:{[Y]:t}}function Mk(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return Pl(t,e,n);let r=YK(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new be(t.segments.slice(0,r.pathIndex),{});return o.children[Y]=new be(t.segments.slice(r.pathIndex),t.children),Pl(o,0,i)}else return r.match&&i.length===0?new be(t.segments,{}):r.match&&!t.hasChildren()?XE(t,e,n):r.match?Pl(t,0,i):XE(t,e,n)}function Pl(t,e,n){if(n.length===0)return new be(t.segments,{});{let r=ZK(n),i={};if(Object.keys(r).some(o=>o!==Y)&&t.children[Y]&&t.numberOfChildren===1&&t.children[Y].segments.length===0){let o=Pl(t.children[Y],e,n);return new be(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Mk(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new be(t.segments,i)}}function YK(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ml(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!dk(c,u,s))return o;r+=2}else{if(!dk(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function XE(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ml(o)){let c=XK(o.outlets);return new be(r,c)}if(i===0&&Ph(n[0])){let c=t.segments[e];r.push(new _s(c.path,lk(n[0]))),i++;continue}let s=Ml(o)?o.outlets[Y]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ph(a)?(r.push(new _s(s,lk(a))),i+=2):(r.push(new _s(s,{})),i++)}return new be(r,{})}function XK(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=XE(new be([],{}),0,r))}),e}function lk(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dk(t,e,n){return t==n.path&&Wr(e,n.parameters)}var Tl="imperative",ft=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ft||{}),Kn=class{constructor(e,n){this.id=e,this.url=n}},bc=class extends Kn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gr=class extends Kn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Mn||{}),Ah=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ah||{}),Fi=class extends Kn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bo=class extends Kn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ft.NavigationSkipped}},Ol=class extends Kn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Mh=class extends Kn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eI=class extends Kn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tI=class extends Kn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},nI=class extends Kn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rI=class extends Kn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iI=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},oI=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sI=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},aI=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cI=class{constructor(e){this.snapshot=e,this.type=ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uI=class{constructor(e){this.snapshot=e,this.type=ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oh=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ft.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},xl=class{},Ec=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function e7(t,e){return t.providers&&!t._injector&&(t._injector=sh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Cr(t){return t.outlet||Y}function t7(t,e){let n=t.filter(r=>Cr(r)===e);return n.push(...t.filter(r=>Cr(r)!==e)),n}function Vl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var lI=class{get injector(){return Vl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new zl(this.rootInjector),this.attachRef=null}},zl=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new lI(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(x(en))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=dI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=dI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=pI(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pI(e,this._root).map(n=>n.value)}};function dI(t,e){if(t===e.value)return e;for(let n of e.children){let r=dI(t,n);if(r)return r}return null}function pI(t,e){if(t===e.value)return[e];for(let n of e.children){let r=pI(t,n);if(r.length)return r.unshift(e),r}return[]}var An=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function vc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Nh=class extends xh{constructor(e,n){super(e),this.snapshot=n,wI(this,e)}toString(){return this.snapshot.toString()}};function Ok(t){let e=n7(t),n=new yt([new _s("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),a=new Eo(n,r,o,s,i,Y,t,e.root);return a.snapshot=e.root,new Nh(new An(a,[]),e)}function n7(t){let e={},n={},r={},i="",o=new yc([],e,r,i,n,Y,t,null,{});return new Fh("",new An(o,[]))}var Eo=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(J(u=>u[ql]))??B(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>Sc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>Sc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function kh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:D(D({},e.params),t.params),data:D(D({},e.data),t.data),resolve:D(D(D(D({},t.data),e.data),i?.data),t._resolvedData)}:r={params:D({},t.params),data:D({},t.data),resolve:D(D({},t.data),t._resolvedData??{})},i&&Nk(i)&&(r.resolve[ql]=i.title),r}var yc=class{get title(){return this.data?.[ql]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Fh=class extends xh{constructor(e,n){super(n),this.url=e,wI(this,n)}toString(){return xk(this._root)}};function wI(t,e){e.value._routerState=t,e.children.forEach(n=>wI(t,n))}function xk(t){let e=t.children.length>0?` { ${t.children.map(xk).join(", ")} } `:"";return`${t.value}${e}`}function GE(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Wr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Wr(e.params,n.params)||t.paramsSubject.next(n.params),TK(e.url,n.url)||t.urlSubject.next(n.url),Wr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function fI(t,e){let n=Wr(t.params,e.params)&&xK(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||fI(t.parent,e.parent))}function Nk(t){return typeof t.title=="string"||t.title===null}var r7=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new ne,this.deactivateEvents=new ne,this.attachEvents=new ne,this.detachEvents=new ne,this.parentContexts=E(zl),this.location=E(yr),this.changeDetector=E(Ai),this.inputBinder=E(Bh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new hI(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Xe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ii]});let t=e;return t})(),hI=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Eo?this.route:e===zl?this.childContexts:this.parent.get(e,n)}},Bh=new N(""),pk=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=$u([i.queryParams,i.params,i.data]).pipe(Zt(([s,a,c],u)=>(c=D(D(D({},s),a),c),u===0?B(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=P1(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function i7(t,e,n){let r=Nl(t,e._root,n?n._root:void 0);return new Nh(r,e)}function Nl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=o7(t,e,n);return new An(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Nl(t,a)),s}}let r=s7(e.value),i=e.children.map(o=>Nl(t,o));return new An(r,i)}}function o7(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Nl(t,r,i);return Nl(t,r)})}function s7(t){return new Eo(new yt(t.url),new yt(t.params),new yt(t.queryParams),new yt(t.fragment),new yt(t.data),t.outlet,t.component,t)}var kl=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},kk="ngNavigationCancelingError";function Lh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ps(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Fk(!1,Mn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Fk(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[kk]=!0,n.cancellationCode=e,n}function a7(t){return Lk(t)&&Ps(t.url)}function Lk(t){return!!t&&t[kk]}var c7=(t,e,n,r)=>J(i=>(new gI(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),gI=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),GE(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=vc(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=vc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=vc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=vc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new uI(o.value.snapshot))}),e.children.length&&this.forwardEvent(new aI(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(GE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),GE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},jh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Cc=class{constructor(e,n){this.component=e,this.route=n}};function u7(t,e,n){let r=t._root,i=e?e._root:null;return _l(r,i,n,[r.value])}function l7(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Dc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!$O(t)?t:e.get(t):r}function _l(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=vc(e);return t.children.forEach(s=>{d7(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Al(a,n.getContext(s),i)),i}function d7(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=p7(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new jh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_l(t,e,a?a.children:null,r,i):_l(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Cc(a.outlet.component,s))}else s&&Al(e,a,i),i.canActivateChecks.push(new jh(r)),o.component?_l(t,null,a?a.children:null,r,i):_l(t,null,n,r,i);return i}function p7(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Rs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Rs(t.url,e.url)||!Wr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fI(t,e)||!Wr(t.queryParams,e.queryParams);case"paramsChange":default:return!fI(t,e)}}function Al(t,e,n){let r=vc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Al(s,e.children.getContext(o),n):Al(s,null,n):Al(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Cc(e.outlet.component,i)):n.canDeactivateChecks.push(new Cc(null,i)):n.canDeactivateChecks.push(new Cc(null,i))}function Ul(t){return typeof t=="function"}function f7(t){return typeof t=="boolean"}function h7(t){return t&&Ul(t.canLoad)}function g7(t){return t&&Ul(t.canActivate)}function v7(t){return t&&Ul(t.canActivateChild)}function m7(t){return t&&Ul(t.canDeactivate)}function y7(t){return t&&Ul(t.canMatch)}function jk(t){return t instanceof hi||t?.name==="EmptyError"}var Ih=Symbol("INITIAL_VALUE");function Ic(){return Zt(t=>$u(t.map(e=>e.pipe(mi(1),aw(Ih)))).pipe(J(e=>{for(let n of e)if(n!==!0){if(n===Ih)return Ih;if(n===!1||C7(n))return n}return!0}),Qt(e=>e!==Ih),mi(1)))}function C7(t){return Ps(t)||t instanceof kl}function S7(t,e){return ze(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?B(ee(D({},n),{guardsResult:!0})):w7(s,r,i,t).pipe(ze(a=>a&&f7(a)?b7(r,o,t,e):B(a)),J(a=>ee(D({},n),{guardsResult:a})))})}function w7(t,e,n,r){return Te(t).pipe(ze(i=>R7(i.component,i.route,n,e,r)),Lr(i=>i!==!0,!0))}function b7(t,e,n,r){return Te(e).pipe(vi(i=>Fa(I7(i.route.parent,r),E7(i.route,r),_7(t,i.path,n),D7(t,i.route,n))),Lr(i=>i!==!0,!0))}function E7(t,e){return t!==null&&e&&e(new cI(t)),B(!0)}function I7(t,e){return t!==null&&e&&e(new sI(t)),B(!0)}function D7(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return B(!0);let i=r.map(o=>Xp(()=>{let s=Vl(e)??n,a=Dc(o,s),c=g7(a)?a.canActivate(e,t):Rn(s,()=>a(e,t));return Io(c).pipe(Lr())}));return B(i).pipe(Ic())}function _7(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>l7(s)).filter(s=>s!==null).map(s=>Xp(()=>{let a=s.guards.map(c=>{let u=Vl(s.node)??n,l=Dc(c,u),d=v7(l)?l.canActivateChild(r,t):Rn(u,()=>l(r,t));return Io(d).pipe(Lr())});return B(a).pipe(Ic())}));return B(o).pipe(Ic())}function R7(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return B(!0);let s=o.map(a=>{let c=Vl(e)??i,u=Dc(a,c),l=m7(u)?u.canDeactivate(t,e,n,r):Rn(c,()=>u(t,e,n,r));return Io(l).pipe(Lr())});return B(s).pipe(Ic())}function P7(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return B(!0);let o=i.map(s=>{let a=Dc(s,t),c=h7(a)?a.canLoad(e,n):Rn(t,()=>a(e,n));return Io(c)});return B(o).pipe(Ic(),qk(r))}function qk(t){return GS(ot(e=>{if(typeof e!="boolean")throw Lh(t,e)}),J(e=>e===!0))}function T7(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return B(!0);let o=i.map(s=>{let a=Dc(s,t),c=y7(a)?a.canMatch(e,n):Rn(t,()=>a(e,n));return Io(c)});return B(o).pipe(Ic(),qk(r))}var Fl=class{constructor(e){this.segmentGroup=e||null}},Ll=class extends Error{constructor(e){super(),this.urlTree=e}};function gc(t){return Na(new Fl(t))}function A7(t){return Na(new F(4e3,!1))}function M7(t){return Na(Fk(!1,Mn.GuardRejected))}var vI=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return B(r);if(i.numberOfChildren>1||!i.children[Y])return A7(`${e.redirectTo}`);i=i.children[Y]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:u,routeConfig:l,url:d,outlet:p,params:f,data:g,title:m}=i,y=Rn(o,()=>a({params:f,data:g,queryParams:c,fragment:u,routeConfig:l,url:d,outlet:p,title:m}));if(y instanceof Li)throw new Ll(y);n=y}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Ll(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Li(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new be(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},mI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function O7(t,e,n,r,i){let o=bI(t,e,n);return o.matched?(r=e7(e,r),T7(r,e,n,i).pipe(J(s=>s===!0?o:D({},mI)))):B(o)}function bI(t,e,n){if(e.path==="**")return x7(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?D({},mI):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||PK)(n,t,e);if(!i)return D({},mI);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function x7(t){return{matched:!0,parameters:t.length>0?Ck(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function fk(t,e,n,r){return n.length>0&&F7(t,n,r)?{segmentGroup:new be(e,k7(r,new be(n,t.children))),slicedSegments:[]}:n.length===0&&L7(t,n,r)?{segmentGroup:new be(t.segments,N7(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function N7(t,e,n,r){let i={};for(let o of n)if(Vh(t,e,o)&&!r[Cr(o)]){let s=new be([],{});i[Cr(o)]=s}return D(D({},r),i)}function k7(t,e){let n={};n[Y]=e;for(let r of t)if(r.path===""&&Cr(r)!==Y){let i=new be([],{});n[Cr(r)]=i}return n}function F7(t,e,n){return n.some(r=>Vh(t,e,r)&&Cr(r)!==Y)}function L7(t,e,n){return n.some(r=>Vh(t,e,r))}function Vh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function j7(t,e,n,r){return Cr(t)!==r&&(r===Y||!Vh(e,n,t))?!1:bI(e,t,n).matched}function q7(t,e,n){return e.length===0&&!t.children[n]}var yI=class{};function B7(t,e,n,r,i,o,s="emptyOnly"){return new CI(t,e,n,r,i,s,o).recognize()}var V7=31,CI=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new vI(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=fk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:n,rootSnapshot:r})=>{let i=new An(r,n),o=new Fh("",i),s=GK(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new yc([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Y,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Y,n).pipe(J(r=>({children:r,rootSnapshot:n})),gi(r=>{if(r instanceof Ll)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fl?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(J(s=>s instanceof An?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Te(o).pipe(vi(s=>{let a=r.children[s],c=t7(n,s);return this.processSegmentGroup(e,c,a,s,i)}),sw((s,a)=>(s.push(...a),s)),ro(null),ow(),ze(s=>{if(s===null)return gc(r);let a=Bk(s);return z7(a),B(a)}))}processSegment(e,n,r,i,o,s,a){return Te(n).pipe(vi(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(gi(u=>{if(u instanceof Fl)return B(null);throw u}))),Lr(c=>!!c),gi(c=>{if(jk(c))return q7(r,i,o)?B(new yI):gc(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return j7(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):gc(i):gc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:d,remainingSegments:p}=bI(n,i,o);if(!c)return gc(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>V7&&(this.allowRedirects=!1));let f=new yc(o,u,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,hk(i),Cr(i),i.component??i._loadedComponent??null,i,gk(i)),g=kh(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(g.params),f.data=Object.freeze(g.data);let m=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,m).pipe(ze(y=>this.processSegment(e,r,n,y.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=O7(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Zt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Zt(({routes:u})=>{let l=r._loadedInjector??e,{parameters:d,consumedSegments:p,remainingSegments:f}=c,g=new yc(p,d,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,hk(r),Cr(r),r.component??r._loadedComponent??null,r,gk(r)),m=kh(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(m.params),g.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:w}=fk(n,p,f,u);if(w.length===0&&y.hasChildren())return this.processChildren(l,u,y,g).pipe(J(C=>new An(g,C)));if(u.length===0&&w.length===0)return B(new An(g,[]));let b=Cr(r)===o;return this.processSegment(l,u,y,w,b?Y:o,!0,g).pipe(J(C=>new An(g,C instanceof An?[C]:[])))}))):gc(n)))}getChildConfig(e,n,r){return n.children?B({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?B({routes:n._loadedRoutes,injector:n._loadedInjector}):P7(e,n,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,n).pipe(ot(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):M7(n))):B({routes:[],injector:e})}};function z7(t){t.sort((e,n)=>e.value.outlet===Y?-1:n.value.outlet===Y?1:e.value.outlet.localeCompare(n.value.outlet))}function U7(t){let e=t.value.routeConfig;return e&&e.path===""}function Bk(t){let e=[],n=new Set;for(let r of t){if(!U7(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Bk(r.children);e.push(new An(r.value,i))}return e.filter(r=>!n.has(r))}function hk(t){return t.data||{}}function gk(t){return t.resolve||{}}function H7(t,e,n,r,i,o){return ze(s=>B7(t,e,n,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:c})=>ee(D({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function $7(t,e){return ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return B(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of Vk(c))s.add(u);let a=0;return Te(s).pipe(vi(c=>o.has(c)?W7(c,r,t,e):(c.data=kh(c,c.parent,t).resolve,B(void 0))),ot(()=>a++),ja(1),ze(c=>a===s.size?B(n):Jt))})}function Vk(t){let e=t.children.map(n=>Vk(n)).flat();return[t,...e]}function W7(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Nk(i)&&(o[ql]=i.title),G7(o,t,e,r).pipe(J(s=>(t._resolvedData=s,t.data=kh(t,t.parent,n).resolve,null)))}function G7(t,e,n,r){let i=QE(t);if(i.length===0)return B({});let o={};return Te(i).pipe(ze(s=>K7(t[s],e,n,r).pipe(Lr(),ot(a=>{if(a instanceof kl)throw Lh(new wc,a);o[s]=a}))),ja(1),iw(o),gi(s=>jk(s)?Jt:Na(s)))}function K7(t,e,n,r){let i=Vl(e)??r,o=Dc(t,i),s=o.resolve?o.resolve(e,n):Rn(i,()=>o(e,n));return Io(s)}function KE(t){return Zt(e=>{let n=t(e);return n?Te(n).pipe(J(()=>e)):B(e)})}var zk=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===Y);return i}getResolvedTitleForRoute(r){return r.data[ql]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(J7),providedIn:"root"});let t=e;return t})(),J7=(()=>{let e=class e extends zk{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(x(ak))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hl=new N("",{providedIn:"root",factory:()=>({})}),Q7=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ur({type:e,selectors:[["ng-component"]],standalone:!0,features:[lc],decls:1,vars:0,template:function(i,o){i&1&&$r(0,"router-outlet")},dependencies:[r7],encapsulation:2});let t=e;return t})();function EI(t){let e=t.children&&t.children.map(EI),n=e?ee(D({},t),{children:e}):D({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=Q7),n}var jl=new N(""),II=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(fh)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return B(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Io(r.loadComponent()).pipe(J(Uk),ot(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),hr(()=>{this.componentLoaders.delete(r)})),o=new Pa(i,()=>new Ye).pipe(Ra());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return B({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Z7(i,this.compiler,r,this.onLoadEndListener).pipe(hr(()=>{this.childrenLoaders.delete(i)})),a=new Pa(s,()=>new Ye).pipe(Ra());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Z7(t,e,n,r){return Io(t.loadChildren()).pipe(J(Uk),ze(i=>i instanceof tl||Array.isArray(i)?B(i):Te(e.compileModuleAsync(i))),J(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(jl,[],{optional:!0,self:!0}).flat()),{routes:s.map(EI),injector:o}}))}function Y7(t){return t&&typeof t=="object"&&"default"in t}function Uk(t){return Y7(t)?t.default:t}var DI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(X7),providedIn:"root"});let t=e;return t})(),X7=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hk=new N(""),$k=new N("");function eJ(t,e,n){let r=t.get($k),i=t.get(at);return t.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),tJ(t))),{onViewTransitionCreated:c}=r;return c&&Rn(t,()=>c({transition:a,from:e,to:n})),s})}function tJ(t){return new Promise(e=>{pE({read:()=>setTimeout(e)},{injector:t})})}var nJ=new N(""),_I=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ye,this.transitionAbortSubject=new Ye,this.configLoader=E(II),this.environmentInjector=E(en),this.urlSerializer=E(Bl),this.rootContexts=E(zl),this.location=E(fc),this.inputBindingEnabled=E(Bh,{optional:!0})!==null,this.titleStrategy=E(zk),this.options=E(Hl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(DI),this.createViewTransition=E(Hk,{optional:!0}),this.navigationErrorHandler=E(nJ,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null;let r=o=>this.events.next(new iI(o)),i=o=>this.events.next(new oI(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ee(D(D({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new yt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Tl,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qt(s=>s.id!==0),J(s=>ee(D({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Zt(s=>{let a=!1,c=!1;return B(s).pipe(Zt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Mn.SupersededByNewNavigation),Jt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ee(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let p="";return this.events.next(new bo(u.id,this.urlSerializer.serialize(u.rawUrl),p,Ah.IgnoredSameUrlNavigation)),u.resolve(!1),Jt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return B(u).pipe(Zt(p=>{let f=this.transitions?.getValue();return this.events.next(new bc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),f!==this.transitions?.getValue()?Jt:Promise.resolve(p)}),H7(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ot(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ee(D({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let f=new Mh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:f,source:g,restoredState:m,extras:y}=u,w=new bc(p,this.urlSerializer.serialize(f),g,m);this.events.next(w);let b=Ok(this.rootComponentType).snapshot;return this.currentTransition=s=ee(D({},u),{targetSnapshot:b,urlAfterRedirects:f,extras:ee(D({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,B(s)}else{let p="";return this.events.next(new bo(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Ah.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Jt}}),ot(u=>{let l=new eI(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),J(u=>(this.currentTransition=s=ee(D({},u),{guards:u7(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),S7(this.environmentInjector,u=>this.events.next(u)),ot(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Lh(this.urlSerializer,u.guardsResult);let l=new tI(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Qt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Mn.GuardRejected),!1)),KE(u=>{if(u.guards.canActivateChecks.length)return B(u).pipe(ot(l=>{let d=new nI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Zt(l=>{let d=!1;return B(l).pipe($7(this.paramsInheritanceStrategy,this.environmentInjector),ot({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Mn.NoDataFromResolver)}}))}),ot(l=>{let d=new rI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),KE(u=>{let l=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(ot(f=>{d.component=f}),J(()=>{})));for(let f of d.children)p.push(...l(f));return p};return $u(l(u.targetSnapshot.root)).pipe(ro(null),mi(1))}),KE(()=>this.afterPreactivation()),Zt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?Te(d).pipe(J(()=>s)):B(s)}),J(u=>{let l=i7(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ee(D({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),ot(()=>{this.events.next(new xl)}),c7(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),mi(1),ot({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),tf(this.transitionAbortSubject.pipe(ot(u=>{throw u}))),hr(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Mn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),gi(u=>{if(c=!0,Lk(u))this.events.next(new Fi(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),a7(u)?this.events.next(new Ec(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Ol(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let d=Rn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof kl){let{message:p,cancellationCode:f}=Lh(this.urlSerializer,d);this.events.next(new Fi(s.id,this.urlSerializer.serialize(s.extractedUrl),p,f)),this.events.next(new Ec(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let p=r.errorHandler(u);s.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Jt}))}))}cancelNavigationTransition(r,i,o){let s=new Fi(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rJ(t){return t!==Tl}var iJ=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(oJ),providedIn:"root"});let t=e;return t})(),SI=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},oJ=(()=>{let e=class e extends SI{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=sl(e)))(o||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>E(sJ),providedIn:"root"});let t=e;return t})(),sJ=(()=>{let e=class e extends Wk{constructor(){super(...arguments),this.location=E(fc),this.urlSerializer=E(Bl),this.options=E(Hl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(DI),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Li,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ok(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof bc)this.stateMemento=this.createStateMemento();else if(r instanceof bo)this.rawUrlTree=i.initialUrl;else if(r instanceof Mh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof xl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Fi&&(r.code===Mn.GuardRejected||r.code===Mn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ol?this.restoreHistory(i,!0):r instanceof Gr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof Li?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=D(D({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=D(D({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=sl(e)))(o||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Rl||{});function Gk(t,e){t.events.pipe(Qt(n=>n instanceof Gr||n instanceof Fi||n instanceof Ol||n instanceof bo),J(n=>n instanceof Gr||n instanceof bo?Rl.COMPLETE:(n instanceof Fi?n.code===Mn.Redirect||n.code===Mn.SupersededByNewNavigation:!1)?Rl.REDIRECTING:Rl.FAILED),Qt(n=>n!==Rl.REDIRECTING),mi(1)).subscribe(()=>{e()})}function aJ(t){throw t}var cJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ji=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=E(dh),this.stateManager=E(Wk),this.options=E(Hl,{optional:!0})||{},this.pendingTasks=E(Di),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(_I),this.urlSerializer=E(Bl),this.location=E(fc),this.urlHandlingStrategy=E(DI),this._events=new Ye,this.errorHandler=this.options.errorHandler||aJ,this.navigated=!1,this.routeReuseStrategy=E(iJ),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(jl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(Bh,{optional:!0}),this.eventsSubscription=new xe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Fi&&i.code!==Mn.Redirect&&i.code!==Mn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Gr)this.navigated=!0;else if(i instanceof Ec){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u=D({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||rJ(o.source)},a);this.scheduleNavigation(c,Tl,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}dJ(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Tl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=D({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(EI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=D(D({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let f=o?o.snapshot:this.routerState.snapshot.root;p=Pk(f)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return Tk(p,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Ps(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Tl,null,i)}navigate(r,i={skipLocationChange:!1}){return lJ(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=D({},cJ):i===!1?o=D({},uJ):o=i,Ps(r))return ck(this.currentUrlTree,r,o);let s=this.parseUrl(r);return ck(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((p,f)=>{c=p,u=f});let d=this.pendingTasks.add();return Gk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lJ(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new F(4008,!1)}function dJ(t){return!(t instanceof xl)&&!(t instanceof Ec)}var bye=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new Ye,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof Gr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ps(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:gN(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.routerLinkInput===null?null:Ps(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(V(ji),V(Eo),Ub("tabindex"),V(Hr),V(pt),V(Ni))},e.\u0275dir=Xe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Pn("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&cc("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ds],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ds],replaceUrl:[2,"replaceUrl","replaceUrl",Ds],routerLink:"routerLink"},standalone:!0,features:[gE,Ii]});let t=e;return t})();var qh=class{};var pJ=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(r=>r instanceof Gr),vi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=sh(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Te(o).pipe(no())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=B(null);let s=o.pipe(ze(a=>a===null?B(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Te([s,a]).pipe(no())}else return s})}};e.\u0275fac=function(i){return new(i||e)(x(ji),x(fh),x(en),x(qh),x(II))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kk=new N(""),fJ=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof bc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Gr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof bo&&r.code===Ah.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Oh&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Oh(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){PN()},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function Eye(t,...e){return rc([{provide:jl,multi:!0,useValue:t},[],{provide:Eo,useFactory:Jk,deps:[ji]},{provide:fl,multi:!0,useFactory:Qk},e.map(n=>n.\u0275providers)])}function Jk(t){return t.routerState.root}function $l(t,e){return{\u0275kind:t,\u0275providers:e}}function Qk(){let t=E(xt);return e=>{let n=t.get(Ti);if(e!==n.components[0])return;let r=t.get(ji),i=t.get(Zk);t.get(RI)===1&&r.initialNavigation(),t.get(Yk,null,te.Optional)?.setUpPreloading(),t.get(Kk,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Zk=new N("",{factory:()=>new Ye}),RI=new N("",{providedIn:"root",factory:()=>1});function hJ(){return $l(2,[{provide:RI,useValue:0},{provide:ph,multi:!0,deps:[xt],useFactory:e=>{let n=e.get(F1,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ji),o=e.get(Zk);Gk(i,()=>{r(!0)}),e.get(_I).afterPreactivation=()=>(r(!0),o.closed?B(void 0):o),i.initialNavigation()}))}}])}function gJ(){return $l(3,[{provide:ph,multi:!0,useFactory:()=>{let e=E(ji);return()=>{e.setUpLocationChangeListener()}}},{provide:RI,useValue:2}])}var Yk=new N("");function vJ(t){return $l(0,[{provide:Yk,useExisting:pJ},{provide:qh,useExisting:t}])}function mJ(){return $l(8,[pk,{provide:Bh,useExisting:pk}])}function yJ(t){let e=[{provide:Hk,useValue:eJ},{provide:$k,useValue:D({skipNextTransition:!!t?.skipInitialTransition},t)}];return $l(9,e)}var vk=new N("ROUTER_FORROOT_GUARD"),CJ=[fc,{provide:Bl,useClass:wc},ji,zl,{provide:Eo,useFactory:Jk,deps:[ji]},II,[]],Iye=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[CJ,[],{provide:jl,multi:!0,useValue:r},{provide:vk,useFactory:EJ,deps:[[ji,new Vf,new Pb]]},{provide:Hl,useValue:i||{}},i?.useHash?wJ():bJ(),SJ(),i?.preloadingStrategy?vJ(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?IJ(i):[],i?.bindToComponentInputs?mJ().\u0275providers:[],i?.enableViewTransitions?yJ().\u0275providers:[],DJ()]}}static forChild(r){return{ngModule:e,providers:[{provide:jl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(x(vk,8))},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({});let t=e;return t})();function SJ(){return{provide:Kk,useFactory:()=>{let t=E(B1),e=E(_e),n=E(Hl),r=E(_I),i=E(Bl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new fJ(i,r,t,e,n)}}}function wJ(){return{provide:Ni,useClass:j1}}function bJ(){return{provide:Ni,useClass:AE}}function EJ(t){return"guarded"}function IJ(t){return[t.initialNavigation==="disabled"?gJ().\u0275providers:[],t.initialNavigation==="enabledBlocking"?hJ().\u0275providers:[]]}var mk=new N("");function DJ(){return[{provide:mk,useFactory:Qk},{provide:fl,multi:!0,useExisting:mk}]}var _J="https://ebla-ai-demo-002.azurewebsites.net/api/v1/";var RJ="assets/images/qrep-newlogo-colored.png",zh={production:!0,endpoint:_J,debugMode:!1,logo:RJ,STREAM_ID_STORAGE_KEY:"streamId",MESSAGE_TEXT_KEY:"message_text",AVATAR_IS_RECORDING_KEY:"is_recording",OUTER_AVATAR_IS_ACTIVE_KEY:"is_active_outer_avatar",base:"/ai-demo"};var aF=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(V(Hr),V(pt))},e.\u0275dir=Xe({type:e});let t=e;return t})(),PJ=(()=>{let e=class e extends aF{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=sl(e)))(o||e)}})(),e.\u0275dir=Xe({type:e,features:[Pi]});let t=e;return t})(),TI=new N("");var TJ={provide:TI,useExisting:Ss(()=>cF),multi:!0};function AJ(){let t=xi()?xi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var MJ=new N(""),cF=(()=>{let e=class e extends aF{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!AJ())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(V(Hr),V(pt),V(MJ,8))},e.\u0275dir=Xe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Pn("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[pl([TJ]),Pi]});let t=e;return t})();function Do(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function uF(t){return t!=null&&typeof t.length=="number"}var AI=new N(""),MI=new N(""),OJ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Xk=class{static min(e){return xJ(e)}static max(e){return NJ(e)}static required(e){return kJ(e)}static requiredTrue(e){return FJ(e)}static email(e){return LJ(e)}static minLength(e){return jJ(e)}static maxLength(e){return qJ(e)}static pattern(e){return BJ(e)}static nullValidator(e){return lF(e)}static compose(e){return vF(e)}static composeAsync(e){return mF(e)}};function xJ(t){return e=>{if(Do(e.value)||Do(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function NJ(t){return e=>{if(Do(e.value)||Do(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function kJ(t){return Do(t.value)?{required:!0}:null}function FJ(t){return t.value===!0?null:{required:!0}}function LJ(t){return Do(t.value)||OJ.test(t.value)?null:{email:!0}}function jJ(t){return e=>Do(e.value)||!uF(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function qJ(t){return e=>uF(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function BJ(t){if(!t)return lF;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Do(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function lF(t){return null}function dF(t){return t!=null}function pF(t){return Is(t)?Te(t):t}function fF(t){let e={};return t.forEach(n=>{e=n!=null?D(D({},e),n):e}),Object.keys(e).length===0?null:e}function hF(t,e){return e.map(n=>n(t))}function VJ(t){return!t.validate}function gF(t){return t.map(e=>VJ(e)?e:n=>e.validate(n))}function vF(t){if(!t)return null;let e=t.filter(dF);return e.length==0?null:function(n){return fF(hF(n,e))}}function OI(t){return t!=null?vF(gF(t)):null}function mF(t){if(!t)return null;let e=t.filter(dF);return e.length==0?null:function(n){let r=hF(n,e).map(pF);return tw(r).pipe(J(fF))}}function xI(t){return t!=null?mF(gF(t)):null}function eF(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function yF(t){return t._rawValidators}function CF(t){return t._rawAsyncValidators}function PI(t){return t?Array.isArray(t)?t:[t]:[]}function Hh(t,e){return Array.isArray(t)?t.includes(e):t===e}function tF(t,e){let n=PI(e);return PI(t).forEach(i=>{Hh(n,i)||n.push(i)}),n}function nF(t,e){return PI(e).filter(n=>!Hh(t,n))}var $h=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=OI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Pc=class extends $h{get formDirective(){return null}get path(){return null}},Ts=class extends $h{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Wh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},zJ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Uye=ee(D({},zJ),{"[class.ng-submitted]":"isSubmitted"}),Hye=(()=>{let e=class e extends Wh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(V(Ts,2))},e.\u0275dir=Xe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&ch("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Pi]});let t=e;return t})(),$ye=(()=>{let e=class e extends Wh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(V(Pc,10))},e.\u0275dir=Xe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&ch("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Pi]});let t=e;return t})();var Wl="VALID",Uh="INVALID",_c="PENDING",Gl="DISABLED",Tc=class{},Gh=class extends Tc{constructor(e,n){super(),this.value=e,this.source=n}},Jl=class extends Tc{constructor(e,n){super(),this.pristine=e,this.source=n}},Ql=class extends Tc{constructor(e,n){super(),this.touched=e,this.source=n}},Rc=class extends Tc{constructor(e,n){super(),this.status=e,this.source=n}};function SF(t){return(Zh(t)?t.validators:t)||null}function UJ(t){return Array.isArray(t)?OI(t):t||null}function wF(t,e){return(Zh(e)?e.asyncValidators:t)||null}function HJ(t){return Array.isArray(t)?xI(t):t||null}function Zh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function $J(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new F(1e3,"");if(!r[n])throw new F(1001,"")}function WJ(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new F(1002,"")})}var Kh=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=hl(()=>this.statusReactive()),this.statusReactive=dl(void 0),this._pristine=hl(()=>this.pristineReactive()),this.pristineReactive=dl(!0),this._touched=hl(()=>this.touchedReactive()),this.touchedReactive=dl(!1),this._events=new Ye,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Mi(this.statusReactive)}set status(e){Mi(()=>this.statusReactive.set(e))}get valid(){return this.status===Wl}get invalid(){return this.status===Uh}get pending(){return this.status==_c}get disabled(){return this.status===Gl}get enabled(){return this.status!==Gl}get pristine(){return Mi(this.pristineReactive)}set pristine(e){Mi(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Mi(this.touchedReactive)}set touched(e){Mi(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nF(e,this._rawAsyncValidators))}hasValidator(e){return Hh(this._rawValidators,e)}hasAsyncValidator(e){return Hh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(D({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ql(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ql(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(D({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Jl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Jl(!0,r))}markAsPending(e={}){this.status=_c;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(D({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Gl,this.errors=null,this._forEachChild(i=>{i.disable(ee(D({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gh(this.value,r)),this._events.next(new Rc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(D({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Wl,this._forEachChild(r=>{r.enable(ee(D({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(D({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wl||this.status===_c)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gh(this.value,n)),this._events.next(new Rc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(D({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gl:Wl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=_c,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=pF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Rc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ne,this.statusChanges=new ne}_calculateStatus(){return this._allControlsDisabled()?Gl:this.errors?Uh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_c)?_c:this._anyControlsHaveStatus(Uh)?Uh:Wl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Jl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ql(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=UJ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=HJ(this._rawAsyncValidators)}},Jh=class extends Kh{constructor(e,n,r){super(SF(n),wF(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){WJ(this,!0,e),Object.keys(e).forEach(r=>{$J(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Zl=new N("CallSetDisabledState",{providedIn:"root",factory:()=>Yh}),Yh="always";function GJ(t,e){return[...e.path,t]}function NI(t,e,n=Yh){bF(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),QJ(t,e),YJ(t,e),ZJ(t,e),KJ(t,e)}function rF(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),JJ(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Qh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function KJ(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function bF(t,e){let n=yF(t);e.validator!==null?t.setValidators(eF(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=CF(t);e.asyncValidator!==null?t.setAsyncValidators(eF(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Qh(e._rawValidators,i),Qh(e._rawAsyncValidators,i)}function JJ(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=yF(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=CF(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Qh(e._rawValidators,r),Qh(e._rawAsyncValidators,r),n}function QJ(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&EF(t,e)})}function ZJ(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&EF(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function EF(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function YJ(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function XJ(t,e){t==null,bF(t,e)}function IF(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function eQ(t){return Object.getPrototypeOf(t.constructor)===PJ}function tQ(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function DF(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===cF?n=o:eQ(o)?r=o:i=o}),i||r||n||null}var nQ={provide:Pc,useExisting:Ss(()=>rQ)},Kl=Promise.resolve(),rQ=(()=>{let e=class e extends Pc{get submitted(){return Mi(this.submittedReactive)}constructor(r,i,o){super(),this.callSetDisabledState=o,this._submitted=hl(()=>this.submittedReactive()),this.submittedReactive=dl(!1),this._directives=new Set,this.ngSubmit=new ne,this.form=new Jh({},OI(r),xI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Kl.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),NI(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Kl.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Kl.then(()=>{let i=this._findContainer(r.path),o=new Jh({});XJ(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Kl.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Kl.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),tQ(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(V(AI,10),V(MI,10),V(Zl,8))},e.\u0275dir=Xe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Pn("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pl([nQ]),Pi]});let t=e;return t})();function iF(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function oF(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var iQ=class extends Kh{constructor(e=null,n,r){super(SF(n),wF(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(oF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){oF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var oQ={provide:Ts,useExisting:Ss(()=>sQ)},sF=Promise.resolve(),sQ=(()=>{let e=class e extends Ts{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new iQ,this._registered=!1,this.name="",this.update=new ne,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=DF(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),IF(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){NI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){sF.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Ds(i);sF.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?GJ(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(V(Pc,9),V(AI,10),V(MI,10),V(TI,10),V(Ai,8),V(Zl,8))},e.\u0275dir=Xe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pl([oQ]),Pi,Ii]});let t=e;return t})(),Gye=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Xe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var _F=new N(""),aQ={provide:Ts,useExisting:Ss(()=>cQ)},cQ=(()=>{let e=class e extends Ts{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new ne,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DF(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&rF(i,this,!1),NI(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}IF(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&rF(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(V(AI,10),V(MI,10),V(TI,10),V(_F,8),V(Zl,8))},e.\u0275dir=Xe({type:e,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[pl([aQ]),Pi,Ii]});let t=e;return t})();var RF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({});let t=e;return t})();var Kye=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Zl,useValue:r.callSetDisabledState??Yh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({imports:[RF]});let t=e;return t})(),Jye=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:_F,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Zl,useValue:r.callSetDisabledState??Yh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({imports:[RF]});let t=e;return t})();var Ac=class{_baseUrl;loading=!1;constructor(e){this._baseUrl=e}get baseUrl(){return zh.endpoint+this.tag+this._baseUrl}startLoading(){this.loading=!0}stopLoading(){this.loading=!1}};var PF=(()=>{class t extends Ac{tag="common/";http=E(Sl);constructor(){super("speech")}transcribe(n){return this.startLoading(),this.http.post(this.baseUrl+"/transcribe",n,{headers:new Gn({enctype:"multipart/form-data"})}).pipe(hr(()=>{this.stopLoading()}))}requestAuthorizationToken(){return this.http.get(this.baseUrl+"/token",{headers:new Gn({"Content-Type":"application/json"})})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var uQ=t=>({active:t}),TF=(()=>{class t{onClick=new ne;active=!1;position="top";constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ur({type:t,selectors:[["stop-processing-btn"]],inputs:{active:"active",position:"position"},outputs:{onClick:"onClick"},standalone:!0,features:[lc],decls:4,vars:5,consts:[["type","button",1,"btn","btn-secondary","px-3","border","border-light","btn-sm","d-flex","align-items-center","rounded-pill","stop-processing-btn",3,"click","ngClass"],[1,"ms-1","mdi","mdi-pause"]],template:function(r,i){r&1&&(kt(0,"button",0),Pn("click",function(){return i.onClick.emit()}),kt(1,"small"),Es(2," Stop Processing "),$r(3,"i",1),hn()()),r&2&&(uc(i.position),Wn("ngClass",dc(3,uQ,i.active)))},dependencies:[ki,hc],styles:[".stop-processing-btn[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);opacity:0;white-space:nowrap;transition:.4s;visibility:hidden}.stop-processing-btn.active[_ngcontent-%COMP%]{opacity:.5;visibility:visible}.stop-processing-btn[_ngcontent-%COMP%]:hover{opacity:1}.stop-processing-btn.top[_ngcontent-%COMP%]{top:-42px}.stop-processing-btn.bottom[_ngcontent-%COMP%]{bottom:-42px}"]})}return t})();var kI=class{constructor(e,n){this.open=e,this.close=n||e}isManual(){return this.open==="manual"||this.close==="manual"}},lQ={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};function FI(t,e=lQ){let n=(t||"").trim();if(n.length===0)return[];let r=n.split(/\s+/).map(o=>o.split(":")).map(o=>{let s=e[o[0]]||o;return new kI(s[0],s[1])}),i=r.filter(o=>o.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(i.length===1&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}function OF(t,e){let n=FI(e.triggers),r=e.target;if(n.length===1&&n[0].isManual())return Function.prototype;let i=[],o=[],s=()=>{o.forEach(a=>i.push(a())),o.length=0};return n.forEach(a=>{let c=a.open===a.close,u=c?e.toggle:e.show;if(!c&&a.close&&e.hide){let l=a.close,d=e.hide,p=()=>t.listen(r,l,d);o.push(p)}u&&i.push(t.listen(r,a.open,()=>u(s)))}),()=>{i.forEach(a=>a())}}function xF(t,e){return e.outsideClick?t.listen("document","click",n=>{e.target&&e.target.contains(n.target)||e.targets&&e.targets.some(r=>r.contains(n.target))||e.hide&&e.hide()}):Function.prototype}function NF(t,e){return e.outsideEsc?t.listen("document","keyup.esc",n=>{e.target&&e.target.contains(n.target)||e.targets&&e.targets.some(r=>r.contains(n.target))||e.hide&&e.hide()}):Function.prototype}var ct=typeof window<"u"&&window||{},fCe=ct.document,hCe=ct.location,gCe=ct.gc?()=>ct.gc():()=>null,vCe=ct.performance?ct.performance:null,mCe=ct.Event,yCe=ct.MouseEvent,CCe=ct.KeyboardEvent,SCe=ct.EventTarget,wCe=ct.History,bCe=ct.Location,ECe=ct.EventListener,kF=function(t){return t.isBs4="bs4",t.isBs5="bs5",t}(kF||{}),_o;function FF(){let t=ct.document.createElement("span");t.innerText="testing bs version",t.classList.add("d-none"),t.classList.add("pl-1"),ct.document.head.appendChild(t);let e=ct.getComputedStyle(t).paddingLeft;return e&&parseFloat(e)?(ct.document.head.removeChild(t),"bs4"):(ct.document.head.removeChild(t),"bs5")}function dQ(){return _o||(_o=FF()),_o==="bs4"}function pQ(){return _o||(_o=FF()),_o==="bs5"}function Ro(){return{isBs4:dQ(),isBs5:pQ()}}function fQ(){let t=Ro(),e=Object.keys(t).find(n=>t[n]);return kF[e]}function Xh(){let t="Change";return function(n,r){let i=` __${r}Value`;Object.defineProperty(n,r,{get(){return this[i]},set(o){let s=this[i];this[i]=o,s!==o&&this[r+t]&&this[r+t].emit(o)}})}}var AF=class{static reflow(e){e.offsetHeight}static getStyles(e){let n=e.ownerDocument.defaultView;return(!n||!n.opener)&&(n=ct),n.getComputedStyle(e)}static stackOverflowConfig(){let e=fQ();return{crossorigin:"anonymous",integrity:e==="bs5"?"sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65":"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2",cdnLink:e==="bs5"?"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css":"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"}}},MF={},hQ=typeof console>"u"||!("warn"in console);function gn(t){!D1()||hQ||t in MF||(MF[t]=!0,console.warn(t))}var zF=function(t){return t.top="top",t.bottom="bottom",t.left="left",t.right="right",t.auto="auto",t.end="right",t.start="left",t["top left"]="top left",t["top right"]="top right",t["right top"]="right top",t["right bottom"]="right bottom",t["bottom right"]="bottom right",t["bottom left"]="bottom left",t["left bottom"]="left bottom",t["left top"]="left top",t["top start"]="top left",t["top end"]="top right",t["end top"]="right top",t["end bottom"]="right bottom",t["bottom end"]="bottom right",t["bottom start"]="bottom left",t["start bottom"]="start bottom",t["start top"]="left top",t}(zF||{}),Yl=function(t){return t.top="top",t.bottom="bottom",t.left="start",t.right="end",t.auto="auto",t.end="end",t.start="start",t["top left"]="top start",t["top right"]="top end",t["right top"]="end top",t["right bottom"]="end bottom",t["bottom right"]="bottom end",t["bottom left"]="bottom start",t["left bottom"]="start bottom",t["left top"]="start top",t["top start"]="top start",t["top end"]="top end",t["end top"]="end top",t["end bottom"]="end bottom",t["bottom end"]="bottom end",t["bottom start"]="bottom start",t["start bottom"]="start bottom",t["start top"]="start top",t}(Yl||{});function As(t,e){if(t.nodeType!==1)return[];let r=t.ownerDocument.defaultView?.getComputedStyle(t,null);return e?r&&r[e]:r}function BI(t){if(!t)return document.documentElement;let e=null,n=t?.offsetParent,r;for(;n===e&&t.nextElementSibling&&r!==t.nextElementSibling;)r=t.nextElementSibling,n=r.offsetParent;let i=n&&n.nodeName;return!i||i==="BODY"||i==="HTML"?r?r.ownerDocument.documentElement:document.documentElement:n&&["TH","TD","TABLE"].indexOf(n.nodeName)!==-1&&As(n,"position")==="static"?BI(n):n}function gQ(t){let{nodeName:e}=t;return e==="BODY"?!1:e==="HTML"||BI(t.firstElementChild)===t}function LI(t){return t.parentNode!==null?LI(t.parentNode):t}function rg(t,e){if(!t||!t.nodeType||!e||!e.nodeType)return document.documentElement;let n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);let s=o.commonAncestorContainer;if(t!==s&&e!==s||r.contains(i))return gQ(s)?s:BI(s);let a=LI(t);return a.host?rg(a.host,e):rg(t,LI(e).host)}function UF(t){if(!t||!t.parentElement)return document.documentElement;let e=t.parentElement;for(;e?.parentElement&&As(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function LF(t,e){let n=e==="x"?"Left":"Top",r=n==="Left"?"Right":"Bottom";return parseFloat(t[`border${n}Width`])+parseFloat(t[`border${r}Width`])}function jF(t,e,n){let r=e,i=n;return Math.max(r[`offset${t}`],r[`scroll${t}`],i[`client${t}`],i[`offset${t}`],i[`scroll${t}`],0)}function HF(t){let e=t.body,n=t.documentElement;return{height:jF("Height",e,n),width:jF("Width",e,n)}}function Xl(t){return ee(D({},t),{right:(t.left||0)+t.width,bottom:(t.top||0)+t.height})}function vQ(t){return t!==""&&!isNaN(parseFloat(t))&&isFinite(Number(t))}function ke(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function qF(t){let e=t.getBoundingClientRect();if(!(e&&ke(e.top)&&ke(e.left)&&ke(e.bottom)&&ke(e.right)))return e;let n={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r=t.nodeName==="HTML"?HF(t.ownerDocument):void 0,i=r?.width||t.clientWidth||ke(e.right)&&ke(n.left)&&e.right-n.left||0,o=r?.height||t.clientHeight||ke(e.bottom)&&ke(n.top)&&e.bottom-n.top||0,s=t.offsetWidth-i,a=t.offsetHeight-o;if(s||a){let c=As(t);s-=LF(c,"x"),a-=LF(c,"y"),n.width-=s,n.height-=a}return Xl(n)}function VI(t,e,n=!1){let r=e.nodeName==="HTML",i=qF(t),o=qF(e),s=As(e),a=parseFloat(s.borderTopWidth),c=parseFloat(s.borderLeftWidth);n&&r&&(o.top=Math.max(o.top??0,0),o.left=Math.max(o.left??0,0));let u=Xl({top:(i.top??0)-(o.top??0)-a,left:(i.left??0)-(o.left??0)-c,width:i.width,height:i.height});if(u.marginTop=0,u.marginLeft=0,r){let l=parseFloat(s.marginTop),d=parseFloat(s.marginLeft);ke(u.top)&&(u.top-=a-l),ke(u.bottom)&&(u.bottom-=a-l),ke(u.left)&&(u.left-=c-d),ke(u.right)&&(u.right-=c-d),u.marginTop=l,u.marginLeft=d}return u}function zI(t){return t.nodeName==="HTML"?t:t.parentNode||t.host}function $F(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body;default:}let{overflow:e,overflowX:n,overflowY:r}=As(t);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(n))?t:$F(zI(t))}function BF(t,e="top"){let n=e==="top"?"scrollTop":"scrollLeft",r=t.nodeName;if(r==="BODY"||r==="HTML"){let i=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||i)[n]}return t[n]}function mQ(t,e=!1){let n=t.ownerDocument.documentElement,r=VI(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:BF(n),a=e?0:BF(n,"left"),c={top:s-Number(r?.top)+Number(r?.marginTop),left:a-Number(r?.left)+Number(r?.marginLeft),width:i,height:o};return Xl(c)}function WF(t){let e=t.nodeName;return e==="BODY"||e==="HTML"?!1:As(t,"position")==="fixed"?!0:WF(zI(t))}function UI(t,e,n=0,r,i=!1){let o={top:0,left:0},s=i?UF(t):rg(t,e);if(r==="viewport")o=mQ(s,i);else{let a;r==="scrollParent"?(a=$F(zI(e)),a.nodeName==="BODY"&&(a=t.ownerDocument.documentElement)):r==="window"?a=t.ownerDocument.documentElement:a=r;let c=VI(a,s,i);if(c&&a.nodeName==="HTML"&&!WF(s)){let{height:u,width:l}=HF(t.ownerDocument);ke(o.top)&&ke(c.top)&&ke(c.marginTop)&&(o.top+=c.top-c.marginTop),ke(o.top)&&(o.bottom=Number(u)+Number(c.top)),ke(o.left)&&ke(c.left)&&ke(c.marginLeft)&&(o.left+=c.left-c.marginLeft),ke(o.top)&&(o.right=Number(l)+Number(c.left))}else c&&(o=c)}return ke(o.left)&&(o.left+=n),ke(o.top)&&(o.top+=n),ke(o.right)&&(o.right-=n),ke(o.bottom)&&(o.bottom-=n),o}function yQ({width:t,height:e}){return t*e}function GF(t,e,n,r,i=["top","bottom","right","left"],o="viewport",s=0){if(t.indexOf("auto")===-1)return t;let a=UI(n,r,s,o),c={top:{width:a?.width??0,height:(e?.top??0)-(a?.top??0)},right:{width:(a?.right??0)-(e?.right??0),height:a?.height??0},bottom:{width:a?.width??0,height:(a?.bottom??0)-(e?.bottom??0)},left:{width:(e.left??0)-(a?.left??0),height:a?.height??0}},u=Object.keys(c).map(f=>ee(D({position:f},c[f]),{area:yQ(c[f])})).sort((f,g)=>g.area-f.area),l=u.filter(({width:f,height:g})=>f>=n.clientWidth&&g>=n.clientHeight);l=l.filter(({position:f})=>i.some(g=>g===f));let d=l.length>0?l[0].position:u[0].position,p=t.split(" ")[1];return n.className=n.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Ro().isBs5?Yl[d]:d}`),d+(p?`-${p}`:"")}function CQ(t){return{width:t.offsets.target.width,height:t.offsets.target.height,left:Math.floor(t.offsets.target.left??0),top:Math.round(t.offsets.target.top??0),bottom:Math.round(t.offsets.target.bottom??0),right:Math.floor(t.offsets.target.right??0)}}function SQ(t){let e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,n=>e[n])}function wQ(t){return t==="right"?"left":t==="left"?"right":t}var eg=(t,e=0)=>t?parseFloat(t):e;function KF(t){let n=t.ownerDocument.defaultView?.getComputedStyle(t),r=eg(n?.marginTop)+eg(n?.marginBottom),i=eg(n?.marginLeft)+eg(n?.marginRight);return{width:Number(t.offsetWidth)+i,height:Number(t.offsetHeight)+r}}function JF(t,e,n){let r=n?UF(t):rg(t,e);return VI(e,r,n)}function jI(t,e,n){let r=n.split(" ")[0],i=KF(t),o={width:i.width,height:i.height},s=["right","left"].indexOf(r)!==-1,a=s?"top":"left",c=s?"left":"top",u=s?"height":"width",l=s?"width":"height";return o[a]=(e[a]??0)+e[u]/2-i[u]/2,o[c]=r===c?(e[c]??0)-i[l]:e[SQ(c)]??0,o}function QF(t,e){return!!t.modifiers[e]?.enabled}var bQ={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function tg(t,e){return Ro().isBs5?bQ[e].includes(t):!1}function EQ(t){return Ro().isBs5?tg(t,"end")?"ms-2":tg(t,"start")?"me-2":tg(t,"top")?"mb-2":tg(t,"bottom")?"mt-2":"":""}function IQ(t,e){let n=t.instance.target,r=n.className,i=Ro().isBs5?Yl[t.placement]:t.placement;if(t.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),r.indexOf("popover")!==-1&&(r=r+" "+EQ(i)),r.indexOf("popover")!==-1&&r.indexOf("popover-auto")===-1&&(r+=" popover-auto"),r.indexOf("tooltip")!==-1&&r.indexOf("tooltip-auto")===-1&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e){e.setAttribute(n,"class",r);return}n.className=r}function VF(t,e,n){!t||!e||Object.keys(e).forEach(r=>{let i="";if(["width","height","top","right","bottom","left"].indexOf(r)!==-1&&vQ(e[r])&&(i="px"),n){n.setStyle(t,r,`${String(e[r])}${i}`);return}t.style[r]=String(e[r])+i})}function DQ(t){let e=t.offsets.target,n=t.instance.target.querySelector(".arrow");if(!n)return t;let r=["left","right"].indexOf(t.placement.split(" ")[0])!==-1,i=r?"height":"width",o=r?"Top":"Left",s=o.toLowerCase(),a=r?"left":"top",c=r?"bottom":"right",u=KF(n)[i],l=t.placement.split(" ")[1];(t.offsets.host[c]??0)-u<(e[s]??0)&&(e[s]-=(e[s]??0)-((t.offsets.host[c]??0)-u)),Number(t.offsets.host[s])+Number(u)>(e[c]??0)&&(e[s]+=Number(t.offsets.host[s])+Number(u)-Number(e[c])),e=Xl(e);let d=As(t.instance.target),p=parseFloat(d[`margin${o}`])||0,f=parseFloat(d[`border${o}Width`])||0,g;if(!l)g=Number(t.offsets.host[s])+Number(t.offsets.host[i]/2-u/2);else{let y=parseFloat(d.borderRadius)||0,w=Number(p+f+y);g=s===l?Number(t.offsets.host[s])+w:Number(t.offsets.host[s])+Number(t.offsets.host[i]-w)}let m=g-(e[s]??0)-p-f;return m=Math.max(Math.min(e[i]-(u+5),m),0),t.offsets.arrow={[s]:Math.round(m),[a]:""},t.instance.arrow=n,t}function _Q(t){if(t.offsets.target=Xl(t.offsets.target),!QF(t.options,"flip"))return t.offsets.target=D(D({},t.offsets.target),jI(t.instance.target,t.offsets.host,t.placement)),t;let e=UI(t.instance.target,t.instance.host,0,"viewport",!1),n=t.placement.split(" ")[0],r=t.placement.split(" ")[1]||"",i=t.offsets.host,o=t.instance.target,s=t.instance.host,a=GF("auto",i,o,s,t.options.allowedPositions),c=[n,a];return c.forEach((u,l)=>{if(n!==u||c.length===l+1)return;n=t.placement.split(" ")[0];let d=n==="left"&&Math.floor(t.offsets.target.right??0)>Math.floor(t.offsets.host.left??0)||n==="right"&&Math.floor(t.offsets.target.left??0)<Math.floor(t.offsets.host.right??0)||n==="top"&&Math.floor(t.offsets.target.bottom??0)>Math.floor(t.offsets.host.top??0)||n==="bottom"&&Math.floor(t.offsets.target.top??0)<Math.floor(t.offsets.host.bottom??0),p=Math.floor(t.offsets.target.left??0)<Math.floor(e.left??0),f=Math.floor(t.offsets.target.right??0)>Math.floor(e.right??0),g=Math.floor(t.offsets.target.top??0)<Math.floor(e.top??0),m=Math.floor(t.offsets.target.bottom??0)>Math.floor(e.bottom??0),y=n==="left"&&p||n==="right"&&f||n==="top"&&g||n==="bottom"&&m,w=["top","bottom"].indexOf(n)!==-1,b=w&&r==="left"&&p||w&&r==="right"&&f||!w&&r==="left"&&g||!w&&r==="right"&&m;(d||y||b)&&((d||y)&&(n=c[l+1]),b&&(r=wQ(r)),t.placement=n+(r?` ${r}`:""),t.offsets.target=D(D({},t.offsets.target),jI(t.instance.target,t.offsets.host,t.placement)))}),t}function RQ(t,e,n,r){if(!t||!e)return;let i=JF(t,e);!n.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!n.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(n="auto");let o=!!n.match(/auto/g),s=n.match(/auto\s(left|right|top|bottom|start|end)/)?n.split(" ")[1]||"auto":n,a=s.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);a&&(s=a[1]+(a[2]?` ${a[2]}`:"")),["left right","right left","top bottom","bottom top"].indexOf(s)!==-1&&(s="auto"),s=GF(s,i,t,e,r?r.allowedPositions:void 0);let c=jI(t,i,s);return{options:r||{modifiers:{}},instance:{target:t,host:e,arrow:void 0},offsets:{target:c,host:i,arrow:void 0},positionFixed:!1,placement:s,placementAuto:o}}function PQ(t){if(!QF(t.options,"preventOverflow"))return t;let e="transform",n=t.instance.target.style,{top:r,left:i,[e]:o}=n;n.top="",n.left="",n[e]="";let s=UI(t.instance.target,t.instance.host,0,t.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);n.top=r,n.left=i,n[e]=o;let a=["left","right","top","bottom"],c={primary(u){let l=t.offsets.target[u];return(t.offsets.target[u]??0)<(s[u]??0)&&(l=Math.max(t.offsets.target[u]??0,s[u]??0)),{[u]:l}},secondary(u){let l=u==="right",d=l?"left":"top",p=l?"width":"height",f=t.offsets.target[d];return(t.offsets.target[u]??0)>(s[u]??0)&&(f=Math.min(t.offsets.target[d]??0,(s[u]??0)-t.offsets.target[p])),{[d]:f}}};return a.forEach(u=>{let l=["left","top","start"].indexOf(u)!==-1?c.primary:c.secondary;t.offsets.target=D(D({},t.offsets.target),l(u))}),t}function TQ(t){let e=t.placement,n=e.split(" ")[0],r=e.split(" ")[1];if(r){let{host:i,target:o}=t.offsets,s=["bottom","top"].indexOf(n)!==-1,a=s?"left":"top",c=s?"width":"height",u={start:{[a]:i[a]},end:{[a]:(i[a]??0)+i[c]-o[c]}};t.offsets.target=ee(D({},o),{[a]:a===r?u.start[a]:u.end[a]})}return t}var qI=class{position(e,n){return this.offset(e,n)}offset(e,n){return JF(n,e)}positionElements(e,n,r,i,o){let s=[_Q,TQ,PQ,DQ],a=zF[r],c=RQ(n,e,a,o);if(c)return s.reduce((u,l)=>l(u),c)}},AQ=new qI;function MQ(t,e,n,r,i,o){let s=AQ.positionElements(t,e,n,r,i);if(!s)return;let a=CQ(s);VF(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${a.left}px, ${a.top}px, 0px)`},o),s.instance.arrow&&VF(s.instance.arrow,s.offsets.arrow,o),IQ(s,o)}var Mc=(()=>{let e=class e{constructor(r,i,o){this.update$$=new Ye,this.positionElements=new Map,this.isDisabled=!1,OE(o)&&r.runOutsideAngular(()=>{this.triggerEvent$=rw(La(window,"scroll",{passive:!0}),La(window,"resize",{passive:!0}),B(0,YS),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(s=>{MQ(ng(s.target),ng(s.element),s.attachment,s.appendToBody,this.options,i.createRenderer(null,null))})})})}position(r){this.addPositionElement(r)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(r){this.positionElements.set(ng(r.element),r)}calcPosition(){this.update$$.next(null)}deletePositionElement(r){this.positionElements.delete(ng(r))}setOptions(r){this.options=r}};e.\u0275fac=function(i){return new(i||e)(x(_e),x(ho),x($n))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ng(t){return typeof t=="string"?document.querySelector(t):t instanceof pt?t.nativeElement:t??null}var Ms=class{constructor(e,n,r){this.nodes=e,this.viewRef=n,this.componentRef=r}},HI=class{constructor(e,n,r,i,o,s,a,c,u){this._viewContainerRef=e,this._renderer=n,this._elementRef=r,this._injector=i,this._componentFactoryResolver=o,this._ngZone=s,this._applicationRef=a,this._posService=c,this._document=u,this.onBeforeShow=new ne,this.onShown=new ne,this.onBeforeHide=new ne,this.onHidden=new ne,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return this._isHiding?!1:!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);let n=xt.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(n,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof pt&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),typeof this.container=="string"&&typeof this._document<"u"){let r=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);let n=this._componentRef.location.nativeElement;return n.parentNode?.removeChild(n),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._componentRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){if(this.isShown){this.hide();return}this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||this._elementRef?.nativeElement;let n=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),r=this._listenOpts.show=o=>{e.show?e.show(o):this.show(o),o()},i=o=>{this.isShown?n():r(o)};return this._renderer&&(this._unregisterListenersFn=OF(this._renderer,{target:e.target,triggers:e.triggers,show:r,hide:n,toggle:i})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,n){return e&&n&&(this._inlineViewRef=e.createEmbeddedView(n)),this}_registerOutsideClick(){if(!this._componentRef||!this._componentRef.location)return;let e=Function.prototype,n=Function.prototype;if(this._listenOpts.outsideClick){let r=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(e=xF(this._renderer,{targets:[r,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}if(this._listenOpts.outsideEsc&&this._renderer&&this._elementRef){let r=this._componentRef.location.nativeElement;n=NF(this._renderer,{targets:[r,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()})}this._globalListener=()=>{e(),n()}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:this.container==="body"})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,n,r){if(!e)return new Ms([]);if(e instanceof wi){if(this._viewContainerRef){let s=this._viewContainerRef.createEmbeddedView(e,n);return s.markForCheck(),new Ms([s.rootNodes],s)}let o=e.createEmbeddedView({});return this._applicationRef.attachView(o),new Ms([o.rootNodes],o)}if(typeof e=="function"){let o=this._componentFactoryResolver.resolveComponentFactory(e),s=xt.create({providers:this._providers,parent:this._injector}),a=o.create(s);return Object.assign(a.instance,r),this._applicationRef.attachView(a.hostView),new Ms([[a.location.nativeElement]],a.hostView,a)}let i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new Ms([i])}},ig=(()=>{let e=class e{constructor(r,i,o,s,a,c){this._componentFactoryResolver=r,this._ngZone=i,this._injector=o,this._posService=s,this._applicationRef=a,this._document=c}createLoader(r,i,o){return new HI(i,o,r,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}};e.\u0275fac=function(i){return new(i||e)(x(fo),x(_e),x(xt),x(Mc),x(Ti),x(at))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var xQ=["*"],$I=(()=>{let e=class e{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),NQ=(()=>{let e=class e{get _bsVersions(){return Ro()}constructor(r){Object.assign(this,r)}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=Yl[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}};e.\u0275fac=function(i){return new(i||e)(V($I))},e.\u0275cmp=Ur({type:e,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(i,o){i&2&&(cc("id",o.id),uc("show tooltip in tooltip-"+o.placement+" bs-tooltip-"+o.placement+" "+o.placement+" "+o.containerClass))},ngContentSelectors:xQ,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(i,o){i&1&&(uh(),$r(0,"div",0),kt(1,"div",1),lh(2),hn())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none;position:absolute}.tooltip[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0});let t=e;return t})(),kQ=0,YF=(()=>{let e=class e{get isOpen(){return this._tooltip.isShown}set isOpen(r){r?this.show():this.hide()}set htmlContent(r){gn("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=r}set _placement(r){gn("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=r}set _isOpen(r){gn("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=r}get _isOpen(){return gn("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(r){gn("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!r}get _enable(){return gn("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(r){gn('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=r?"body":this.container}get _appendToBody(){return gn('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container==="body"}set _popupClass(r){gn("tooltipClass deprecated")}set _tooltipContext(r){gn("tooltipContext deprecated")}set _tooltipPopupDelay(r){gn("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=r}get _tooltipTrigger(){return gn("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(r){gn("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(r||"").toString()}constructor(r,i,o,s,a,c){this._elementRef=s,this._renderer=a,this._positionService=c,this.tooltipId=kQ++,this.adaptivePosition=!0,this.tooltipChange=new ne,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new ne,this._tooltip=i.createLoader(this._elementRef,r,this._renderer).provide({provide:$I,useValue:o}),Object.assign(this,o),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(r=>{r||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;let r=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(NQ).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},i=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=nw(this.delay).subscribe(()=>{r(),i()}),this.triggers&&FI(this.triggers).forEach(o=>{o.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,o.close,()=>{this._delaySubscription?.unsubscribe(),i()}))})):r()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(V(yr),V(ig),V($I),V(pt),V(Hr),V(Mc))},e.\u0275dir=Xe({type:e,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:[0,"tooltipHtml","htmlContent"],_placement:[0,"tooltipPlacement","_placement"],_isOpen:[0,"tooltipIsOpen","_isOpen"],_enable:[0,"tooltipEnable","_enable"],_appendToBody:[0,"tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:[0,"tooltipClass","_popupClass"],_tooltipContext:[0,"tooltipContext","_tooltipContext"],_tooltipPopupDelay:[0,"tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:[0,"tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]});let t=e;return jp([Xh(),qp("design:type",Object)],t.prototype,"tooltip",void 0),t})(),XF=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[ig,Mc]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({imports:[ki]});let t=e;return t})();var rs=X3(z3());var Pue=["*"];function Tue(t,e){if(t&1){let n=h1();kt(0,"button",2),Pn("click",function(){Tx(n);let i=mE(2);return Ax(i.close())}),kt(1,"span",3),Es(2,"\xD7"),hn(),kt(3,"span",4),Es(4,"Close"),hn()()}}function Aue(t,e){if(t&1&&(kt(0,"div",1),ah(1,Tue,5,0,"ng-template",0),lh(2),hn()),t&2){let n=mE();uc("alert alert-"+n.type),Wn("ngClass",n.classes),bs(),Wn("ngIf",n.dismissible)}}var Mue=(()=>{let e=class e{constructor(){this.type="warning",this.dismissible=!1,this.dismissOnTimeout=void 0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),U3=(()=>{let e=class e{constructor(r,i){this.changeDetection=i,this.type="warning",this.dismissible=!1,this.isOpen=!0,this.onClose=new ne,this.onClosed=new ne,this.classes="",this.dismissibleChange=new ne,Object.assign(this,r),this.dismissibleChange.subscribe(()=>{this.classes=this.dismissible?"alert-dismissible":"",this.changeDetection.markForCheck()})}ngOnInit(){this.dismissOnTimeout&&setTimeout(()=>this.close(),parseInt(this.dismissOnTimeout,10))}close(){this.isOpen&&(this.onClose.emit(this),this.isOpen=!1,this.changeDetection.markForCheck(),this.onClosed.emit(this))}};e.\u0275fac=function(i){return new(i||e)(V(Mue),V(Ai))},e.\u0275cmp=Ur({type:e,selectors:[["alert"],["bs-alert"]],inputs:{type:"type",dismissible:"dismissible",dismissOnTimeout:"dismissOnTimeout",isOpen:"isOpen"},outputs:{onClose:"onClose",onClosed:"onClosed"},ngContentSelectors:Pue,decls:1,vars:1,consts:[[3,"ngIf"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"sr-only","visually-hidden"]],template:function(i,o){i&1&&(uh(),ah(0,Aue,3,4,"ng-template",0)),i&2&&Wn("ngIf",o.isOpen)},dependencies:[hc,q1],encapsulation:2,changeDetection:0});let t=e;return jp([Xh(),qp("design:type",Object)],t.prototype,"dismissible",void 0),t})(),H3=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({imports:[ki]});let t=e;return t})();var xue=t=>({processing:t}),Nue=t=>({disabled:t}),kue=t=>({active:t}),S0e=(()=>{class t{onRecordReady=new ne;onStopRecording=new ne;disabled=!0;isProcessing=!1;recordOnHold=!1;AVATAR_IS_RECORDING_KEY=zh.AVATAR_IS_RECORDING_KEY;result="";recognizedText="";aiSpeechToTextService=E(PF);isRecording=!1;recognizer;speechConfig;stream;showMessageEmptyPopup=!1;constraints={video:!1,audio:{channelCount:1,sampleRate:16e3,sampleSize:16,volume:1}};constructor(){}ngOnInit(){this.aiSpeechToTextService.requestAuthorizationToken().subscribe(({token:n,region:r})=>{this.speechConfig=rs.SpeechConfig.fromAuthorizationToken(n,r),this.disabled=!1})}startRecording(){this.isRecording||(this.isRecording=!0,localStorage.setItem(this.AVATAR_IS_RECORDING_KEY,String(!0)),navigator.mediaDevices.getUserMedia(this.constraints).then(n=>{try{this.stream=n;let r=rs.AudioConfig.fromStreamInput(n),i=rs.AutoDetectSourceLanguageConfig.fromLanguages(["ar-QA","en-US"]);this.recognizer=rs.SpeechRecognizer.FromConfig(this.speechConfig,i,r),this.recognizer.recognizing=(o,s)=>{this.isProcessing=!0,s.result.text&&this.isRecording&&this.onRecordReady.emit(s.result.text)},this.recognizedText="",this.recognizer.recognized=(o,s)=>{this.isProcessing=!1,s.result.text&&(this.recognizedText+=" "+s.result.text),this.isRecording&&this.onRecordReady.emit(this.recognizedText)},this.recognizer.startContinuousRecognitionAsync()}catch{this.isRecording=!1,this.stream.getTracks().forEach(r=>{r.stop()})}}))}stopRecording(){this.isRecording&&(localStorage.setItem(this.AVATAR_IS_RECORDING_KEY,String(!1)),this.isRecording=!1,this.onStopRecording.emit(),this.recognizer.stopContinuousRecognitionAsync(),this.recognizedText||(this.showMessageEmptyPopup=!0,setTimeout(()=>{this.showMessageEmptyPopup=!1},1e3)))}canceledRecording(){this.recognizer.close(),this.isRecording=!1,localStorage.setItem(this.AVATAR_IS_RECORDING_KEY,String(!1))}ngOnDestroy(){}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ur({type:t,selectors:[["audio-recorder"]],inputs:{disabled:"disabled",isProcessing:"isProcessing",recordOnHold:"recordOnHold"},outputs:{onRecordReady:"onRecordReady",onStopRecording:"onStopRecording"},standalone:!0,features:[lc],decls:8,vars:13,consts:[[1,"mic-container","rounded-circle","position-relative",2,"box-shadow","0px 1px 13px #00000080"],[3,"onClick","active"],[1,"spinner",3,"ngClass"],["type","button",1,"btn","circle","border-0",3,"click","mousedown","mouseup","touchstart","touchend","tooltip","disabled","ngClass"],[1,"mdi","mdi-microphone"],["type","danger py-0 px-3 rounded-pill",1,"text-nowrap","position-absolute",2,"z-index","2","top","-40px",3,"isOpen"],[2,"font-size","12px"]],template:function(r,i){r&1&&(kt(0,"div",0)(1,"stop-processing-btn",1),Pn("onClick",function(){return i.canceledRecording()}),hn(),$r(2,"div",2),kt(3,"button",3),Pn("click",function(){return!i.isRecording&&!i.recordOnHold?i.startRecording():i.stopRecording()})("mousedown",function(){return i.recordOnHold&&i.startRecording()})("mouseup",function(){return i.recordOnHold&&i.stopRecording()})("touchstart",function(){return i.startRecording()})("touchend",function(){return i.stopRecording()}),$r(4,"i",4),hn(),kt(5,"alert",5)(6,"small",6),Es(7," No speech recognized "),hn()()()),r&2&&(bs(),Wn("active",i.isRecording&&!i.recordOnHold),bs(),Wn("ngClass",dc(7,xue,i.isProcessing)),bs(),Wn("tooltip",i.isRecording?"Stop Recording":"Start Recording")("disabled",i.disabled)("ngClass",dc(9,Nue,i.disabled))("ngClass",dc(11,kue,i.isRecording)),bs(2),Wn("isOpen",i.showMessageEmptyPopup))},dependencies:[ki,hc,TF,XF,YF,H3,U3],styles:['.mic-container[_ngcontent-%COMP%]{height:34px;width:34px;margin-top:2px;display:flex;align-items:center;justify-content:center}.mic-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;background:#fff;display:flex;justify-content:center;align-items:center;z-index:1;opacity:1;transition:.5s;box-shadow:0 0 2px #00000024,0 1px 18px #0000001f,0 3px 5px -1px #0002}.mic-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#b2b1b1;font-size:23px;transition:.9s}.mic-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:before{content:"";width:40px;height:40px;border-radius:50%;opacity:.2;z-index:-1;position:absolute}.mic-container[_ngcontent-%COMP%]   .circle.active[_ngcontent-%COMP%]:before{background:var(--bs-primary);animation:_ngcontent-%COMP%_bounce .8s linear infinite .5s}.mic-container[_ngcontent-%COMP%]   .circle.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-primary)}.mic-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:41px;height:41px;border-radius:50%;position:absolute;transform:rotate(0);background:linear-gradient(to left,#dede4e,transparent,transparent,#70f570,#8c8cff,transparent,transparent,#dede4e);animation:_ngcontent-%COMP%_spin 2s linear infinite .5s;opacity:0}.mic-container[_ngcontent-%COMP%]   .spinner.processing[_ngcontent-%COMP%]{opacity:1}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.disabled[_ngcontent-%COMP%]{background:#dfd9d9!important}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:scale(1)}20%{transform:scale(.6)}40%{transform:scale(.75)}60%{transform:scale(.4)}80%{transform:scale(.25)}}']})}return t})();var _0e=(()=>{class t extends Ac{http=E(Sl);tag="common/";constructor(){super("avatar")}startStream(){return this.http.post(this.baseUrl+"/start-stream",{})}sendCandidate(n,r){return this.http.post(`${this.baseUrl}/send-candidate/${n}`,{candidate:r})}sendAnswer(n,r){return this.http.put(`${this.baseUrl}/send-answer/${n}`,{answer:r})}closeStream(n){return this.http.delete(`${this.baseUrl}/close-stream/${n}`)}renderText(n,r){return this.http.post(`${this.baseUrl}/render-text/${n}`,{text:r})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{D as a,ee as b,Ye as c,Te as d,J as e,Qt as f,gi as g,mi as h,hr as i,Zt as j,tf as k,ot as l,Ss as m,P as n,dn as o,N as p,x as q,E as r,Ur as s,pn as t,Xe as u,Ii as v,Tx as w,Ax as x,ne as y,_e as z,pt as A,$n as B,Rve as C,iW as D,Pve as E,Tve as F,bs as G,V as H,ho as I,Hr as J,ah as K,cc as L,Wn as M,ch as N,xve as O,uc as P,Nve as Q,kve as R,Fve as S,Lve as T,kt as U,hn as V,$r as W,$5 as X,h1 as Y,Pn as Z,mE as _,uh as $,lh as aa,X5 as ba,jve as ca,e9 as da,t9 as ea,qve as fa,Es as ga,r9 as ha,m1 as ia,i9 as ja,Bve as ka,o9 as la,pl as ma,lc as na,dc as oa,Vve as pa,zve as qa,Uve as ra,Hve as sa,Ai as ta,at as ua,hc as va,vme as wa,q1 as xa,mme as ya,ki as za,OE as Aa,Gn as Ba,Sl as Ca,Mme as Da,Ome as Ea,rye as Fa,Gr as Ga,r7 as Ha,ji as Ia,bye as Ja,Eye as Ka,Iye as La,zh as Ma,Ac as Na,_0e as Oa,TI as Pa,cF as Qa,Xk as Ra,Hye as Sa,$ye as Ta,rQ as Ua,iQ as Va,sQ as Wa,Gye as Xa,cQ as Ya,Kye as Za,Jye as _a,PF as $a,TF as ab,fCe as bb,AF as cb,ig as db,YF as eb,XF as fb,S0e as gb};
