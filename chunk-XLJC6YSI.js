var v8=Object.create;var US=Object.defineProperty,m8=Object.defineProperties,y8=Object.getOwnPropertyDescriptor,C8=Object.getOwnPropertyDescriptors,S8=Object.getOwnPropertyNames,CM=Object.getOwnPropertySymbols,wM=Object.getPrototypeOf,bM=Object.prototype.hasOwnProperty,w8=Object.prototype.propertyIsEnumerable,b8=Reflect.get;var SM=(t,e,n)=>e in t?US(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b=(t,e)=>{for(var n in e||={})bM.call(e,n)&&SM(t,n,e[n]);if(CM)for(var n of CM(e))w8.call(e,n)&&SM(t,n,e[n]);return t},$=(t,e)=>m8(t,C8(e));var h=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var E8=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of S8(e))!bM.call(t,i)&&i!==n&&US(t,i,{get:()=>e[i],enumerable:!(r=y8(e,i))||r.enumerable});return t};var I8=(t,e,n)=>(n=t!=null?v8(wM(t)):{},E8(e||!t||!t.__esModule?US(n,"default",{value:t,enumerable:!0}):n,t));var Ye=(t,e,n)=>b8(wM(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(u){i(u)}},s=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var iD=h(rD=>{"use strict";Object.defineProperty(rD,"__esModule",{value:!0});rD.default=dZ;var fg,lZ=new Uint8Array(16);function dZ(){if(!fg&&(fg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fg(lZ)}});var Sj=h(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});hg.default=void 0;var pZ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;hg.default=pZ});var id=h(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.default=void 0;var fZ=hZ(Sj());function hZ(t){return t&&t.__esModule?t:{default:t}}function gZ(t){return typeof t=="string"&&fZ.default.test(t)}var vZ=gZ;gg.default=vZ});var sd=h(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.default=void 0;od.unsafeStringify=wj;var mZ=yZ(id());function yZ(t){return t&&t.__esModule?t:{default:t}}var St=[];for(let t=0;t<256;++t)St.push((t+256).toString(16).slice(1));function wj(t,e=0){return St[t[e+0]]+St[t[e+1]]+St[t[e+2]]+St[t[e+3]]+"-"+St[t[e+4]]+St[t[e+5]]+"-"+St[t[e+6]]+St[t[e+7]]+"-"+St[t[e+8]]+St[t[e+9]]+"-"+St[t[e+10]]+St[t[e+11]]+St[t[e+12]]+St[t[e+13]]+St[t[e+14]]+St[t[e+15]]}function CZ(t,e=0){let n=wj(t,e);if(!(0,mZ.default)(n))throw TypeError("Stringified UUID is invalid");return n}var SZ=CZ;od.default=SZ});var Ej=h(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.default=void 0;var wZ=EZ(iD()),bZ=sd();function EZ(t){return t&&t.__esModule?t:{default:t}}var bj,oD,sD=0,aD=0;function IZ(t,e,n){let r=e&&n||0,i=e||new Array(16);t=t||{};let o=t.node||bj,s=t.clockseq!==void 0?t.clockseq:oD;if(o==null||s==null){let p=t.random||(t.rng||wZ.default)();o==null&&(o=bj=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),s==null&&(s=oD=(p[6]<<8|p[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:aD+1,u=a-sD+(c-aD)/1e4;if(u<0&&t.clockseq===void 0&&(s=s+1&16383),(u<0||a>sD)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");sD=a,aD=c,oD=s,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=l&255;let d=a/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=s>>>8|128,i[r++]=s&255;for(let p=0;p<6;++p)i[r+p]=o[p];return e||(0,bZ.unsafeStringify)(i)}var DZ=IZ;vg.default=DZ});var cD=h(mg=>{"use strict";Object.defineProperty(mg,"__esModule",{value:!0});mg.default=void 0;var _Z=RZ(id());function RZ(t){return t&&t.__esModule?t:{default:t}}function PZ(t){if(!(0,_Z.default)(t))throw TypeError("Invalid UUID");let e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var TZ=PZ;mg.default=TZ});var uD=h(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.URL=ks.DNS=void 0;ks.default=NZ;var AZ=sd(),MZ=OZ(cD());function OZ(t){return t&&t.__esModule?t:{default:t}}function xZ(t){t=unescape(encodeURIComponent(t));let e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var Ij="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ks.DNS=Ij;var Dj="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ks.URL=Dj;function NZ(t,e,n){function r(i,o,s,a){var c;if(typeof i=="string"&&(i=xZ(i)),typeof o=="string"&&(o=(0,MZ.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=n(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=u[l];return s}return(0,AZ.unsafeStringify)(u)}try{r.name=t}catch{}return r.DNS=Ij,r.URL=Dj,r}});var Rj=h(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.default=void 0;function kZ(t){if(typeof t=="string"){let e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return FZ(jZ(LZ(t),t.length*8))}function FZ(t){let e=[],n=t.length*32,r="0123456789abcdef";for(let i=0;i<n;i+=8){let o=t[i>>5]>>>i%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);e.push(s)}return e}function _j(t){return(t+64>>>9<<4)+14+1}function jZ(t,e){t[e>>5]|=128<<e%32,t[_j(e)-1]=e;let n=1732584193,r=-271733879,i=-1732584194,o=271733878;for(let s=0;s<t.length;s+=16){let a=n,c=r,u=i,l=o;n=Ft(n,r,i,o,t[s],7,-680876936),o=Ft(o,n,r,i,t[s+1],12,-389564586),i=Ft(i,o,n,r,t[s+2],17,606105819),r=Ft(r,i,o,n,t[s+3],22,-1044525330),n=Ft(n,r,i,o,t[s+4],7,-176418897),o=Ft(o,n,r,i,t[s+5],12,1200080426),i=Ft(i,o,n,r,t[s+6],17,-1473231341),r=Ft(r,i,o,n,t[s+7],22,-45705983),n=Ft(n,r,i,o,t[s+8],7,1770035416),o=Ft(o,n,r,i,t[s+9],12,-1958414417),i=Ft(i,o,n,r,t[s+10],17,-42063),r=Ft(r,i,o,n,t[s+11],22,-1990404162),n=Ft(n,r,i,o,t[s+12],7,1804603682),o=Ft(o,n,r,i,t[s+13],12,-40341101),i=Ft(i,o,n,r,t[s+14],17,-1502002290),r=Ft(r,i,o,n,t[s+15],22,1236535329),n=jt(n,r,i,o,t[s+1],5,-165796510),o=jt(o,n,r,i,t[s+6],9,-1069501632),i=jt(i,o,n,r,t[s+11],14,643717713),r=jt(r,i,o,n,t[s],20,-373897302),n=jt(n,r,i,o,t[s+5],5,-701558691),o=jt(o,n,r,i,t[s+10],9,38016083),i=jt(i,o,n,r,t[s+15],14,-660478335),r=jt(r,i,o,n,t[s+4],20,-405537848),n=jt(n,r,i,o,t[s+9],5,568446438),o=jt(o,n,r,i,t[s+14],9,-1019803690),i=jt(i,o,n,r,t[s+3],14,-187363961),r=jt(r,i,o,n,t[s+8],20,1163531501),n=jt(n,r,i,o,t[s+13],5,-1444681467),o=jt(o,n,r,i,t[s+2],9,-51403784),i=jt(i,o,n,r,t[s+7],14,1735328473),r=jt(r,i,o,n,t[s+12],20,-1926607734),n=Lt(n,r,i,o,t[s+5],4,-378558),o=Lt(o,n,r,i,t[s+8],11,-2022574463),i=Lt(i,o,n,r,t[s+11],16,1839030562),r=Lt(r,i,o,n,t[s+14],23,-35309556),n=Lt(n,r,i,o,t[s+1],4,-1530992060),o=Lt(o,n,r,i,t[s+4],11,1272893353),i=Lt(i,o,n,r,t[s+7],16,-155497632),r=Lt(r,i,o,n,t[s+10],23,-1094730640),n=Lt(n,r,i,o,t[s+13],4,681279174),o=Lt(o,n,r,i,t[s],11,-358537222),i=Lt(i,o,n,r,t[s+3],16,-722521979),r=Lt(r,i,o,n,t[s+6],23,76029189),n=Lt(n,r,i,o,t[s+9],4,-640364487),o=Lt(o,n,r,i,t[s+12],11,-421815835),i=Lt(i,o,n,r,t[s+15],16,530742520),r=Lt(r,i,o,n,t[s+2],23,-995338651),n=qt(n,r,i,o,t[s],6,-198630844),o=qt(o,n,r,i,t[s+7],10,1126891415),i=qt(i,o,n,r,t[s+14],15,-1416354905),r=qt(r,i,o,n,t[s+5],21,-57434055),n=qt(n,r,i,o,t[s+12],6,1700485571),o=qt(o,n,r,i,t[s+3],10,-1894986606),i=qt(i,o,n,r,t[s+10],15,-1051523),r=qt(r,i,o,n,t[s+1],21,-2054922799),n=qt(n,r,i,o,t[s+8],6,1873313359),o=qt(o,n,r,i,t[s+15],10,-30611744),i=qt(i,o,n,r,t[s+6],15,-1560198380),r=qt(r,i,o,n,t[s+13],21,1309151649),n=qt(n,r,i,o,t[s+4],6,-145523070),o=qt(o,n,r,i,t[s+11],10,-1120210379),i=qt(i,o,n,r,t[s+2],15,718787259),r=qt(r,i,o,n,t[s+9],21,-343485551),n=Oo(n,a),r=Oo(r,c),i=Oo(i,u),o=Oo(o,l)}return[n,r,i,o]}function LZ(t){if(t.length===0)return[];let e=t.length*8,n=new Uint32Array(_j(e));for(let r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function Oo(t,e){let n=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(n>>16)<<16|n&65535}function qZ(t,e){return t<<e|t>>>32-e}function yg(t,e,n,r,i,o){return Oo(qZ(Oo(Oo(e,t),Oo(r,o)),i),n)}function Ft(t,e,n,r,i,o,s){return yg(e&n|~e&r,t,e,i,o,s)}function jt(t,e,n,r,i,o,s){return yg(e&r|n&~r,t,e,i,o,s)}function Lt(t,e,n,r,i,o,s){return yg(e^n^r,t,e,i,o,s)}function qt(t,e,n,r,i,o,s){return yg(n^(e|~r),t,e,i,o,s)}var BZ=kZ;Cg.default=BZ});var Tj=h(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.default=void 0;var VZ=Pj(uD()),zZ=Pj(Rj());function Pj(t){return t&&t.__esModule?t:{default:t}}var UZ=(0,VZ.default)("v3",48,zZ.default),HZ=UZ;Sg.default=HZ});var Aj=h(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0});wg.default=void 0;var $Z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),WZ={randomUUID:$Z};wg.default=WZ});var xj=h(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});bg.default=void 0;var Mj=Oj(Aj()),GZ=Oj(iD()),KZ=sd();function Oj(t){return t&&t.__esModule?t:{default:t}}function JZ(t,e,n){if(Mj.default.randomUUID&&!e&&!t)return Mj.default.randomUUID();t=t||{};let r=t.random||(t.rng||GZ.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return(0,KZ.unsafeStringify)(r)}var QZ=JZ;bg.default=QZ});var Nj=h(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});Eg.default=void 0;function ZZ(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function lD(t,e){return t<<e|t>>>32-e}function YZ(t){let e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let s=unescape(encodeURIComponent(t));t=[];for(let a=0;a<s.length;++a)t.push(s.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let r=t.length/4+2,i=Math.ceil(r/16),o=new Array(i);for(let s=0;s<i;++s){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=t[s*64+c*4]<<24|t[s*64+c*4+1]<<16|t[s*64+c*4+2]<<8|t[s*64+c*4+3];o[s]=a}o[i-1][14]=(t.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(t.length-1)*8&4294967295;for(let s=0;s<i;++s){let a=new Uint32Array(80);for(let f=0;f<16;++f)a[f]=o[s][f];for(let f=16;f<80;++f)a[f]=lD(a[f-3]^a[f-8]^a[f-14]^a[f-16],1);let c=n[0],u=n[1],l=n[2],d=n[3],p=n[4];for(let f=0;f<80;++f){let g=Math.floor(f/20),m=lD(c,5)+ZZ(g,u,l,d)+p+e[g]+a[f]>>>0;p=d,d=l,l=lD(u,30)>>>0,u=c,c=m}n[0]=n[0]+c>>>0,n[1]=n[1]+u>>>0,n[2]=n[2]+l>>>0,n[3]=n[3]+d>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var XZ=YZ;Eg.default=XZ});var Fj=h(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.default=void 0;var eY=kj(uD()),tY=kj(Nj());function kj(t){return t&&t.__esModule?t:{default:t}}var nY=(0,eY.default)("v5",80,tY.default),rY=nY;Ig.default=rY});var jj=h(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.default=void 0;var iY="00000000-0000-0000-0000-000000000000";Dg.default=iY});var Lj=h(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});_g.default=void 0;var oY=sY(id());function sY(t){return t&&t.__esModule?t:{default:t}}function aY(t){if(!(0,oY.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var cY=aY;_g.default=cY});var qj=h(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Object.defineProperty(Er,"NIL",{enumerable:!0,get:function(){return fY.default}});Object.defineProperty(Er,"parse",{enumerable:!0,get:function(){return mY.default}});Object.defineProperty(Er,"stringify",{enumerable:!0,get:function(){return vY.default}});Object.defineProperty(Er,"v1",{enumerable:!0,get:function(){return uY.default}});Object.defineProperty(Er,"v3",{enumerable:!0,get:function(){return lY.default}});Object.defineProperty(Er,"v4",{enumerable:!0,get:function(){return dY.default}});Object.defineProperty(Er,"v5",{enumerable:!0,get:function(){return pY.default}});Object.defineProperty(Er,"validate",{enumerable:!0,get:function(){return gY.default}});Object.defineProperty(Er,"version",{enumerable:!0,get:function(){return hY.default}});var uY=Bi(Ej()),lY=Bi(Tj()),dY=Bi(xj()),pY=Bi(Fj()),fY=Bi(jj()),hY=Bi(Lj()),gY=Bi(id()),vY=Bi(sd()),mY=Bi(cD());function Bi(t){return t&&t.__esModule?t:{default:t}}});var xo=h(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.createNoDashGuid=qc.createGuid=void 0;var yY=qj(),Bj=()=>yY.v4();qc.createGuid=Bj;var CY=()=>Bj().replace(new RegExp("-","g"),"").toUpperCase();qc.createNoDashGuid=CY});var Bc=h(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.PlatformEvent=Fs.EventType=void 0;var SY=xo(),wY;(function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.None=4]="None"})(wY=Fs.EventType||(Fs.EventType={}));var dD=class{constructor(e,n){this.privName=e,this.privEventId=SY.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=n,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}};Fs.PlatformEvent=dD});var Vj=h(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.AudioStreamNodeErrorEvent=Ue.AudioStreamNodeDetachedEvent=Ue.AudioStreamNodeAttachedEvent=Ue.AudioStreamNodeAttachingEvent=Ue.AudioStreamNodeEvent=Ue.AudioSourceErrorEvent=Ue.AudioSourceOffEvent=Ue.AudioSourceReadyEvent=Ue.AudioSourceInitializingEvent=Ue.AudioSourceEvent=void 0;var pD=Bc(),No=class extends pD.PlatformEvent{constructor(e,n,r=pD.EventType.Info){super(e,r),this.privAudioSourceId=n}get audioSourceId(){return this.privAudioSourceId}};Ue.AudioSourceEvent=No;var fD=class extends No{constructor(e){super("AudioSourceInitializingEvent",e)}};Ue.AudioSourceInitializingEvent=fD;var hD=class extends No{constructor(e){super("AudioSourceReadyEvent",e)}};Ue.AudioSourceReadyEvent=hD;var gD=class extends No{constructor(e){super("AudioSourceOffEvent",e)}};Ue.AudioSourceOffEvent=gD;var vD=class extends No{constructor(e,n){super("AudioSourceErrorEvent",e,pD.EventType.Error),this.privError=n}get error(){return this.privError}};Ue.AudioSourceErrorEvent=vD;var js=class extends No{constructor(e,n,r){super(e,n),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}};Ue.AudioStreamNodeEvent=js;var mD=class extends js{constructor(e,n){super("AudioStreamNodeAttachingEvent",e,n)}};Ue.AudioStreamNodeAttachingEvent=mD;var yD=class extends js{constructor(e,n){super("AudioStreamNodeAttachedEvent",e,n)}};Ue.AudioStreamNodeAttachedEvent=yD;var CD=class extends js{constructor(e,n){super("AudioStreamNodeDetachedEvent",e,n)}};Ue.AudioStreamNodeDetachedEvent=CD;var SD=class extends js{constructor(e,n,r){super("AudioStreamNodeErrorEvent",e,n),this.privError=r}get error(){return this.privError}};Ue.AudioStreamNodeErrorEvent=SD});var zj=h(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.ConnectionMessageSentEvent=et.ConnectionMessageReceivedEvent=et.ConnectionEstablishErrorEvent=et.ConnectionErrorEvent=et.ConnectionClosedEvent=et.ConnectionEstablishedEvent=et.ConnectionStartEvent=et.ConnectionEvent=et.ServiceEvent=void 0;var Ls=Bc(),wD=class extends Ls.PlatformEvent{constructor(e,n,r=Ls.EventType.Info){super(e,r),this.privJsonResult=n}get jsonString(){return this.privJsonResult}};et.ServiceEvent=wD;var ni=class extends Ls.PlatformEvent{constructor(e,n,r=Ls.EventType.Info){super(e,r),this.privConnectionId=n}get connectionId(){return this.privConnectionId}};et.ConnectionEvent=ni;var bD=class extends ni{constructor(e,n,r){super("ConnectionStartEvent",e),this.privUri=n,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}};et.ConnectionStartEvent=bD;var ED=class extends ni{constructor(e){super("ConnectionEstablishedEvent",e)}};et.ConnectionEstablishedEvent=ED;var ID=class extends ni{constructor(e,n,r){super("ConnectionClosedEvent",e,Ls.EventType.Debug),this.privReason=r,this.privStatusCode=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};et.ConnectionClosedEvent=ID;var DD=class extends ni{constructor(e,n,r){super("ConnectionErrorEvent",e,Ls.EventType.Debug),this.privMessage=n,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}};et.ConnectionErrorEvent=DD;var _D=class extends ni{constructor(e,n,r){super("ConnectionEstablishErrorEvent",e,Ls.EventType.Error),this.privStatusCode=n,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};et.ConnectionEstablishErrorEvent=_D;var RD=class extends ni{constructor(e,n,r){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=n,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};et.ConnectionMessageReceivedEvent=RD;var PD=class extends ni{constructor(e,n,r){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=n,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}};et.ConnectionMessageSentEvent=PD});var Ir=h(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.ObjectDisposedError=ko.InvalidOperationError=ko.ArgumentNullError=void 0;var TD=class extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}};ko.ArgumentNullError=TD;var AD=class extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}};ko.InvalidOperationError=AD;var MD=class extends Error{constructor(e,n){super(n),this.name=e+"ObjectDisposed",this.message=n}};ko.ObjectDisposedError=MD});var xD=h(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.ConnectionMessage=Bs.MessageType=void 0;var Rg=Ir(),bY=xo(),qs;(function(t){t[t.Text=0]="Text",t[t.Binary=1]="Binary"})(qs=Bs.MessageType||(Bs.MessageType={}));var OD=class{constructor(e,n,r,i){if(this.privBody=null,e===qs.Text&&n&&typeof n!="string")throw new Rg.InvalidOperationError("Payload must be a string");if(e===qs.Binary&&n&&!(n instanceof ArrayBuffer))throw new Rg.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=n,this.privHeaders=r||{},this.privId=i||bY.createNoDashGuid(),this.messageType){case qs.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case qs.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===qs.Binary)throw new Rg.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===qs.Text)throw new Rg.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}};Bs.ConnectionMessage=OD});var Uj=h(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});Pg.ConnectionOpenResponse=void 0;var ND=class{constructor(e,n){this.privStatusCode=e,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};Pg.ConnectionOpenResponse=ND});var Hj=h(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.DeferralMap=void 0;var kD=class{constructor(){this.privMap={}}add(e,n){this.privMap[e]=n}getId(e){return this.privMap[e]}complete(e,n){try{this.privMap[e].resolve(n)}catch(r){this.privMap[e].reject(r)}finally{this.privMap[e]=void 0}}};Tg.DeferralMap=kD});var jD=h(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.SendingAgentContextMessageEvent=Vc.DialogEvent=void 0;var $j=Bc(),Ag=class extends $j.PlatformEvent{constructor(e,n=$j.EventType.Info){super(e,n)}};Vc.DialogEvent=Ag;var FD=class extends Ag{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}};Vc.SendingAgentContextMessageEvent=FD});var qD=h(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.EventSource=void 0;var EY=Ir(),IY=xo(),LD=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new EY.ObjectDisposedError("EventSource");if(this.metadata)for(let n in this.metadata)n&&e.metadata&&(e.metadata[n]||(e.metadata[n]=this.metadata[n]));for(let n in this.privEventListeners)n&&this.privEventListeners[n]&&this.privEventListeners[n](e)}attach(e){let n=IY.createNoDashGuid();return this.privEventListeners[n]=e,{detach:()=>(delete this.privEventListeners[n],Promise.resolve())}}attachListener(e){return this.attach(n=>e.onEvent(n))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(n=>e.onEvent(n)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};Mg.EventSource=LD});var Wj=h(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.Events=void 0;var DY=Ir(),_Y=qD(),Og=class t{static setEventSource(e){if(!e)throw new DY.ArgumentNullError("eventSource");t.privInstance=e}static get instance(){return t.privInstance}};xg.Events=Og;Og.privInstance=new _Y.EventSource});var Kj=h(Gj=>{"use strict";Object.defineProperty(Gj,"__esModule",{value:!0})});var Jj=h(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.ConnectionState=void 0;var RY;(function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"})(RY=ad.ConnectionState||(ad.ConnectionState={}))});var Zj=h(Qj=>{"use strict";Object.defineProperty(Qj,"__esModule",{value:!0})});var Xj=h(Yj=>{"use strict";Object.defineProperty(Yj,"__esModule",{value:!0})});var tL=h(eL=>{"use strict";Object.defineProperty(eL,"__esModule",{value:!0})});var rL=h(nL=>{"use strict";Object.defineProperty(nL,"__esModule",{value:!0})});var oL=h(iL=>{"use strict";Object.defineProperty(iL,"__esModule",{value:!0})});var aL=h(sL=>{"use strict";Object.defineProperty(sL,"__esModule",{value:!0})});var uL=h(cL=>{"use strict";Object.defineProperty(cL,"__esModule",{value:!0})});var dL=h(lL=>{"use strict";Object.defineProperty(lL,"__esModule",{value:!0})});var VD=h(Ng=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.List=void 0;var PY=Ir(),BD=class t{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(let n of e)this.privList.push(n)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,n){this.throwIfDisposed(),e===0?this.privList.unshift(n):e===this.privList.length?this.privList.push(n):this.privList.splice(e,0,n),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,n){this.throwIfDisposed();let r=this.privList.splice(e,n);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();let n=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[n]=e,{detach:()=>(delete this.privAddSubscriptions[n],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();let n=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[n]=e,{detach:()=>(delete this.privRemoveSubscriptions[n],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();let n=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[n]=e,{detach:()=>(delete this.privDisposedSubscriptions[n],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){let e=Array();return this.privList.forEach(n=>{e.push(n)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let n=0;n<this.length();n++)e(this.privList[n],n)}select(e){this.throwIfDisposed();let n=[];for(let r=0;r<this.privList.length;r++)n.push(e(this.privList[r],r));return new t(n)}where(e){this.throwIfDisposed();let n=new t;for(let r=0;r<this.privList.length;r++)e(this.privList[r],r)&&n.add(this.privList[r]);return n}orderBy(e){this.throwIfDisposed();let r=this.toArray().sort(e);return new t(r)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((n,r)=>e(r,n))}clone(){return this.throwIfDisposed(),new t(this.toArray())}concat(e){return this.throwIfDisposed(),new t(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new t(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new PY.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(let n in e)n&&e[n]()}};Ng.List=BD});var HD=h(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.marshalPromiseToCallbacks=rn.Sink=rn.Deferred=rn.PromiseResultEventSource=rn.PromiseResult=rn.PromiseState=void 0;var Vi;(function(t){t[t.None=0]="None",t[t.Resolved=1]="Resolved",t[t.Rejected=2]="Rejected"})(Vi=rn.PromiseState||(rn.PromiseState={}));var kg=class{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on(n=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=n)},n=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=n)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}};rn.PromiseResult=kg;var Fg=class{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,n)=>{this.privOnSetResult=e,this.privOnSetError=n}}};rn.PromiseResultEventSource=Fg;var zD=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,n)=>{this.privResolve=e,this.privReject=n})}get promise(){return this.privPromise}};rn.Deferred=zD;var UD=class{constructor(){this.privState=Vi.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new Fg,this.privPromiseResult=new kg(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==Vi.None)throw new Error("'Cannot resolve a completed promise'");this.privState=Vi.Resolved,this.privPromiseResultEvents.setResult(e);for(let n=0;n<this.privSuccessHandlers.length;n++)this.executeSuccessCallback(e,this.privSuccessHandlers[n],this.privErrorHandlers[n]);this.detachHandlers()}reject(e){if(this.privState!==Vi.None)throw new Error("'Cannot reject a completed promise'");this.privState=Vi.Rejected,this.privPromiseResultEvents.setError(e);for(let n of this.privErrorHandlers)this.executeErrorCallback(e,n);this.detachHandlers()}on(e,n){e==null&&(e=()=>{}),this.privState===Vi.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(n)):(this.privState===Vi.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,n):this.privState===Vi.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,n),this.detachHandlers())}executeSuccessCallback(e,n,r){try{n(e)}catch(i){this.executeErrorCallback(`'Unhandled callback error: ${i}'`,r)}}executeErrorCallback(e,n){if(n)try{n(e)}catch(r){throw new Error(`'Unhandled callback error: ${r}. InnerError: ${e}'`)}else throw new Error(`'Unhandled error: ${e}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}};rn.Sink=UD;function TY(t,e,n){t.then(r=>{try{e&&e(r)}catch(i){if(n)try{if(i instanceof Error){let o=i;n(o.name+": "+o.message)}else n(i)}catch{}}},r=>{if(n)try{if(r instanceof Error){let i=r;n(i.name+": "+i.message)}else n(r)}catch{}})}rn.marshalPromiseToCallbacks=TY});var KD=h(Lg=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});Lg.Queue=void 0;var $D=Ir(),WD=VD(),pL=HD(),jg=function(t){return t[t.Dequeue=0]="Dequeue",t[t.Peek=1]="Peek",t}(jg||{}),GD=class{constructor(e){this.privPromiseStore=new WD.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new WD.List,this.privDetachables=[],this.privSubscribers=new WD.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(n=>n(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(n=>{this.privList.add(n)},()=>{})}dequeue(){this.throwIfDispose();let e=new pL.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:jg.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();let e=new pL.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:jg.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}drainAndDispose(e,n){return v(this,null,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=n,this.privIsDisposing=!0;let r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(let i of this.privDetachables)yield i.detach();if(this.privPromiseStore.length()>0&&e){let i=[];return this.privPromiseStore.toArray().forEach(o=>{i.push(o)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(o=>{e(o)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}})}dispose(e){return v(this,null,function*(){yield this.drainAndDispose(null,e)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;let e=this.privSubscribers,n=this.privList;if(e&&n){for(;n.length()>0&&e.length()>0&&!this.privIsDisposing;){let r=e.removeFirst();if(r.type===jg.Peek)r.deferral.resolve(n.first());else{let i=n.removeFirst();r.deferral.resolve(i)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===n&&(this.privList=n)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new $D.InvalidOperationError(this.privDisposeReason):new $D.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new $D.InvalidOperationError("Queue disposing")}};Lg.Queue=GD});var fL=h(Bg=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});Bg.RawWebsocketMessage=void 0;var qg=xD(),cd=Ir(),AY=xo(),JD=class{constructor(e,n,r){if(this.privPayload=null,!n)throw new cd.ArgumentNullError("payload");if(e===qg.MessageType.Binary&&Object.getPrototypeOf(n).constructor.name!=="ArrayBuffer")throw new cd.InvalidOperationError("Payload must be ArrayBuffer");if(e===qg.MessageType.Text&&typeof n!="string")throw new cd.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=n,this.privId=r||AY.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===qg.MessageType.Binary)throw new cd.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===qg.MessageType.Text)throw new cd.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};Bg.RawWebsocketMessage=JD});var hL=h(Vg=>{"use strict";Object.defineProperty(Vg,"__esModule",{value:!0});Vg.RiffPcmEncoder=void 0;var QD=class{constructor(e,n){this.privActualSampleRate=e,this.privDesiredSampleRate=n}encode(e){let n=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;let r=n.length*2,i=new ArrayBuffer(r),o=new DataView(i);return this.floatTo16BitPCM(o,0,n),i}setString(e,n,r){for(let i=0;i<r.length;i++)e.setUint8(n+i,r.charCodeAt(i))}floatTo16BitPCM(e,n,r){for(let i=0;i<r.length;i++,n+=2){let o=Math.max(-1,Math.min(1,r[i]));e.setInt16(n,o<0?o*32768:o*32767,!0)}}downSampleAudioFrame(e,n,r){if(!e)return null;if(r===n||r>n)return e;let i=n/r,o=Math.round(e.length/i),s=new Float32Array(o),a=0,c=0;for(;c<o;){let u=Math.round((c+1)*i),l=0,d=0;for(;a<u&&a<e.length;)l+=e[a++],d++;s[c++]=l/d}return s}};Vg.RiffPcmEncoder=QD});var mL=h(zg=>{"use strict";Object.defineProperty(zg,"__esModule",{value:!0});zg.Stream=void 0;var gL=Ir(),MY=xo(),vL=KD(),ZD=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||MY.createNoDashGuid(),this.privReaderQueue=new vL.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new gL.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>v(this,null,function*(){return(e===void 0||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new vL.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new gL.InvalidOperationError("Stream closed")}};zg.Stream=ZD});var Ug=h(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.TranslationStatus=void 0;var OY;(function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"})(OY=ud.TranslationStatus||(ud.TranslationStatus={}))});var yL=h(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});Hg.ChunkedArrayBufferStream=void 0;var xY=j(),YD=class extends xY.Stream{constructor(e,n){super(n),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||this.privNextBufferReadyBytes===0&&e.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(e);return}let n=0;for(;n<e.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);let r=Math.min(e.buffer.byteLength-n,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(e.buffer.slice(n,r+n));i.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=r,n+=r,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};Hg.ChunkedArrayBufferStream=YD});var SL=h(CL=>{"use strict";Object.defineProperty(CL,"__esModule",{value:!0})});var wL=h($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});$g.Timeout=void 0;var ri=class t{static load(){let e=new Map([[0,()=>{}]]),n=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),o=new Worker(i);return o.addEventListener("message",({data:c})=>{if(t.isCallNotification(c)){let{params:{timerId:u}}=c,l=e.get(u);if(typeof l=="number"){let d=n.get(l);if(d===void 0||d!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(t.isClearResponse(c)){let{id:u}=c,l=n.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");n.delete(u),e.delete(l)}else{let{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{let u=Math.random();n.set(u,c),e.set(c,u),o.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{let l=Math.random();return e.set(l,c),o.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(t.workerTimers!==null||(t.workerTimers=t.load()),t.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}};$g.Timeout=ri;ri.workerTimers=null;ri.clearTimeout=t=>ri.timers().clearTimeout(t);ri.setTimeout=(t,e)=>ri.timers().setTimeout(t,e);ri.timers=ri.loadWorkerTimers()});var bL=h(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.OCSPCacheUpdateErrorEvent=fe.OCSPResponseRetrievedEvent=fe.OCSPCacheFetchErrorEvent=fe.OCSPVerificationFailedEvent=fe.OCSPCacheHitEvent=fe.OCSPCacheEntryNeedsRefreshEvent=fe.OCSPCacheEntryExpiredEvent=fe.OCSPWSUpgradeStartedEvent=fe.OCSPStapleReceivedEvent=fe.OCSPCacheUpdateCompleteEvent=fe.OCSPDiskCacheStoreEvent=fe.OCSPMemoryCacheStoreEvent=fe.OCSPCacheUpdateNeededEvent=fe.OCSPDiskCacheHitEvent=fe.OCSPCacheMissEvent=fe.OCSPMemoryCacheHitEvent=fe.OCSPEvent=void 0;var wt=Bc(),ut=class extends wt.PlatformEvent{constructor(e,n,r){super(e,n),this.privSignature=r}};fe.OCSPEvent=ut;var XD=class extends ut{constructor(e){super("OCSPMemoryCacheHitEvent",wt.EventType.Debug,e)}};fe.OCSPMemoryCacheHitEvent=XD;var e_=class extends ut{constructor(e){super("OCSPCacheMissEvent",wt.EventType.Debug,e)}};fe.OCSPCacheMissEvent=e_;var t_=class extends ut{constructor(e){super("OCSPDiskCacheHitEvent",wt.EventType.Debug,e)}};fe.OCSPDiskCacheHitEvent=t_;var n_=class extends ut{constructor(e){super("OCSPCacheUpdateNeededEvent",wt.EventType.Debug,e)}};fe.OCSPCacheUpdateNeededEvent=n_;var r_=class extends ut{constructor(e){super("OCSPMemoryCacheStoreEvent",wt.EventType.Debug,e)}};fe.OCSPMemoryCacheStoreEvent=r_;var i_=class extends ut{constructor(e){super("OCSPDiskCacheStoreEvent",wt.EventType.Debug,e)}};fe.OCSPDiskCacheStoreEvent=i_;var o_=class extends ut{constructor(e){super("OCSPCacheUpdateCompleteEvent",wt.EventType.Debug,e)}};fe.OCSPCacheUpdateCompleteEvent=o_;var s_=class extends ut{constructor(){super("OCSPStapleReceivedEvent",wt.EventType.Debug,"")}};fe.OCSPStapleReceivedEvent=s_;var a_=class extends ut{constructor(e){super("OCSPWSUpgradeStartedEvent",wt.EventType.Debug,e)}};fe.OCSPWSUpgradeStartedEvent=a_;var c_=class extends ut{constructor(e,n){super("OCSPCacheEntryExpiredEvent",wt.EventType.Debug,e),this.privExpireTime=n}};fe.OCSPCacheEntryExpiredEvent=c_;var u_=class extends ut{constructor(e,n,r){super("OCSPCacheEntryNeedsRefreshEvent",wt.EventType.Debug,e),this.privExpireTime=r,this.privStartTime=n}};fe.OCSPCacheEntryNeedsRefreshEvent=u_;var l_=class extends ut{constructor(e,n,r){super("OCSPCacheHitEvent",wt.EventType.Debug,e),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=n,this.privStartTimeString=new Date(n).toLocaleTimeString()}};fe.OCSPCacheHitEvent=l_;var d_=class extends ut{constructor(e,n){super("OCSPVerificationFailedEvent",wt.EventType.Debug,e),this.privError=n}};fe.OCSPVerificationFailedEvent=d_;var p_=class extends ut{constructor(e,n){super("OCSPCacheFetchErrorEvent",wt.EventType.Debug,e),this.privError=n}};fe.OCSPCacheFetchErrorEvent=p_;var f_=class extends ut{constructor(e){super("OCSPResponseRetrievedEvent",wt.EventType.Debug,e)}};fe.OCSPResponseRetrievedEvent=f_;var h_=class extends ut{constructor(e,n){super("OCSPCacheUpdateErrorEvent",wt.EventType.Debug,e),this.privError=n}};fe.OCSPCacheUpdateErrorEvent=h_});var IL=h(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});Wg.BackgroundEvent=void 0;var EL=j(),g_=class extends EL.PlatformEvent{constructor(e){super("BackgroundEvent",EL.EventType.Error),this.privError=e}get error(){return this.privError}};Wg.BackgroundEvent=g_});var j=h(ie=>{"use strict";var NY=ie&&ie.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ye=ie&&ie.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&NY(e,t,n)};Object.defineProperty(ie,"__esModule",{value:!0});ye(Vj(),ie);ye(zj(),ie);ye(xD(),ie);ye(Uj(),ie);ye(Hj(),ie);ye(jD(),ie);ye(Ir(),ie);ye(Wj(),ie);ye(qD(),ie);ye(xo(),ie);ye(Kj(),ie);ye(Jj(),ie);ye(Zj(),ie);ye(Xj(),ie);ye(tL(),ie);ye(rL(),ie);ye(oL(),ie);ye(aL(),ie);ye(uL(),ie);ye(dL(),ie);ye(VD(),ie);ye(Bc(),ie);ye(HD(),ie);ye(KD(),ie);ye(fL(),ie);ye(hL(),ie);ye(mL(),ie);var kY=Ug();Object.defineProperty(ie,"TranslationStatus",{enumerable:!0,get:function(){return kY.TranslationStatus}});ye(yL(),ie);ye(SL(),ie);ye(wL(),ie);ye(bL(),ie);ye(IL(),ie)});var Bt=h(Gg=>{"use strict";Object.defineProperty(Gg,"__esModule",{value:!0});Gg.HeaderNames=void 0;var On=class{};Gg.HeaderNames=On;On.AuthKey="Ocp-Apim-Subscription-Key";On.Authorization="Authorization";On.SpIDAuthKey="Apim-Subscription-Id";On.ConnectionId="X-ConnectionId";On.ContentType="Content-Type";On.CustomCommandsAppId="X-CommandsAppId";On.Path="Path";On.RequestId="X-RequestId";On.RequestStreamId="X-StreamId";On.RequestTimestamp="X-Timestamp"});var Jg=h(Kg=>{"use strict";Object.defineProperty(Kg,"__esModule",{value:!0});Kg.AuthInfo=void 0;var v_=class{constructor(e,n){this.privHeaderName=e,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}};Kg.AuthInfo=v_});var DL=h(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.CognitiveSubscriptionKeyAuthentication=void 0;var FY=j(),jY=Bt(),LY=Jg(),m_=class{constructor(e){if(!e)throw new FY.ArgumentNullError("subscriptionKey");this.privAuthInfo=new LY.AuthInfo(jY.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}};Qg.CognitiveSubscriptionKeyAuthentication=m_});var TL=h(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.CognitiveTokenAuthentication=void 0;var _L=j(),RL=Jg(),PL=Bt(),Zg=class t{constructor(e,n){if(!e)throw new _L.ArgumentNullError("fetchCallback");if(!n)throw new _L.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=n}fetch(e){return this.privFetchCallback(e).then(n=>new RL.AuthInfo(PL.HeaderNames.Authorization,n===void 0?void 0:t.privTokenPrefix+n))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(n=>new RL.AuthInfo(PL.HeaderNames.Authorization,n===void 0?void 0:t.privTokenPrefix+n))}};Yg.CognitiveTokenAuthentication=Zg;Zg.privTokenPrefix="Bearer "});var ML=h(AL=>{"use strict";Object.defineProperty(AL,"__esModule",{value:!0})});var xL=h(OL=>{"use strict";Object.defineProperty(OL,"__esModule",{value:!0})});var y_=h(()=>{"use strict"});var C_=h(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.LogLevel=void 0;var qY=j();Object.defineProperty(Xg,"LogLevel",{enumerable:!0,get:function(){return qY.EventType}})});var W=h(ev=>{"use strict";Object.defineProperty(ev,"__esModule",{value:!0});ev.Contracts=void 0;var S_=class t{static throwIfNullOrUndefined(e,n){if(e==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(e,n){if(e===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(e,n){if(t.throwIfNullOrUndefined(e,n),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(e,n,r){if(t.throwIfNullOrUndefined(e,n),(""+e).length>r)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(e,n,r){if(t.throwIfNullOrUndefined(e,n),(""+e).length<r)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+r.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,n){if(t.throwIfNullOrUndefined(e,n),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(let r of e)t.throwIfNullOrWhitespace(r,n)}static throwIfFileDoesNotExist(e,n){t.throwIfNullOrWhitespace(e,n)}static throwIfNotUndefined(e,n){if(e!==void 0)throw new Error("throwIfNotUndefined:"+n)}};ev.Contracts=S_});var kL=h(ii=>{"use strict";var BY=ii&&ii.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),VY=ii&&ii.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zY=ii&&ii.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&BY(e,t,n);return VY(e,t),e};Object.defineProperty(ii,"__esModule",{value:!0});ii.ConsoleLoggingListener=void 0;var NL=zY(y_()),ld=C_(),UY=W(),w_=class{constructor(e=ld.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){UY.Contracts.throwIfNullOrUndefined(NL.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){let n=this.toString(e);if(this.logCallback&&this.logCallback(n),this.privLogPath&&NL.writeFileSync(this.privLogPath,n+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case ld.LogLevel.Debug:console.debug(n);break;case ld.LogLevel.Info:console.info(n);break;case ld.LogLevel.Warning:console.warn(n);break;case ld.LogLevel.Error:console.error(n);break;default:console.log(n);break}}}toString(e){let n=[`${e.eventTime}`,`${e.name}`],r=e;for(let i in r)if(i&&e.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){let o=r[i],s="<NULL>";o!=null&&(typeof o=="number"||typeof o=="string"?s=o.toString():s=JSON.stringify(o)),n.push(`${i}: ${s}`)}return n.join(" | ")}};ii.ConsoleLoggingListener=w_});var jL=h(FL=>{"use strict";Object.defineProperty(FL,"__esModule",{value:!0})});var Fo=h(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.AudioStreamFormatImpl=zi.AudioStreamFormat=zi.AudioFormatTag=void 0;var dd;(function(t){t[t.PCM=1]="PCM",t[t.MuLaw=2]="MuLaw",t[t.Siren=3]="Siren",t[t.MP3=4]="MP3",t[t.SILKSkype=5]="SILKSkype",t[t.OGG_OPUS=6]="OGG_OPUS",t[t.WEBM_OPUS=7]="WEBM_OPUS",t[t.ALaw=8]="ALaw",t[t.FLAC=9]="FLAC",t[t.OPUS=10]="OPUS",t[t.AMR_WB=11]="AMR_WB",t[t.G722=12]="G722"})(dd=zi.AudioFormatTag||(zi.AudioFormatTag={}));var tv=class{static getDefaultInputFormat(){return zc.getDefaultInputFormat()}static getWaveFormat(e,n,r,i){return new zc(e,n,r,i)}static getWaveFormatPCM(e,n,r){return new zc(e,n,r)}};zi.AudioStreamFormat=tv;var zc=class t extends tv{constructor(e=16e3,n=16,r=1,i=dd.PCM){super();let o=!0;switch(i){case dd.PCM:this.formatTag=1;break;case dd.ALaw:this.formatTag=6;break;case dd.MuLaw:this.formatTag=7;break;default:o=!1}if(this.bitsPerSample=n,this.samplesPerSec=e,this.channels=r,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),o){this.privHeader=new ArrayBuffer(44);let s=new DataView(this.privHeader);this.setString(s,0,"RIFF"),s.setUint32(4,0,!0),this.setString(s,8,"WAVEfmt "),s.setUint32(16,16,!0),s.setUint16(20,this.formatTag,!0),s.setUint16(22,this.channels,!0),s.setUint32(24,this.samplesPerSec,!0),s.setUint32(28,this.avgBytesPerSec,!0),s.setUint16(32,this.channels*(this.bitsPerSample/8),!0),s.setUint16(34,this.bitsPerSample,!0),this.setString(s,36,"data"),s.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new t}static getAudioContext(e){let n=window.AudioContext||window.webkitAudioContext||!1;if(n)return e!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new n({sampleRate:e}):new n;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,n,r){for(let i=0;i<r.length;i++)e.setUint8(n+i,r.charCodeAt(i))}};zi.AudioStreamFormatImpl=zc});var BL=h(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.MicAudioSource=Vs.AudioWorkletSourceURLPropertyName=void 0;var LL=M(),bt=j(),qL=Fo();Vs.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";var nv=class t{constructor(e,n,r,i){this.privRecorder=e,this.deviceId=n,this.privStreams={},this.privOutputChunkSize=t.AUDIOFORMAT.avgBytesPerSec/10,this.privId=r||bt.createNoDashGuid(),this.privEvents=new bt.EventSource,this.privMediaStream=i||null,this.privIsClosing=!1}get format(){return Promise.resolve(t.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new bt.Deferred;try{this.createAudioContext()}catch(r){if(r instanceof Error){let i=r;this.privInitializeDeferral.reject(i.name+": "+i.message)}else this.privInitializeDeferral.reject(r);return this.privInitializeDeferral.promise}let e=window.navigator,n=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(n=(r,i,o)=>{e.mediaDevices.getUserMedia(r).then(i).catch(o)}),n){let r=()=>{this.onEvent(new bt.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new bt.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):n({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},i=>{this.privMediaStream=i,this.onEvent(new bt.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},i=>{let o=`Error occurred during microphone initialization: ${i}`;this.privInitializeDeferral.reject(o),this.onEvent(new bt.AudioSourceErrorEvent(this.privId,o))})};this.privContext.state==="suspended"?this.privContext.resume().then(r).catch(i=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${i}`)}):r()}else{let r="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(r),this.onEvent(new bt.AudioSourceErrorEvent(r,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new bt.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then(n=>(this.onEvent(new bt.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>v(this,null,function*(){return n.readEnded(),delete this.privStreams[e],this.onEvent(new bt.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>n.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new bt.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){return v(this,null,function*(){for(let e in this.privStreams)if(e){let n=this.privStreams[e];n&&n.close()}this.onEvent(new bt.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:t.AUDIOFORMAT.bitsPerSample,channelcount:t.AUDIOFORMAT.channels,connectivity:LL.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:t.AUDIOFORMAT.samplesPerSec,type:LL.type.Microphones}))}setProperty(e,n){if(e===Vs.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(n);else throw new Error("Property '"+e+"' is not supported on Microphone.")}getMicrophoneLabel(){let e="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;let n=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(n===void 0)return Promise.resolve(this.privMicrophoneLabel);let r=new bt.Deferred;return navigator.mediaDevices.enumerateDevices().then(i=>{for(let o of i)if(o.deviceId===n){this.privMicrophoneLabel=o.label;break}r.resolve(this.privMicrophoneLabel)},()=>r.resolve(this.privMicrophoneLabel)),r.promise}listen(e){return v(this,null,function*(){yield this.turnOn();let n=new bt.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=n;try{this.privRecorder.record(this.privContext,this.privMediaStream,n)}catch(i){throw this.onEvent(new bt.AudioStreamNodeErrorEvent(this.privId,e,i)),i}return n})}onEvent(e){this.privEvents.onEvent(e),bt.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=qL.AudioStreamFormatImpl.getAudioContext(t.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return v(this,null,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&(yield this.privContext.suspend())})}};Vs.MicAudioSource=nv;nv.AUDIOFORMAT=qL.AudioStreamFormat.getDefaultInputFormat()});var zL=h(rv=>{"use strict";Object.defineProperty(rv,"__esModule",{value:!0});rv.FileAudioSource=void 0;var VL=M(),yn=j(),HY=Fo(),b_=class{constructor(e,n,r){this.privStreams={},this.privHeaderEnd=44,this.privId=r||yn.createNoDashGuid(),this.privEvents=new yn.EventSource,this.privSource=e,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=n||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){let e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new yn.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new yn.AudioSourceInitializingEvent(this.privId)),this.onEvent(new yn.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(e){return v(this,null,function*(){this.onEvent(new yn.AudioStreamNodeAttachingEvent(this.privId,e));let n=yield this.upload(e);return this.onEvent(new yn.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:()=>v(this,null,function*(){n.readEnded(),delete this.privStreams[e],this.onEvent(new yn.AudioStreamNodeDetachedEvent(this.privId,e)),yield this.turnOff()}),id:()=>e,read:()=>n.read()})})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new yn.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(let e in this.privStreams)if(e){let n=this.privStreams[e];n&&!n.isClosed&&n.close()}return this.onEvent(new yn.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:VL.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:VL.type.File}))}readHeader(){let n=this.privSource.slice(0,4296),r=new yn.Deferred,i=o=>{let s=new DataView(o),a=f=>String.fromCharCode(s.getUint8(f),s.getUint8(f+1),s.getUint8(f+2),s.getUint8(f+3));if(a(0)!=="RIFF"){r.reject("Invalid WAV header in file, RIFF was not found");return}if(a(8)!=="WAVE"||a(12)!=="fmt "){r.reject("Invalid WAV header in file, WAVEfmt was not found");return}let c=s.getInt32(16,!0),u=s.getUint16(22,!0),l=s.getUint32(24,!0),d=s.getUint16(34,!0),p=36+Math.max(c-16,0);for(;a(p)!=="data";p+=2)if(p>4288){r.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=p+8,r.resolve(HY.AudioStreamFormat.getWaveFormatPCM(l,d,u))};if(typeof window<"u"&&typeof Blob<"u"&&n instanceof Blob){let o=new FileReader;o.onload=s=>{let a=s.target.result;i(a)},o.readAsArrayBuffer(n)}else{let o=n;i(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength))}return r.promise}upload(e){return v(this,null,function*(){let n=r=>{let i=`Error occurred while processing '${this.privFilename}'. ${r}`;throw this.onEvent(new yn.AudioStreamNodeErrorEvent(this.privId,e,i)),new Error(i)};try{yield this.turnOn();let r=yield this.privAudioFormatPromise,i=new yn.ChunkedArrayBufferStream(r.avgBytesPerSec/10,e);this.privStreams[e]=i;let o=this.privSource.slice(this.privHeaderEnd),s=a=>{i.isClosed||(i.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()}),i.close())};if(typeof window<"u"&&typeof Blob<"u"&&o instanceof Blob){let a=new FileReader;a.onerror=c=>n(c.toString()),a.onload=c=>{let u=c.target.result;s(u)},a.readAsArrayBuffer(o)}else{let a=o;s(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}return i}catch(r){n(r)}})}onEvent(e){this.privEvents.onEvent(e),yn.Events.instance.onEvent(e)}};rv.FileAudioSource=b_});var UL=h(iv=>{"use strict";Object.defineProperty(iv,"__esModule",{value:!0});iv.PcmRecorder=void 0;var $Y=j(),E_=class{constructor(e){this.privStopInputOnRelease=e}record(e,n,r){let o=new $Y.RiffPcmEncoder(e.sampleRate,16e3),s=e.createMediaStreamSource(n),a=()=>{let u=(()=>{let l=0;try{return e.createScriptProcessor(l,1,1)}catch{l=2048;let p=e.sampleRate;for(;l<16384&&p>=32e3;)l<<=1,p>>=1;return e.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{let d=l.inputBuffer.getChannelData(0);if(r&&!r.isClosed){let p=o.encode(d);p&&r.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}},s.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:s,stream:n}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){let u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{let u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=l=>{let d=l.data;if(r&&!r.isClosed){let p=o.encode(d);p&&r.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}},s.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:s,stream:n}}).catch(()=>{a()})}else try{a()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(n=>n.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}};iv.PcmRecorder=E_});var I_=h(()=>{"use strict"});var D_=h(()=>{"use strict"});var R_=h((Zwe,__)=>{"use strict";var Uc=typeof Reflect=="object"?Reflect:null,HL=Uc&&typeof Uc.apply=="function"?Uc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},ov;Uc&&typeof Uc.ownKeys=="function"?ov=Uc.ownKeys:Object.getOwnPropertySymbols?ov=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ov=function(e){return Object.getOwnPropertyNames(e)};function WY(t){console&&console.warn&&console.warn(t)}var WL=Number.isNaN||function(e){return e!==e};function Re(){Re.init.call(this)}__.exports=Re;__.exports.once=QY;Re.EventEmitter=Re;Re.prototype._events=void 0;Re.prototype._eventsCount=0;Re.prototype._maxListeners=void 0;var $L=10;function sv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Re,"defaultMaxListeners",{enumerable:!0,get:function(){return $L},set:function(t){if(typeof t!="number"||t<0||WL(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");$L=t}});Re.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Re.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||WL(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function GL(t){return t._maxListeners===void 0?Re.defaultMaxListeners:t._maxListeners}Re.prototype.getMaxListeners=function(){return GL(this)};Re.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")HL(c,this,n);else for(var u=c.length,l=YL(c,u),r=0;r<u;++r)HL(l[r],this,n);return!0};function KL(t,e,n,r){var i,o,s;if(sv(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=GL(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,WY(a)}return t}Re.prototype.addListener=function(e,n){return KL(this,e,n,!1)};Re.prototype.on=Re.prototype.addListener;Re.prototype.prependListener=function(e,n){return KL(this,e,n,!0)};function GY(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function JL(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=GY.bind(r);return i.listener=n,r.wrapFn=i,i}Re.prototype.once=function(e,n){return sv(n),this.on(e,JL(this,e,n)),this};Re.prototype.prependOnceListener=function(e,n){return sv(n),this.prependListener(e,JL(this,e,n)),this};Re.prototype.removeListener=function(e,n){var r,i,o,s,a;if(sv(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():KY(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Re.prototype.off=Re.prototype.removeListener;Re.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function QL(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?JY(i):YL(i,i.length)}Re.prototype.listeners=function(e){return QL(this,e,!0)};Re.prototype.rawListeners=function(e){return QL(this,e,!1)};Re.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ZL.call(t,e)};Re.prototype.listenerCount=ZL;function ZL(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Re.prototype.eventNames=function(){return this._eventsCount>0?ov(this._events):[]};function YL(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function KY(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function JY(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function QY(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}XL(t,e,o,{once:!0}),e!=="error"&&ZY(t,i,{once:!0})})}function ZY(t,e,n){typeof t.on=="function"&&XL(t,"error",e,n)}function XL(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var tq=h((Ywe,eq)=>{"use strict";var Hc=1e3,$c=Hc*60,Wc=$c*60,zs=Wc*24,YY=zs*7,XY=zs*365.25;eq.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return eX(t);if(n==="number"&&isFinite(t))return e.long?nX(t):tX(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function eX(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*XY;case"weeks":case"week":case"w":return n*YY;case"days":case"day":case"d":return n*zs;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Wc;case"minutes":case"minute":case"mins":case"min":case"m":return n*$c;case"seconds":case"second":case"secs":case"sec":case"s":return n*Hc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function tX(t){var e=Math.abs(t);return e>=zs?Math.round(t/zs)+"d":e>=Wc?Math.round(t/Wc)+"h":e>=$c?Math.round(t/$c)+"m":e>=Hc?Math.round(t/Hc)+"s":t+"ms"}function nX(t){var e=Math.abs(t);return e>=zs?av(t,e,zs,"day"):e>=Wc?av(t,e,Wc,"hour"):e>=$c?av(t,e,$c,"minute"):e>=Hc?av(t,e,Hc,"second"):t+" ms"}function av(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}});var rq=h((Xwe,nq)=>{"use strict";function rX(t){n.debug=n,n.default=n,n.coerce=c,n.disable=o,n.enable=i,n.enabled=s,n.humanize=tq(),n.destroy=u,Object.keys(t).forEach(l=>{n[l]=t[l]}),n.names=[],n.skips=[],n.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(l){let d,p=null,f,g;function m(...y){if(!m.enabled)return;let w=m,I=Number(new Date),C=I-(d||I);w.diff=C,w.prev=d,w.curr=I,d=I,y[0]=n.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let _=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(O,de)=>{if(O==="%%")return"%";_++;let ae=n.formatters[de];if(typeof ae=="function"){let De=y[_];O=ae.call(w,De),y.splice(_,1),_--}return O}),n.formatArgs.call(w,y),(w.log||n.log).apply(w,y)}return m.namespace=l,m.useColors=n.useColors(),m.color=n.selectColor(l),m.extend=r,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==n.namespaces&&(f=n.namespaces,g=n.enabled(l)),g),set:y=>{p=y}}),typeof n.init=="function"&&n.init(m),m}function r(l,d){let p=n(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let d,p=(typeof l=="string"?l:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(l=p[d].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...n.names.map(a),...n.skips.map(a).map(d=>"-"+d)].join(",");return n.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,p;for(d=0,p=n.skips.length;d<p;d++)if(n.skips[d].test(l))return!1;for(d=0,p=n.names.length;d<p;d++)if(n.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}nq.exports=rX});var P_=h((xn,cv)=>{"use strict";xn.formatArgs=oX;xn.save=sX;xn.load=aX;xn.useColors=iX;xn.storage=cX();xn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();xn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function iX(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function oX(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+cv.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}xn.log=console.debug||console.log||(()=>{});function sX(t){try{t?xn.storage.setItem("debug",t):xn.storage.removeItem("debug")}catch{}}function aX(){let t;try{t=xn.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function cX(){try{return localStorage}catch{}}cv.exports=rq()(xn);var{formatters:uX}=cv.exports;uX.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var iq=h(T_=>{"use strict";Object.defineProperty(T_,"__esModule",{value:!0});function lX(t){return function(e,n){return new Promise((r,i)=>{t.call(this,e,n,(o,s)=>{o?i(o):r(s)})})}}T_.default=lX});var aq=h((M_,sq)=>{"use strict";var oq=M_&&M_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},dX=R_(),pX=oq(P_()),fX=oq(iq()),pd=pX.default("agent-base");function hX(t){return!!t&&typeof t.addRequest=="function"}function A_(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function uv(t,e){return new uv.Agent(t,e)}(function(t){class e extends dX.EventEmitter{constructor(r,i){super();let o=i;typeof r=="function"?this.callback=r:r&&(o=r),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:A_()?443:80}set defaultPort(r){this.explicitDefaultPort=r}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:A_()?"https:":"http:"}set protocol(r){this.explicitProtocol=r}callback(r,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(r,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=A_()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,r._last=!0,r.shouldKeepAlive=!1;let s=!1,a=null,c=o.timeout||this.timeout,u=f=>{r._hadError||(r.emit("error",f),r._hadError=!0)},l=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${c}ms`);f.code="ETIMEOUT",u(f)},d=f=>{s||(a!==null&&(clearTimeout(a),a=null),u(f))},p=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),hX(f)){pd("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(r,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),r.onSocket(f);return}let g=new Error(`no Duplex stream was returned to agent-base for \`${r.method} ${r.path}\``);u(g)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(pd("Converting legacy callback function to promise"),this.promisifiedCallback=fX.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(a=setTimeout(l,c)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{pd("Resolving socket for %o request: %o",o.protocol,`${r.method} ${r.path}`),Promise.resolve(this.promisifiedCallback(r,o)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(r,i){pd("Freeing socket %o %o",r.constructor.name,i),r.destroy()}destroy(){pd("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(uv||(uv={}));sq.exports=uv});var cq=h((Gc,Kc)=>{"use strict";(function(t){var e=typeof Gc=="object"&&Gc&&!Gc.nodeType&&Gc,n=typeof Kc=="object"&&Kc&&!Kc.nodeType&&Kc,r=typeof global=="object"&&global;(r.global===r||r.window===r||r.self===r)&&(t=r);var i,o=2147483647,s=36,a=1,c=26,u=38,l=700,d=72,p=128,f="-",g=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=s-a,C=Math.floor,_=String.fromCharCode,H;function O(F){throw new RangeError(w[F])}function de(F,G){for(var ve=F.length,Le=[];ve--;)Le[ve]=G(F[ve]);return Le}function ae(F,G){var ve=F.split("@"),Le="";ve.length>1&&(Le=ve[0]+"@",F=ve[1]),F=F.replace(y,".");var $e=F.split("."),Kt=de($e,G).join(".");return Le+Kt}function De(F){for(var G=[],ve=0,Le=F.length,$e,Kt;ve<Le;)$e=F.charCodeAt(ve++),$e>=55296&&$e<=56319&&ve<Le?(Kt=F.charCodeAt(ve++),(Kt&64512)==56320?G.push((($e&1023)<<10)+(Kt&1023)+65536):(G.push($e),ve--)):G.push($e);return G}function Qe(F){return de(F,function(G){var ve="";return G>65535&&(G-=65536,ve+=_(G>>>10&1023|55296),G=56320|G&1023),ve+=_(G),ve}).join("")}function jr(F){return F-48<10?F-22:F-65<26?F-65:F-97<26?F-97:s}function fr(F,G){return F+22+75*(F<26)-((G!=0)<<5)}function Ze(F,G,ve){var Le=0;for(F=ve?C(F/l):F>>1,F+=C(F/G);F>I*c>>1;Le+=s)F=C(F/I);return C(Le+(I+1)*F/(F+u))}function Wt(F){var G=[],ve=F.length,Le,$e=0,Kt=p,yt=d,_n,hr,Lr,Si,At,Bn,gr,no,us;for(_n=F.lastIndexOf(f),_n<0&&(_n=0),hr=0;hr<_n;++hr)F.charCodeAt(hr)>=128&&O("not-basic"),G.push(F.charCodeAt(hr));for(Lr=_n>0?_n+1:0;Lr<ve;){for(Si=$e,At=1,Bn=s;Lr>=ve&&O("invalid-input"),gr=jr(F.charCodeAt(Lr++)),(gr>=s||gr>C((o-$e)/At))&&O("overflow"),$e+=gr*At,no=Bn<=yt?a:Bn>=yt+c?c:Bn-yt,!(gr<no);Bn+=s)us=s-no,At>C(o/us)&&O("overflow"),At*=us;Le=G.length+1,yt=Ze($e-Si,Le,Si==0),C($e/Le)>o-Kt&&O("overflow"),Kt+=C($e/Le),$e%=Le,G.splice($e++,0,Kt)}return Qe(G)}function Gt(F){var G,ve,Le,$e,Kt,yt,_n,hr,Lr,Si,At,Bn=[],gr,no,us,zS;for(F=De(F),gr=F.length,G=p,ve=0,Kt=d,yt=0;yt<gr;++yt)At=F[yt],At<128&&Bn.push(_(At));for(Le=$e=Bn.length,$e&&Bn.push(f);Le<gr;){for(_n=o,yt=0;yt<gr;++yt)At=F[yt],At>=G&&At<_n&&(_n=At);for(no=Le+1,_n-G>C((o-ve)/no)&&O("overflow"),ve+=(_n-G)*no,G=_n,yt=0;yt<gr;++yt)if(At=F[yt],At<G&&++ve>o&&O("overflow"),At==G){for(hr=ve,Lr=s;Si=Lr<=Kt?a:Lr>=Kt+c?c:Lr-Kt,!(hr<Si);Lr+=s)zS=hr-Si,us=s-Si,Bn.push(_(fr(Si+zS%us,0))),hr=C(zS/us);Bn.push(_(fr(hr,0))),Kt=Ze(ve,no,Le==$e),ve=0,++Le}++ve,++G}return Bn.join("")}function qn(F){return ae(F,function(G){return g.test(G)?Wt(G.slice(4).toLowerCase()):G})}function cs(F){return ae(F,function(G){return m.test(G)?"xn--"+Gt(G):G})}if(i={version:"1.4.1",ucs2:{decode:De,encode:Qe},decode:Wt,encode:Gt,toASCII:cs,toUnicode:qn},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&n)if(Kc.exports==e)n.exports=i;else for(H in i)i.hasOwnProperty(H)&&(e[H]=i[H]);else t.punycode=i})(Gc)});var lq=h((tbe,uq)=>{"use strict";uq.exports=Error});var pq=h((nbe,dq)=>{"use strict";dq.exports=EvalError});var hq=h((rbe,fq)=>{"use strict";fq.exports=RangeError});var vq=h((ibe,gq)=>{"use strict";gq.exports=ReferenceError});var O_=h((obe,mq)=>{"use strict";mq.exports=SyntaxError});var Jc=h((sbe,yq)=>{"use strict";yq.exports=TypeError});var Sq=h((abe,Cq)=>{"use strict";Cq.exports=URIError});var lv=h((cbe,wq)=>{"use strict";wq.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,n);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var Iq=h((ube,Eq)=>{"use strict";var bq=typeof Symbol<"u"&&Symbol,gX=lv();Eq.exports=function(){return typeof bq!="function"||typeof Symbol!="function"||typeof bq("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:gX()}});var _q=h((lbe,Dq)=>{"use strict";var x_={__proto__:null,foo:{}},vX=Object;Dq.exports=function(){return{__proto__:x_}.foo===x_.foo&&!(x_ instanceof vX)}});var Tq=h((dbe,Pq)=>{"use strict";var mX="Function.prototype.bind called on incompatible ",yX=Object.prototype.toString,CX=Math.max,SX="[object Function]",Rq=function(e,n){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var o=0;o<n.length;o+=1)r[o+e.length]=n[o];return r},wX=function(e,n){for(var r=[],i=n||0,o=0;i<e.length;i+=1,o+=1)r[o]=e[i];return r},bX=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n};Pq.exports=function(e){var n=this;if(typeof n!="function"||yX.apply(n)!==SX)throw new TypeError(mX+n);for(var r=wX(arguments,1),i,o=function(){if(this instanceof i){var l=n.apply(this,Rq(r,arguments));return Object(l)===l?l:this}return n.apply(e,Rq(r,arguments))},s=CX(0,n.length-r.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+bX(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var u=function(){};u.prototype=n.prototype,i.prototype=new u,u.prototype=null}return i}});var dv=h((pbe,Aq)=>{"use strict";var EX=Tq();Aq.exports=Function.prototype.bind||EX});var Oq=h((fbe,Mq)=>{"use strict";var IX=Function.prototype.call,DX=Object.prototype.hasOwnProperty,_X=dv();Mq.exports=_X.call(IX,DX)});var $s=h((hbe,jq)=>{"use strict";var he,RX=lq(),PX=pq(),TX=hq(),AX=vq(),Xc=O_(),Yc=Jc(),MX=Sq(),Fq=Function,N_=function(t){try{return Fq('"use strict"; return ('+t+").constructor;")()}catch{}},Us=Object.getOwnPropertyDescriptor;if(Us)try{Us({},"")}catch{Us=null}var k_=function(){throw new Yc},OX=Us?function(){try{return arguments.callee,k_}catch{try{return Us(arguments,"callee").get}catch{return k_}}}():k_,Qc=Iq()(),xX=_q()(),gt=Object.getPrototypeOf||(xX?function(t){return t.__proto__}:null),Zc={},NX=typeof Uint8Array>"u"||!gt?he:gt(Uint8Array),Hs={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?he:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?he:ArrayBuffer,"%ArrayIteratorPrototype%":Qc&&gt?gt([][Symbol.iterator]()):he,"%AsyncFromSyncIteratorPrototype%":he,"%AsyncFunction%":Zc,"%AsyncGenerator%":Zc,"%AsyncGeneratorFunction%":Zc,"%AsyncIteratorPrototype%":Zc,"%Atomics%":typeof Atomics>"u"?he:Atomics,"%BigInt%":typeof BigInt>"u"?he:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?he:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?he:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?he:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":RX,"%eval%":eval,"%EvalError%":PX,"%Float32Array%":typeof Float32Array>"u"?he:Float32Array,"%Float64Array%":typeof Float64Array>"u"?he:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?he:FinalizationRegistry,"%Function%":Fq,"%GeneratorFunction%":Zc,"%Int8Array%":typeof Int8Array>"u"?he:Int8Array,"%Int16Array%":typeof Int16Array>"u"?he:Int16Array,"%Int32Array%":typeof Int32Array>"u"?he:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Qc&&gt?gt(gt([][Symbol.iterator]())):he,"%JSON%":typeof JSON=="object"?JSON:he,"%Map%":typeof Map>"u"?he:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Qc||!gt?he:gt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?he:Promise,"%Proxy%":typeof Proxy>"u"?he:Proxy,"%RangeError%":TX,"%ReferenceError%":AX,"%Reflect%":typeof Reflect>"u"?he:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?he:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Qc||!gt?he:gt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?he:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Qc&&gt?gt(""[Symbol.iterator]()):he,"%Symbol%":Qc?Symbol:he,"%SyntaxError%":Xc,"%ThrowTypeError%":OX,"%TypedArray%":NX,"%TypeError%":Yc,"%Uint8Array%":typeof Uint8Array>"u"?he:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?he:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?he:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?he:Uint32Array,"%URIError%":MX,"%WeakMap%":typeof WeakMap>"u"?he:WeakMap,"%WeakRef%":typeof WeakRef>"u"?he:WeakRef,"%WeakSet%":typeof WeakSet>"u"?he:WeakSet};if(gt)try{null.error}catch(t){xq=gt(gt(t)),Hs["%Error.prototype%"]=xq}var xq,kX=function t(e){var n;if(e==="%AsyncFunction%")n=N_("async function () {}");else if(e==="%GeneratorFunction%")n=N_("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=N_("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&gt&&(n=gt(i.prototype))}return Hs[e]=n,n},Nq={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fd=dv(),pv=Oq(),FX=fd.call(Function.call,Array.prototype.concat),jX=fd.call(Function.apply,Array.prototype.splice),kq=fd.call(Function.call,String.prototype.replace),fv=fd.call(Function.call,String.prototype.slice),LX=fd.call(Function.call,RegExp.prototype.exec),qX=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,BX=/\\(\\)?/g,VX=function(e){var n=fv(e,0,1),r=fv(e,-1);if(n==="%"&&r!=="%")throw new Xc("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Xc("invalid intrinsic syntax, expected opening `%`");var i=[];return kq(e,qX,function(o,s,a,c){i[i.length]=a?kq(c,BX,"$1"):s||o}),i},zX=function(e,n){var r=e,i;if(pv(Nq,r)&&(i=Nq[r],r="%"+i[0]+"%"),pv(Hs,r)){var o=Hs[r];if(o===Zc&&(o=kX(r)),typeof o>"u"&&!n)throw new Yc("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new Xc("intrinsic "+e+" does not exist!")};jq.exports=function(e,n){if(typeof e!="string"||e.length===0)throw new Yc("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Yc('"allowMissing" argument must be a boolean');if(LX(/^%?[^%]*%?$/,e)===null)throw new Xc("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=VX(e),i=r.length>0?r[0]:"",o=zX("%"+i+"%",n),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],jX(r,FX([0,1],u)));for(var l=1,d=!0;l<r.length;l+=1){var p=r[l],f=fv(p,0,1),g=fv(p,-1);if((f==='"'||f==="'"||f==="`"||g==='"'||g==="'"||g==="`")&&f!==g)throw new Xc("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(c=!0),i+="."+p,s="%"+i+"%",pv(Hs,s))a=Hs[s];else if(a!=null){if(!(p in a)){if(!n)throw new Yc("base intrinsic for "+e+" exists, but the property is not available.");return}if(Us&&l+1>=r.length){var m=Us(a,p);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[p]}else d=pv(a,p),a=a[p];d&&!c&&(Hs[s]=a)}}return a}});var gv=h((gbe,Lq)=>{"use strict";var UX=$s(),hv=UX("%Object.defineProperty%",!0)||!1;if(hv)try{hv({},"a",{value:1})}catch{hv=!1}Lq.exports=hv});var mv=h((vbe,qq)=>{"use strict";var HX=$s(),vv=HX("%Object.getOwnPropertyDescriptor%",!0);if(vv)try{vv([],"length")}catch{vv=null}qq.exports=vv});var F_=h((mbe,zq)=>{"use strict";var Bq=gv(),$X=O_(),eu=Jc(),Vq=mv();zq.exports=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new eu("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new eu("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new eu("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new eu("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new eu("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new eu("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!Vq&&Vq(e,n);if(Bq)Bq(e,n,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:r,writable:o===null&&c?c.writable:!o});else if(a||!i&&!o&&!s)e[n]=r;else throw new $X("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var L_=h((ybe,Hq)=>{"use strict";var j_=gv(),Uq=function(){return!!j_};Uq.hasArrayLengthDefineBug=function(){if(!j_)return null;try{return j_([],"length",{value:1}).length!==1}catch{return!0}};Hq.exports=Uq});var Jq=h((Cbe,Kq)=>{"use strict";var WX=$s(),$q=F_(),GX=L_()(),Wq=mv(),Gq=Jc(),KX=WX("%Math.floor%");Kq.exports=function(e,n){if(typeof e!="function")throw new Gq("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||KX(n)!==n)throw new Gq("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&Wq){var s=Wq(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!r)&&(GX?$q(e,"length",n,!0,!0):$q(e,"length",n)),e}});var hd=h((Sbe,yv)=>{"use strict";var q_=dv(),Cv=$s(),JX=Jq(),QX=Jc(),Yq=Cv("%Function.prototype.apply%"),Xq=Cv("%Function.prototype.call%"),eB=Cv("%Reflect.apply%",!0)||q_.call(Xq,Yq),Qq=gv(),ZX=Cv("%Math.max%");yv.exports=function(e){if(typeof e!="function")throw new QX("a function is required");var n=eB(q_,Xq,arguments);return JX(n,1+ZX(0,e.length-(arguments.length-1)),!0)};var Zq=function(){return eB(q_,Yq,arguments)};Qq?Qq(yv.exports,"apply",{value:Zq}):yv.exports.apply=Zq});var tu=h((wbe,rB)=>{"use strict";var tB=$s(),nB=hd(),YX=nB(tB("String.prototype.indexOf"));rB.exports=function(e,n){var r=tB(e,!!n);return typeof r=="function"&&YX(e,".prototype.")>-1?nB(r):r}});var iB=h(()=>{"use strict"});var IB=h((Ibe,EB)=>{"use strict";var J_=typeof Map=="function"&&Map.prototype,B_=Object.getOwnPropertyDescriptor&&J_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,wv=J_&&B_&&typeof B_.get=="function"?B_.get:null,oB=J_&&Map.prototype.forEach,Q_=typeof Set=="function"&&Set.prototype,V_=Object.getOwnPropertyDescriptor&&Q_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,bv=Q_&&V_&&typeof V_.get=="function"?V_.get:null,sB=Q_&&Set.prototype.forEach,XX=typeof WeakMap=="function"&&WeakMap.prototype,vd=XX?WeakMap.prototype.has:null,eee=typeof WeakSet=="function"&&WeakSet.prototype,md=eee?WeakSet.prototype.has:null,tee=typeof WeakRef=="function"&&WeakRef.prototype,aB=tee?WeakRef.prototype.deref:null,nee=Boolean.prototype.valueOf,ree=Object.prototype.toString,iee=Function.prototype.toString,oee=String.prototype.match,Z_=String.prototype.slice,Lo=String.prototype.replace,see=String.prototype.toUpperCase,cB=String.prototype.toLowerCase,mB=RegExp.prototype.test,uB=Array.prototype.concat,oi=Array.prototype.join,aee=Array.prototype.slice,lB=Math.floor,H_=typeof BigInt=="function"?BigInt.prototype.valueOf:null,z_=Object.getOwnPropertySymbols,$_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,nu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Vt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===nu||!0)?Symbol.toStringTag:null,yB=Object.prototype.propertyIsEnumerable,dB=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function pB(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||mB.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-lB(-t):lB(t);if(r!==t){var i=String(r),o=Z_.call(e,i.length+1);return Lo.call(i,n,"$&_")+"."+Lo.call(Lo.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Lo.call(e,n,"$&_")}var W_=iB(),fB=W_.custom,hB=SB(fB)?fB:null;EB.exports=function t(e,n,r,i){var o=n||{};if(jo(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(jo(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=jo(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(jo(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(jo(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return bB(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?pB(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return a?pB(e,u):u}var l=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=l&&l>0&&typeof e=="object")return G_(e)?"[Array]":"[Object]";var d=Dee(o,r);if(typeof i>"u")i=[];else if(wB(i,e)>=0)return"[Circular]";function p(Ze,Wt,Gt){if(Wt&&(i=aee.call(i),i.push(Wt)),Gt){var qn={depth:o.depth};return jo(o,"quoteStyle")&&(qn.quoteStyle=o.quoteStyle),t(Ze,qn,r+1,i)}return t(Ze,o,r+1,i)}if(typeof e=="function"&&!gB(e)){var f=vee(e),g=Sv(e,p);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(g.length>0?" { "+oi.call(g,", ")+" }":"")}if(SB(e)){var m=nu?Lo.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):$_.call(e);return typeof e=="object"&&!nu?gd(m):m}if(bee(e)){for(var y="<"+cB.call(String(e.nodeName)),w=e.attributes||[],I=0;I<w.length;I++)y+=" "+w[I].name+"="+CB(cee(w[I].value),"double",o);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+cB.call(String(e.nodeName))+">",y}if(G_(e)){if(e.length===0)return"[]";var C=Sv(e,p);return d&&!Iee(C)?"["+K_(C,d)+"]":"[ "+oi.call(C,", ")+" ]"}if(lee(e)){var _=Sv(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!yB.call(e,"cause")?"{ ["+String(e)+"] "+oi.call(uB.call("[cause]: "+p(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+oi.call(_,", ")+" }"}if(typeof e=="object"&&s){if(hB&&typeof e[hB]=="function"&&W_)return W_(e,{depth:l-r});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(mee(e)){var H=[];return oB&&oB.call(e,function(Ze,Wt){H.push(p(Wt,e,!0)+" => "+p(Ze,e))}),vB("Map",wv.call(e),H,d)}if(See(e)){var O=[];return sB&&sB.call(e,function(Ze){O.push(p(Ze,e))}),vB("Set",bv.call(e),O,d)}if(yee(e))return U_("WeakMap");if(wee(e))return U_("WeakSet");if(Cee(e))return U_("WeakRef");if(pee(e))return gd(p(Number(e)));if(hee(e))return gd(p(H_.call(e)));if(fee(e))return gd(nee.call(e));if(dee(e))return gd(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!uee(e)&&!gB(e)){var de=Sv(e,p),ae=dB?dB(e)===Object.prototype:e instanceof Object||e.constructor===Object,De=e instanceof Object?"":"null prototype",Qe=!ae&&Vt&&Object(e)===e&&Vt in e?Z_.call(qo(e),8,-1):De?"Object":"",jr=ae||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",fr=jr+(Qe||De?"["+oi.call(uB.call([],Qe||[],De||[]),": ")+"] ":"");return de.length===0?fr+"{}":d?fr+"{"+K_(de,d)+"}":fr+"{ "+oi.call(de,", ")+" }"}return String(e)};function CB(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function cee(t){return Lo.call(String(t),/"/g,"&quot;")}function G_(t){return qo(t)==="[object Array]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function uee(t){return qo(t)==="[object Date]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function gB(t){return qo(t)==="[object RegExp]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function lee(t){return qo(t)==="[object Error]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function dee(t){return qo(t)==="[object String]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function pee(t){return qo(t)==="[object Number]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function fee(t){return qo(t)==="[object Boolean]"&&(!Vt||!(typeof t=="object"&&Vt in t))}function SB(t){if(nu)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!$_)return!1;try{return $_.call(t),!0}catch{}return!1}function hee(t){if(!t||typeof t!="object"||!H_)return!1;try{return H_.call(t),!0}catch{}return!1}var gee=Object.prototype.hasOwnProperty||function(t){return t in this};function jo(t,e){return gee.call(t,e)}function qo(t){return ree.call(t)}function vee(t){if(t.name)return t.name;var e=oee.call(iee.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function wB(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function mee(t){if(!wv||!t||typeof t!="object")return!1;try{wv.call(t);try{bv.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function yee(t){if(!vd||!t||typeof t!="object")return!1;try{vd.call(t,vd);try{md.call(t,md)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Cee(t){if(!aB||!t||typeof t!="object")return!1;try{return aB.call(t),!0}catch{}return!1}function See(t){if(!bv||!t||typeof t!="object")return!1;try{bv.call(t);try{wv.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function wee(t){if(!md||!t||typeof t!="object")return!1;try{md.call(t,md);try{vd.call(t,vd)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function bee(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function bB(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return bB(Z_.call(t,0,e.maxStringLength),e)+r}var i=Lo.call(Lo.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Eee);return CB(i,"single",e)}function Eee(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+see.call(e.toString(16))}function gd(t){return"Object("+t+")"}function U_(t){return t+" { ? }"}function vB(t,e,n,r){var i=r?K_(n,r):oi.call(n,", ");return t+" ("+e+") {"+i+"}"}function Iee(t){for(var e=0;e<t.length;e++)if(wB(t[e],`
`)>=0)return!1;return!0}function Dee(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=oi.call(Array(t.indent+1)," ");else return null;return{base:n,prev:oi.call(Array(e+1),n)}}function K_(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+oi.call(t,","+n)+`
`+e.prev}function Sv(t,e){var n=G_(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=jo(t,i)?e(t[i],t):""}var o=typeof z_=="function"?z_(t):[],s;if(nu){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var c in t)jo(t,c)&&(n&&String(Number(c))===c&&c<t.length||nu&&s["$"+c]instanceof Symbol||(mB.call(/[^\w$]/,c)?r.push(e(c,t)+": "+e(t[c],t)):r.push(c+": "+e(t[c],t))));if(typeof z_=="function")for(var u=0;u<o.length;u++)yB.call(t,o[u])&&r.push("["+e(o[u])+"]: "+e(t[o[u]],t));return r}});var RB=h((Dbe,_B)=>{"use strict";var DB=$s(),ru=tu(),_ee=IB(),Ree=Jc(),Ev=DB("%WeakMap%",!0),Iv=DB("%Map%",!0),Pee=ru("WeakMap.prototype.get",!0),Tee=ru("WeakMap.prototype.set",!0),Aee=ru("WeakMap.prototype.has",!0),Mee=ru("Map.prototype.get",!0),Oee=ru("Map.prototype.set",!0),xee=ru("Map.prototype.has",!0),Y_=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},Nee=function(t,e){var n=Y_(t,e);return n&&n.value},kee=function(t,e,n){var r=Y_(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},Fee=function(t,e){return!!Y_(t,e)};_B.exports=function(){var e,n,r,i={assert:function(o){if(!i.has(o))throw new Ree("Side channel does not contain "+_ee(o))},get:function(o){if(Ev&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Pee(e,o)}else if(Iv){if(n)return Mee(n,o)}else if(r)return Nee(r,o)},has:function(o){if(Ev&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Aee(e,o)}else if(Iv){if(n)return xee(n,o)}else if(r)return Fee(r,o);return!1},set:function(o,s){Ev&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Ev),Tee(e,o,s)):Iv?(n||(n=new Iv),Oee(n,o,s)):(r||(r={key:{},next:null}),kee(r,o,s))}};return i}});var Dv=h((_be,PB)=>{"use strict";var jee=String.prototype.replace,Lee=/%20/g,X_={RFC1738:"RFC1738",RFC3986:"RFC3986"};PB.exports={default:X_.RFC3986,formatters:{RFC1738:function(t){return jee.call(t,Lee,"+")},RFC3986:function(t){return String(t)}},RFC1738:X_.RFC1738,RFC3986:X_.RFC3986}});var n0=h((Rbe,AB)=>{"use strict";var qee=Dv(),e0=Object.prototype.hasOwnProperty,Ws=Array.isArray,si=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Bee=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Ws(r)){for(var i=[],o=0;o<r.length;++o)typeof r[o]<"u"&&i.push(r[o]);n.obj[n.prop]=i}}},TB=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},Vee=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Ws(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!e0.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return Ws(e)&&!Ws(n)&&(i=TB(e,r)),Ws(e)&&Ws(n)?(n.forEach(function(o,s){if(e0.call(e,s)){var a=e[s];a&&typeof a=="object"&&o&&typeof o=="object"?e[s]=t(a,o,r):e.push(o)}else e[s]=o}),e):Object.keys(n).reduce(function(o,s){var a=n[s];return e0.call(o,s)?o[s]=t(o[s],a,r):o[s]=a,o},i)},zee=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},Uee=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},t0=1024,Hee=function(e,n,r,i,o){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),r==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",c=0;c<s.length;c+=t0){for(var u=s.length>=t0?s.slice(c,c+t0):s,l=[],d=0;d<u.length;++d){var p=u.charCodeAt(d);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||o===qee.RFC1738&&(p===40||p===41)){l[l.length]=u.charAt(d);continue}if(p<128){l[l.length]=si[p];continue}if(p<2048){l[l.length]=si[192|p>>6]+si[128|p&63];continue}if(p<55296||p>=57344){l[l.length]=si[224|p>>12]+si[128|p>>6&63]+si[128|p&63];continue}d+=1,p=65536+((p&1023)<<10|u.charCodeAt(d)&1023),l[l.length]=si[240|p>>18]+si[128|p>>12&63]+si[128|p>>6&63]+si[128|p&63]}a+=l.join("")}return a},$ee=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var o=n[i],s=o.obj[o.prop],a=Object.keys(s),c=0;c<a.length;++c){var u=a[c],l=s[u];typeof l=="object"&&l!==null&&r.indexOf(l)===-1&&(n.push({obj:s,prop:u}),r.push(l))}return Bee(n),e},Wee=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Gee=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Kee=function(e,n){return[].concat(e,n)},Jee=function(e,n){if(Ws(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)};AB.exports={arrayToObject:TB,assign:zee,combine:Kee,compact:$ee,decode:Uee,encode:Hee,isBuffer:Gee,isRegExp:Wee,maybeMap:Jee,merge:Vee}});var FB=h((Pbe,kB)=>{"use strict";var OB=RB(),_v=n0(),yd=Dv(),Qee=Object.prototype.hasOwnProperty,xB={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},ai=Array.isArray,Zee=Array.prototype.push,NB=function(t,e){Zee.apply(t,ai(e)?e:[e])},Yee=Date.prototype.toISOString,MB=yd.default,lt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_v.encode,encodeValuesOnly:!1,format:MB,formatter:yd.formatters[MB],indices:!1,serializeDate:function(e){return Yee.call(e)},skipNulls:!1,strictNullHandling:!1},Xee=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},r0={},ete=function t(e,n,r,i,o,s,a,c,u,l,d,p,f,g,m,y,w,I){for(var C=e,_=I,H=0,O=!1;(_=_.get(r0))!==void 0&&!O;){var de=_.get(e);if(H+=1,typeof de<"u"){if(de===H)throw new RangeError("Cyclic object value");O=!0}typeof _.get(r0)>"u"&&(H=0)}if(typeof l=="function"?C=l(n,C):C instanceof Date?C=f(C):r==="comma"&&ai(C)&&(C=_v.maybeMap(C,function(ve){return ve instanceof Date?f(ve):ve})),C===null){if(s)return u&&!y?u(n,lt.encoder,w,"key",g):n;C=""}if(Xee(C)||_v.isBuffer(C)){if(u){var ae=y?n:u(n,lt.encoder,w,"key",g);return[m(ae)+"="+m(u(C,lt.encoder,w,"value",g))]}return[m(n)+"="+m(String(C))]}var De=[];if(typeof C>"u")return De;var Qe;if(r==="comma"&&ai(C))y&&u&&(C=_v.maybeMap(C,u)),Qe=[{value:C.length>0?C.join(",")||null:void 0}];else if(ai(l))Qe=l;else{var jr=Object.keys(C);Qe=d?jr.sort(d):jr}var fr=c?n.replace(/\./g,"%2E"):n,Ze=i&&ai(C)&&C.length===1?fr+"[]":fr;if(o&&ai(C)&&C.length===0)return Ze+"[]";for(var Wt=0;Wt<Qe.length;++Wt){var Gt=Qe[Wt],qn=typeof Gt=="object"&&typeof Gt.value<"u"?Gt.value:C[Gt];if(!(a&&qn===null)){var cs=p&&c?Gt.replace(/\./g,"%2E"):Gt,F=ai(C)?typeof r=="function"?r(Ze,cs):Ze:Ze+(p?"."+cs:"["+cs+"]");I.set(e,H);var G=OB();G.set(r0,I),NB(De,t(qn,F,r,i,o,s,a,c,r==="comma"&&y&&ai(C)?null:u,l,d,p,f,g,m,y,w,G))}}return De},tte=function(e){if(!e)return lt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||lt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=yd.default;if(typeof e.format<"u"){if(!Qee.call(yd.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=yd.formatters[r],o=lt.filter;(typeof e.filter=="function"||ai(e.filter))&&(o=e.filter);var s;if(e.arrayFormat in xB?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=lt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:lt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:lt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:lt.allowEmptyArrays,arrayFormat:s,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:lt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?lt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:lt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:lt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:lt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:lt.encodeValuesOnly,filter:o,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:lt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:lt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:lt.strictNullHandling}};kB.exports=function(t,e){var n=t,r=tte(e),i,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):ai(r.filter)&&(o=r.filter,i=o);var s=[];if(typeof n!="object"||n===null)return"";var a=xB[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var u=OB(),l=0;l<i.length;++l){var d=i[l];r.skipNulls&&n[d]===null||NB(s,ete(n[d],d,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var p=s.join(r.delimiter),f=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),p.length>0?f+p:""}});var qB=h((Tbe,LB)=>{"use strict";var iu=n0(),i0=Object.prototype.hasOwnProperty,nte=Array.isArray,He={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:iu.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},rte=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},jB=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},ite="utf8=%26%2310003%3B",ote="utf8=%E2%9C%93",ste=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=n.parameterLimit===1/0?void 0:n.parameterLimit,s=i.split(n.delimiter,o),a=-1,c,u=n.charset;if(n.charsetSentinel)for(c=0;c<s.length;++c)s[c].indexOf("utf8=")===0&&(s[c]===ote?u="utf-8":s[c]===ite&&(u="iso-8859-1"),a=c,c=s.length);for(c=0;c<s.length;++c)if(c!==a){var l=s[c],d=l.indexOf("]="),p=d===-1?l.indexOf("="):d+1,f,g;p===-1?(f=n.decoder(l,He.decoder,u,"key"),g=n.strictNullHandling?null:""):(f=n.decoder(l.slice(0,p),He.decoder,u,"key"),g=iu.maybeMap(jB(l.slice(p+1),n),function(y){return n.decoder(y,He.decoder,u,"value")})),g&&n.interpretNumericEntities&&u==="iso-8859-1"&&(g=rte(g)),l.indexOf("[]=")>-1&&(g=nte(g)?[g]:g);var m=i0.call(r,f);m&&n.duplicates==="combine"?r[f]=iu.combine(r[f],g):(!m||n.duplicates==="last")&&(r[f]=g)}return r},ate=function(t,e,n,r){for(var i=r?e:jB(e,n),o=t.length-1;o>=0;--o){var s,a=t[o];if(a==="[]"&&n.parseArrays)s=n.allowEmptyArrays&&(i===""||n.strictNullHandling&&i===null)?[]:[].concat(i);else{s=n.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=n.decodeDotInKeys?c.replace(/%2E/g,"."):c,l=parseInt(u,10);!n.parseArrays&&u===""?s={0:i}:!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(s=[],s[l]=i):u!=="__proto__"&&(s[u]=i)}i=s}return i},cte=function(e,n,r,i){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=r.depth>0&&s.exec(o),u=c?o.slice(0,c.index):o,l=[];if(u){if(!r.plainObjects&&i0.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var d=0;r.depth>0&&(c=a.exec(o))!==null&&d<r.depth;){if(d+=1,!r.plainObjects&&i0.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(c[1])}if(c){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");l.push("["+o.slice(c.index)+"]")}return ate(l,n,r,i)}},ute=function(e){if(!e)return He;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?He.charset:e.charset,r=typeof e.duplicates>"u"?He.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:He.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:He.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:He.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:He.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:He.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:He.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:He.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:He.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:He.decoder,delimiter:typeof e.delimiter=="string"||iu.isRegExp(e.delimiter)?e.delimiter:He.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:He.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:He.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:He.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:He.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:He.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:He.strictNullHandling}};LB.exports=function(t,e){var n=ute(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?ste(t,n):t,i=n.plainObjects?Object.create(null):{},o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],c=cte(a,r[a],n,typeof t=="string");i=iu.merge(i,c,n)}return n.allowSparse===!0?i:iu.compact(i)}});var VB=h((Abe,BB)=>{"use strict";var lte=FB(),dte=qB(),pte=Dv();BB.exports={formats:pte,parse:dte,stringify:lte}});var $B=h(su=>{"use strict";var fte=cq();function Zn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var hte=/^([a-z0-9.+-]+:)/i,gte=/:[0-9]*$/,vte=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,mte=["<",">",'"',"`"," ","\r",`
`,"	"],yte=["{","}","|","\\","^","`"].concat(mte),o0=["'"].concat(yte),zB=["%","/","?",";","#"].concat(o0),UB=["/","?","#"],Cte=255,HB=/^[+a-z0-9A-Z_-]{0,63}$/,Ste=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,wte={javascript:!0,"javascript:":!0},s0={javascript:!0,"javascript:":!0},ou={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},a0=VB();function Cd(t,e,n){if(t&&typeof t=="object"&&t instanceof Zn)return t;var r=new Zn;return r.parse(t,e,n),r}Zn.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",o=t.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var c=vte.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=a0.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=hte.exec(a);if(u){u=u[0];var l=u.toLowerCase();this.protocol=l,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(u&&s0[u])&&(a=a.substr(2),this.slashes=!0)}if(!s0[u]&&(d||u&&!ou[u])){for(var p=-1,f=0;f<UB.length;f++){var g=a.indexOf(UB[f]);g!==-1&&(p===-1||g<p)&&(p=g)}var m,y;p===-1?y=a.lastIndexOf("@"):y=a.lastIndexOf("@",p),y!==-1&&(m=a.slice(0,y),a=a.slice(y+1),this.auth=decodeURIComponent(m)),p=-1;for(var f=0;f<zB.length;f++){var g=a.indexOf(zB[f]);g!==-1&&(p===-1||g<p)&&(p=g)}p===-1&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var I=this.hostname.split(/\./),f=0,C=I.length;f<C;f++){var _=I[f];if(_&&!_.match(HB)){for(var H="",O=0,de=_.length;O<de;O++)_.charCodeAt(O)>127?H+="x":H+=_[O];if(!H.match(HB)){var ae=I.slice(0,f),De=I.slice(f+1),Qe=_.match(Ste);Qe&&(ae.push(Qe[1]),De.unshift(Qe[2])),De.length&&(a="/"+De.join(".")+a),this.hostname=ae.join(".");break}}}this.hostname.length>Cte?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=fte.toASCII(this.hostname));var jr=this.port?":"+this.port:"",fr=this.hostname||"";this.host=fr+jr,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!wte[l])for(var f=0,C=o0.length;f<C;f++){var Ze=o0[f];if(a.indexOf(Ze)!==-1){var Wt=encodeURIComponent(Ze);Wt===Ze&&(Wt=escape(Ze)),a=a.split(Ze).join(Wt)}}var Gt=a.indexOf("#");Gt!==-1&&(this.hash=a.substr(Gt),a=a.slice(0,Gt));var qn=a.indexOf("?");if(qn!==-1?(this.search=a.substr(qn),this.query=a.substr(qn+1),e&&(this.query=a0.parse(this.query)),a=a.slice(0,qn)):e&&(this.search="",this.query={}),a&&(this.pathname=a),ou[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var jr=this.pathname||"",cs=this.search||"";this.path=jr+cs}return this.href=this.format(),this};function bte(t){return typeof t=="string"&&(t=Cd(t)),t instanceof Zn?t.format():Zn.prototype.format.call(t)}Zn.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=a0.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ou[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),e+i+n+s+r};function Ete(t,e){return Cd(t,!1,!0).resolve(e)}Zn.prototype.resolve=function(t){return this.resolveObject(Cd(t,!1,!0)).format()};function Ite(t,e){return t?Cd(t,!1,!0).resolveObject(e):e}Zn.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Zn;e.parse(t,!1,!0),t=e}for(var n=new Zn,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];c!=="protocol"&&(n[c]=t[c])}return ou[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!ou[t.protocol]){for(var u=Object.keys(t),l=0;l<u.length;l++){var d=u[l];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!s0[t.protocol]){for(var C=(t.pathname||"").split("/");C.length&&!(t.host=C.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),C[0]!==""&&C.unshift(""),C.length<2&&C.unshift(""),n.pathname=C.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",f=n.search||"";n.path=p+f}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&n.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",y=m||g||n.host&&t.pathname,w=y,I=n.pathname&&n.pathname.split("/")||[],C=t.pathname&&t.pathname.split("/")||[],_=n.protocol&&!ou[n.protocol];if(_&&(n.hostname="",n.port=null,n.host&&(I[0]===""?I[0]=n.host:I.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(C[0]===""?C[0]=t.host:C.unshift(t.host)),t.host=null),y=y&&(C[0]===""||I[0]==="")),m)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,I=C;else if(C.length)I||(I=[]),I.pop(),I=I.concat(C),n.search=t.search,n.query=t.query;else if(t.search!=null){if(_){n.host=I.shift(),n.hostname=n.host;var H=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;H&&(n.auth=H.shift(),n.hostname=H.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!I.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var O=I.slice(-1)[0],de=(n.host||t.host||I.length>1)&&(O==="."||O==="..")||O==="",ae=0,De=I.length;De>=0;De--)O=I[De],O==="."?I.splice(De,1):O===".."?(I.splice(De,1),ae++):ae&&(I.splice(De,1),ae--);if(!y&&!w)for(;ae--;ae)I.unshift("..");y&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),de&&I.join("/").substr(-1)!=="/"&&I.push("");var Qe=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(_){n.hostname=Qe?"":I.length?I.shift():"",n.host=n.hostname;var H=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;H&&(n.auth=H.shift(),n.hostname=H.shift(),n.host=n.hostname)}return y=y||n.host&&I.length,y&&!Qe&&I.unshift(""),I.length>0?n.pathname=I.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Zn.prototype.parseHost=function(){var t=this.host,e=gte.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};su.parse=Cd;su.resolve=Ete;su.resolveObject=Ite;su.format=bte;su.Url=Zn});var Rv=h((Obe,WB)=>{"use strict";var Dte=lv();WB.exports=function(){return Dte()&&!!Symbol.toStringTag}});var JB=h((xbe,KB)=>{"use strict";var _te=Rv()(),Rte=tu(),c0=Rte("Object.prototype.toString"),Pv=function(e){return _te&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:c0(e)==="[object Arguments]"},GB=function(e){return Pv(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&c0(e)!=="[object Array]"&&c0(e.callee)==="[object Function]"},Pte=function(){return Pv(arguments)}();Pv.isLegacyArguments=GB;KB.exports=Pte?Pv:GB});var YB=h((Nbe,ZB)=>{"use strict";var Tte=Object.prototype.toString,Ate=Function.prototype.toString,Mte=/^\s*(?:function)?\*/,QB=Rv()(),u0=Object.getPrototypeOf,Ote=function(){if(!QB)return!1;try{return Function("return function*() {}")()}catch{}},l0;ZB.exports=function(e){if(typeof e!="function")return!1;if(Mte.test(Ate.call(e)))return!0;if(!QB){var n=Tte.call(e);return n==="[object GeneratorFunction]"}if(!u0)return!1;if(typeof l0>"u"){var r=Ote();l0=r?u0(r):!1}return u0(e)===l0}});var nV=h((kbe,tV)=>{"use strict";var eV=Function.prototype.toString,au=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,p0,Tv;if(typeof au=="function"&&typeof Object.defineProperty=="function")try{p0=Object.defineProperty({},"length",{get:function(){throw Tv}}),Tv={},au(function(){throw 42},null,p0)}catch(t){t!==Tv&&(au=null)}else au=null;var xte=/^\s*class\b/,f0=function(e){try{var n=eV.call(e);return xte.test(n)}catch{return!1}},d0=function(e){try{return f0(e)?!1:(eV.call(e),!0)}catch{return!1}},Av=Object.prototype.toString,Nte="[object Object]",kte="[object Function]",Fte="[object GeneratorFunction]",jte="[object HTMLAllCollection]",Lte="[object HTML document.all class]",qte="[object HTMLCollection]",Bte=typeof Symbol=="function"&&!!Symbol.toStringTag,Vte=!(0 in[,]),h0=function(){return!1};typeof document=="object"&&(XB=document.all,Av.call(XB)===Av.call(document.all)&&(h0=function(e){if((Vte||!e)&&(typeof e>"u"||typeof e=="object"))try{var n=Av.call(e);return(n===jte||n===Lte||n===qte||n===Nte)&&e("")==null}catch{}return!1}));var XB;tV.exports=au?function(e){if(h0(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{au(e,null,p0)}catch(n){if(n!==Tv)return!1}return!f0(e)&&d0(e)}:function(e){if(h0(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Bte)return d0(e);if(f0(e))return!1;var n=Av.call(e);return n!==kte&&n!==Fte&&!/^\[object HTML/.test(n)?!1:d0(e)}});var oV=h((Fbe,iV)=>{"use strict";var zte=nV(),Ute=Object.prototype.toString,rV=Object.prototype.hasOwnProperty,Hte=function(e,n,r){for(var i=0,o=e.length;i<o;i++)rV.call(e,i)&&(r==null?n(e[i],i,e):n.call(r,e[i],i,e))},$te=function(e,n,r){for(var i=0,o=e.length;i<o;i++)r==null?n(e.charAt(i),i,e):n.call(r,e.charAt(i),i,e)},Wte=function(e,n,r){for(var i in e)rV.call(e,i)&&(r==null?n(e[i],i,e):n.call(r,e[i],i,e))},Gte=function(e,n,r){if(!zte(n))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),Ute.call(e)==="[object Array]"?Hte(e,n,i):typeof e=="string"?$te(e,n,i):Wte(e,n,i)};iV.exports=Gte});var aV=h((jbe,sV)=>{"use strict";sV.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]});var uV=h((Lbe,cV)=>{"use strict";var g0=aV(),Kte=typeof globalThis>"u"?global:globalThis;cV.exports=function(){for(var e=[],n=0;n<g0.length;n++)typeof Kte[g0[n]]=="function"&&(e[e.length]=g0[n]);return e}});var S0=h((qbe,fV)=>{"use strict";var Ov=oV(),Jte=uV(),lV=hd(),y0=tu(),Mv=mv(),Qte=y0("Object.prototype.toString"),pV=Rv()(),dV=typeof globalThis>"u"?global:globalThis,m0=Jte(),C0=y0("String.prototype.slice"),v0=Object.getPrototypeOf,Zte=y0("Array.prototype.indexOf",!0)||function(e,n){for(var r=0;r<e.length;r+=1)if(e[r]===n)return r;return-1},xv={__proto__:null};pV&&Mv&&v0?Ov(m0,function(t){var e=new dV[t];if(Symbol.toStringTag in e){var n=v0(e),r=Mv(n,Symbol.toStringTag);if(!r){var i=v0(n);r=Mv(i,Symbol.toStringTag)}xv["$"+t]=lV(r.get)}}):Ov(m0,function(t){var e=new dV[t],n=e.slice||e.set;n&&(xv["$"+t]=lV(n))});var Yte=function(e){var n=!1;return Ov(xv,function(r,i){if(!n)try{"$"+r(e)===i&&(n=C0(i,1))}catch{}}),n},Xte=function(e){var n=!1;return Ov(xv,function(r,i){if(!n)try{r(e),n=C0(i,1)}catch{}}),n};fV.exports=function(e){if(!e||typeof e!="object")return!1;if(!pV){var n=C0(Qte(e),8,-1);return Zte(m0,n)>-1?n:n!=="Object"?!1:Xte(e)}return Mv?Yte(e):null}});var gV=h((Bbe,hV)=>{"use strict";var ene=S0();hV.exports=function(e){return!!ene(e)}});var TV=h(ue=>{"use strict";var tne=JB(),nne=YB(),Dr=S0(),vV=gV();function cu(t){return t.call.bind(t)}var mV=typeof BigInt<"u",yV=typeof Symbol<"u",Yn=cu(Object.prototype.toString),rne=cu(Number.prototype.valueOf),ine=cu(String.prototype.valueOf),one=cu(Boolean.prototype.valueOf);mV&&(CV=cu(BigInt.prototype.valueOf));var CV;yV&&(SV=cu(Symbol.prototype.valueOf));var SV;function wd(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch{return!1}}ue.isArgumentsObject=tne;ue.isGeneratorFunction=nne;ue.isTypedArray=vV;function sne(t){return typeof Promise<"u"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}ue.isPromise=sne;function ane(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):vV(t)||bV(t)}ue.isArrayBufferView=ane;function cne(t){return Dr(t)==="Uint8Array"}ue.isUint8Array=cne;function une(t){return Dr(t)==="Uint8ClampedArray"}ue.isUint8ClampedArray=une;function lne(t){return Dr(t)==="Uint16Array"}ue.isUint16Array=lne;function dne(t){return Dr(t)==="Uint32Array"}ue.isUint32Array=dne;function pne(t){return Dr(t)==="Int8Array"}ue.isInt8Array=pne;function fne(t){return Dr(t)==="Int16Array"}ue.isInt16Array=fne;function hne(t){return Dr(t)==="Int32Array"}ue.isInt32Array=hne;function gne(t){return Dr(t)==="Float32Array"}ue.isFloat32Array=gne;function vne(t){return Dr(t)==="Float64Array"}ue.isFloat64Array=vne;function mne(t){return Dr(t)==="BigInt64Array"}ue.isBigInt64Array=mne;function yne(t){return Dr(t)==="BigUint64Array"}ue.isBigUint64Array=yne;function Nv(t){return Yn(t)==="[object Map]"}Nv.working=typeof Map<"u"&&Nv(new Map);function Cne(t){return typeof Map>"u"?!1:Nv.working?Nv(t):t instanceof Map}ue.isMap=Cne;function kv(t){return Yn(t)==="[object Set]"}kv.working=typeof Set<"u"&&kv(new Set);function Sne(t){return typeof Set>"u"?!1:kv.working?kv(t):t instanceof Set}ue.isSet=Sne;function Fv(t){return Yn(t)==="[object WeakMap]"}Fv.working=typeof WeakMap<"u"&&Fv(new WeakMap);function wne(t){return typeof WeakMap>"u"?!1:Fv.working?Fv(t):t instanceof WeakMap}ue.isWeakMap=wne;function b0(t){return Yn(t)==="[object WeakSet]"}b0.working=typeof WeakSet<"u"&&b0(new WeakSet);function bne(t){return b0(t)}ue.isWeakSet=bne;function jv(t){return Yn(t)==="[object ArrayBuffer]"}jv.working=typeof ArrayBuffer<"u"&&jv(new ArrayBuffer);function wV(t){return typeof ArrayBuffer>"u"?!1:jv.working?jv(t):t instanceof ArrayBuffer}ue.isArrayBuffer=wV;function Lv(t){return Yn(t)==="[object DataView]"}Lv.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Lv(new DataView(new ArrayBuffer(1),0,1));function bV(t){return typeof DataView>"u"?!1:Lv.working?Lv(t):t instanceof DataView}ue.isDataView=bV;var w0=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Sd(t){return Yn(t)==="[object SharedArrayBuffer]"}function EV(t){return typeof w0>"u"?!1:(typeof Sd.working>"u"&&(Sd.working=Sd(new w0)),Sd.working?Sd(t):t instanceof w0)}ue.isSharedArrayBuffer=EV;function Ene(t){return Yn(t)==="[object AsyncFunction]"}ue.isAsyncFunction=Ene;function Ine(t){return Yn(t)==="[object Map Iterator]"}ue.isMapIterator=Ine;function Dne(t){return Yn(t)==="[object Set Iterator]"}ue.isSetIterator=Dne;function _ne(t){return Yn(t)==="[object Generator]"}ue.isGeneratorObject=_ne;function Rne(t){return Yn(t)==="[object WebAssembly.Module]"}ue.isWebAssemblyCompiledModule=Rne;function IV(t){return wd(t,rne)}ue.isNumberObject=IV;function DV(t){return wd(t,ine)}ue.isStringObject=DV;function _V(t){return wd(t,one)}ue.isBooleanObject=_V;function RV(t){return mV&&wd(t,CV)}ue.isBigIntObject=RV;function PV(t){return yV&&wd(t,SV)}ue.isSymbolObject=PV;function Pne(t){return IV(t)||DV(t)||_V(t)||RV(t)||PV(t)}ue.isBoxedPrimitive=Pne;function Tne(t){return typeof Uint8Array<"u"&&(wV(t)||EV(t))}ue.isAnyArrayBuffer=Tne;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(ue,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var MV=h((zbe,AV)=>{"use strict";AV.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var OV=h((Ube,E0)=>{"use strict";typeof Object.create=="function"?E0.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:E0.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}});var Js=h(le=>{"use strict";var xV=Object.getOwnPropertyDescriptors||function(e){for(var n=Object.keys(e),r={},i=0;i<n.length;i++)r[n[i]]=Object.getOwnPropertyDescriptor(e,n[i]);return r},Ane=/%[sdj%]/g;le.format=function(t){if(!$v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Bo(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(t).replace(Ane,function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}}),s=r[n];n<i;s=r[++n])Hv(s)||!uu(s)?o+=" "+s:o+=" "+Bo(s);return o};le.deprecate=function(t,e){if(typeof process<"u"&&process.noDeprecation===!0)return t;if(typeof process>"u")return function(){return le.deprecate(t,e).apply(this,arguments)};var n=!1;function r(){if(!n){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}return r};var qv={},NV=/^$/;process.env.NODE_DEBUG&&(Bv=process.env.NODE_DEBUG,Bv=Bv.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),NV=new RegExp("^"+Bv+"$","i"));var Bv;le.debuglog=function(t){if(t=t.toUpperCase(),!qv[t])if(NV.test(t)){var e=process.pid;qv[t]=function(){var n=le.format.apply(le,arguments);console.error("%s %d: %s",t,e,n)}}else qv[t]=function(){};return qv[t]};function Bo(t,e){var n={seen:[],stylize:One};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),R0(e)?n.showHidden=e:e&&le._extend(n,e),Ks(n.showHidden)&&(n.showHidden=!1),Ks(n.depth)&&(n.depth=2),Ks(n.colors)&&(n.colors=!1),Ks(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Mne),zv(n,t,n.depth)}le.inspect=Bo;Bo.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Bo.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Mne(t,e){var n=Bo.styles[e];return n?"\x1B["+Bo.colors[n][0]+"m"+t+"\x1B["+Bo.colors[n][1]+"m":t}function One(t,e){return t}function xne(t){var e={};return t.forEach(function(n,r){e[n]=!0}),e}function zv(t,e,n){if(t.customInspect&&e&&Vv(e.inspect)&&e.inspect!==le.inspect&&!(e.constructor&&e.constructor.prototype===e)){var r=e.inspect(n,t);return $v(r)||(r=zv(t,r,n)),r}var i=Nne(t,e);if(i)return i;var o=Object.keys(e),s=xne(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),Ed(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return I0(e);if(o.length===0){if(Vv(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(bd(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Uv(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Ed(e))return I0(e)}var c="",u=!1,l=["{","}"];if(kV(e)&&(u=!0,l=["[","]"]),Vv(e)){var d=e.name?": "+e.name:"";c=" [Function"+d+"]"}if(bd(e)&&(c=" "+RegExp.prototype.toString.call(e)),Uv(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Ed(e)&&(c=" "+I0(e)),o.length===0&&(!u||e.length==0))return l[0]+c+l[1];if(n<0)return bd(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var p;return u?p=kne(t,e,n,s,o):p=o.map(function(f){return _0(t,e,n,s,f,u)}),t.seen.pop(),Fne(p,c,l)}function Nne(t,e){if(Ks(e))return t.stylize("undefined","undefined");if($v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(FV(e))return t.stylize(""+e,"number");if(R0(e))return t.stylize(""+e,"boolean");if(Hv(e))return t.stylize("null","null")}function I0(t){return"["+Error.prototype.toString.call(t)+"]"}function kne(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)jV(e,String(s))?o.push(_0(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(c){c.match(/^\d+$/)||o.push(_0(t,e,n,r,c,!0))}),o}function _0(t,e,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?c.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),jV(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(Hv(n)?a=zv(t,c.value,null):a=zv(t,c.value,n-1),a.indexOf(`
`)>-1&&(o?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=t.stylize("[Circular]","special")),Ks(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function Fne(t,e,n){var r=0,i=t.reduce(function(o,s){return r++,s.indexOf(`
`)>=0&&r++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}le.types=TV();function kV(t){return Array.isArray(t)}le.isArray=kV;function R0(t){return typeof t=="boolean"}le.isBoolean=R0;function Hv(t){return t===null}le.isNull=Hv;function jne(t){return t==null}le.isNullOrUndefined=jne;function FV(t){return typeof t=="number"}le.isNumber=FV;function $v(t){return typeof t=="string"}le.isString=$v;function Lne(t){return typeof t=="symbol"}le.isSymbol=Lne;function Ks(t){return t===void 0}le.isUndefined=Ks;function bd(t){return uu(t)&&P0(t)==="[object RegExp]"}le.isRegExp=bd;le.types.isRegExp=bd;function uu(t){return typeof t=="object"&&t!==null}le.isObject=uu;function Uv(t){return uu(t)&&P0(t)==="[object Date]"}le.isDate=Uv;le.types.isDate=Uv;function Ed(t){return uu(t)&&(P0(t)==="[object Error]"||t instanceof Error)}le.isError=Ed;le.types.isNativeError=Ed;function Vv(t){return typeof t=="function"}le.isFunction=Vv;function qne(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}le.isPrimitive=qne;le.isBuffer=MV();function P0(t){return Object.prototype.toString.call(t)}function D0(t){return t<10?"0"+t.toString(10):t.toString(10)}var Bne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Vne(){var t=new Date,e=[D0(t.getHours()),D0(t.getMinutes()),D0(t.getSeconds())].join(":");return[t.getDate(),Bne[t.getMonth()],e].join(" ")}le.log=function(){console.log("%s - %s",Vne(),le.format.apply(le,arguments))};le.inherits=OV();le._extend=function(t,e){if(!e||!uu(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};function jV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Gs=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;le.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(Gs&&e[Gs]){var n=e[Gs];if(typeof n!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,Gs,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var r,i,o=new Promise(function(c,u){r=c,i=u}),s=[],a=0;a<arguments.length;a++)s.push(arguments[a]);s.push(function(c,u){c?i(c):r(u)});try{e.apply(this,s)}catch(c){i(c)}return o}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Gs&&Object.defineProperty(n,Gs,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,xV(e))};le.promisify.custom=Gs;function zne(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function Une(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(a){process.nextTick(s.bind(null,null,a))},function(a){process.nextTick(zne.bind(null,a,s))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,xV(t)),e}le.callbackify=Une});var M0=h(($be,VV)=>{"use strict";function Vo(t){"@babel/helpers - typeof";return Vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vo(t)}function LV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$ne(r.key),r)}}function Hne(t,e,n){return e&&LV(t.prototype,e),n&&LV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ne(t){var e=Wne(t,"string");return Vo(e)==="symbol"?e:String(e)}function Wne(t,e){if(Vo(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vo(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A0(t,e)}function A0(t,e){return A0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A0(t,e)}function Jne(t){var e=Yne();return function(){var r=Wv(t),i;if(e){var o=Wv(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Qne(this,i)}}function Qne(t,e){if(e&&(Vo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zne(t)}function Zne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wv(t){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wv(t)}var BV={},lu,T0;function Id(t,e,n){n||(n=Error);function r(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){Kne(a,o);var s=Jne(a);function a(c,u,l){var d;return Gne(this,a),d=s.call(this,r(c,u,l)),d.code=t,d}return Hne(a)}(n);BV[t]=i}function qV(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Xne(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}function ere(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function tre(t,e,n){return typeof n!="number"&&(n=0),n+e.length>t.length?!1:t.indexOf(e,n)!==-1}Id("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);Id("ERR_INVALID_ARG_TYPE",function(t,e,n){lu===void 0&&(lu=Gv()),lu(typeof t=="string","'name' must be a string");var r;typeof e=="string"&&Xne(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be";var i;if(ere(t," argument"))i="The ".concat(t," ").concat(r," ").concat(qV(e,"type"));else{var o=tre(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(qV(e,"type"))}return i+=". Received type ".concat(Vo(n)),i},TypeError);Id("ERR_INVALID_ARG_VALUE",function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";T0===void 0&&(T0=Js());var r=T0.inspect(e);return r.length>128&&(r="".concat(r.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(n,". Received ").concat(r)},TypeError,RangeError);Id("ERR_INVALID_RETURN_VALUE",function(t,e,n){var r;return n&&n.constructor&&n.constructor.name?r="instance of ".concat(n.constructor.name):r="type ".concat(Vo(n)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(r,".")},TypeError);Id("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];lu===void 0&&(lu=Gv()),lu(e.length>0,"At least one arg needs to be specified");var r="The ",i=e.length;switch(e=e.map(function(o){return'"'.concat(o,'"')}),i){case 1:r+="".concat(e[0]," argument");break;case 2:r+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:r+=e.slice(0,i-1).join(", "),r+=", and ".concat(e[i-1]," arguments");break}return"".concat(r," must be specified")},TypeError);VV.exports.codes=BV});var ZV=h((Wbe,QV)=>{"use strict";function zV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zV(Object(n),!0).forEach(function(r){nre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nre(t,e,n){return e=GV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GV(r.key),r)}}function ire(t,e,n){return e&&HV(t.prototype,e),n&&HV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GV(t){var e=ore(t,"string");return Cn(e)==="symbol"?e:String(e)}function ore(t,e){if(Cn(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pd(t,e)}function are(t){var e=JV();return function(){var r=Td(t),i;if(e){var o=Td(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return KV(this,i)}}function KV(t,e){if(e&&(Cn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O0(t)}function O0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x0(t){var e=typeof Map=="function"?new Map:void 0;return x0=function(r){if(r===null||!cre(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Kv(r,arguments,Td(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Pd(i,r)},x0(t)}function Kv(t,e,n){return JV()?Kv=Reflect.construct.bind():Kv=function(i,o,s){var a=[null];a.push.apply(a,o);var c=Function.bind.apply(i,a),u=new c;return s&&Pd(u,s.prototype),u},Kv.apply(null,arguments)}function JV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cre(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Pd(t,e){return Pd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Pd(t,e)}function Td(t){return Td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Td(t)}function Cn(t){"@babel/helpers - typeof";return Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(t)}var ure=Js(),N0=ure.inspect,lre=M0(),dre=lre.codes.ERR_INVALID_ARG_TYPE;function $V(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function pre(t,e){if(e=Math.floor(e),t.length==0||e==0)return"";var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,n-t.length),t}var _r="",Dd="",_d="",Et="",Qs={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},fre=10;function WV(t){var e=Object.keys(t),n=Object.create(Object.getPrototypeOf(t));return e.forEach(function(r){n[r]=t[r]}),Object.defineProperty(n,"message",{value:t.message}),n}function Rd(t){return N0(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function hre(t,e,n){var r="",i="",o=0,s="",a=!1,c=Rd(t),u=c.split(`
`),l=Rd(e).split(`
`),d=0,p="";if(n==="strictEqual"&&Cn(t)==="object"&&Cn(e)==="object"&&t!==null&&e!==null&&(n="strictEqualObject"),u.length===1&&l.length===1&&u[0]!==l[0]){var f=u[0].length+l[0].length;if(f<=fre){if((Cn(t)!=="object"||t===null)&&(Cn(e)!=="object"||e===null)&&(t!==0||e!==0))return"".concat(Qs[n],`

`)+"".concat(u[0]," !== ").concat(l[0],`
`)}else if(n!=="strictEqualObject"){var g=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(f<g){for(;u[0][d]===l[0][d];)d++;d>2&&(p=`
  `.concat(pre(" ",d),"^"),d=0)}}}for(var m=u[u.length-1],y=l[l.length-1];m===y&&(d++<2?s=`
  `.concat(m).concat(s):r=m,u.pop(),l.pop(),!(u.length===0||l.length===0));)m=u[u.length-1],y=l[l.length-1];var w=Math.max(u.length,l.length);if(w===0){var I=c.split(`
`);if(I.length>30)for(I[26]="".concat(_r,"...").concat(Et);I.length>27;)I.pop();return"".concat(Qs.notIdentical,`

`).concat(I.join(`
`),`
`)}d>3&&(s=`
`.concat(_r,"...").concat(Et).concat(s),a=!0),r!==""&&(s=`
  `.concat(r).concat(s),r="");var C=0,_=Qs[n]+`
`.concat(Dd,"+ actual").concat(Et," ").concat(_d,"- expected").concat(Et),H=" ".concat(_r,"...").concat(Et," Lines skipped");for(d=0;d<w;d++){var O=d-o;if(u.length<d+1)O>1&&d>2&&(O>4?(i+=`
`.concat(_r,"...").concat(Et),a=!0):O>3&&(i+=`
  `.concat(l[d-2]),C++),i+=`
  `.concat(l[d-1]),C++),o=d,r+=`
`.concat(_d,"-").concat(Et," ").concat(l[d]),C++;else if(l.length<d+1)O>1&&d>2&&(O>4?(i+=`
`.concat(_r,"...").concat(Et),a=!0):O>3&&(i+=`
  `.concat(u[d-2]),C++),i+=`
  `.concat(u[d-1]),C++),o=d,i+=`
`.concat(Dd,"+").concat(Et," ").concat(u[d]),C++;else{var de=l[d],ae=u[d],De=ae!==de&&(!$V(ae,",")||ae.slice(0,-1)!==de);De&&$V(de,",")&&de.slice(0,-1)===ae&&(De=!1,ae+=","),De?(O>1&&d>2&&(O>4?(i+=`
`.concat(_r,"...").concat(Et),a=!0):O>3&&(i+=`
  `.concat(u[d-2]),C++),i+=`
  `.concat(u[d-1]),C++),o=d,i+=`
`.concat(Dd,"+").concat(Et," ").concat(ae),r+=`
`.concat(_d,"-").concat(Et," ").concat(de),C+=2):(i+=r,r="",(O===1||d===0)&&(i+=`
  `.concat(ae),C++))}if(C>20&&d<w-2)return"".concat(_).concat(H,`
`).concat(i,`
`).concat(_r,"...").concat(Et).concat(r,`
`)+"".concat(_r,"...").concat(Et)}return"".concat(_).concat(a?H:"",`
`).concat(i).concat(r).concat(s).concat(p)}var gre=function(t,e){sre(r,t);var n=are(r);function r(i){var o;if(rre(this,r),Cn(i)!=="object"||i===null)throw new dre("options","Object",i);var s=i.message,a=i.operator,c=i.stackStartFn,u=i.actual,l=i.expected,d=Error.stackTraceLimit;if(Error.stackTraceLimit=0,s!=null)o=n.call(this,String(s));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(_r="\x1B[34m",Dd="\x1B[32m",Et="\x1B[39m",_d="\x1B[31m"):(_r="",Dd="",Et="",_d="")),Cn(u)==="object"&&u!==null&&Cn(l)==="object"&&l!==null&&"stack"in u&&u instanceof Error&&"stack"in l&&l instanceof Error&&(u=WV(u),l=WV(l)),a==="deepStrictEqual"||a==="strictEqual")o=n.call(this,hre(u,l,a));else if(a==="notDeepStrictEqual"||a==="notStrictEqual"){var p=Qs[a],f=Rd(u).split(`
`);if(a==="notStrictEqual"&&Cn(u)==="object"&&u!==null&&(p=Qs.notStrictEqualObject),f.length>30)for(f[26]="".concat(_r,"...").concat(Et);f.length>27;)f.pop();f.length===1?o=n.call(this,"".concat(p," ").concat(f[0])):o=n.call(this,"".concat(p,`

`).concat(f.join(`
`),`
`))}else{var g=Rd(u),m="",y=Qs[a];a==="notDeepEqual"||a==="notEqual"?(g="".concat(Qs[a],`

`).concat(g),g.length>1024&&(g="".concat(g.slice(0,1021),"..."))):(m="".concat(Rd(l)),g.length>512&&(g="".concat(g.slice(0,509),"...")),m.length>512&&(m="".concat(m.slice(0,509),"...")),a==="deepEqual"||a==="equal"?g="".concat(y,`

`).concat(g,`

should equal

`):m=" ".concat(a," ").concat(m)),o=n.call(this,"".concat(g).concat(m))}return Error.stackTraceLimit=d,o.generatedMessage=!s,Object.defineProperty(O0(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=u,o.expected=l,o.operator=a,Error.captureStackTrace&&Error.captureStackTrace(O0(o),c),o.stack,o.name="AssertionError",KV(o)}return ire(r,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(o,s){return N0(this,UV(UV({},s),{},{customInspect:!1,depth:0}))}}]),r}(x0(Error),N0.custom);QV.exports=gre});var k0=h((Gbe,XV)=>{"use strict";var YV=Object.prototype.toString;XV.exports=function(e){var n=YV.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&YV.call(e.callee)==="[object Function]"),r}});var cz=h((Kbe,az)=>{"use strict";var sz;Object.keys||(Ad=Object.prototype.hasOwnProperty,F0=Object.prototype.toString,ez=k0(),j0=Object.prototype.propertyIsEnumerable,tz=!j0.call({toString:null},"toString"),nz=j0.call(function(){},"prototype"),Md=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Jv=function(t){var e=t.constructor;return e&&e.prototype===t},rz={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},iz=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!rz["$"+t]&&Ad.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Jv(window[t])}catch{return!0}}catch{return!0}return!1}(),oz=function(t){if(typeof window>"u"||!iz)return Jv(t);try{return Jv(t)}catch{return!1}},sz=function(e){var n=e!==null&&typeof e=="object",r=F0.call(e)==="[object Function]",i=ez(e),o=n&&F0.call(e)==="[object String]",s=[];if(!n&&!r&&!i)throw new TypeError("Object.keys called on a non-object");var a=nz&&r;if(o&&e.length>0&&!Ad.call(e,0))for(var c=0;c<e.length;++c)s.push(String(c));if(i&&e.length>0)for(var u=0;u<e.length;++u)s.push(String(u));else for(var l in e)!(a&&l==="prototype")&&Ad.call(e,l)&&s.push(String(l));if(tz)for(var d=oz(e),p=0;p<Md.length;++p)!(d&&Md[p]==="constructor")&&Ad.call(e,Md[p])&&s.push(Md[p]);return s});var Ad,F0,ez,j0,tz,nz,Md,Jv,rz,iz,oz;az.exports=sz});var L0=h((Jbe,dz)=>{"use strict";var vre=Array.prototype.slice,mre=k0(),uz=Object.keys,Qv=uz?function(e){return uz(e)}:cz(),lz=Object.keys;Qv.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return mre(r)?lz(vre.call(r)):lz(r)})}else Object.keys=Qv;return Object.keys||Qv};dz.exports=Qv});var mz=h((Qbe,vz)=>{"use strict";var yre=L0(),hz=lv()(),gz=tu(),pz=Object,Cre=gz("Array.prototype.push"),fz=gz("Object.prototype.propertyIsEnumerable"),Sre=hz?Object.getOwnPropertySymbols:null;vz.exports=function(e,n){if(e==null)throw new TypeError("target must be an object");var r=pz(e);if(arguments.length===1)return r;for(var i=1;i<arguments.length;++i){var o=pz(arguments[i]),s=yre(o),a=hz&&(Object.getOwnPropertySymbols||Sre);if(a)for(var c=a(o),u=0;u<c.length;++u){var l=c[u];fz(o,l)&&Cre(s,l)}for(var d=0;d<s.length;++d){var p=s[d];if(fz(o,p)){var f=o[p];r[p]=f}}}return r}});var Cz=h((Zbe,yz)=>{"use strict";var q0=mz(),wre=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;r<e.length;++r)n[e[r]]=e[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return t!==o},bre=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1};yz.exports=function(){return!Object.assign||wre()||bre()?q0:Object.assign}});var B0=h((Ybe,wz)=>{"use strict";var Sz=function(t){return t!==t};wz.exports=function(e,n){return e===0&&n===0?1/e===1/n:!!(e===n||Sz(e)&&Sz(n))}});var Zv=h((Xbe,bz)=>{"use strict";var Ere=B0();bz.exports=function(){return typeof Object.is=="function"?Object.is:Ere}});var Od=h((eEe,_z)=>{"use strict";var Ire=L0(),Dre=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",_re=Object.prototype.toString,Rre=Array.prototype.concat,Ez=F_(),Pre=function(t){return typeof t=="function"&&_re.call(t)==="[object Function]"},Iz=L_()(),Tre=function(t,e,n,r){if(e in t){if(r===!0){if(t[e]===n)return}else if(!Pre(r)||!r())return}Iz?Ez(t,e,n,!0):Ez(t,e,n)},Dz=function(t,e){var n=arguments.length>2?arguments[2]:{},r=Ire(e);Dre&&(r=Rre.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)Tre(t,r[i],e[r[i]],n[r[i]])};Dz.supportsDescriptors=!!Iz;_z.exports=Dz});var Pz=h((tEe,Rz)=>{"use strict";var Are=Zv(),Mre=Od();Rz.exports=function(){var e=Are();return Mre(Object,{is:e},{is:function(){return Object.is!==e}}),e}});var Oz=h((nEe,Mz)=>{"use strict";var Ore=Od(),xre=hd(),Nre=B0(),Tz=Zv(),kre=Pz(),Az=xre(Tz(),Object);Ore(Az,{getPolyfill:Tz,implementation:Nre,shim:kre});Mz.exports=Az});var V0=h((rEe,xz)=>{"use strict";xz.exports=function(e){return e!==e}});var z0=h((iEe,Nz)=>{"use strict";var Fre=V0();Nz.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Fre}});var Fz=h((oEe,kz)=>{"use strict";var jre=Od(),Lre=z0();kz.exports=function(){var e=Lre();return jre(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}});var Bz=h((sEe,qz)=>{"use strict";var qre=hd(),Bre=Od(),Vre=V0(),jz=z0(),zre=Fz(),Lz=qre(jz(),Number);Bre(Lz,{getPolyfill:jz,implementation:Vre,shim:zre});qz.exports=Lz});var sU=h((aEe,oU)=>{"use strict";function Vz(t,e){return Wre(t)||$re(t,e)||Hre(t,e)||Ure()}function Ure(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hre(t,e){if(t){if(typeof t=="string")return zz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zz(t,e)}}function zz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $re(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],c=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Wre(t){if(Array.isArray(t))return t}function Xn(t){"@babel/helpers - typeof";return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(t)}var Gre=/a/g.flags!==void 0,im=function(e){var n=[];return e.forEach(function(r){return n.push(r)}),n},Uz=function(e){var n=[];return e.forEach(function(r,i){return n.push([i,r])}),n},eU=Object.is?Object.is:Oz(),nm=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},U0=Number.isNaN?Number.isNaN:Bz();function $0(t){return t.call.bind(t)}var Nd=$0(Object.prototype.hasOwnProperty),rm=$0(Object.prototype.propertyIsEnumerable),Hz=$0(Object.prototype.toString),on=Js().types,Kre=on.isAnyArrayBuffer,Jre=on.isArrayBufferView,$z=on.isDate,Yv=on.isMap,Wz=on.isRegExp,Xv=on.isSet,Qre=on.isNativeError,Zre=on.isBoxedPrimitive,Gz=on.isNumberObject,Kz=on.isStringObject,Jz=on.isBooleanObject,Qz=on.isBigIntObject,Yre=on.isSymbolObject,Xre=on.isFloat32Array,eie=on.isFloat64Array;function tie(t){if(t.length===0||t.length>10)return!0;for(var e=0;e<t.length;e++){var n=t.charCodeAt(e);if(n<48||n>57)return!0}return t.length===10&&t>=Math.pow(2,32)}function em(t){return Object.keys(t).filter(tie).concat(nm(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}function tU(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}var tm=void 0,nie=!0,rie=!1,H0=0,W0=1,nU=2,rU=3;function iie(t,e){return Gre?t.source===e.source&&t.flags===e.flags:RegExp.prototype.toString.call(t)===RegExp.prototype.toString.call(e)}function oie(t,e){if(t.byteLength!==e.byteLength)return!1;for(var n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}function sie(t,e){return t.byteLength!==e.byteLength?!1:tU(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))===0}function aie(t,e){return t.byteLength===e.byteLength&&tU(new Uint8Array(t),new Uint8Array(e))===0}function cie(t,e){return Gz(t)?Gz(e)&&eU(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):Kz(t)?Kz(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):Jz(t)?Jz(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):Qz(t)?Qz(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):Yre(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}function er(t,e,n,r){if(t===e)return t!==0?!0:n?eU(t,e):!0;if(n){if(Xn(t)!=="object")return typeof t=="number"&&U0(t)&&U0(e);if(Xn(e)!=="object"||t===null||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(t===null||Xn(t)!=="object")return e===null||Xn(e)!=="object"?t==e:!1;if(e===null||Xn(e)!=="object")return!1}var i=Hz(t),o=Hz(e);if(i!==o)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var s=em(t,tm),a=em(e,tm);return s.length!==a.length?!1:xd(t,e,n,r,W0,s)}if(i==="[object Object]"&&(!Yv(t)&&Yv(e)||!Xv(t)&&Xv(e)))return!1;if($z(t)){if(!$z(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(Wz(t)){if(!Wz(e)||!iie(t,e))return!1}else if(Qre(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else if(Jre(t)){if(!n&&(Xre(t)||eie(t))){if(!oie(t,e))return!1}else if(!sie(t,e))return!1;var c=em(t,tm),u=em(e,tm);return c.length!==u.length?!1:xd(t,e,n,r,H0,c)}else{if(Xv(t))return!Xv(e)||t.size!==e.size?!1:xd(t,e,n,r,nU);if(Yv(t))return!Yv(e)||t.size!==e.size?!1:xd(t,e,n,r,rU);if(Kre(t)){if(!aie(t,e))return!1}else if(Zre(t)&&!cie(t,e))return!1}return xd(t,e,n,r,H0)}function Zz(t,e){return e.filter(function(n){return rm(t,n)})}function xd(t,e,n,r,i,o){if(arguments.length===5){o=Object.keys(t);var s=Object.keys(e);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!Nd(e,o[a]))return!1;if(n&&arguments.length===5){var c=nm(t);if(c.length!==0){var u=0;for(a=0;a<c.length;a++){var l=c[a];if(rm(t,l)){if(!rm(e,l))return!1;o.push(l),u++}else if(rm(e,l))return!1}var d=nm(e);if(c.length!==d.length&&Zz(e,d).length!==u)return!1}else{var p=nm(e);if(p.length!==0&&Zz(e,p).length!==0)return!1}}if(o.length===0&&(i===H0||i===W0&&t.length===0||t.size===0))return!0;if(r===void 0)r={val1:new Map,val2:new Map,position:0};else{var f=r.val1.get(t);if(f!==void 0){var g=r.val2.get(e);if(g!==void 0)return f===g}r.position++}r.val1.set(t,r.position),r.val2.set(e,r.position);var m=fie(t,e,n,o,r,i);return r.val1.delete(t),r.val2.delete(e),m}function Yz(t,e,n,r){for(var i=im(t),o=0;o<i.length;o++){var s=i[o];if(er(e,s,n,r))return t.delete(s),!0}return!1}function iU(t){switch(Xn(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(U0(t))return!1}return!0}function uie(t,e,n){var r=iU(n);return r??(e.has(r)&&!t.has(r))}function lie(t,e,n,r,i){var o=iU(n);if(o!=null)return o;var s=e.get(o);return s===void 0&&!e.has(o)||!er(r,s,!1,i)?!1:!t.has(o)&&er(r,s,!1,i)}function die(t,e,n,r){for(var i=null,o=im(t),s=0;s<o.length;s++){var a=o[s];if(Xn(a)==="object"&&a!==null)i===null&&(i=new Set),i.add(a);else if(!e.has(a)){if(n||!uie(t,e,a))return!1;i===null&&(i=new Set),i.add(a)}}if(i!==null){for(var c=im(e),u=0;u<c.length;u++){var l=c[u];if(Xn(l)==="object"&&l!==null){if(!Yz(i,l,n,r))return!1}else if(!n&&!t.has(l)&&!Yz(i,l,n,r))return!1}return i.size===0}return!0}function Xz(t,e,n,r,i,o){for(var s=im(t),a=0;a<s.length;a++){var c=s[a];if(er(n,c,i,o)&&er(r,e.get(c),i,o))return t.delete(c),!0}return!1}function pie(t,e,n,r){for(var i=null,o=Uz(t),s=0;s<o.length;s++){var a=Vz(o[s],2),c=a[0],u=a[1];if(Xn(c)==="object"&&c!==null)i===null&&(i=new Set),i.add(c);else{var l=e.get(c);if(l===void 0&&!e.has(c)||!er(u,l,n,r)){if(n||!lie(t,e,c,u,r))return!1;i===null&&(i=new Set),i.add(c)}}}if(i!==null){for(var d=Uz(e),p=0;p<d.length;p++){var f=Vz(d[p],2),g=f[0],m=f[1];if(Xn(g)==="object"&&g!==null){if(!Xz(i,t,g,m,n,r))return!1}else if(!n&&(!t.has(g)||!er(t.get(g),m,!1,r))&&!Xz(i,t,g,m,!1,r))return!1}return i.size===0}return!0}function fie(t,e,n,r,i,o){var s=0;if(o===nU){if(!die(t,e,n,i))return!1}else if(o===rU){if(!pie(t,e,n,i))return!1}else if(o===W0)for(;s<t.length;s++)if(Nd(t,s)){if(!Nd(e,s)||!er(t[s],e[s],n,i))return!1}else{if(Nd(e,s))return!1;for(var a=Object.keys(t);s<a.length;s++){var c=a[s];if(!Nd(e,c)||!er(t[c],e[c],n,i))return!1}return a.length===Object.keys(e).length}for(s=0;s<r.length;s++){var u=r[s];if(!er(t[u],e[u],n,i))return!1}return!0}function hie(t,e){return er(t,e,rie)}function gie(t,e){return er(t,e,nie)}oU.exports={isDeepEqual:hie,isDeepStrictEqual:gie}});var Gv=h((cEe,IU)=>{"use strict";function Rr(t){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(t)}function aU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mie(r.key),r)}}function vie(t,e,n){return e&&aU(t.prototype,e),n&&aU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mie(t){var e=yie(t,"string");return Rr(e)==="symbol"?e:String(e)}function yie(t,e){if(Rr(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rr(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Sie=M0(),kd=Sie.codes,cU=kd.ERR_AMBIGUOUS_ARGUMENT,du=kd.ERR_INVALID_ARG_TYPE,wie=kd.ERR_INVALID_ARG_VALUE,bie=kd.ERR_INVALID_RETURN_VALUE,Uo=kd.ERR_MISSING_ARGS,Ho=ZV(),Eie=Js(),om=Eie.inspect,pU=Js().types,Iie=pU.isPromise,sm=pU.isRegExp,Die=Cz()(),fU=Zv()(),am=tu()("RegExp.prototype.test"),zo,cm;function Fd(){var t=sU();zo=t.isDeepEqual,cm=t.isDeepStrictEqual}var uU=!1,Me=IU.exports=G0,um={};function Pr(t){throw t.message instanceof Error?t.message:new Ho(t)}function hU(t,e,n,r,i){var o=arguments.length,s;if(o===0)s="Failed";else if(o===1)n=t,t=void 0;else{if(uU===!1){uU=!0;var a=process.emitWarning?process.emitWarning:console.warn.bind(console);a("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(r="!=")}if(n instanceof Error)throw n;var c={actual:t,expected:e,operator:r===void 0?"fail":r,stackStartFn:i||hU};n!==void 0&&(c.message=n);var u=new Ho(c);throw s&&(u.message=s,u.generatedMessage=!0),u}Me.fail=hU;Me.AssertionError=Ho;function gU(t,e,n,r){if(!n){var i=!1;if(e===0)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var o=new Ho({actual:n,expected:!0,message:r,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function G0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gU.apply(void 0,[G0,e.length].concat(e))}Me.ok=G0;Me.equal=function t(e,n,r){if(arguments.length<2)throw new Uo("actual","expected");e!=n&&Pr({actual:e,expected:n,message:r,operator:"==",stackStartFn:t})};Me.notEqual=function t(e,n,r){if(arguments.length<2)throw new Uo("actual","expected");e==n&&Pr({actual:e,expected:n,message:r,operator:"!=",stackStartFn:t})};Me.deepEqual=function t(e,n,r){if(arguments.length<2)throw new Uo("actual","expected");zo===void 0&&Fd(),zo(e,n)||Pr({actual:e,expected:n,message:r,operator:"deepEqual",stackStartFn:t})};Me.notDeepEqual=function t(e,n,r){if(arguments.length<2)throw new Uo("actual","expected");zo===void 0&&Fd(),zo(e,n)&&Pr({actual:e,expected:n,message:r,operator:"notDeepEqual",stackStartFn:t})};Me.deepStrictEqual=function t(e,n,r){if(arguments.length<2)throw new Uo("actual","expected");zo===void 0&&Fd(),cm(e,n)||Pr({actual:e,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:t})};Me.notDeepStrictEqual=vU;function vU(t,e,n){if(arguments.length<2)throw new Uo("actual","expected");zo===void 0&&Fd(),cm(t,e)&&Pr({actual:t,expected:e,message:n,operator:"notDeepStrictEqual",stackStartFn:vU})}Me.strictEqual=function t(e,n,r){if(arguments.length<2)throw new Uo("actual","expected");fU(e,n)||Pr({actual:e,expected:n,message:r,operator:"strictEqual",stackStartFn:t})};Me.notStrictEqual=function t(e,n,r){if(arguments.length<2)throw new Uo("actual","expected");fU(e,n)&&Pr({actual:e,expected:n,message:r,operator:"notStrictEqual",stackStartFn:t})};var lU=vie(function t(e,n,r){var i=this;Cie(this,t),n.forEach(function(o){o in e&&(r!==void 0&&typeof r[o]=="string"&&sm(e[o])&&am(e[o],r[o])?i[o]=r[o]:i[o]=e[o])})});function _ie(t,e,n,r,i,o){if(!(n in t)||!cm(t[n],e[n])){if(!r){var s=new lU(t,i),a=new lU(e,i,t),c=new Ho({actual:s,expected:a,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=t,c.expected=e,c.operator=o.name,c}Pr({actual:t,expected:e,message:r,operator:o.name,stackStartFn:o})}}function mU(t,e,n,r){if(typeof e!="function"){if(sm(e))return am(e,t);if(arguments.length===2)throw new du("expected",["Function","RegExp"],e);if(Rr(t)!=="object"||t===null){var i=new Ho({actual:t,expected:e,message:n,operator:"deepStrictEqual",stackStartFn:r});throw i.operator=r.name,i}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(o.length===0)throw new wie("error",e,"may not be an empty object");return zo===void 0&&Fd(),o.forEach(function(s){typeof t[s]=="string"&&sm(e[s])&&am(e[s],t[s])||_ie(t,e,s,n,o,r)}),!0}return e.prototype!==void 0&&t instanceof e?!0:Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function yU(t){if(typeof t!="function")throw new du("fn","Function",t);try{t()}catch(e){return e}return um}function dU(t){return Iie(t)||t!==null&&Rr(t)==="object"&&typeof t.then=="function"&&typeof t.catch=="function"}function CU(t){return Promise.resolve().then(function(){var e;if(typeof t=="function"){if(e=t(),!dU(e))throw new bie("instance of Promise","promiseFn",e)}else if(dU(t))e=t;else throw new du("promiseFn",["Function","Promise"],t);return Promise.resolve().then(function(){return e}).then(function(){return um}).catch(function(n){return n})})}function SU(t,e,n,r){if(typeof n=="string"){if(arguments.length===4)throw new du("error",["Object","Error","Function","RegExp"],n);if(Rr(e)==="object"&&e!==null){if(e.message===n)throw new cU("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===n)throw new cU("error/message",'The error "'.concat(e,'" is identical to the message.'));r=n,n=void 0}else if(n!=null&&Rr(n)!=="object"&&typeof n!="function")throw new du("error",["Object","Error","Function","RegExp"],n);if(e===um){var i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=r?": ".concat(r):".";var o=t.name==="rejects"?"rejection":"exception";Pr({actual:void 0,expected:n,operator:t.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:t})}if(n&&!mU(e,n,r,t))throw e}function wU(t,e,n,r){if(e!==um){if(typeof n=="string"&&(r=n,n=void 0),!n||mU(e,n)){var i=r?": ".concat(r):".",o=t.name==="doesNotReject"?"rejection":"exception";Pr({actual:e,expected:n,operator:t.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}Me.throws=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];SU.apply(void 0,[t,yU(e)].concat(r))};Me.rejects=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return CU(e).then(function(o){return SU.apply(void 0,[t,o].concat(r))})};Me.doesNotThrow=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];wU.apply(void 0,[t,yU(e)].concat(r))};Me.doesNotReject=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return CU(e).then(function(o){return wU.apply(void 0,[t,o].concat(r))})};Me.ifError=function t(e){if(e!=null){var n="ifError got unwanted exception: ";Rr(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?n+=e.constructor.name:n+=e.message:n+=om(e);var r=new Ho({actual:e,expected:null,operator:"ifError",message:n,stackStartFn:t}),i=e.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var s=r.stack.split(`
`),a=0;a<o.length;a++){var c=s.indexOf(o[a]);if(c!==-1){s=s.slice(0,c);break}}r.stack="".concat(s.join(`
`),`
`).concat(o.join(`
`))}throw r}};function bU(t,e,n,r,i){if(!sm(e))throw new du("regexp","RegExp",e);var o=i==="match";if(typeof t!="string"||am(e,t)!==o){if(n instanceof Error)throw n;var s=!n;n=n||(typeof t!="string"?'The "string" argument must be of type string. Received type '+"".concat(Rr(t)," (").concat(om(t),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(om(e),`. Input:

`).concat(om(t),`
`));var a=new Ho({actual:t,expected:e,message:n,operator:i,stackStartFn:r});throw a.generatedMessage=s,a}}Me.match=function t(e,n,r){bU(e,n,r,t,"match")};Me.doesNotMatch=function t(e,n,r){bU(e,n,r,t,"doesNotMatch")};function EU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gU.apply(void 0,[EU,e.length].concat(e))}Me.strict=Die(EU,Me,{equal:Me.strictEqual,deepEqual:Me.deepStrictEqual,notEqual:Me.notStrictEqual,notDeepEqual:Me.notDeepStrictEqual});Me.strict.strict=Me.strict});var DU=h(K0=>{"use strict";Object.defineProperty(K0,"__esModule",{value:!0});function Rie(t){return function(e,n){return new Promise((r,i)=>{t.call(this,e,n,(o,s)=>{o?i(o):r(s)})})}}K0.default=Rie});var RU=h((Q0,_U)=>{"use strict";var Pie=Q0&&Q0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Tie=R_(),Aie=Pie(DU());function Mie(t){return!!t&&typeof t.addRequest=="function"}function Oie(t){return!!t&&typeof t.addRequest=="function"}function J0(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1)}function pu(t,e){return new pu.Agent(t,e)}(function(t){class e extends Tie.EventEmitter{constructor(r,i){super(),this.promisifiedCallback=void 0;let o=i;typeof r=="function"?this.callback=r:r&&(o=r),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.options=o||{},this.maxFreeSockets=1,this.maxSockets=1,this.sockets=[],this.requests=[]}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:J0()?443:80}set defaultPort(r){this.explicitDefaultPort=r}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:J0()?"https:":"http:"}set protocol(r){this.explicitProtocol=r}callback(r,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(r,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=J0()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80);let s=Object.assign(Object.assign({},this.options),o);s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,r._last=!0,r.shouldKeepAlive=!1;let a=!1,c=null,u=this.timeout,l=this.freeSocket;function d(m){r._hadError||(r.emit("error",m),r._hadError=!0)}function p(){c=null,a=!0;let m=new Error(`A "socket" was not created for HTTP request before ${u}ms`);m.code="ETIMEOUT",d(m)}function f(m){a||(c!==null&&(clearTimeout(c),c=null),d(m))}function g(m){let y;function w(){l(y,s)}if(a)return;if(c!=null&&(clearTimeout(c),c=null),Mie(m)||Oie(m)){m.addRequest(r,s);return}if(m){y=m,y.on("free",w),r.onSocket(y);return}let I=new Error(`no Duplex stream was returned to agent-base for \`${r.method} ${r.path}\``);d(I)}if(typeof this.callback!="function"){d(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?this.promisifiedCallback=Aie.default(this.callback):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(c=setTimeout(p,u)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{Promise.resolve(this.promisifiedCallback(r,s)).then(g,f)}catch(m){Promise.reject(m).catch(f)}}freeSocket(r,i){r.destroy()}destroy(){}}t.Agent=e})(pu||(pu={}));pu.prototype=pu.Agent.prototype;_U.exports=pu});var OU=h((lEe,MU)=>{"use strict";var PU=I_(),TU=D_(),xie=$B(),Nie=Gv(),AU=RU(),kie=Js().inherits,Zs=P_()("https-proxy-agent");MU.exports=jd;function jd(t){if(!(this instanceof jd))return new jd(t);if(typeof t=="string"&&(t=xie.parse(t)),!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Zs("creating new HttpsProxyAgent instance: %o",t),AU.call(this,t);var e=Object.assign({},t);this.secureProxy=e.protocol?/^https:?$/i.test(e.protocol):!1,e.host=e.hostname||e.host,e.port=+e.port||(this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in e)&&(e.ALPNProtocols=["http 1.1"]),e.host&&e.path&&(delete e.path,delete e.pathname),this.proxy=e}kie(jd,AU);jd.prototype.callback=function(e,n,r){var i=this.proxy,o;this.secureProxy?o=TU.connect(i):o=PU.connect(i);var s=[],a=0;function c(){var C=o.read();C?f(C):o.once("readable",c)}function u(){o.removeListener("end",d),o.removeListener("error",p),o.removeListener("close",l),o.removeListener("readable",c)}function l(C){Zs("onclose had error %o",C)}function d(){Zs("onend")}function p(C){u(),r(C)}function f(C){s.push(C),a+=C.length;var _=Buffer.concat(s,a),H=_.toString("ascii");if(!~H.indexOf(`\r
\r
`)){Zs("have not received end of HTTP headers yet..."),c();return}var O=H.substring(0,H.indexOf(`\r
`)),de=+O.split(" ")[1];if(Zs("got proxy server response: %o",O),de==200){var ae=o;s=_=null,n.secureEndpoint&&(Zs("upgrading proxy-connected socket to TLS connection: %o",n.host),n.socket=o,n.servername=n.servername||n.host,n.host=null,n.hostname=null,n.port=null,ae=TU.connect(n)),u(),e.once("socket",Fie),r(null,ae)}else u(),o.destroy(),o=new PU.Socket,o.readable=!0,s=_,e.once("socket",g),r(null,o)}function g(C){Zs("replaying proxy buffer for failed request"),Nie(C.listenerCount("data")>0),C.push(s),s=null}o.on("error",p),o.on("close",l),o.on("end",d),c();var m=n.host+":"+n.port,y="CONNECT "+m+` HTTP/1.1\r
`,w=Object.assign({},i.headers);i.auth&&(w["Proxy-Authorization"]="Basic "+Buffer.from(i.auth).toString("base64"));var I=n.host;jie(n.port,n.secureEndpoint)||(I+=":"+n.port),w.Host=I,w.Connection="close",Object.keys(w).forEach(function(C){y+=C+": "+w[C]+`\r
`}),o.write(y+`\r
`)};function Fie(t){t.resume()}function jie(t,e){return!!(!e&&t===80||e&&t===443)}});var NU=h((dEe,xU)=>{"use strict";xU.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var Y0=h(tr=>{"use strict";var Lie=tr&&tr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),qie=tr&&tr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kU=tr&&tr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&Lie(e,t,n);return qie(e,t),e},Z0=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tr,"__esModule",{value:!0});tr.WebsocketMessageAdapter=void 0;var Bie=kU(I_()),Vie=kU(D_()),zie=Z0(aq()),Uie=Z0(OU()),Hie=Z0(NU()),$ie=Bt(),Z=j(),lm=class t{constructor(e,n,r,i,o,s){if(!e)throw new Z.ArgumentNullError("uri");if(!r)throw new Z.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new Z.EventSource,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=Z.ConnectionState.None,this.privUri=e,this.privHeaders=o,this.privEnableCompression=s,this.privHeaders[$ie.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===Z.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new Z.Deferred,this.privCertificateValidatedDeferral=new Z.Deferred,this.privConnectionState=Z.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!t.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let r=new URL(this.privUri).protocol;r?.toLocaleLowerCase()==="wss:"?r="https:":r?.toLocaleLowerCase()==="ws:"&&(r="http:"),e.agent.protocol=r,this.privWebsocketClient=new Hie.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new Z.Queue,this.privDisconnectDeferral=new Z.Deferred,this.privSendMessageQueue=new Z.Queue,this.processSendQueue().catch(e=>{Z.Events.instance.onEvent(new Z.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new Z.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new Z.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=Z.ConnectionState.Connected,this.onEvent(new Z.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new Z.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new Z.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===Z.ConnectionState.Connecting?(this.privConnectionState=Z.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new Z.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=Z.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new Z.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(n=>{Z.Events.instance.onEvent(new Z.BackgroundEvent(n))})},this.privWebsocketClient.onmessage=e=>{let n=new Date().toISOString();if(this.privConnectionState===Z.ConnectionState.Connected){let r=new Z.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){let i=new Z.RawWebsocketMessage(Z.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new Z.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid binary message format. Error: ${o}`)})}else{let i=new Z.RawWebsocketMessage(Z.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new Z.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid text message format. Error: ${o}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==Z.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${Z.ConnectionState[this.privConnectionState]} state`);let n=new Z.Deferred,r=new Z.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then(i=>{r.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:n})},i=>{r.reject(`Error formatting the message. ${i}`)}),n.promise}read(){return this.privConnectionState!==Z.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==Z.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new Z.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(n){return Promise.reject(`websocket send error: ${n}`)}}onClose(e,n){return v(this,null,function*(){let r=`Connection closed. ${e}: ${n}`;this.privConnectionState=Z.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},r),yield this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(r)},r)})}processSendQueue(){return v(this,null,function*(){for(;;){let n=yield this.privSendMessageQueue.dequeue();if(!n)return;try{yield this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(r){n.sendStatusDeferral.reject(r)}}})}onEvent(e){this.privConnectionEvents.onEvent(e),Z.Events.instance.onEvent(e)}getAgent(){let e=new zie.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){let n={host:e.HostName,port:e.Port};return e.UserName?n.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:n.headers={},n.headers.requestOCSP="true",new Uie.default(n)}createConnection(e,n){let r;if(n=$(b({},n),{requestOCSP:!0,servername:n.host}),this.proxyInfo){let o=t.GetProxyAgent(this.proxyInfo);r=new Promise((s,a)=>{o.callback(e,n,(c,u)=>{c?a(c):s(u)})})}else n.secureEndpoint?r=Promise.resolve(Vie.connect(n)):r=Promise.resolve(Bie.connect(n));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};tr.WebsocketMessageAdapter=lm;lm.forceNpmWebSocket=!1});var FU=h(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.WebsocketConnection=void 0;var X0=j(),Wie=Y0(),eR=class{constructor(e,n,r,i,o,s=!1,a){if(this.privIsDisposed=!1,!e)throw new X0.ArgumentNullError("uri");if(!i)throw new X0.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(n){for(let l in n)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";let d=encodeURIComponent(l);c+=d;let p=n[l];p&&(p=encodeURIComponent(p),c+=`=${p}`),u++}}if(r){for(let l in r)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";let d=encodeURIComponent(r[l]);c+=`${l}=${d}`,u++}}this.privUri=e+c,this.privId=a||X0.createNoDashGuid(),this.privConnectionMessageAdapter=new Wie.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,o,r,s)}dispose(){return v(this,null,function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())})}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};dm.WebsocketConnection=eR});var jU=h(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});pm.ReplayableAudioNode=void 0;var tR=class{constructor(e,n){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=n}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){let e=this.privReplayOffset-this.privBufferStartOffset,n=Math.round(e*this.privBytesPerSecond*1e-7);n%2!==0&&n++;let r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){let i=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new nR(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;let n=e-this.privBufferStartOffset,r=Math.round(n*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(let n of this.privBuffers){let r=n.byteOffset/this.privBytesPerSecond*1e7,i=r+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=r&&e<=i)return n.chunk.timeReceived}return 0}};pm.ReplayableAudioNode=tR;var nR=class{constructor(e,n,r){this.chunk=e,this.serial=n,this.byteOffset=r}}});var oR=h(ci=>{"use strict";var Gie=ci&&ci.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Kie=ci&&ci.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jie=ci&&ci.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&Gie(e,t,n);return Kie(e,t),e};Object.defineProperty(ci,"__esModule",{value:!0});ci.AudioFileWriter=void 0;var Ld=Jie(y_()),rR=W(),iR=class{constructor(e){rR.Contracts.throwIfNullOrUndefined(Ld.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=Ld.openSync(e,"w")}set format(e){rR.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let n=0;this.privAudioFormat.hasHeader&&(n=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=Ld.createWriteStream("",{fd:this.privFd,start:n,autoClose:!1}))}write(e){rR.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),Ld.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),Ld.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};ci.AudioFileWriter=iR});var sR=h(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.PullAudioInputStreamImpl=nr.PullAudioInputStream=nr.PushAudioInputStreamImpl=nr.PushAudioInputStream=nr.AudioInputStream=void 0;var fm=M(),It=j(),LU=xo(),Qie=D(),Zie=Fo(),qd=class{constructor(){}static createPushStream(e){return Bd.create(e)}static createPullStream(e,n){return Vd.create(e,n)}};nr.AudioInputStream=qd;var Bd=class extends qd{static create(e){return new hm(e)}};nr.PushAudioInputStream=Bd;var hm=class extends Bd{constructor(e){super(),e===void 0?this.privFormat=Zie.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=e,this.privEvents=new It.EventSource,this.privId=LU.createNoDashGuid(),this.privStream=new It.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new It.AudioSourceInitializingEvent(this.privId)),this.onEvent(new It.AudioSourceReadyEvent(this.privId))}attach(e){return v(this,null,function*(){this.onEvent(new It.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn();let n=this.privStream;return this.onEvent(new It.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>v(this,null,function*(){return this.onEvent(new It.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>n.read()}})}detach(e){this.onEvent(new It.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:fm.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:fm.type.Stream})}onEvent(e){this.privEvents.onEvent(e),It.Events.instance.onEvent(e)}toBuffer(e){let n=Buffer.alloc(e.byteLength),r=new Uint8Array(e);for(let i=0;i<n.length;++i)n[i]=r[i];return n}};nr.PushAudioInputStreamImpl=hm;var Vd=class extends qd{constructor(){super()}static create(e,n){return new gm(e,n)}};nr.PullAudioInputStream=Vd;var gm=class extends Vd{constructor(e,n){super(),n===void 0?this.privFormat=Qie.AudioStreamFormat.getDefaultInputFormat():this.privFormat=n,this.privEvents=new It.EventSource,this.privId=LU.createNoDashGuid(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new It.AudioSourceInitializingEvent(this.privId)),this.onEvent(new It.AudioSourceReadyEvent(this.privId))}attach(e){return v(this,null,function*(){return this.onEvent(new It.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn(),this.onEvent(new It.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new It.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let n=0,r;for(;n<this.privBufferSize;){let i=new ArrayBuffer(this.privBufferSize-n),o=this.privCallback.read(i);if(r===void 0?r=i:new Int8Array(r).set(new Int8Array(i),n),o===0)break;n+=o}return Promise.resolve({buffer:r.slice(0,n),isEnd:this.privIsClosed||n===0,timeReceived:Date.now()})}}})}detach(e){this.onEvent(new It.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:fm.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:fm.type.Stream})}onEvent(e){this.privEvents.onEvent(e),It.Events.instance.onEvent(e)}};nr.PullAudioInputStreamImpl=gm});var aR=h(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.SpeechSynthesisOutputFormat=void 0;var Yie;(function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"})(Yie=zd.SpeechSynthesisOutputFormat||(zd.SpeechSynthesisOutputFormat={}))});var fu=h(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.AudioOutputFormatImpl=void 0;var oe=aR(),Y=Fo(),vm=class t extends Y.AudioStreamFormatImpl{constructor(e,n,r,i,o,s,a,c,u){super(r,s,n,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=o,this.priAudioFormatString=a,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?t.getDefaultOutputFormat():t.fromSpeechSynthesisOutputFormatString(t.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new t(Y.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new t(Y.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new t(Y.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new t(Y.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new t(Y.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new t(Y.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new t(Y.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new t(Y.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new t(Y.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new t(Y.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new t(Y.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new t(Y.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new t(Y.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new t(Y.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new t(Y.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new t(Y.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new t(Y.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new t(Y.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new t(Y.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new t(Y.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new t(Y.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new t(Y.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new t(Y.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new t(Y.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new t(Y.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new t(Y.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new t(Y.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new t(Y.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new t(Y.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,e,e,!1);case"g722-16khz-64kbps":return new t(Y.AudioFormatTag.G722,1,16e3,8e3,2,16,e,e,!1);case"riff-16khz-16bit-mono-pcm":default:return new t(Y.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return t.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){let n=new DataView(this.privHeader);n.setUint32(4,e+this.privHeader.byteLength-8,!0),n.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);let n=new Uint8Array(e.byteLength+this.header.byteLength);return n.set(new Uint8Array(this.header),0),n.set(new Uint8Array(e),this.header.byteLength),n.buffer}};mm.AudioOutputFormatImpl=vm;vm.SpeechSynthesisOutputFormatToString={[oe.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[oe.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[oe.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[oe.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[oe.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[oe.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[oe.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[oe.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[oe.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[oe.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[oe.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[oe.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[oe.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[oe.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[oe.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[oe.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[oe.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"}});var Ys=h(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.PushAudioOutputStreamImpl=rr.PushAudioOutputStream=rr.PullAudioOutputStreamImpl=rr.PullAudioOutputStream=rr.AudioOutputStream=void 0;var cR=j(),Xie=W(),eoe=fu(),Ud=class{constructor(){}static createPullStream(){return Hd.create()}};rr.AudioOutputStream=Ud;var Hd=class extends Ud{static create(){return new ym}};rr.PullAudioOutputStream=Hd;var ym=class extends Hd{constructor(){super(),this.privId=cR.createNoDashGuid(),this.privStream=new cR.Stream}set format(e){e==null&&(this.privFormat=eoe.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return v(this,null,function*(){let n=new Int8Array(e),r=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return n.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);n.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<e.byteLength&&!this.privStream.isReadEnded;){let i=yield this.privStream.read();if(i!==void 0&&!i.isEnd){let o;i.buffer.byteLength>e.byteLength-r?(o=i.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-r))):o=i.buffer,n.set(new Int8Array(o),r),r+=o.byteLength}else this.privStream.readEnded()}return r})}write(e){Xie.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}};rr.PullAudioOutputStreamImpl=ym;var Cm=class extends Ud{constructor(){super()}static create(e){return new Sm(e)}};rr.PushAudioOutputStream=Cm;var Sm=class extends Cm{constructor(e){super(),this.privId=cR.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}};rr.PushAudioOutputStreamImpl=Sm});var uR=h($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.AudioOutputConfigImpl=$o.AudioConfigImpl=$o.AudioConfig=void 0;var Xs=dt(),toe=W(),ea=D(),noe=oR(),roe=sR(),ioe=Ys(),$d=class t{static fromDefaultMicrophoneInput(){let e=new Xs.PcmRecorder(!0);return new Ui(new Xs.MicAudioSource(e))}static fromMicrophoneInput(e){let n=new Xs.PcmRecorder(!0);return new Ui(new Xs.MicAudioSource(n,e))}static fromWavFileInput(e,n="unnamedBuffer.wav"){return new Ui(new Xs.FileAudioSource(e,n))}static fromStreamInput(e){if(e instanceof ea.PullAudioInputStreamCallback)return new Ui(new roe.PullAudioInputStreamImpl(e));if(e instanceof ea.AudioInputStream)return new Ui(e);if(typeof MediaStream<"u"&&e instanceof MediaStream){let n=new Xs.PcmRecorder(!1);return new Ui(new Xs.MicAudioSource(n,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new Hi(new ea.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(e===void 0)return t.fromDefaultSpeakerOutput();if(e instanceof ea.SpeakerAudioDestination)return new Hi(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new Hi(new noe.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof ea.PushAudioOutputStreamCallback)return new Hi(new ioe.PushAudioOutputStreamImpl(e));if(e instanceof ea.PushAudioOutputStream)return new Hi(e);if(e instanceof ea.PullAudioOutputStream)return new Hi(e);throw new Error("Not Supported Type")}};$o.AudioConfig=$d;var Ui=class extends $d{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,n){this.privSource.turnOff().then(()=>{e&&e()},r=>{n&&n(r)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,n){if(toe.Contracts.throwIfNull(n,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(e,n);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(e,n){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(e,n);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}};$o.AudioConfigImpl=Ui;var Hi=class extends $d{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}};$o.AudioOutputConfigImpl=Hi});var qU=h(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.CancellationReason=void 0;var ooe;(function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"})(ooe=Wd.CancellationReason||(Wd.CancellationReason={}))});var BU=h(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.PullAudioInputStreamCallback=void 0;var lR=class{};wm.PullAudioInputStreamCallback=lR});var VU=h(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.PushAudioOutputStreamCallback=void 0;var dR=class{};bm.PushAudioOutputStreamCallback=dR});var UU=h(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.KeywordRecognitionModel=void 0;var zU=W(),pR=class{constructor(){this.privDisposed=!1}static fromFile(e){throw zU.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw zU.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};Em.KeywordRecognitionModel=pR});var HU=h(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.SessionEventArgs=void 0;var fR=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}};Im.SessionEventArgs=fR});var $U=h(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.RecognitionEventArgs=void 0;var soe=D(),hR=class extends soe.SessionEventArgs{constructor(e,n){super(n),this.privOffset=e}get offset(){return this.privOffset}};Dm.RecognitionEventArgs=hR});var WU=h(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.OutputFormat=void 0;var aoe;(function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"})(aoe=Gd.OutputFormat||(Gd.OutputFormat={}))});var GU=h(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.IntentRecognitionEventArgs=void 0;var coe=D(),gR=class extends coe.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};_m.IntentRecognitionEventArgs=gR});var KU=h(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.RecognitionResult=void 0;var vR=class{constructor(e,n,r,i,o,s,a,c,u,l){this.privResultId=e,this.privReason=n,this.privText=r,this.privDuration=i,this.privOffset=o,this.privLanguage=s,this.privLanguageDetectionConfidence=a,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};Rm.RecognitionResult=vR});var JU=h(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.SpeechRecognitionResult=void 0;var uoe=D(),mR=class extends uoe.RecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(e,n,r,i,o,s,a,u,l,d),this.privSpeakerId=c}get speakerId(){return this.privSpeakerId}};Pm.SpeechRecognitionResult=mR});var QU=h(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.IntentRecognitionResult=void 0;var loe=D(),yR=class extends loe.SpeechRecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(n,r,i,o,s,a,c,void 0,u,l,d),this.privIntentId=e}get intentId(){return this.privIntentId}};Tm.IntentRecognitionResult=yR});var ZU=h(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.LanguageUnderstandingModelImpl=vu.LanguageUnderstandingModel=void 0;var hu=W(),Am=class{constructor(){}static fromEndpoint(e){hu.Contracts.throwIfNull(e,"uri"),hu.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");let n=new gu,r=e.host.indexOf(".");if(r===-1)throw new Error("Could not determine region from endpoint");n.region=e.host.substr(0,r);let i=e.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(n.appId=e.pathname.substr(i),n.subscriptionKey=e.searchParams.get("subscription-key"),n.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return n}static fromAppId(e){hu.Contracts.throwIfNullOrWhitespace(e,"appId");let n=new gu;return n.appId=e,n}static fromSubscription(e,n,r){hu.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),hu.Contracts.throwIfNullOrWhitespace(n,"appId"),hu.Contracts.throwIfNullOrWhitespace(r,"region");let i=new gu;return i.appId=n,i.region=r,i.subscriptionKey=e,i}};vu.LanguageUnderstandingModel=Am;var gu=class extends Am{};vu.LanguageUnderstandingModelImpl=gu});var XU=h(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.MeetingTranscriptionEventArgs=Wo.ConversationTranscriptionEventArgs=Wo.SpeechRecognitionEventArgs=void 0;var YU=D(),Mm=class extends YU.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};Wo.SpeechRecognitionEventArgs=Mm;var CR=class extends YU.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};Wo.ConversationTranscriptionEventArgs=CR;var SR=class extends Mm{};Wo.MeetingTranscriptionEventArgs=SR});var mu=h(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.CancellationEventArgsBase=void 0;var doe=D(),wR=class extends doe.RecognitionEventArgs{constructor(e,n,r,i,o){super(i,o),this.privReason=e,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};Om.CancellationEventArgsBase=wR});var e2=h(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});xm.SpeechRecognitionCanceledEventArgs=void 0;var poe=mu(),bR=class extends poe.CancellationEventArgsBase{};xm.SpeechRecognitionCanceledEventArgs=bR});var t2=h(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.TranslationRecognitionEventArgs=void 0;var foe=D(),ER=class extends foe.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};Nm.TranslationRecognitionEventArgs=ER});var n2=h(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.TranslationSynthesisEventArgs=void 0;var hoe=D(),IR=class extends hoe.SessionEventArgs{constructor(e,n){super(n),this.privResult=e}get result(){return this.privResult}};km.TranslationSynthesisEventArgs=IR});var _R=h(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.TranslationRecognitionResult=void 0;var goe=D(),DR=class t extends goe.SpeechRecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(n,r,i,o,s,a,c,void 0,u,l,d),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new t(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}};Fm.TranslationRecognitionResult=DR});var r2=h(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.TranslationSynthesisResult=void 0;var RR=class{constructor(e,n){this.privReason=e,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}};jm.TranslationSynthesisResult=RR});var i2=h(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.ResultReason=void 0;var voe;(function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"})(voe=Kd.ResultReason||(Kd.ResultReason={}))});var o2=h(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.SpeechConfigImpl=yu.SpeechConfig=void 0;var Jd=M(),ta=W(),J=D(),Lm=class{constructor(){}static fromSubscription(e,n){ta.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),ta.Contracts.throwIfNullOrWhitespace(n,"region");let r=new na;return r.setProperty(J.PropertyId.SpeechServiceConnection_Region,n),r.setProperty(J.PropertyId.SpeechServiceConnection_IntentRegion,n),r.setProperty(J.PropertyId.SpeechServiceConnection_Key,e),r}static fromEndpoint(e,n){ta.Contracts.throwIfNull(e,"endpoint");let r=new na;return r.setProperty(J.PropertyId.SpeechServiceConnection_Endpoint,e.href),n!==void 0&&r.setProperty(J.PropertyId.SpeechServiceConnection_Key,n),r}static fromHost(e,n){ta.Contracts.throwIfNull(e,"hostName");let r=new na;return r.setProperty(J.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(e.port===""?"":":"+e.port)),n!==void 0&&r.setProperty(J.PropertyId.SpeechServiceConnection_Key,n),r}static fromAuthorizationToken(e,n){ta.Contracts.throwIfNull(e,"authorizationToken"),ta.Contracts.throwIfNullOrWhitespace(n,"region");let r=new na;return r.setProperty(J.PropertyId.SpeechServiceConnection_Region,n),r.setProperty(J.PropertyId.SpeechServiceConnection_IntentRegion,n),r.authorizationToken=e,r}close(){}};yu.SpeechConfig=Lm;var na=class t extends Lm{constructor(){super(),this.privProperties=new J.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=J.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(J.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(J.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(J.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(J.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return J.OutputFormat[this.privProperties.getProperty(Jd.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(Jd.OutputFormatPropertyName,J.OutputFormat[e])}get endpointId(){return this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(J.PropertyId.SpeechServiceConnection_EndpointId,e)}setProperty(e,n){ta.Contracts.throwIfNull(n,"value"),this.privProperties.setProperty(e,n)}getProperty(e,n){return this.privProperties.getProperty(e,n)}setProxy(e,n,r,i){this.setProperty(J.PropertyId[J.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(J.PropertyId[J.PropertyId.SpeechServiceConnection_ProxyPort],n),this.setProperty(J.PropertyId[J.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(J.PropertyId[J.PropertyId.SpeechServiceConnection_ProxyPassword],i)}setServiceProperty(e,n){let r=JSON.parse(this.privProperties.getProperty(Jd.ServicePropertiesPropertyName,"{}"));r[e]=n,this.privProperties.setProperty(Jd.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privProperties.setProperty(J.PropertyId.SpeechServiceResponse_ProfanityOption,J.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(J.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(J.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(Jd.ForceDictationPropertyName,"true")}clone(){let e=new t;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(J.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(J.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return J.SpeechSynthesisOutputFormat[this.privProperties.getProperty(J.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(J.PropertyId.SpeechServiceConnection_SynthOutputFormat,J.SpeechSynthesisOutputFormat[e])}};yu.SpeechConfigImpl=na});var s2=h(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.SpeechTranslationConfigImpl=Cu.SpeechTranslationConfig=void 0;var Qd=M(),Tr=W(),U=D(),qm=class extends U.SpeechConfig{constructor(){super()}static fromSubscription(e,n){Tr.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),Tr.Contracts.throwIfNullOrWhitespace(n,"region");let r=new ra;return r.properties.setProperty(U.PropertyId.SpeechServiceConnection_Key,e),r.properties.setProperty(U.PropertyId.SpeechServiceConnection_Region,n),r}static fromAuthorizationToken(e,n){Tr.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),Tr.Contracts.throwIfNullOrWhitespace(n,"region");let r=new ra;return r.properties.setProperty(U.PropertyId.SpeechServiceAuthorization_Token,e),r.properties.setProperty(U.PropertyId.SpeechServiceConnection_Region,n),r}static fromHost(e,n){Tr.Contracts.throwIfNull(e,"hostName");let r=new ra;return r.setProperty(U.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(e.port===""?"":":"+e.port)),n!==void 0&&r.setProperty(U.PropertyId.SpeechServiceConnection_Key,n),r}static fromEndpoint(e,n){Tr.Contracts.throwIfNull(e,"endpoint"),Tr.Contracts.throwIfNull(n,"subscriptionKey");let r=new ra;return r.properties.setProperty(U.PropertyId.SpeechServiceConnection_Endpoint,e.href),r.properties.setProperty(U.PropertyId.SpeechServiceConnection_Key,n),r}};Cu.SpeechTranslationConfig=qm;var ra=class extends qm{constructor(){super(),this.privSpeechProperties=new U.PropertyCollection,this.outputFormat=U.OutputFormat.Simple}set authorizationToken(e){Tr.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){Tr.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(U.PropertyId[U.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(U.PropertyId[U.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return U.OutputFormat[this.privSpeechProperties.getProperty(Qd.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(Qd.OutputFormatPropertyName,U.OutputFormat[e])}get endpointId(){return this.privSpeechProperties.getProperty(U.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){Tr.Contracts.throwIfNullOrWhitespace(e,"value");let n=this.targetLanguages;n.includes(e)||(n.push(e),this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(U.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(U.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(U.PropertyId[U.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){Tr.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(U.PropertyId.SpeechServiceConnection_Region)}setProxy(e,n,r,i){this.setProperty(U.PropertyId[U.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(U.PropertyId[U.PropertyId.SpeechServiceConnection_ProxyPort],n),this.setProperty(U.PropertyId[U.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(U.PropertyId[U.PropertyId.SpeechServiceConnection_ProxyPassword],i)}getProperty(e,n){return this.privSpeechProperties.getProperty(e,n)}setProperty(e,n){this.privSpeechProperties.setProperty(e,n)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,n){let r=JSON.parse(this.privSpeechProperties.getProperty(Qd.ServicePropertiesPropertyName,"{}"));r[e]=n,this.privSpeechProperties.setProperty(Qd.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceResponse_ProfanityOption,U.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(Qd.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(U.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(U.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return U.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(U.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(U.PropertyId.SpeechServiceConnection_SynthOutputFormat,U.SpeechSynthesisOutputFormat[e])}};Cu.SpeechTranslationConfigImpl=ra});var TR=h(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.PropertyCollection=void 0;var a2=D(),PR=class t{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,n){let r;typeof e=="string"?r=e:r=a2.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===r)return this.privValues[i];if(n!==void 0)return String(n)}setProperty(e,n){let r;typeof e=="string"?r=e:r=a2.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===r){this.privValues[i]=n;return}this.privKeys.push(r),this.privValues.push(n)}clone(){let e=new t;for(let n=0;n<this.privKeys.length;n++)e.privKeys.push(this.privKeys[n]),e.privValues.push(this.privValues[n]);return e}mergeTo(e){this.privKeys.forEach(n=>{if(e.getProperty(n,void 0)===void 0){let r=this.getProperty(n);e.setProperty(n,r)}})}get keys(){return this.privKeys}};Bm.PropertyCollection=PR});var Vm=h(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.PropertyId=void 0;var moe;(function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=16]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=25]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",t[t.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",t[t.Conversation_ApplicationId=46]="Conversation_ApplicationId",t[t.Conversation_DialogType=47]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=49]="Conversation_From_Id",t[t.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=56]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=57]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=59]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=67]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"})(moe=Zd.PropertyId||(Zd.PropertyId={}))});var u2=h(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.Recognizer=void 0;var ia=M(),c2=j(),zm=W(),Um=D(),AR=class t{constructor(e,n,r){this.audioConfig=e!==void 0?e:Um.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=n.clone(),this.privConnectionFactory=r,this.implCommonRecognizerSetup()}close(e,n){zm.Contracts.throwIfDisposed(this.privDisposed),c2.marshalPromiseToCallbacks(this.dispose(!0),e,n)}get internalData(){return this.privReco}dispose(e){return v(this,null,function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return ia.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){ia.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e=typeof window<"u"?"Browser":"Node",n="unknown",r="unknown";typeof navigator<"u"&&(e=e+"/"+navigator.platform,n=navigator.userAgent,r=navigator.appVersion);let i=this.createRecognizerConfig(new ia.SpeechServiceConfig(new ia.Context(new ia.OS(e,n,r))));this.privReco=this.createServiceRecognizer(t.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,i)}recognizeOnceAsyncImpl(e){return v(this,null,function*(){zm.Contracts.throwIfDisposed(this.privDisposed);let n=new c2.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(e,n.resolve,n.reject);let r=yield n.promise;return yield this.implRecognizerStop(),r})}startContinuousRecognitionAsyncImpl(e){return v(this,null,function*(){zm.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return v(this,null,function*(){zm.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return v(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuthFromProperties(e){let n=e.getProperty(Um.PropertyId.SpeechServiceConnection_Key,void 0);return n&&n!==""?new ia.CognitiveSubscriptionKeyAuthentication(n):new ia.CognitiveTokenAuthentication(()=>{let i=e.getProperty(Um.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)},()=>{let i=e.getProperty(Um.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)})}};Hm.Recognizer=AR});var l2=h(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.SpeechRecognizer=void 0;var Su=M(),$m=j(),Go=W(),Sn=D(),MR=class t extends Sn.Recognizer{constructor(e,n){let r=e;Go.Contracts.throwIfNull(r,"speechConfig"),Go.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(Sn.PropertyId.SpeechServiceConnection_RecoLanguage),Sn.PropertyId[Sn.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,r.properties,new Su.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(e,n,r){let i=e;return n.properties.mergeTo(i.properties),new t(e,r)}get endpointId(){return Go.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Sn.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(Sn.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Go.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Sn.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return Go.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Sn.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return Go.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Su.OutputFormatPropertyName,Sn.OutputFormat[Sn.OutputFormat.Simple])===Sn.OutputFormat[Sn.OutputFormat.Simple]?Sn.OutputFormat.Simple:Sn.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,n){$m.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Su.RecognitionMode.Interactive),e,n)}startContinuousRecognitionAsync(e,n){$m.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Su.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,n){$m.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}startKeywordRecognitionAsync(e,n,r){Go.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,n){Go.Contracts.throwIfDisposed(this.privDisposedRecognizer),$m.marshalPromiseToCallbacks(this.dispose(!0),e,n)}dispose(e){return v(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ye(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new Su.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new Su.SpeechServiceRecognizer(e,n,o,i,this)}};Wm.SpeechRecognizer=MR});var d2=h(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.IntentRecognizer=void 0;var oa=M(),Gm=j(),zt=W(),$i=D(),OR=class t extends $i.Recognizer{constructor(e,n){zt.Contracts.throwIfNullOrUndefined(e,"speechConfig");let r=e;zt.Contracts.throwIfNullOrUndefined(r,"speechConfig"),super(n,r.properties,new oa.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=r.properties,zt.Contracts.throwIfNullOrWhitespace(this.properties.getProperty($i.PropertyId.SpeechServiceConnection_RecoLanguage),$i.PropertyId[$i.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty($i.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty($i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty($i.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,n){if(zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){let r=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",r.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(r.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}Gm.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(oa.RecognitionMode.Interactive),e,n)}startContinuousRecognitionAsync(e,n){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){let r=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",r.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(r.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}Gm.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(oa.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,n){Gm.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}startKeywordRecognitionAsync(e,n,r){zt.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e,n){if(e)try{e()}catch(r){n&&n(r)}}addIntent(e,n){zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),zt.Contracts.throwIfNullOrWhitespace(n,"intentId"),zt.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([n,e])}addIntentWithLanguageModel(e,n,r){zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),zt.Contracts.throwIfNullOrWhitespace(e,"intentId"),zt.Contracts.throwIfNull(n,"model");let i=n;zt.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privAddedLmIntents[e]=new oa.AddedLmIntent(i,r)}addAllIntents(e,n){zt.Contracts.throwIfNull(e,"model");let r=e;zt.Contracts.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privUmbrellaIntent=new oa.AddedLmIntent(r,n)}close(e,n){zt.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Gm.marshalPromiseToCallbacks(this.dispose(!0),e,n)}createRecognizerConfig(e){return new oa.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new oa.IntentServiceRecognizer(e,n,o,i,this)}dispose(e){return v(this,null,function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield Ye(t.prototype,this,"dispose").call(this,e))})}buildSpeechContext(){let e,n,r,i=[];this.privUmbrellaIntent!==void 0&&(e=this.privUmbrellaIntent.modelImpl.appId,n=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(let o of Object.keys(this.privAddedLmIntents)){let s=this.privAddedLmIntents[o];if(e===void 0)e=s.modelImpl.appId;else if(e!==s.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(n===void 0)n=s.modelImpl.region;else if(n!==s.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(r===void 0)r=s.modelImpl.subscriptionKey;else if(r!==s.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");let a="luis/"+e+"-PRODUCTION#"+o;i.push(a)}return{Intent:{id:e,key:r===void 0?this.privProperties.getProperty($i.PropertyId[$i.PropertyId.SpeechServiceConnection_Key]):r,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?i:["luis/"+e+"-PRODUCTION"]}}};Km.IntentRecognizer=OR});var p2=h(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.VoiceProfileType=void 0;var yoe;(function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"})(yoe=Yd.VoiceProfileType||(Yd.VoiceProfileType={}))});var kR=h(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.ConnectionMessageImpl=wu.ConnectionMessage=void 0;var f2=Bt(),h2=j(),Coe=TR(),Soe=Vm(),xR=class{};wu.ConnectionMessage=xR;var NR=class{constructor(e){this.privConnectionMessage=e,this.privProperties=new Coe.PropertyCollection,this.privConnectionMessage.headers[f2.HeaderNames.ConnectionId]&&this.privProperties.setProperty(Soe.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[f2.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(n=>{this.privProperties.setProperty(n,this.privConnectionMessage.headers[n])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>e.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===h2.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===h2.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}};wu.ConnectionMessageImpl=NR});var qR=h(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.Connection=void 0;var FR=M(),jR=j(),g2=kR(),woe=W(),Xd=D(),LR=class t{static fromRecognizer(e){let n=e.internalData,r=new t;return r.privInternalData=n,r.setupEvents(),r}static fromSynthesizer(e){let n=e.internalData,r=new t;return r.privInternalData=n,r.setupEvents(),r}openConnection(e,n){jR.marshalPromiseToCallbacks(this.privInternalData.connect(),e,n)}closeConnection(e,n){if(this.privInternalData instanceof FR.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");jR.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,n)}setMessageProperty(e,n,r){if(woe.Contracts.throwIfNullOrWhitespace(n,"propertyName"),this.privInternalData instanceof FR.ServiceRecognizerBase){if(e.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(n,r)}else if(this.privInternalData instanceof FR.SynthesisAdapterBase){if(e.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(n,r)}}sendMessageAsync(e,n,r,i){jR.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,n),r,i)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{e.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new Xd.ConnectionEventArgs(e.connectionId)):e.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new Xd.ConnectionEventArgs(e.connectionId)):e.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new Xd.ConnectionMessageEventArgs(new g2.ConnectionMessageImpl(e.message))):e.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new Xd.ConnectionMessageEventArgs(new g2.ConnectionMessageImpl(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new Xd.ServiceEventArgs(e.jsonString,e.name))})}};Jm.Connection=LR});var v2=h(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.TranslationRecognizer=void 0;var ep=M(),Qm=j(),boe=qR(),Ar=W(),Be=D(),BR=class t extends Be.Recognizer{constructor(e,n,r){let i=e;Ar.Contracts.throwIfNull(i,"speechConfig"),super(n,i.properties,r||new ep.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&Ar.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationVoice),Be.PropertyId[Be.PropertyId.SpeechServiceConnection_TranslationVoice]),Ar.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages),Be.PropertyId[Be.PropertyId.SpeechServiceConnection_TranslationToLanguages]),Ar.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_RecoLanguage),Be.PropertyId[Be.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(e,n,r){let i=e;return n.properties.mergeTo(i.properties),new t(e,r)}get speechRecognitionLanguage(){return Ar.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return Ar.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return Ar.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Be.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(Be.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,n){Ar.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),Qm.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(ep.RecognitionMode.Interactive),e,n)}startContinuousRecognitionAsync(e,n){Qm.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(ep.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,n){Qm.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}removeTargetLanguage(e){if(Ar.Contracts.throwIfNullOrUndefined(e,"language to be removed"),this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){let n=this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),r=n.indexOf(e);r>-1&&(n.splice(r,1),this.properties.setProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")),this.updateLanguages(n))}}addTargetLanguage(e){Ar.Contracts.throwIfNullOrUndefined(e,"language to be added");let n=[];this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(n=this.properties.getProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),n.includes(e)||(n.push(e),this.properties.setProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")))):(this.properties.setProperty(Be.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),n=[e]),this.updateLanguages(n)}close(e,n){Ar.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),Qm.marshalPromiseToCallbacks(this.dispose(!0),e,n)}onConnection(){}dispose(e){return v(this,null,function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield Ye(t.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(e){return new ep.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new ep.TranslationServiceRecognizer(e,n,o,i,this)}updateLanguages(e){let n=boe.Connection.fromRecognizer(this);n&&(n.setMessageProperty("speech.context","translationcontext",{to:e}),n.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}};Zm.TranslationRecognizer=BR});var m2=h(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.Translations=void 0;var Eoe=D(),VR=class{constructor(){this.privMap=new Eoe.PropertyCollection}get languages(){return this.privMap.keys}get(e,n){return this.privMap.getProperty(e,n)}set(e,n){this.privMap.setProperty(e,n)}};Ym.Translations=VR});var y2=h(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.NoMatchReason=void 0;var Ioe;(function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(Ioe=tp.NoMatchReason||(tp.NoMatchReason={}))});var C2=h(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.NoMatchDetails=void 0;var zR=M(),Xm=D(),UR=class t{constructor(e){this.privReason=e}static fromResult(e){let n=zR.SimpleSpeechPhrase.fromJSON(e.json),r=Xm.NoMatchReason.NotRecognized;switch(n.RecognitionStatus){case zR.RecognitionStatus.BabbleTimeout:r=Xm.NoMatchReason.InitialBabbleTimeout;break;case zR.RecognitionStatus.InitialSilenceTimeout:r=Xm.NoMatchReason.InitialSilenceTimeout;break;default:r=Xm.NoMatchReason.NotRecognized;break}return new t(r)}get reason(){return this.privReason}};ey.NoMatchDetails=UR});var S2=h(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.TranslationRecognitionCanceledEventArgs=void 0;var HR=class{constructor(e,n,r,i,o){this.privCancelReason=n,this.privErrorDetails=r,this.privResult=o,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};ty.TranslationRecognitionCanceledEventArgs=HR});var w2=h(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});ny.IntentRecognitionCanceledEventArgs=void 0;var Doe=D(),$R=class extends Doe.IntentRecognitionEventArgs{constructor(e,n,r,i,o,s){super(i,o,s),this.privReason=e,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};ny.IntentRecognitionCanceledEventArgs=$R});var GR=h(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.CancellationDetailsBase=void 0;var WR=class{constructor(e,n,r){this.privReason=e,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};ry.CancellationDetailsBase=WR});var b2=h(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.CancellationDetails=void 0;var iy=M(),_oe=GR(),bu=D(),KR=class t extends _oe.CancellationDetailsBase{constructor(e,n,r){super(e,n,r)}static fromResult(e){let n=bu.CancellationReason.Error,r=bu.CancellationErrorCode.NoError;if(e instanceof bu.RecognitionResult&&e.json){let i=iy.SimpleSpeechPhrase.fromJSON(e.json);n=iy.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus)}return e.properties&&(r=bu.CancellationErrorCode[e.properties.getProperty(iy.CancellationErrorCodePropertyName,bu.CancellationErrorCode[bu.CancellationErrorCode.NoError])]),new t(n,e.errorDetails||iy.EnumTranslation.implTranslateErrorDetails(r),r)}};oy.CancellationDetails=KR});var E2=h(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.CancellationErrorCode=void 0;var Roe;(function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"})(Roe=np.CancellationErrorCode||(np.CancellationErrorCode={}))});var I2=h(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0});sy.ConnectionEventArgs=void 0;var Poe=D(),JR=class extends Poe.SessionEventArgs{};sy.ConnectionEventArgs=JR});var D2=h(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.ServiceEventArgs=void 0;var Toe=D(),QR=class extends Toe.SessionEventArgs{constructor(e,n,r){super(r),this.privJsonResult=e,this.privEventName=n}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};ay.ServiceEventArgs=QR});var _2=h(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});cy.PhraseListGrammar=void 0;var ZR=class t{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){let n=e.internalData;return new t(n)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}};cy.PhraseListGrammar=ZR});var ly=h(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.DialogServiceConfigImpl=Eu.DialogServiceConfig=void 0;var Aoe=W(),rp=D(),uy=class{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};Eu.DialogServiceConfig=uy;var YR=class extends uy{constructor(){super(),this.privSpeechConfig=new rp.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){Aoe.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,n){this.privSpeechConfig.setProperty(e,n)}getProperty(e,n){return this.privSpeechConfig.getProperty(e)}setProxy(e,n,r,i){this.setProperty(rp.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(rp.PropertyId.SpeechServiceConnection_ProxyPort,`${n}`),r&&this.setProperty(rp.PropertyId.SpeechServiceConnection_ProxyUserName,r),i&&this.setProperty(rp.PropertyId.SpeechServiceConnection_ProxyPassword,i)}setServiceProperty(e,n,r){this.privSpeechConfig.setServiceProperty(e,n)}close(){}};Eu.DialogServiceConfigImpl=YR});var R2=h(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});dy.BotFrameworkConfig=void 0;var sa=W(),Wi=ly(),wn=D(),XR=class extends Wi.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,n,r){sa.Contracts.throwIfNullOrWhitespace(e,"subscription"),sa.Contracts.throwIfNullOrWhitespace(n,"region");let i=new Wi.DialogServiceConfigImpl;return i.setProperty(wn.PropertyId.Conversation_DialogType,Wi.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(wn.PropertyId.SpeechServiceConnection_Key,e),i.setProperty(wn.PropertyId.SpeechServiceConnection_Region,n),r&&i.setProperty(wn.PropertyId.Conversation_ApplicationId,r),i}static fromAuthorizationToken(e,n,r){sa.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),sa.Contracts.throwIfNullOrWhitespace(n,"region");let i=new Wi.DialogServiceConfigImpl;return i.setProperty(wn.PropertyId.Conversation_DialogType,Wi.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(wn.PropertyId.SpeechServiceAuthorization_Token,e),i.setProperty(wn.PropertyId.SpeechServiceConnection_Region,n),r&&i.setProperty(wn.PropertyId.Conversation_ApplicationId,r),i}static fromHost(e,n,r){sa.Contracts.throwIfNullOrUndefined(e,"host");let i=e instanceof URL?e:new URL(`wss://${e}.convai.speech.azure.us`);sa.Contracts.throwIfNullOrUndefined(i,"resolvedHost");let o=new Wi.DialogServiceConfigImpl;return o.setProperty(wn.PropertyId.Conversation_DialogType,Wi.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(wn.PropertyId.SpeechServiceConnection_Host,i.toString()),n!==void 0&&o.setProperty(wn.PropertyId.SpeechServiceConnection_Key,n),o}static fromEndpoint(e,n){sa.Contracts.throwIfNull(e,"endpoint");let r=new Wi.DialogServiceConfigImpl;return r.setProperty(wn.PropertyId.Conversation_DialogType,Wi.DialogServiceConfig.DialogTypes.BotFramework),r.setProperty(wn.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),n!==void 0&&r.setProperty(wn.PropertyId.SpeechServiceConnection_Key,n),r}};dy.BotFrameworkConfig=XR});var P2=h(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0});py.CustomCommandsConfig=void 0;var aa=W(),ip=ly(),ui=D(),eP=class extends ip.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,n,r){aa.Contracts.throwIfNullOrWhitespace(e,"applicationId"),aa.Contracts.throwIfNullOrWhitespace(n,"subscription"),aa.Contracts.throwIfNullOrWhitespace(r,"region");let i=new ip.DialogServiceConfigImpl;return i.setProperty(ui.PropertyId.Conversation_DialogType,ip.DialogServiceConfig.DialogTypes.CustomCommands),i.setProperty(ui.PropertyId.Conversation_ApplicationId,e),i.setProperty(ui.PropertyId.SpeechServiceConnection_Key,n),i.setProperty(ui.PropertyId.SpeechServiceConnection_Region,r),i}static fromAuthorizationToken(e,n,r){aa.Contracts.throwIfNullOrWhitespace(e,"applicationId"),aa.Contracts.throwIfNullOrWhitespace(n,"authorizationToken"),aa.Contracts.throwIfNullOrWhitespace(r,"region");let i=new ip.DialogServiceConfigImpl;return i.setProperty(ui.PropertyId.Conversation_DialogType,ip.DialogServiceConfig.DialogTypes.CustomCommands),i.setProperty(ui.PropertyId.Conversation_ApplicationId,e),i.setProperty(ui.PropertyId.SpeechServiceAuthorization_Token,n),i.setProperty(ui.PropertyId.SpeechServiceConnection_Region,r),i}set applicationId(e){aa.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(ui.PropertyId.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(ui.PropertyId.Conversation_ApplicationId)}};py.CustomCommandsConfig=eP});var Gi=h(fy=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0});fy.QueryParameterNames=void 0;var Fe=class{};fy.QueryParameterNames=Fe;Fe.BotId="botid";Fe.CustomSpeechDeploymentId="cid";Fe.CustomVoiceDeploymentId="deploymentId";Fe.EnableAudioLogging="storeAudio";Fe.EnableLanguageId="lidEnabled";Fe.EnableWordLevelTimestamps="wordLevelTimestamps";Fe.EndSilenceTimeoutMs="endSilenceTimeoutMs";Fe.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";Fe.Format="format";Fe.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";Fe.Language="language";Fe.Profanity="profanity";Fe.RequestBotStatusMessages="enableBotMessageStatus";Fe.StableIntermediateThreshold="stableIntermediateThreshold";Fe.StableTranslation="stableTranslation";Fe.TestHooks="testhooks";Fe.Postprocessing="postprocessing";Fe.CtsMeetingId="meetingId";Fe.CtsDeviceId="deviceId";Fe.CtsIsParticipant="isParticipant";Fe.EnableAvatar="enableTalkingAvatar"});var ir=h(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});hy.ConnectionFactoryBase=void 0;var Moe=M(),Ko=D(),Jo=Gi(),tP=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,n,r){new Map([[Ko.PropertyId.Speech_SegmentationSilenceTimeoutMs,Jo.QueryParameterNames.SegmentationSilenceTimeoutMs],[Ko.PropertyId.SpeechServiceConnection_EnableAudioLogging,Jo.QueryParameterNames.EnableAudioLogging],[Ko.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,Jo.QueryParameterNames.EndSilenceTimeoutMs],[Ko.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,Jo.QueryParameterNames.InitialSilenceTimeoutMs],[Ko.PropertyId.SpeechServiceResponse_PostProcessingOption,Jo.QueryParameterNames.Postprocessing],[Ko.PropertyId.SpeechServiceResponse_ProfanityOption,Jo.QueryParameterNames.Profanity],[Ko.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,Jo.QueryParameterNames.EnableWordLevelTimestamps],[Ko.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,Jo.QueryParameterNames.StableIntermediateThreshold]]).forEach((s,a)=>{this.setUrlParameter(a,s,e,n,r)});let o=JSON.parse(e.parameters.getProperty(Moe.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach(s=>{n[s]=o[s]})}setUrlParameter(e,n,r,i,o){let s=r.parameters.getProperty(e,void 0);s&&(!o||o.search(n)===-1)&&(i[n]=s.toLocaleLowerCase())}};hy.ConnectionFactoryBase=tP});var O2=h(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});vy.DialogConnectionFactory=void 0;var T2=dt(),Ooe=M(),Nn=D(),A2=ir(),xoe=M(),M2=Bt(),gy=Gi(),op=class t extends A2.ConnectionFactoryBase{create(e,n,r){let i=e.parameters.getProperty(Nn.PropertyId.Conversation_ApplicationId,""),o=e.parameters.getProperty(Nn.PropertyId.Conversation_DialogType),s=e.parameters.getProperty(Nn.PropertyId.SpeechServiceConnection_Region),a=e.parameters.getProperty(Nn.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),c=e.parameters.getProperty(Nn.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),u={};u[M2.HeaderNames.ConnectionId]=r,u[gy.QueryParameterNames.Format]=e.parameters.getProperty(Ooe.OutputFormatPropertyName,Nn.OutputFormat[Nn.OutputFormat.Simple]).toLowerCase(),u[gy.QueryParameterNames.Language]=a,u[gy.QueryParameterNames.RequestBotStatusMessages]=c,i&&(u[gy.QueryParameterNames.BotId]=i,o===Nn.DialogServiceConfig.DialogTypes.CustomCommands&&(u[M2.HeaderNames.CustomCommandsAppId]=i));let l=o===Nn.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",d=o===Nn.DialogServiceConfig.DialogTypes.CustomCommands?"v1":o===Nn.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",p={};n.token!=null&&n.token!==""&&(p[n.headerName]=n.token);let f=e.parameters.getProperty(Nn.PropertyId.SpeechServiceConnection_Endpoint,"");if(!f){let m=A2.ConnectionFactoryBase.getHostSuffix(s),y=e.parameters.getProperty(Nn.PropertyId.SpeechServiceConnection_Host,`wss://${s}.${t.BaseUrl}${m}`);f=`${y.endsWith("/")?y:y+"/"}${l}${t.ApiKey}/${d}`}this.setCommonUrlParams(e,u,f);let g=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new T2.WebsocketConnection(f,u,p,new xoe.WebsocketMessageFormatter,T2.ProxyInfo.fromRecognizerConfig(e),g,r)}};vy.DialogConnectionFactory=op;op.ApiKey="api";op.BaseUrl="convai.speech"});var x2=h(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});yy.DialogServiceConnector=void 0;var Noe=O2(),nP=M(),Iu=j(),my=W(),koe=D(),Qo=Vm(),rP=class t extends koe.Recognizer{constructor(e,n){let r=e;my.Contracts.throwIfNull(e,"dialogConfig"),super(n,r.properties,new Noe.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=r.properties.clone();let i=this.buildAgentConfig();this.privReco.agentConfig.set(i)}connect(e,n){Iu.marshalPromiseToCallbacks(this.privReco.connect(),e,n)}disconnect(e,n){Iu.marshalPromiseToCallbacks(this.privReco.disconnect(),e,n)}get authorizationToken(){return this.properties.getProperty(Qo.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){my.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Qo.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(Qo.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(Qo.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,n){if(this.isTurnComplete){my.Contracts.throwIfDisposed(this.privIsDisposed);let i=v(this,null,function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;let o=new Iu.Deferred;yield this.privReco.recognize(nP.RecognitionMode.Conversation,o.resolve,o.reject);let s=yield o.promise;return yield this.implRecognizerStop(),s});i.catch(()=>{this.dispose(!0).catch(()=>{})}),Iu.marshalPromiseToCallbacks(i.finally(()=>{this.isTurnComplete=!0}),e,n)}}sendActivityAsync(e,n,r){Iu.marshalPromiseToCallbacks(this.privReco.sendMessage(e),n,r)}close(e,n){my.Contracts.throwIfDisposed(this.privIsDisposed),Iu.marshalPromiseToCallbacks(this.dispose(!0),e,n)}dispose(e){return v(this,null,function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield Ye(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new nP.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new nP.DialogServiceAdapter(e,n,o,i,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(Qo.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(Qo.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(Qo.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(Qo.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};yy.DialogServiceConnector=rP});var N2=h(Cy=>{"use strict";Object.defineProperty(Cy,"__esModule",{value:!0});Cy.ActivityReceivedEventArgs=void 0;var iP=class{constructor(e,n){this.privActivity=e,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};Cy.ActivityReceivedEventArgs=iP});var k2=h(Sy=>{"use strict";Object.defineProperty(Sy,"__esModule",{value:!0});Sy.TurnStatusResponsePayload=void 0;var oP=class t{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}};Sy.TurnStatusResponsePayload=oP});var F2=h(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});wy.TurnStatusReceivedEventArgs=void 0;var Foe=k2(),sP=class{constructor(e){this.privTurnStatus=Foe.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};wy.TurnStatusReceivedEventArgs=sP});var j2=h(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.ServicePropertyChannel=void 0;var joe;(function(t){t[t.UriQueryParameter=0]="UriQueryParameter"})(joe=sp.ServicePropertyChannel||(sp.ServicePropertyChannel={}))});var L2=h(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.ProfanityOption=void 0;var Loe;(function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"})(Loe=ap.ProfanityOption||(ap.ProfanityOption={}))});var q2=h(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});by.BaseAudioPlayer=void 0;var qoe=Ir(),Boe=D(),Voe=Fo(),aP=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,e===void 0&&(e=Boe.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,n,r){try{this.ensureInitializedContext();let i=this.formatAudioData(e),o=new Float32Array(this.samples.length+i.length);o.set(this.samples,0),o.set(i,this.samples.length),this.samples=o,n&&n()}catch(i){r&&r(i)}}stopAudio(e,n){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{e&&e()},r=>{n&&n(r)}),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();let e=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},e)}}createAudioContext(){this.audioContext=Voe.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new qoe.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,n){let r=new Float32Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]/n;return r}updateAudioBuffer(){if(this.samples.length===0)return;let e=this.audioFormat.channels,n=this.audioContext.createBufferSource(),r=this.samples.length/e,i=this.audioContext.createBuffer(e,r,this.audioFormat.samplesPerSec);for(let o=0;o<e;o++){let s=o,a=i.getChannelData(o);for(let c=0;c<this.samples.length;c++,s+=e)a[c]=this.samples[s]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),n.buffer=i,n.connect(this.gainNode),n.start(this.startTime),this.startTime+=i.duration,this.samples=new Float32Array}playAudio(e){return v(this,null,function*(){this.audioContext===null&&this.createAudioContext();let n=this.audioContext.createBufferSource(),r=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,i=>{n.buffer=i,n.connect(r),n.start(0)})})}};by.BaseAudioPlayer=aP});var B2=h(Ey=>{"use strict";Object.defineProperty(Ey,"__esModule",{value:!0});Ey.ConnectionMessageEventArgs=void 0;var cP=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};Ey.ConnectionMessageEventArgs=cP});var V2=h(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0});Iy.VoiceProfile=void 0;var uP=class{constructor(e,n){this.privId=e,this.privProfileType=n}get profileId(){return this.privId}get profileType(){return this.privProfileType}};Iy.VoiceProfile=uP});var U2=h(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.VoiceProfileEnrollmentCancellationDetails=Du.VoiceProfileEnrollmentResult=void 0;var z2=M(),Dt=D(),lP=class t{constructor(e,n,r){this.privReason=e,this.privProperties=new Dt.PropertyCollection,this.privReason!==Dt.ResultReason.Canceled?n&&(this.privDetails=JSON.parse(n),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=Dt.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=r,this.privProperties.setProperty(z2.CancellationErrorCodePropertyName,Dt.CancellationErrorCode[Dt.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){let n=[];for(let r of e.value){let i=r.enrollmentStatus.toLowerCase()==="enrolling"?Dt.ResultReason.EnrollingVoiceProfile:r.enrollmentStatus.toLowerCase()==="enrolled"?Dt.ResultReason.EnrolledVoiceProfile:Dt.ResultReason.Canceled,o=new t(i,null,null);o.privDetails=this.getIdentificationDetails(r),n.push(o)}return n}static FromVerificationProfileList(e){let n=[];for(let r of e.value){let i=r.enrollmentStatus.toLowerCase()==="enrolling"?Dt.ResultReason.EnrollingVoiceProfile:r.enrollmentStatus.toLowerCase()==="enrolled"?Dt.ResultReason.EnrolledVoiceProfile:Dt.ResultReason.Canceled,o=new t(i,null,null);o.privDetails=this.getVerificationDetails(r),n.push(o)}return n}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}};Du.VoiceProfileEnrollmentResult=lP;var dP=class t extends Dt.CancellationDetailsBase{constructor(e,n,r){super(e,n,r)}static fromResult(e){let n=Dt.CancellationReason.Error,r=Dt.CancellationErrorCode.NoError;return e.properties&&(r=Dt.CancellationErrorCode[e.properties.getProperty(z2.CancellationErrorCodePropertyName,Dt.CancellationErrorCode[Dt.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)}};Du.VoiceProfileEnrollmentCancellationDetails=dP});var $2=h(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.VoiceProfileCancellationDetails=_u.VoiceProfileResult=void 0;var H2=M(),zoe=W(),li=D(),pP=class{constructor(e,n){this.privReason=e,this.privProperties=new li.PropertyCollection,e===li.ResultReason.Canceled&&(zoe.Contracts.throwIfNullOrUndefined(n,"statusText"),this.privErrorDetails=n,this.privProperties.setProperty(H2.CancellationErrorCodePropertyName,li.CancellationErrorCode[li.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};_u.VoiceProfileResult=pP;var fP=class t extends li.CancellationDetailsBase{constructor(e,n,r){super(e,n,r)}static fromResult(e){let n=li.CancellationReason.Error,r=li.CancellationErrorCode.NoError;return e.properties&&(r=li.CancellationErrorCode[e.properties.getProperty(H2.CancellationErrorCodePropertyName,li.CancellationErrorCode[li.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)}};_u.VoiceProfileCancellationDetails=fP});var W2=h(Dy=>{"use strict";Object.defineProperty(Dy,"__esModule",{value:!0});Dy.VoiceProfilePhraseResult=void 0;var Uoe=W(),Hoe=D(),hP=class extends Hoe.VoiceProfileResult{constructor(e,n,r,i){super(e,n),this.privPhrases=[],Uoe.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=r,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}};Dy.VoiceProfilePhraseResult=hP});var G2=h(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0});Ry.VoiceProfileClient=void 0;var gP=M(),$oe=uR(),_y=W(),ca=D(),vP=class t extends ca.Recognizer{constructor(e){_y.Contracts.throwIfNullOrUndefined(e,"speechConfig");let n=e;_y.Contracts.throwIfNull(n,"speechConfig"),super($oe.AudioConfig.fromStreamInput(ca.AudioInputStream.createPushStream()),n.properties,new gP.VoiceProfileConnectionFactory),this.privProperties=n.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(ca.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){_y.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(ca.PropertyId.SpeechServiceAuthorization_Token,e)}createProfileAsync(e,n){return v(this,null,function*(){let r=yield this.privVoiceAdapter.createProfile(e,n);return new ca.VoiceProfile(r[0],e)})}retrieveEnrollmentResultAsync(e){return v(this,null,function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(e)})}getAllProfilesAsync(e){return v(this,null,function*(){return this.privVoiceAdapter.getAllProfiles(e)})}getActivationPhrasesAsync(e,n){return v(this,null,function*(){return this.privVoiceAdapter.getActivationPhrases(e,n)})}enrollProfileAsync(e,n){return v(this,null,function*(){let r=n;return _y.Contracts.throwIfNullOrUndefined(r,"audioConfig"),this.audioConfig=n,this.privVoiceAdapter.SpeakerAudioSource=r,this.privVoiceAdapter.enrollProfile(e)})}deleteProfileAsync(e){return v(this,null,function*(){return this.privVoiceAdapter.deleteProfile(e)})}resetProfileAsync(e){return v(this,null,function*(){return this.privVoiceAdapter.resetProfile(e)})}close(){return v(this,null,function*(){yield this.dispose(!0)})}createServiceRecognizer(e,n,r,i){let o=r;return new gP.VoiceServiceRecognizer(e,n,o,i,this)}dispose(e){return v(this,null,function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&(yield Ye(t.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(e){return new gP.RecognizerConfig(e,this.properties)}getResult(e,n){return new ca.VoiceProfileResult(e.ok?n:ca.ResultReason.Canceled,e.statusText)}};Ry.VoiceProfileClient=vP});var K2=h(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});Py.SpeakerRecognizer=void 0;var mP=M(),ua=W(),yP=D(),CP=class t extends yP.Recognizer{constructor(e,n){ua.Contracts.throwIfNullOrUndefined(e,"speechConfig");let r=e;ua.Contracts.throwIfNullOrUndefined(r,"speechConfig"),super(n,r.properties,new mP.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=n,ua.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=r.properties}get authorizationToken(){return this.properties.getProperty(yP.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){ua.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(yP.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e){return v(this,null,function*(){return ua.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)})}close(){return v(this,null,function*(){ua.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)})}recognizeSpeakerOnceAsyncImpl(e){return v(this,null,function*(){ua.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();let n=yield this.privReco.recognizeSpeaker(e);return yield this.implRecognizerStop(),n})}implRecognizerStop(){return v(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}createRecognizerConfig(e){return new mP.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new mP.SpeakerServiceRecognizer(e,n,o,i,this)}dispose(e){return v(this,null,function*(){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,yield Ye(t.prototype,this,"dispose").call(this,e))})}};Py.SpeakerRecognizer=CP});var J2=h(Ty=>{"use strict";Object.defineProperty(Ty,"__esModule",{value:!0});Ty.SpeakerIdentificationModel=void 0;var Woe=W(),Goe=D(),SP=class t{constructor(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],Woe.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),e.length===0)throw new Error("Empty Voice Profiles array");for(let n of e){if(n.profileType!==Goe.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+n.profileId);this.privVoiceProfiles.push(n),this.privProfileIds.push(n.profileId)}}static fromProfiles(e){return new t(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};Ty.SpeakerIdentificationModel=SP});var Z2=h(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0});Ay.SpeakerVerificationModel=void 0;var Koe=W(),Q2=D(),wP=class t{constructor(e){if(Koe.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===Q2.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new t(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===Q2.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};Ay.SpeakerVerificationModel=wP});var bP=h(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.LanguageIdMode=void 0;var Joe;(function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"})(Joe=cp.LanguageIdMode||(cp.LanguageIdMode={}))});var X2=h(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.AutoDetectSourceLanguageConfig=void 0;var Qoe=M(),Zoe=W(),di=D(),Y2=bP(),EP=class t{constructor(){this.privProperties=new di.PropertyCollection,this.privProperties.setProperty(di.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=Y2.LanguageIdMode.AtStart}static fromOpenRange(){let e=new t;return e.properties.setProperty(di.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,Qoe.AutoDetectSourceLanguagesOpenRangeOptionName),e}static fromLanguages(e){Zoe.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");let n=new t;return n.properties.setProperty(di.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),n}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");let n=new t,r=[];return e.forEach(i=>{if(r.push(i.language),i.endpointId!==void 0&&i.endpointId!==""){let o=i.language+di.PropertyId.SpeechServiceConnection_EndpointId.toString();n.properties.setProperty(o,i.endpointId)}}),n.properties.setProperty(di.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.join()),n}get properties(){return this.privProperties}set mode(e){e===Y2.LanguageIdMode.Continuous?(this.privProperties.setProperty(di.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(di.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(di.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(di.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}};My.AutoDetectSourceLanguageConfig=EP});var tH=h(Oy=>{"use strict";Object.defineProperty(Oy,"__esModule",{value:!0});Oy.AutoDetectSourceLanguageResult=void 0;var eH=W(),IP=class t{constructor(e,n){eH.Contracts.throwIfNullOrUndefined(e,"language"),eH.Contracts.throwIfNullOrUndefined(n,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=n}static fromResult(e){return new t(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new t(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};Oy.AutoDetectSourceLanguageResult=IP});var nH=h(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});xy.SourceLanguageConfig=void 0;var Yoe=W(),DP=class t{constructor(e,n){Yoe.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=n}static fromLanguage(e,n){return new t(e,n)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};xy.SourceLanguageConfig=DP});var iH=h(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.SpeakerRecognitionCancellationDetails=Ki.SpeakerRecognitionResult=Ki.SpeakerRecognitionResultType=void 0;var rH=M(),bn=D(),Ny;(function(t){t[t.Verify=0]="Verify",t[t.Identify=1]="Identify"})(Ny=Ki.SpeakerRecognitionResultType||(Ki.SpeakerRecognitionResultType={}));var _P=class{constructor(e,n=bn.ResultReason.RecognizedSpeaker,r=bn.CancellationErrorCode.NoError,i=""){this.privProperties=new bn.PropertyCollection;let o=e.scenario==="TextIndependentIdentification"?Ny.Identify:Ny.Verify;this.privReason=n,this.privReason!==bn.ResultReason.Canceled?o===Ny.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=bn.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,e.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=bn.ResultReason.NoMatch),e.verificationResult.profileId!==void 0&&e.verificationResult.profileId!==""&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=i,this.privProperties.setProperty(rH.CancellationErrorCodePropertyName,bn.CancellationErrorCode[r])),this.privProperties.setProperty(bn.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};Ki.SpeakerRecognitionResult=_P;var RP=class t extends bn.CancellationDetailsBase{constructor(e,n,r){super(e,n,r)}static fromResult(e){let n=bn.CancellationReason.Error,r=bn.CancellationErrorCode.NoError;return e.properties&&(r=bn.CancellationErrorCode[e.properties.getProperty(rH.CancellationErrorCodePropertyName,bn.CancellationErrorCode[bn.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)}};Ki.SpeakerRecognitionCancellationDetails=RP});var PP=h(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.ConversationImpl=Ru.Conversation=void 0;var Se=M(),up=j(),T=W(),Ce=D(),ky=class{constructor(){}static createConversationAsync(e,n,r,i){T.Contracts.throwIfNullOrUndefined(e,Se.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),T.Contracts.throwIfNullOrUndefined(e.region,Se.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!e.subscriptionKey&&!e.getProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceAuthorization_Token])&&T.Contracts.throwIfNullOrUndefined(e.subscriptionKey,Se.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let o,s,a;return typeof n=="string"?(o=new lp(e,n),up.marshalPromiseToCallbacks(v(this,null,function*(){}),r,i)):(o=new lp(e),s=n,a=r,o.createConversationAsync(()=>{s&&s()},c=>{a&&a(c)})),o}};Ru.Conversation=ky;var lp=class extends ky{constructor(e,n){if(super(),this.privErrors=Se.ConversationConnectionConfig.restErrors,this.onConnected=o=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,o)}catch{}},this.onDisconnected=o=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,o)}catch{}finally{this.close(!1)}},this.onCanceled=(o,s)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,s)}catch{}},this.onParticipantUpdateCommandReceived=(o,s)=>{try{let a=this.privParticipants.getParticipant(s.id);if(a!==void 0){switch(s.key){case Se.ConversationTranslatorCommandTypes.changeNickname:a.displayName=s.value;break;case Se.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=s.value;break;case Se.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=s.value;break;case Se.ConversationTranslatorCommandTypes.setMute:a.isMuted=s.value;break;case Se.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=s.value;break}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.Updated,[this.toParticipant(a)],s.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(o,s)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=a.isHost?!1:s.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.Updated,this.toParticipants(!1),s.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(o,s)=>{try{let a=this.privParticipants.addOrUpdateParticipant(s.participant);a!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],s.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(o,s)=>{try{let a=this.privParticipants.getParticipant(s.participant.id);a!==void 0&&(this.privParticipants.deleteParticipant(s.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],s.sessionId)))}catch{}},this.onTranslationReceived=(o,s)=>{try{switch(s.command){case Se.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new Ce.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break;case Se.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new Ce.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break;case Se.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new Ce.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break}}catch{}},this.onParticipantsListReceived=(o,s)=>{try{if(s.sessionToken!==void 0&&s.sessionToken!==null&&(this.privRoom.token=s.sessionToken),this.privParticipants.participants=[...s.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Ce.ConversationParticipantsChangedEventArgs(Ce.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),s.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(Ce.PropertyId.ConversationTranslator_Name);a!==void 0&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch{}},this.onConversationExpiration=(o,s)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,s)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new Ce.PropertyCollection,this.privManager=new Se.ConversationManager,e.getProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceConnection_RecoLanguage],Se.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceConnection_RecoLanguage]),n)this.privConversationId=n;else{e.targetLanguages.length===0&&e.addTargetLanguage(this.privLanguage),e.getProperty(Ce.PropertyId[Ce.PropertyId.SpeechServiceResponse_ProfanityOption])||e.setProfanity(Ce.ProfanityOption.Masked);let s=e.getProperty(Ce.PropertyId[Ce.PropertyId.ConversationTranslator_Name]);s==null&&(s="Host"),T.Contracts.throwIfNullOrTooLong(s,"nickname",50),T.Contracts.throwIfNullOrTooShort(s,"nickname",2),e.setProperty(Ce.PropertyId[Ce.PropertyId.ConversationTranslator_Name],s)}this.privConfig=e;let i=e;T.Contracts.throwIfNull(i,"speechConfig"),this.privProperties=i.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Se.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){let e=this.conversationId,n=this.participants.map(o=>({id:o.id,preferredLanguage:o.preferredLanguage,voice:o.voice})),r={};for(let o of Se.ConversationConnectionConfig.transcriptionEventKeys){let s=this.properties.getProperty(o,"");s!==""&&(r[o]=s)}return{id:e,participants:n,conversationProperties:r}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(e){T.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),this.privManager.createOrJoin(this.privProperties,void 0,r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),n),this.privRoom=r,this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}startConversationAsync(e,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=Se.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}addParticipantAsync(e,n,r){T.Contracts.throwIfNullOrUndefined(e,"Participant"),up.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),n,r)}joinConversationAsync(e,n,r,i,o){try{T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),T.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),T.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,s=>{T.Contracts.throwIfNullOrUndefined(s,this.privErrors.permissionDeniedConnect),this.privRoom=s,this.privConfig.authorizationToken=s.cognitiveSpeechAuthToken,i&&i(s.cognitiveSpeechAuthToken)},s=>{this.handleError(s,o)})}catch(s){this.handleError(s,o)}}deleteConversationAsync(e,n){up.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,n)}deleteConversationImplAsync(){return v(this,null,function*(){T.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),T.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endConversationAsync(e,n){up.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,n)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,n){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}muteAllParticipantsAsync(e,n){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}muteParticipantAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(n,r)},o=>{this.handleError(o,r)})}catch(i){this.handleError(i,r)}}removeParticipantAsync(e,n,r){try{if(T.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))up.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),n,r);else{T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);let i="";typeof e=="string"?i=e:e.hasOwnProperty("id")?i=e.id:e.hasOwnProperty("userId")&&(i=e.userId),T.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(s=>s.id===i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),()=>{this.handleCallback(n,r)},s=>{this.handleError(s,r)})}}catch(i){this.handleError(i,r)}}unlockConversationAsync(e,n){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}unmuteAllParticipantsAsync(e,n){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}unmuteParticipantAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(n,r)},o=>{this.handleError(o,r)})}catch(i){this.handleError(i,r)}}sendTextMessageAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}setTranslatedLanguagesAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}changeNicknameAsync(e,n,r){try{T.Contracts.throwIfDisposed(this.privIsDisposed),T.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),T.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),T.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return v(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this})}getKeepAlive(){let e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(this.privParticipants.addOrUpdateParticipant(e)!==void 0&&this.privTranscriberRecognizer){let r=this.conversationInfo;return r.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(r,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let n=this.conversationInfo;return n.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(n,"leave")}close(e){return v(this,null,function*(){try{this.privIsConnected=!1,yield this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(n){throw n}e&&this.dispose()})}handleCallback(e,n){if(e){try{e()}catch(r){n&&n(r)}e=void 0}}handleError(e,n){if(n)if(e instanceof Error){let r=e;n(r.name+": "+r.message)}else n(e)}toParticipants(e){let n=this.privParticipants.participants.map(r=>this.toParticipant(r));return e?n:n.filter(r=>r.isHost===!1)}toParticipant(e){return new Ce.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,n){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:n})}getLockCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(e,"nickname"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Se.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Se.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return T.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),T.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),T.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:Se.ConversationTranslatorMessageTypes.instantMessage})}};Ru.ConversationImpl=lp});var oH=h(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0});Fy.ConversationCommon=void 0;var TP=class{constructor(e){this.privAudioConfig=e}handleCallback(e,n){if(e){try{e()}catch(r){n&&n(r)}e=void 0}}handleError(e,n){if(n)if(e instanceof Error){let r=e;n(r.name+": "+r.message)}else n(e)}};Fy.ConversationCommon=TP});var sH=h(jy=>{"use strict";Object.defineProperty(jy,"__esModule",{value:!0});jy.ConversationExpirationEventArgs=void 0;var Xoe=D(),AP=class extends Xoe.SessionEventArgs{constructor(e,n){super(n),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}};jy.ConversationExpirationEventArgs=AP});var aH=h(Ly=>{"use strict";Object.defineProperty(Ly,"__esModule",{value:!0});Ly.ConversationParticipantsChangedEventArgs=void 0;var ese=D(),MP=class extends ese.SessionEventArgs{constructor(e,n,r){super(r),this.privReason=e,this.privParticipant=n}get reason(){return this.privReason}get participants(){return this.privParticipant}};Ly.ConversationParticipantsChangedEventArgs=MP});var cH=h(qy=>{"use strict";Object.defineProperty(qy,"__esModule",{value:!0});qy.ConversationTranslationCanceledEventArgs=void 0;var tse=mu(),OP=class extends tse.CancellationEventArgsBase{};qy.ConversationTranslationCanceledEventArgs=OP});var uH=h(By=>{"use strict";Object.defineProperty(By,"__esModule",{value:!0});By.ConversationTranslationEventArgs=void 0;var nse=D(),xP=class extends nse.RecognitionEventArgs{constructor(e,n,r){super(n,r),this.privResult=e}get result(){return this.privResult}};By.ConversationTranslationEventArgs=xP});var lH=h(Vy=>{"use strict";Object.defineProperty(Vy,"__esModule",{value:!0});Vy.ConversationTranslationResult=void 0;var rse=_R(),NP=class extends rse.TranslationRecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(n,i,o,s,a,c,void 0,void 0,u,l,d),this.privId=e,this.privOrigLang=r}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};Vy.ConversationTranslationResult=NP});var FP=h(zy=>{"use strict";Object.defineProperty(zy,"__esModule",{value:!0});zy.StringUtils=void 0;var kP=class{static formatString(e,n){if(!e)return"";if(!n)return e;let r="",i="",o=c=>{r+=c},s=c=>{i+=c},a=o;for(let c=0;c<e.length;c++){let u=e[c],l=c+1<e.length?e[c+1]:"";switch(u){case"{":l==="{"?(a("{"),c++):a=s;break;case"}":l==="}"?(a("}"),c++):(n.hasOwnProperty(i)&&(r+=n[i]),a=o,i="");break;default:a(u);break}}return r}};zy.StringUtils=kP});var fH=h($y=>{"use strict";Object.defineProperty($y,"__esModule",{value:!0});$y.ConversationTranslatorConnectionFactory=void 0;var jP=dt(),dH=FP(),ise=W(),Uy=D(),ose=Bt(),or=Gi(),pH=ir(),LP=M(),Hy=class t extends pH.ConnectionFactoryBase{constructor(e){super(),ise.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(e,n,r){let i=e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",o=this.privConvGetter().room,s=o.cognitiveSpeechRegion||e.parameters.getProperty(Uy.PropertyId.SpeechServiceConnection_Region,""),a={hostSuffix:pH.ConnectionFactoryBase.getHostSuffix(s),path:t.CTS_VIRT_MIC_PATH,region:encodeURIComponent(s)};a[or.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(Uy.PropertyId.SpeechServiceConnection_RecoLanguage,"")),a[or.QueryParameterNames.CtsMeetingId]=encodeURIComponent(o.roomId),a[or.QueryParameterNames.CtsDeviceId]=encodeURIComponent(o.participantId),a[or.QueryParameterNames.CtsIsParticipant]=o.isHost?"":"&"+or.QueryParameterNames.CtsIsParticipant;let c="",u={},l={};if(i){c=e.parameters.getProperty(Uy.PropertyId.SpeechServiceConnection_Endpoint),c||(c="wss://"+e.parameters.getProperty(Uy.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),c=dH.StringUtils.formatString(c,a);let p=new URL(c);p.searchParams.forEach((g,m)=>{u[m]=g}),new LP.TranscriberConnectionFactory().setQueryParams(u,e,c),u[or.QueryParameterNames.CtsMeetingId]=a[or.QueryParameterNames.CtsMeetingId],u[or.QueryParameterNames.CtsDeviceId]=a[or.QueryParameterNames.CtsDeviceId],o.isHost||(u[or.QueryParameterNames.CtsIsParticipant]=""),or.QueryParameterNames.Format in u||(u[or.QueryParameterNames.Format]="simple"),p.searchParams.forEach((g,m)=>{p.searchParams.set(m,u[m]),delete u[m]}),c=p.toString()}else{let p=new LP.TranslationConnectionFactory;c=p.getEndpointUrl(e,!0),c=dH.StringUtils.formatString(c,a),p.setQueryParams(u,e,c)}l[ose.HeaderNames.ConnectionId]=r,l[jP.RestConfigBase.configParams.token]=o.token,n.token&&(l[n.headerName]=n.token);let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new jP.WebsocketConnection(c,u,l,new LP.WebsocketMessageFormatter,jP.ProxyInfo.fromRecognizerConfig(e),d,r)}};$y.ConversationTranslatorConnectionFactory=Hy;Hy.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"});var gH=h(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.ConversationTranslator=la.SpeechState=void 0;var dp=M(),sse=fH(),Wy=j(),Mr=W(),Oe=D(),ase=PP(),hH=Gy(),Or;(function(t){t[t.Inactive=0]="Inactive",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected"})(Or=la.SpeechState||(la.SpeechState={}));var qP=class extends Oe.TranslationRecognizer{constructor(e,n,r,i){super(e,n,new sse.ConversationTranslatorConnectionFactory(i)),this.privSpeechState=Or.Inactive,r&&(this.privTranslator=r,this.sessionStarted=()=>{this.privSpeechState=Or.Connected},this.sessionStopped=()=>{this.privSpeechState=Or.Inactive},this.recognizing=(o,s)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,s)},this.recognized=(o,s)=>v(this,null,function*(){s.result?.errorDetails?(yield this.cancelSpeech(),this.fireCancelEvent(s.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,s)}),this.canceled=()=>v(this,null,function*(){if(this.privSpeechState!==Or.Inactive)try{yield this.cancelSpeech()}catch{this.privSpeechState=Or.Inactive}}))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=Or.Connected}onCancelSpeech(){return v(this,null,function*(){this.privSpeechState=Or.Inactive,yield this.cancelSpeech()})}fireCancelEvent(e){try{if(this.privTranslator.canceled){let n=new hH.ConversationTranslationCanceledEventArgs(Oe.CancellationReason.Error,e,Oe.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,n)}}catch{}}cancelSpeech(){return v(this,null,function*(){try{this.stopContinuousRecognitionAsync(),yield this.privReco?.disconnect(),this.privSpeechState=Or.Inactive}catch{}})}},BP=class extends hH.ConversationCommon{constructor(e){super(e),this.privErrors=dp.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new Oe.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===Or.Connected||this.privCTRecognizer.state===Or.Connecting||this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,n){let r=JSON.parse(this.privProperties.getProperty(dp.ServicePropertiesPropertyName,"{}"));r[e]=n,this.privProperties.setProperty(dp.ServicePropertiesPropertyName,JSON.stringify(r))}joinConversationAsync(e,n,r,i,o){try{if(typeof e=="string"){Mr.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Mr.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),o);let s=r;(s==null||s==="")&&(s=dp.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=Oe.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(Oe.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(s),this.privSpeechTranslationConfig.setProperty(Oe.PropertyId[Oe.PropertyId.SpeechServiceConnection_RecoLanguage],s),this.privSpeechTranslationConfig.setProperty(Oe.PropertyId[Oe.PropertyId.ConversationTranslator_Name],n);let a=[Oe.PropertyId.SpeechServiceConnection_Host,Oe.PropertyId.ConversationTranslator_Host,Oe.PropertyId.SpeechServiceConnection_Endpoint,Oe.PropertyId.SpeechServiceConnection_ProxyHostName,Oe.PropertyId.SpeechServiceConnection_ProxyPassword,Oe.PropertyId.SpeechServiceConnection_ProxyPort,Oe.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(let u of a){let l=this.privProperties.getProperty(u);if(l){let d=typeof u=="string"?u:Oe.PropertyId[u];this.privSpeechTranslationConfig.setProperty(d,l)}}let c=JSON.parse(this.privProperties.getProperty(dp.ServicePropertiesPropertyName,"{}"));for(let u of Object.keys(c))this.privSpeechTranslationConfig.setServiceProperty(u,c[u],Oe.ServicePropertyChannel.UriQueryParameter);this.privConversation=new ase.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,n,s,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),o),this.privSpeechTranslationConfig.authorizationToken=u,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(i,o)},l=>{this.handleError(l,o)})},u=>{this.handleError(u,o)})}else typeof e=="object"?(Mr.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Mr.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(Oe.PropertyId.ConversationTranslator_Name,n),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,Mr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),Mr.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(r,i)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),i)}catch(s){this.handleError(s,typeof r=="string"?o:i)}}leaveConversationAsync(e,n){Wy.marshalPromiseToCallbacks(v(this,null,function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()}),e,n)}sendTextMessageAsync(e,n,r){try{Mr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Mr.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,n,r)}catch(i){this.handleError(i,r)}}startTranscribingAsync(e,n){Wy.marshalPromiseToCallbacks(v(this,null,function*(){try{Mr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Mr.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&(yield this.connectTranslatorRecognizer()),Mr.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(r){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),r}}),e,n)}stopTranscribingAsync(e,n){Wy.marshalPromiseToCallbacks(v(this,null,function*(){try{if(!this.privIsSpeaking){yield this.cancelSpeech();return}this.privIsSpeaking=!1,yield new Promise((r,i)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(r,i)})}catch{yield this.cancelSpeech()}}),e,n)}isDisposed(){return this.privIsDisposed}dispose(e,n,r){Wy.marshalPromiseToCallbacks(v(this,null,function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)}),n,r)}cancelSpeech(){return v(this,null,function*(){try{this.privIsSpeaking=!1,yield this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}})}connectTranslatorRecognizer(){return v(this,null,function*(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=Oe.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(Oe.PropertyId[Oe.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(Oe.PropertyId[Oe.PropertyId.SpeechServiceConnection_Key],"");let e=()=>this.privConversation;this.privCTRecognizer=new qP(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw yield this.cancelSpeech(),e}})}startContinuousRecognition(){return new Promise((e,n)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,n)})}};la.ConversationTranslator=BP});var vH=h(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0});Ky.ConversationTranscriber=void 0;var pp=M(),VP=j(),da=W(),sn=D(),zP=class t extends sn.Recognizer{constructor(e,n){let r=e;da.Contracts.throwIfNull(r,"speechConfig"),da.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(sn.PropertyId.SpeechServiceConnection_RecoLanguage),sn.PropertyId[sn.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,r.properties,new pp.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(sn.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,n,r){let i=e;return n.properties.mergeTo(i.properties),new t(e,r)}get endpointId(){return da.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(sn.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(sn.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){da.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(sn.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return da.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(sn.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return da.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(pp.OutputFormatPropertyName,sn.OutputFormat[sn.OutputFormat.Simple])===sn.OutputFormat[sn.OutputFormat.Simple]?sn.OutputFormat.Simple:sn.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,n){VP.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(pp.RecognitionMode.Conversation),e,n)}stopTranscribingAsync(e,n){VP.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}close(e,n){da.Contracts.throwIfDisposed(this.privDisposedRecognizer),VP.marshalPromiseToCallbacks(this.dispose(!0),e,n)}dispose(e){return v(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ye(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new pp.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return i.isSpeakerDiarizationEnabled=!0,new pp.ConversationTranscriptionServiceRecognizer(e,n,o,i,this)}};Ky.ConversationTranscriber=zP});var mH=h(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.Participant=Pu.User=void 0;var cse=D(),UP=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};Pu.User=UP;var HP=class t{constructor(e,n,r,i,o,s,a,c){this.privId=e,this.privAvatar=n,this.privDisplayName=r,this.privIsHost=i,this.privIsMuted=o,this.privIsUsingTts=s,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new cse.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,n,r){return new t(e,"",e,!1,!1,!1,n,r)}};Pu.Participant=HP});var yH=h(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.ParticipantChangedReason=void 0;var use;(function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"})(use=fp.ParticipantChangedReason||(fp.ParticipantChangedReason={}))});var CH=h(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.MeetingImpl=Tu.Meeting=void 0;var Ee=M(),hp=j(),A=W(),je=D(),Jy=class{constructor(){}static createMeetingAsync(e,n,r,i){if(A.Contracts.throwIfNullOrUndefined(e,Ee.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),A.Contracts.throwIfNullOrUndefined(e.region,Ee.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),A.Contracts.throwIfNull(n,"meetingId"),n.length===0)throw new Error("meetingId cannot be empty");!e.subscriptionKey&&!e.getProperty(je.PropertyId[je.PropertyId.SpeechServiceAuthorization_Token])&&A.Contracts.throwIfNullOrUndefined(e.subscriptionKey,Ee.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let o=new Qy(e,n);return hp.marshalPromiseToCallbacks(v(this,null,function*(){}),r,i),o}};Tu.Meeting=Jy;var Qy=class extends Jy{constructor(e,n){super(),this.privErrors=Ee.ConversationConnectionConfig.restErrors,this.onConnected=o=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,o)}catch{}},this.onDisconnected=o=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,o)}catch{}finally{this.close(!1)}},this.onCanceled=(o,s)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,s)}catch{}},this.onParticipantUpdateCommandReceived=(o,s)=>{try{let a=this.privParticipants.getParticipant(s.id);if(a!==void 0){switch(s.key){case Ee.ConversationTranslatorCommandTypes.changeNickname:a.displayName=s.value;break;case Ee.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=s.value;break;case Ee.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=s.value;break;case Ee.ConversationTranslatorCommandTypes.setMute:a.isMuted=s.value;break;case Ee.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=s.value;break}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new je.ConversationParticipantsChangedEventArgs(je.ParticipantChangedReason.Updated,[this.toParticipant(a)],s.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(o,s)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=a.isHost?!1:s.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new je.ConversationParticipantsChangedEventArgs(je.ParticipantChangedReason.Updated,this.toParticipants(!1),s.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(o,s)=>{try{let a=this.privParticipants.addOrUpdateParticipant(s.participant);a!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new je.ConversationParticipantsChangedEventArgs(je.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],s.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(o,s)=>{try{let a=this.privParticipants.getParticipant(s.participant.id);a!==void 0&&(this.privParticipants.deleteParticipant(s.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new je.ConversationParticipantsChangedEventArgs(je.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],s.sessionId)))}catch{}},this.onTranslationReceived=(o,s)=>{try{switch(s.command){case Ee.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new je.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break;case Ee.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new je.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break;case Ee.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new je.ConversationTranslationEventArgs(s.payload,void 0,s.sessionId));break}}catch{}},this.onParticipantsListReceived=(o,s)=>{try{if(s.sessionToken!==void 0&&s.sessionToken!==null&&(this.privRoom.token=s.sessionToken),this.privParticipants.participants=[...s.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new je.ConversationParticipantsChangedEventArgs(je.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),s.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(je.PropertyId.ConversationTranslator_Name);a!==void 0&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch{}},this.onConversationExpiration=(o,s)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,s)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new je.PropertyCollection,this.privManager=new Ee.ConversationManager,e.getProperty(je.PropertyId[je.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(je.PropertyId[je.PropertyId.SpeechServiceConnection_RecoLanguage],Ee.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(je.PropertyId[je.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=n,this.privConfig=e;let i=e;A.Contracts.throwIfNull(i,"speechConfig"),this.privProperties=i.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Ee.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){let e=this.meetingId,n=this.participants.map(o=>({id:o.id,preferredLanguage:o.preferredLanguage,voice:o.voice})),r={};for(let o of Ee.ConversationConnectionConfig.transcriptionEventKeys){let s=this.properties.getProperty(o,"");s!==""&&(r[o]=s)}return{id:e,participants:n,meetingProperties:r}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(e){A.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),this.privManager.createOrJoin(this.privProperties,void 0,r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),n),this.privRoom=r,this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}startMeetingAsync(e,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}addParticipantAsync(e,n,r){A.Contracts.throwIfNullOrUndefined(e,"Participant"),hp.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),n,r)}joinMeetingAsync(e,n,r,i,o){try{A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),A.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,s=>{A.Contracts.throwIfNullOrUndefined(s,this.privErrors.permissionDeniedConnect),this.privRoom=s,this.privConfig.authorizationToken=s.cognitiveSpeechAuthToken,i&&i(s.cognitiveSpeechAuthToken)},s=>{this.handleError(s,o)})}catch(s){this.handleError(s,o)}}deleteMeetingAsync(e,n){hp.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),e,n)}deleteMeetingImplAsync(){return v(this,null,function*(){A.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),A.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endMeetingAsync(e,n){hp.marshalPromiseToCallbacks(this.endMeetingImplAsync(),e,n)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}muteAllParticipantsAsync(e,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}muteParticipantAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(n,r)},o=>{this.handleError(o,r)})}catch(i){this.handleError(i,r)}}removeParticipantAsync(e,n,r){try{if(A.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))hp.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),n,r);else{A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);let i="";typeof e=="string"?i=e:e.hasOwnProperty("id")?i=e.id:e.hasOwnProperty("userId")&&(i=e.userId),A.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(s=>s.id===i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),()=>{this.handleCallback(n,r)},s=>{this.handleError(s,r)})}}catch(i){this.handleError(i,r)}}unlockMeetingAsync(e,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}unmuteAllParticipantsAsync(e,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,n)},r=>{this.handleError(r,n)})}catch(r){this.handleError(r,n)}}unmuteParticipantAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(n,r)},o=>{this.handleError(o,r)})}catch(i){this.handleError(i,r)}}sendTextMessageAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}setTranslatedLanguagesAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}changeNicknameAsync(e,n,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(n,r)},i=>{this.handleError(i,r)})}catch(i){this.handleError(i,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return v(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this})}getKeepAlive(){let e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(this.privParticipants.addOrUpdateParticipant(e)!==void 0&&this.privTranscriberRecognizer){let r=this.meetingInfo;return r.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(r,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let n=this.meetingInfo;return n.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(n,"leave")}close(e){return v(this,null,function*(){try{this.privIsConnected=!1,yield this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(n){throw n}e&&this.dispose()})}handleCallback(e,n){if(e){try{e()}catch(r){n&&n(r)}e=void 0}}handleError(e,n){if(n)if(e instanceof Error){let r=e;n(r.name+": "+r.message)}else n(e)}toParticipants(e){let n=this.privParticipants.participants.map(r=>this.toParticipant(r));return e?n:n.filter(r=>r.isHost===!1)}toParticipant(e){return new je.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,n){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:n})}getLockCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(e,"nickname"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Ee.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ee.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),A.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:Ee.ConversationTranslatorMessageTypes.instantMessage})}};Tu.MeetingImpl=Qy});var SH=h(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0});Zy.MeetingTranscriptionCanceledEventArgs=void 0;var lse=mu(),$P=class extends lse.CancellationEventArgsBase{};Zy.MeetingTranscriptionCanceledEventArgs=$P});var wH=h(Yy=>{"use strict";Object.defineProperty(Yy,"__esModule",{value:!0});Yy.MeetingTranscriber=void 0;var dse=M(),WP=j(),gp=W(),vp=D(),pse=Gy(),GP=class{constructor(e){this.privAudioConfig=e,this.privProperties=new vp.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return gp.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(vp.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return vp.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(vp.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){gp.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(vp.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(e,n,r){let i=e;gp.Contracts.throwIfNullOrUndefined(pse.MeetingImpl,"Meeting"),this.privRecognizer=new dse.TranscriberRecognizer(e.config,this.privAudioConfig),gp.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),WP.marshalPromiseToCallbacks(i.connectTranscriberRecognizer(this.privRecognizer),n,r)}startTranscribingAsync(e,n){this.privRecognizer.startContinuousRecognitionAsync(e,n)}stopTranscribingAsync(e,n){this.privRecognizer.stopContinuousRecognitionAsync(e,n)}leaveMeetingAsync(e,n){this.privRecognizer.disconnectCallbacks(),WP.marshalPromiseToCallbacks(v(this,null,function*(){}),e,n)}close(e,n){gp.Contracts.throwIfDisposed(this.privDisposedRecognizer),WP.marshalPromiseToCallbacks(this.dispose(!0),e,n)}dispose(e){return v(this,null,function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))})}};Yy.MeetingTranscriber=GP});var bH=h(Xy=>{"use strict";Object.defineProperty(Xy,"__esModule",{value:!0});Xy.ConversationTranscriptionResult=void 0;var fse=D(),KP=class extends fse.RecognitionResult{constructor(e,n,r,i,o,s,a,c,u,l,d){super(e,n,r,i,o,s,a,u,l,d),this.privSpeakerId=c}get speakerId(){return this.privSpeakerId}};Xy.ConversationTranscriptionResult=KP});var Gy=h(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});var EH=PP();Object.defineProperty(tt,"Conversation",{enumerable:!0,get:function(){return EH.Conversation}});Object.defineProperty(tt,"ConversationImpl",{enumerable:!0,get:function(){return EH.ConversationImpl}});var hse=oH();Object.defineProperty(tt,"ConversationCommon",{enumerable:!0,get:function(){return hse.ConversationCommon}});var gse=sH();Object.defineProperty(tt,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return gse.ConversationExpirationEventArgs}});var vse=aH();Object.defineProperty(tt,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return vse.ConversationParticipantsChangedEventArgs}});var mse=cH();Object.defineProperty(tt,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return mse.ConversationTranslationCanceledEventArgs}});var yse=uH();Object.defineProperty(tt,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return yse.ConversationTranslationEventArgs}});var Cse=lH();Object.defineProperty(tt,"ConversationTranslationResult",{enumerable:!0,get:function(){return Cse.ConversationTranslationResult}});var Sse=gH();Object.defineProperty(tt,"ConversationTranslator",{enumerable:!0,get:function(){return Sse.ConversationTranslator}});var wse=vH();Object.defineProperty(tt,"ConversationTranscriber",{enumerable:!0,get:function(){return wse.ConversationTranscriber}});var IH=mH();Object.defineProperty(tt,"Participant",{enumerable:!0,get:function(){return IH.Participant}});Object.defineProperty(tt,"User",{enumerable:!0,get:function(){return IH.User}});var bse=yH();Object.defineProperty(tt,"ParticipantChangedReason",{enumerable:!0,get:function(){return bse.ParticipantChangedReason}});var DH=CH();Object.defineProperty(tt,"Meeting",{enumerable:!0,get:function(){return DH.Meeting}});Object.defineProperty(tt,"MeetingImpl",{enumerable:!0,get:function(){return DH.MeetingImpl}});var Ese=SH();Object.defineProperty(tt,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Ese.MeetingTranscriptionCanceledEventArgs}});var Ise=wH();Object.defineProperty(tt,"MeetingTranscriber",{enumerable:!0,get:function(){return Ise.MeetingTranscriber}});var Dse=bH();Object.defineProperty(tt,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Dse.ConversationTranscriptionResult}})});var eC=h(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.SynthesisRequest=Au.Synthesizer=void 0;var pa=M(),_se=j(),_H=W(),Zo=D(),JP=class t{constructor(e){let n=e;_H.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new _se.Queue}get authorizationToken(){return this.properties.getProperty(Zo.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){_H.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Zo.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(Zo.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===pa.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){let n={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"},r=this.properties.getProperty(Zo.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),i=this.properties.getProperty(Zo.PropertyId.SpeechServiceConnection_SynthVoice,""),o=t.XMLEncode(e);return this.autoDetectSourceLanguage?r="en-US":i=i||n[r],i&&(o=`<voice name='${i}'>${o}</voice>`),o=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${r}'>${o}</speak>`,o}dispose(e){return v(this,null,function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}adapterSpeak(){return v(this,null,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;let e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}})}createSynthesizerConfig(e){return new pa.SynthesizerConfig(e,this.privProperties)}implCommonSynthesizeSetup(){let e=typeof window<"u"?"Browser":"Node",n="unknown",r="unknown";typeof navigator<"u"&&(e=e+"/"+navigator.platform,n=navigator.userAgent,r=navigator.appVersion);let i=this.createSynthesizerConfig(new pa.SpeechServiceConfig(new pa.Context(new pa.OS(e,n,r)))),o=this.privProperties.getProperty(Zo.PropertyId.SpeechServiceConnection_Key,void 0),s=o&&o!==""?new pa.CognitiveSubscriptionKeyAuthentication(o):new pa.CognitiveTokenAuthentication(()=>{let a=this.privProperties.getProperty(Zo.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(a)},()=>{let a=this.privProperties.getProperty(Zo.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(a)});this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,i),this.privRestAdapter=this.createRestSynthesisAdapter(s,i)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Au.Synthesizer=JP;var QP=class{constructor(e,n,r,i,o,s){this.requestId=e,this.text=n,this.isSSML=r,this.cb=i,this.err=o,this.dataStream=s}};Au.SynthesisRequest=QP});var PH=h(tC=>{"use strict";Object.defineProperty(tC,"__esModule",{value:!0});tC.SpeechSynthesizer=void 0;var ZP=M(),YP=j(),Rse=oR(),Pse=fu(),Tse=Ys(),RH=W(),Yo=D(),Ase=eC(),XP=class t extends Yo.Synthesizer{constructor(e,n){super(e),n!==null&&(n===void 0?this.audioConfig=typeof window>"u"?void 0:Yo.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=n),this.privConnectionFactory=new ZP.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,n,r){let i=e;return n.properties.mergeTo(i.properties),new t(e,r)}speakTextAsync(e,n,r,i){this.speakImpl(e,!1,n,r,i)}speakSsmlAsync(e,n,r,i){this.speakImpl(e,!0,n,r,i)}getVoicesAsync(e=""){return v(this,null,function*(){return this.getVoices(e)})}close(e,n){RH.Contracts.throwIfDisposed(this.privDisposed),YP.marshalPromiseToCallbacks(this.dispose(!0),e,n)}get internalData(){return this.privAdapter}createSynthesisAdapter(e,n,r){return new ZP.SpeechSynthesisAdapter(e,n,r,this,this.audioConfig)}createRestSynthesisAdapter(e,n){return new ZP.SynthesisRestAdapter(n,e)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=Pse.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Yo.SpeechSynthesisOutputFormat[this.properties.getProperty(Yo.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,n,r,i,o){try{RH.Contracts.throwIfDisposed(this.privDisposed);let s=YP.createNoDashGuid(),a;o instanceof Yo.PushAudioOutputStreamCallback?a=new Tse.PushAudioOutputStreamImpl(o):o instanceof Yo.PullAudioOutputStream?a=o:o!==void 0?a=new Rse.AudioFileWriter(o):a=void 0,this.synthesisRequestQueue.enqueue(new Ase.SynthesisRequest(s,e,n,c=>{if(this.privSynthesizing=!1,r)try{r(c)}catch(u){i&&i(u)}r=void 0,this.adapterSpeak().catch(()=>{})},c=>{i&&i(c)},a)),this.adapterSpeak().catch(()=>{})}catch(s){if(i)if(s instanceof Error){let a=s;i(a.name+": "+a.message)}else i(s);this.dispose(!0).catch(()=>{})}}getVoices(e){return v(this,null,function*(){let n=YP.createNoDashGuid(),r=yield this.privRestAdapter.getVoicesList(n);if(r.ok&&Array.isArray(r.json)){let i=r.json;return e&&e.length>0&&(i=i.filter(o=>!!o.Locale&&o.Locale.toLowerCase()===e.toLowerCase())),new Yo.SynthesisVoicesResult(n,i,void 0)}else return new Yo.SynthesisVoicesResult(n,void 0,`Error: ${r.status}: ${r.statusText}`)})}};tC.SpeechSynthesizer=XP});var TH=h(nC=>{"use strict";Object.defineProperty(nC,"__esModule",{value:!0});nC.SynthesisResult=void 0;var eT=class{constructor(e,n,r,i){this.privResultId=e,this.privReason=n,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};nC.SynthesisResult=eT});var AH=h(rC=>{"use strict";Object.defineProperty(rC,"__esModule",{value:!0});rC.SpeechSynthesisResult=void 0;var Mse=D(),tT=class extends Mse.SynthesisResult{constructor(e,n,r,i,o,s){super(e,n,i,o),this.privAudioData=r,this.privAudioDuration=s}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};rC.SpeechSynthesisResult=tT});var MH=h(iC=>{"use strict";Object.defineProperty(iC,"__esModule",{value:!0});iC.SpeechSynthesisEventArgs=void 0;var nT=class{constructor(e){this.privResult=e}get result(){return this.privResult}};iC.SpeechSynthesisEventArgs=nT});var OH=h(oC=>{"use strict";Object.defineProperty(oC,"__esModule",{value:!0});oC.SpeechSynthesisWordBoundaryEventArgs=void 0;var rT=class{constructor(e,n,r,i,o,s){this.privAudioOffset=e,this.privDuration=n,this.privText=r,this.privWordLength=i,this.privTextOffset=o,this.privBoundaryType=s}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};oC.SpeechSynthesisWordBoundaryEventArgs=rT});var xH=h(sC=>{"use strict";Object.defineProperty(sC,"__esModule",{value:!0});sC.SpeechSynthesisBookmarkEventArgs=void 0;var iT=class{constructor(e,n){this.privAudioOffset=e,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};sC.SpeechSynthesisBookmarkEventArgs=iT});var NH=h(aC=>{"use strict";Object.defineProperty(aC,"__esModule",{value:!0});aC.SpeechSynthesisVisemeEventArgs=void 0;var oT=class{constructor(e,n,r){this.privAudioOffset=e,this.privVisemeId=n,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};aC.SpeechSynthesisVisemeEventArgs=oT});var kH=h(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.SpeechSynthesisBoundaryType=void 0;var Ose;(function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"})(Ose=mp.SpeechSynthesisBoundaryType||(mp.SpeechSynthesisBoundaryType={}))});var FH=h(cC=>{"use strict";Object.defineProperty(cC,"__esModule",{value:!0});cC.SynthesisVoicesResult=void 0;var Mu=D(),sT=class extends Mu.SynthesisResult{constructor(e,n,r){if(Array.isArray(n)){super(e,Mu.ResultReason.VoicesListRetrieved,void 0,new Mu.PropertyCollection),this.privVoices=[];for(let i of n)this.privVoices.push(new Mu.VoiceInfo(i))}else super(e,Mu.ResultReason.Canceled,r||"Error information unavailable",new Mu.PropertyCollection)}get voices(){return this.privVoices}};cC.SynthesisVoicesResult=sT});var jH=h(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.VoiceInfo=pi.SynthesisVoiceType=pi.SynthesisVoiceGender=void 0;var xr;(function(t){t[t.Unknown=0]="Unknown",t[t.Female=1]="Female",t[t.Male=2]="Male",t[t.Neutral=3]="Neutral"})(xr=pi.SynthesisVoiceGender||(pi.SynthesisVoiceGender={}));var aT;(function(t){t[t.OnlineNeural=1]="OnlineNeural",t[t.OnlineStandard=2]="OnlineStandard",t[t.OfflineNeural=3]="OfflineNeural",t[t.OfflineStandard=4]="OfflineStandard"})(aT=pi.SynthesisVoiceType||(pi.SynthesisVoiceType={}));var xse={[xr[xr.Neutral]]:xr.Neutral,[xr[xr.Male]]:xr.Male,[xr[xr.Female]]:xr.Female},cT=class{constructor(e){if(this.privStyleList=[],e){if(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?aT.OnlineStandard:aT.OnlineNeural,this.privGender=xse[e.Gender]||xr.Unknown,e.StyleList&&Array.isArray(e.StyleList))for(let n of e.StyleList)this.privStyleList.push(n);this.privSampleRateHertz=e.SampleRateHertz,this.privStatus=e.Status,e.ExtendedPropertyMap&&(this.privExtendedPropertyMap=e.ExtendedPropertyMap),this.privWordsPerMinute=e.WordsPerMinute,Array.isArray(e.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...e.SecondaryLocaleList]),Array.isArray(e.RolePlayList)&&(this.privRolePlayList=[...e.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}};pi.VoiceInfo=cT});var qH=h(uC=>{"use strict";Object.defineProperty(uC,"__esModule",{value:!0});uC.SpeakerAudioDestination=void 0;var fa=j(),Nse=Ys(),En=Fo(),kse=60*30,LH={[En.AudioFormatTag.PCM]:"audio/wav",[En.AudioFormatTag.MuLaw]:"audio/x-wav",[En.AudioFormatTag.MP3]:"audio/mpeg",[En.AudioFormatTag.OGG_OPUS]:"audio/ogg",[En.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[En.AudioFormatTag.ALaw]:"audio/x-wav",[En.AudioFormatTag.FLAC]:"audio/flac",[En.AudioFormatTag.AMR_WB]:"audio/amr-wb",[En.AudioFormatTag.G722]:"audio/G722"},uT=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||fa.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,n,r){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{n&&n()},i=>{r&&r(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,n){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},r=>{n&&n(r)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===En.AudioFormatTag.PCM||this.privFormat.formatTag===En.AudioFormatTag.MuLaw||this.privFormat.formatTag===En.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);let i=new Blob([r],{type:LH[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{e&&e()},o=>{n&&n(o)})},i=>{n&&n(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;let n=LH[this.privFormat.formatTag];n===void 0?console.warn(`Unknown mimeType for format ${En.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=kse,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(n),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(r=>{fa.Events.instance.onEvent(new fa.BackgroundEvent(r))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(r=>{fa.Events.instance.onEvent(new fa.BackgroundEvent(r))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(r=>{fa.Events.instance.onEvent(new fa.BackgroundEvent(r))})):(console.warn(`Format ${En.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new Nse.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,n){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},r=>{n&&n(r)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return v(this,null,function*(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;let e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return v(this,null,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return v(this,null,function*(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};uC.SpeakerAudioDestination=uT});var BH=h(lC=>{"use strict";Object.defineProperty(lC,"__esModule",{value:!0});lC.ConversationTranscriptionCanceledEventArgs=void 0;var Fse=mu(),lT=class extends Fse.CancellationEventArgsBase{};lC.ConversationTranscriptionCanceledEventArgs=lT});var VH=h(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0});dC.MeetingTranscriptionCanceledEventArgs=void 0;var jse=mu(),dT=class extends jse.CancellationEventArgsBase{};dC.MeetingTranscriptionCanceledEventArgs=dT});var zH=h(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.PronunciationAssessmentGradingSystem=void 0;var Lse;(function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"})(Lse=yp.PronunciationAssessmentGradingSystem||(yp.PronunciationAssessmentGradingSystem={}))});var UH=h(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.PronunciationAssessmentGranularity=void 0;var qse;(function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"})(qse=Cp.PronunciationAssessmentGranularity||(Cp.PronunciationAssessmentGranularity={}))});var HH=h(fC=>{"use strict";Object.defineProperty(fC,"__esModule",{value:!0});fC.PronunciationAssessmentConfig=void 0;var pC=W(),Ve=D(),pT=class t{constructor(e,n=Ve.PronunciationAssessmentGradingSystem.FivePoint,r=Ve.PronunciationAssessmentGranularity.Phoneme,i=!1){pC.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new Ve.PropertyCollection,this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_GradingSystem,Ve.PronunciationAssessmentGradingSystem[n]),this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_Granularity,Ve.PronunciationAssessmentGranularity[r]),this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_EnableMiscue,String(i))}static fromJSON(e){pC.Contracts.throwIfNullOrUndefined(e,"json");let n=new t("");return n.privProperties=new Ve.PropertyCollection,n.properties.setProperty(Ve.PropertyId.PronunciationAssessment_Json,e),n}toJSON(){return this.updateJson(),this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();let n=e.internalData;n.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,n.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(Ve.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,n.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(Ve.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(e){pC.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(Ve.PropertyId.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){pC.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set enableMiscue(e){let n=e?"true":"false";this.properties.setProperty(Ve.PropertyId.PronunciationAssessment_EnableMiscue,n)}get enableMiscue(){return this.properties.getProperty(Ve.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}enableContentAssessmentWithTopic(e){this.privContentAssessmentTopic=e}get properties(){return this.privProperties}updateJson(){let e=this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_Json,"{}"),n=JSON.parse(e),r=this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_ReferenceText);r&&(n.referenceText=r);let i=this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_GradingSystem);i&&(n.gradingSystem=i);let o=this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_Granularity);o&&(n.granularity=o),this.privPhonemeAlphabet&&(n.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(n.nbestPhonemeCount=this.privNBestPhonemeCount),n.enableProsodyAssessment=this.privEnableProsodyAssessment,n.dimension="Comprehensive",this.privProperties.getProperty(Ve.PropertyId.PronunciationAssessment_EnableMiscue)&&(n.enableMiscue=this.enableMiscue),this.privProperties.setProperty(Ve.PropertyId.PronunciationAssessment_Params,JSON.stringify(n))}};fC.PronunciationAssessmentConfig=pT});var $H=h(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.PronunciationAssessmentResult=Ou.ContentAssessmentResult=void 0;var fT=W(),Bse=D(),hC=class{constructor(e){this.privPronJson=e}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}};Ou.ContentAssessmentResult=hC;var hT=class t{constructor(e){let n=JSON.parse(e);fT.Contracts.throwIfNullOrUndefined(n.NBest[0],"NBest"),this.privPronJson=n.NBest[0]}static fromResult(e){fT.Contracts.throwIfNullOrUndefined(e,"result");let n=e.properties.getProperty(Bse.PropertyId.SpeechServiceResponse_JsonResult);return fT.Contracts.throwIfNullOrUndefined(n,"json"),new t(n)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new hC(this.detailResult)}};Ou.PronunciationAssessmentResult=hT});var WH=h(gC=>{"use strict";Object.defineProperty(gC,"__esModule",{value:!0});gC.AvatarConfig=void 0;var Vse=W(),zse=D(),gT=class{constructor(e,n,r){this.privCustomized=!1,Vse.Contracts.throwIfNullOrWhitespace(e,"character"),this.character=e,this.style=n,r===void 0&&(r=new zse.AvatarVideoFormat),this.videoFormat=r}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(e){this.privBackgroundImage=e}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(e){this.privRemoteIceServers=e}};gC.AvatarConfig=gT});var GH=h(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.AvatarEventArgs=ha.AvatarEventTypes=void 0;var Use;(function(t){t.SwitchedToSpeaking="SwitchedToSpeaking",t.SwitchedToIdle="SwitchedToIdle",t.SessionClosed="SessionClosed"})(Use=ha.AvatarEventTypes||(ha.AvatarEventTypes={}));var vT=class{constructor(e,n){this.privOffset=e,this.privDescription=n}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}};ha.AvatarEventArgs=vT});var yT=h(mC=>{"use strict";Object.defineProperty(mC,"__esModule",{value:!0});mC.SpeechSynthesisConnectionFactory=void 0;var KH=dt(),Sp=D(),Hse=ir(),$se=M(),Wse=Bt(),vC=Gi(),mT=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,n,r){let i=e.parameters.getProperty(Sp.PropertyId.SpeechServiceConnection_Endpoint,void 0),o=e.parameters.getProperty(Sp.PropertyId.SpeechServiceConnection_Region,void 0),s=Hse.ConnectionFactoryBase.getHostSuffix(o),a=e.parameters.getProperty(Sp.PropertyId.SpeechServiceConnection_EndpointId,void 0),c=a===void 0?"tts":"voice",u=e.parameters.getProperty(Sp.PropertyId.SpeechServiceConnection_Host,"wss://"+o+"."+c+".speech"+s),l={},d={};n.token!==void 0&&n.token!==""&&(d[n.headerName]=n.token),d[Wse.HeaderNames.ConnectionId]=r,a!==void 0&&a!==""&&(!i||i.search(vC.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(l[vC.QueryParameterNames.CustomVoiceDeploymentId]=a),e.avatarEnabled&&(!i||i.search(vC.QueryParameterNames.EnableAvatar)===-1)&&(l[vC.QueryParameterNames.EnableAvatar]="true"),i||(i=u+this.synthesisUri),e.parameters.setProperty(Sp.PropertyId.SpeechServiceConnection_Url,i);let p=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new KH.WebsocketConnection(i,l,d,new $se.WebsocketMessageFormatter,KH.ProxyInfo.fromParameters(e.parameters),p,r)}};mC.SpeechSynthesisConnectionFactory=mT});var JH=h(CC=>{"use strict";Object.defineProperty(CC,"__esModule",{value:!0});CC.AvatarSynthesizer=void 0;var Gse=yT(),Kse=M(),Ke=j(),Jse=fu(),Ji=D(),yC=W(),Qse=eC(),CT=class extends Ji.Synthesizer{constructor(e,n){super(e),yC.Contracts.throwIfNullOrUndefined(n,"avatarConfig"),this.privConnectionFactory=new Gse.SpeechSynthesisConnectionFactory,this.privAvatarConfig=n,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=Jse.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Ji.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(e){return v(this,null,function*(){yC.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,yC.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");let n=new Ke.Deferred;e.onicegatheringstatechange=()=>{Ke.Events.instance.onEvent(new Ke.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,Ke.EventType.Debug)),e.iceGatheringState==="complete"&&(Ke.Events.instance.onEvent(new Ke.PlatformEvent("peer connection: ice gathering complete.",Ke.EventType.Info)),n.resolve())},e.onicecandidate=a=>{a.candidate?Ke.Events.instance.onEvent(new Ke.PlatformEvent("peer connection: ice candidate: "+a.candidate.candidate,Ke.EventType.Debug)):(Ke.Events.instance.onEvent(new Ke.PlatformEvent("peer connection: ice candidate: complete",Ke.EventType.Debug)),n.resolve())},setTimeout(()=>{e.iceGatheringState!=="complete"&&(Ke.Events.instance.onEvent(new Ke.PlatformEvent("peer connection: ice gathering timeout.",Ke.EventType.Warning)),n.resolve())},2e3);let r=yield e.createOffer();yield e.setLocalDescription(r),yield n.promise,Ke.Events.instance.onEvent(new Ke.PlatformEvent("peer connection: got local SDP.",Ke.EventType.Info)),this.privProperties.setProperty(Ji.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));let i=yield this.speak("",!1);if(i.reason!==Ji.ResultReason.SynthesizingAudioCompleted)return new Ji.SynthesisResult(i.resultId,i.reason,i.errorDetails,i.properties);let o=atob(i.properties.getProperty(Ji.PropertyId.TalkingAvatarService_WebRTC_SDP)),s=new RTCSessionDescription(JSON.parse(o));return yield e.setRemoteDescription(s),new Ji.SynthesisResult(i.resultId,i.reason,void 0,i.properties)})}speakTextAsync(e){return v(this,null,function*(){let n=yield this.speak(e,!1);return new Ji.SynthesisResult(n.resultId,n.reason,n.errorDetails,n.properties)})}speakSsmlAsync(e){return v(this,null,function*(){let n=yield this.speak(e,!0);return new Ji.SynthesisResult(n.resultId,n.reason,n.errorDetails,n.properties)})}stopSpeakingAsync(){return v(this,null,function*(){for(;this.synthesisRequestQueue.length()>0;)(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()})}stopAvatarAsync(){return v(this,null,function*(){return yC.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)})}close(){return v(this,null,function*(){if(!this.privDisposed)return this.dispose(!0)})}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,n,r){return new Kse.AvatarSynthesisAdapter(e,n,r,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,n){}createSynthesizerConfig(e){let n=super.createSynthesizerConfig(e);return n.avatarEnabled=!0,n}speak(e,n){return v(this,null,function*(){let r=Ke.createNoDashGuid(),i=new Ke.Deferred;return this.synthesisRequestQueue.enqueue(new Qse.SynthesisRequest(r,e,n,o=>{i.resolve(o),this.privSynthesizing=!1,this.adapterSpeak()},o=>{i.reject(o),this.privSynthesizing=!1})),this.adapterSpeak(),i.promise})}};CC.AvatarSynthesizer=CT});var QH=h(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.AvatarVideoFormat=xu.Coordinate=void 0;var ST=class{constructor(e,n){this.x=e,this.y=n}};xu.Coordinate=ST;var wT=class{constructor(e="H264",n=2e6,r=1920,i=1080){this.codec=e,this.bitrate=n,this.width=r,this.height=i}setCropRange(e,n){this.cropRange={bottomRight:n,topLeft:e}}};xu.AvatarVideoFormat=wT});var ZH=h(SC=>{"use strict";Object.defineProperty(SC,"__esModule",{value:!0});SC.AvatarWebRTCConnectionResult=void 0;var Zse=D(),bT=class extends Zse.SynthesisResult{constructor(e,n,r,i,o){super(n,r,i,o),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}};SC.AvatarWebRTCConnectionResult=bT});var YH=h(bC=>{"use strict";Object.defineProperty(bC,"__esModule",{value:!0});bC.Diagnostics=void 0;var Yse=dt(),Xse=j(),wC=class{static SetLoggingLevel(e){this.privListener=new Yse.ConsoleLoggingListener(e),Xse.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if(typeof window>"u")this.privListener&&(this.privListener.logPath=e);else throw new Error("File system logging not available in browser.")}static set onLogOutput(e){this.privListener&&(this.privListener.logCallback=e)}};bC.Diagnostics=wC;wC.privListener=void 0});var D=h(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});var eae=uR();Object.defineProperty(S,"AudioConfig",{enumerable:!0,get:function(){return eae.AudioConfig}});var XH=Fo();Object.defineProperty(S,"AudioStreamFormat",{enumerable:!0,get:function(){return XH.AudioStreamFormat}});Object.defineProperty(S,"AudioFormatTag",{enumerable:!0,get:function(){return XH.AudioFormatTag}});var ET=sR();Object.defineProperty(S,"AudioInputStream",{enumerable:!0,get:function(){return ET.AudioInputStream}});Object.defineProperty(S,"PullAudioInputStream",{enumerable:!0,get:function(){return ET.PullAudioInputStream}});Object.defineProperty(S,"PushAudioInputStream",{enumerable:!0,get:function(){return ET.PushAudioInputStream}});var IT=Ys();Object.defineProperty(S,"AudioOutputStream",{enumerable:!0,get:function(){return IT.AudioOutputStream}});Object.defineProperty(S,"PullAudioOutputStream",{enumerable:!0,get:function(){return IT.PullAudioOutputStream}});Object.defineProperty(S,"PushAudioOutputStream",{enumerable:!0,get:function(){return IT.PushAudioOutputStream}});var tae=qU();Object.defineProperty(S,"CancellationReason",{enumerable:!0,get:function(){return tae.CancellationReason}});var nae=BU();Object.defineProperty(S,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return nae.PullAudioInputStreamCallback}});var rae=VU();Object.defineProperty(S,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return rae.PushAudioOutputStreamCallback}});var iae=UU();Object.defineProperty(S,"KeywordRecognitionModel",{enumerable:!0,get:function(){return iae.KeywordRecognitionModel}});var oae=HU();Object.defineProperty(S,"SessionEventArgs",{enumerable:!0,get:function(){return oae.SessionEventArgs}});var sae=$U();Object.defineProperty(S,"RecognitionEventArgs",{enumerable:!0,get:function(){return sae.RecognitionEventArgs}});var aae=WU();Object.defineProperty(S,"OutputFormat",{enumerable:!0,get:function(){return aae.OutputFormat}});var cae=GU();Object.defineProperty(S,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return cae.IntentRecognitionEventArgs}});var uae=KU();Object.defineProperty(S,"RecognitionResult",{enumerable:!0,get:function(){return uae.RecognitionResult}});var lae=JU();Object.defineProperty(S,"SpeechRecognitionResult",{enumerable:!0,get:function(){return lae.SpeechRecognitionResult}});var dae=QU();Object.defineProperty(S,"IntentRecognitionResult",{enumerable:!0,get:function(){return dae.IntentRecognitionResult}});var pae=ZU();Object.defineProperty(S,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return pae.LanguageUnderstandingModel}});var DT=XU();Object.defineProperty(S,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return DT.SpeechRecognitionEventArgs}});Object.defineProperty(S,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return DT.ConversationTranscriptionEventArgs}});Object.defineProperty(S,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return DT.MeetingTranscriptionEventArgs}});var fae=e2();Object.defineProperty(S,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return fae.SpeechRecognitionCanceledEventArgs}});var hae=t2();Object.defineProperty(S,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return hae.TranslationRecognitionEventArgs}});var gae=n2();Object.defineProperty(S,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return gae.TranslationSynthesisEventArgs}});var vae=_R();Object.defineProperty(S,"TranslationRecognitionResult",{enumerable:!0,get:function(){return vae.TranslationRecognitionResult}});var mae=r2();Object.defineProperty(S,"TranslationSynthesisResult",{enumerable:!0,get:function(){return mae.TranslationSynthesisResult}});var yae=i2();Object.defineProperty(S,"ResultReason",{enumerable:!0,get:function(){return yae.ResultReason}});var e$=o2();Object.defineProperty(S,"SpeechConfig",{enumerable:!0,get:function(){return e$.SpeechConfig}});Object.defineProperty(S,"SpeechConfigImpl",{enumerable:!0,get:function(){return e$.SpeechConfigImpl}});var t$=s2();Object.defineProperty(S,"SpeechTranslationConfig",{enumerable:!0,get:function(){return t$.SpeechTranslationConfig}});Object.defineProperty(S,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return t$.SpeechTranslationConfigImpl}});var Cae=TR();Object.defineProperty(S,"PropertyCollection",{enumerable:!0,get:function(){return Cae.PropertyCollection}});var Sae=Vm();Object.defineProperty(S,"PropertyId",{enumerable:!0,get:function(){return Sae.PropertyId}});var wae=u2();Object.defineProperty(S,"Recognizer",{enumerable:!0,get:function(){return wae.Recognizer}});var bae=l2();Object.defineProperty(S,"SpeechRecognizer",{enumerable:!0,get:function(){return bae.SpeechRecognizer}});var Eae=d2();Object.defineProperty(S,"IntentRecognizer",{enumerable:!0,get:function(){return Eae.IntentRecognizer}});var Iae=p2();Object.defineProperty(S,"VoiceProfileType",{enumerable:!0,get:function(){return Iae.VoiceProfileType}});var Dae=v2();Object.defineProperty(S,"TranslationRecognizer",{enumerable:!0,get:function(){return Dae.TranslationRecognizer}});var _ae=m2();Object.defineProperty(S,"Translations",{enumerable:!0,get:function(){return _ae.Translations}});var Rae=y2();Object.defineProperty(S,"NoMatchReason",{enumerable:!0,get:function(){return Rae.NoMatchReason}});var Pae=C2();Object.defineProperty(S,"NoMatchDetails",{enumerable:!0,get:function(){return Pae.NoMatchDetails}});var Tae=S2();Object.defineProperty(S,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Tae.TranslationRecognitionCanceledEventArgs}});var Aae=w2();Object.defineProperty(S,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Aae.IntentRecognitionCanceledEventArgs}});var Mae=GR();Object.defineProperty(S,"CancellationDetailsBase",{enumerable:!0,get:function(){return Mae.CancellationDetailsBase}});var Oae=b2();Object.defineProperty(S,"CancellationDetails",{enumerable:!0,get:function(){return Oae.CancellationDetails}});var xae=E2();Object.defineProperty(S,"CancellationErrorCode",{enumerable:!0,get:function(){return xae.CancellationErrorCode}});var Nae=I2();Object.defineProperty(S,"ConnectionEventArgs",{enumerable:!0,get:function(){return Nae.ConnectionEventArgs}});var kae=D2();Object.defineProperty(S,"ServiceEventArgs",{enumerable:!0,get:function(){return kae.ServiceEventArgs}});var Fae=qR();Object.defineProperty(S,"Connection",{enumerable:!0,get:function(){return Fae.Connection}});var jae=_2();Object.defineProperty(S,"PhraseListGrammar",{enumerable:!0,get:function(){return jae.PhraseListGrammar}});var Lae=ly();Object.defineProperty(S,"DialogServiceConfig",{enumerable:!0,get:function(){return Lae.DialogServiceConfig}});var qae=R2();Object.defineProperty(S,"BotFrameworkConfig",{enumerable:!0,get:function(){return qae.BotFrameworkConfig}});var Bae=P2();Object.defineProperty(S,"CustomCommandsConfig",{enumerable:!0,get:function(){return Bae.CustomCommandsConfig}});var Vae=x2();Object.defineProperty(S,"DialogServiceConnector",{enumerable:!0,get:function(){return Vae.DialogServiceConnector}});var zae=N2();Object.defineProperty(S,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return zae.ActivityReceivedEventArgs}});var Uae=F2();Object.defineProperty(S,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Uae.TurnStatusReceivedEventArgs}});var Hae=j2();Object.defineProperty(S,"ServicePropertyChannel",{enumerable:!0,get:function(){return Hae.ServicePropertyChannel}});var $ae=L2();Object.defineProperty(S,"ProfanityOption",{enumerable:!0,get:function(){return $ae.ProfanityOption}});var Wae=q2();Object.defineProperty(S,"BaseAudioPlayer",{enumerable:!0,get:function(){return Wae.BaseAudioPlayer}});var Gae=B2();Object.defineProperty(S,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return Gae.ConnectionMessageEventArgs}});var Kae=kR();Object.defineProperty(S,"ConnectionMessage",{enumerable:!0,get:function(){return Kae.ConnectionMessage}});var Jae=V2();Object.defineProperty(S,"VoiceProfile",{enumerable:!0,get:function(){return Jae.VoiceProfile}});var n$=U2();Object.defineProperty(S,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return n$.VoiceProfileEnrollmentResult}});Object.defineProperty(S,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return n$.VoiceProfileEnrollmentCancellationDetails}});var r$=$2();Object.defineProperty(S,"VoiceProfileResult",{enumerable:!0,get:function(){return r$.VoiceProfileResult}});Object.defineProperty(S,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return r$.VoiceProfileCancellationDetails}});var Qae=W2();Object.defineProperty(S,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return Qae.VoiceProfilePhraseResult}});var Zae=G2();Object.defineProperty(S,"VoiceProfileClient",{enumerable:!0,get:function(){return Zae.VoiceProfileClient}});var Yae=K2();Object.defineProperty(S,"SpeakerRecognizer",{enumerable:!0,get:function(){return Yae.SpeakerRecognizer}});var Xae=J2();Object.defineProperty(S,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return Xae.SpeakerIdentificationModel}});var ece=Z2();Object.defineProperty(S,"SpeakerVerificationModel",{enumerable:!0,get:function(){return ece.SpeakerVerificationModel}});var tce=X2();Object.defineProperty(S,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return tce.AutoDetectSourceLanguageConfig}});var nce=tH();Object.defineProperty(S,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return nce.AutoDetectSourceLanguageResult}});var rce=nH();Object.defineProperty(S,"SourceLanguageConfig",{enumerable:!0,get:function(){return rce.SourceLanguageConfig}});var _T=iH();Object.defineProperty(S,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return _T.SpeakerRecognitionResult}});Object.defineProperty(S,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return _T.SpeakerRecognitionResultType}});Object.defineProperty(S,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return _T.SpeakerRecognitionCancellationDetails}});var In=Gy();Object.defineProperty(S,"Conversation",{enumerable:!0,get:function(){return In.Conversation}});Object.defineProperty(S,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return In.ConversationExpirationEventArgs}});Object.defineProperty(S,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return In.ConversationParticipantsChangedEventArgs}});Object.defineProperty(S,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return In.ConversationTranslationCanceledEventArgs}});Object.defineProperty(S,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return In.ConversationTranslationEventArgs}});Object.defineProperty(S,"ConversationTranslationResult",{enumerable:!0,get:function(){return In.ConversationTranslationResult}});Object.defineProperty(S,"ConversationTranslator",{enumerable:!0,get:function(){return In.ConversationTranslator}});Object.defineProperty(S,"ConversationTranscriber",{enumerable:!0,get:function(){return In.ConversationTranscriber}});Object.defineProperty(S,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return In.ConversationTranscriptionResult}});Object.defineProperty(S,"Meeting",{enumerable:!0,get:function(){return In.Meeting}});Object.defineProperty(S,"MeetingTranscriber",{enumerable:!0,get:function(){return In.MeetingTranscriber}});Object.defineProperty(S,"Participant",{enumerable:!0,get:function(){return In.Participant}});Object.defineProperty(S,"ParticipantChangedReason",{enumerable:!0,get:function(){return In.ParticipantChangedReason}});Object.defineProperty(S,"User",{enumerable:!0,get:function(){return In.User}});var ice=eC();Object.defineProperty(S,"Synthesizer",{enumerable:!0,get:function(){return ice.Synthesizer}});var oce=aR();Object.defineProperty(S,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return oce.SpeechSynthesisOutputFormat}});var sce=PH();Object.defineProperty(S,"SpeechSynthesizer",{enumerable:!0,get:function(){return sce.SpeechSynthesizer}});var ace=TH();Object.defineProperty(S,"SynthesisResult",{enumerable:!0,get:function(){return ace.SynthesisResult}});var cce=AH();Object.defineProperty(S,"SpeechSynthesisResult",{enumerable:!0,get:function(){return cce.SpeechSynthesisResult}});var uce=MH();Object.defineProperty(S,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return uce.SpeechSynthesisEventArgs}});var lce=OH();Object.defineProperty(S,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return lce.SpeechSynthesisWordBoundaryEventArgs}});var dce=xH();Object.defineProperty(S,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return dce.SpeechSynthesisBookmarkEventArgs}});var pce=NH();Object.defineProperty(S,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return pce.SpeechSynthesisVisemeEventArgs}});var fce=kH();Object.defineProperty(S,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return fce.SpeechSynthesisBoundaryType}});var hce=FH();Object.defineProperty(S,"SynthesisVoicesResult",{enumerable:!0,get:function(){return hce.SynthesisVoicesResult}});var gce=jH();Object.defineProperty(S,"VoiceInfo",{enumerable:!0,get:function(){return gce.VoiceInfo}});var vce=qH();Object.defineProperty(S,"SpeakerAudioDestination",{enumerable:!0,get:function(){return vce.SpeakerAudioDestination}});var mce=BH();Object.defineProperty(S,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return mce.ConversationTranscriptionCanceledEventArgs}});var yce=VH();Object.defineProperty(S,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return yce.MeetingTranscriptionCanceledEventArgs}});var Cce=zH();Object.defineProperty(S,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Cce.PronunciationAssessmentGradingSystem}});var Sce=UH();Object.defineProperty(S,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Sce.PronunciationAssessmentGranularity}});var wce=HH();Object.defineProperty(S,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return wce.PronunciationAssessmentConfig}});var bce=$H();Object.defineProperty(S,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return bce.PronunciationAssessmentResult}});var Ece=bP();Object.defineProperty(S,"LanguageIdMode",{enumerable:!0,get:function(){return Ece.LanguageIdMode}});var Ice=WH();Object.defineProperty(S,"AvatarConfig",{enumerable:!0,get:function(){return Ice.AvatarConfig}});var Dce=GH();Object.defineProperty(S,"AvatarEventArgs",{enumerable:!0,get:function(){return Dce.AvatarEventArgs}});var _ce=JH();Object.defineProperty(S,"AvatarSynthesizer",{enumerable:!0,get:function(){return _ce.AvatarSynthesizer}});var i$=QH();Object.defineProperty(S,"AvatarVideoFormat",{enumerable:!0,get:function(){return i$.AvatarVideoFormat}});Object.defineProperty(S,"Coordinate",{enumerable:!0,get:function(){return i$.Coordinate}});var Rce=ZH();Object.defineProperty(S,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return Rce.AvatarWebRTCConnectionResult}});var Pce=YH();Object.defineProperty(S,"Diagnostics",{enumerable:!0,get:function(){return Pce.Diagnostics}});var Tce=C_();Object.defineProperty(S,"LogLevel",{enumerable:!0,get:function(){return Tce.LogLevel}})});var o$=h(IC=>{"use strict";Object.defineProperty(IC,"__esModule",{value:!0});IC.ProxyInfo=void 0;var EC=D(),RT=class t{constructor(e,n,r,i){this.privProxyHostName=e,this.privProxyPort=n,this.privProxyUserName=r,this.privProxyPassword=i}static fromParameters(e){return new t(e.getProperty(EC.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(EC.PropertyId.SpeechServiceConnection_ProxyPort),10),e.getProperty(EC.PropertyId.SpeechServiceConnection_ProxyUserName),e.getProperty(EC.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};IC.ProxyInfo=RT});var a$=h((KDe,s$)=>{"use strict";var Ace=new Set(["json","buffer","string"]);s$.exports=t=>(...e)=>{let n=new Set,r,i,o,s="";return e.forEach(a=>{if(typeof a=="string")if(a.toUpperCase()===a)if(r){let c=`Can't set method to ${a}, already set to ${r}.`;throw new Error(c)}else r=a;else if(a.startsWith("http:")||a.startsWith("https:"))s=a;else if(Ace.has(a))i=a;else throw new Error(`Unknown encoding, ${a}`);else if(typeof a=="number")n.add(a);else if(typeof a=="object")if(Array.isArray(a)||a instanceof Set)a.forEach(c=>n.add(c));else{if(o)throw new Error("Cannot set headers twice.");o=a}else throw new Error(`Unknown type: ${typeof a}`)}),r||(r="GET"),n.size===0&&n.add(200),t(n,r,i,o,s)}});var l$=h((c$,u$)=>{"use strict";var Mce=a$(),PT=class t extends Error{constructor(e,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let r;Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(let[o,s]of e.headers.entries())this.headers[o.toLowerCase()]=s}},Oce=(t,e,n,r,i)=>(c,u,...l)=>v(c$,[c,u,...l],function*(o,s,a={}){o=i+(o||"");let d=new URL(o);if(r||(r={}),d.username&&(r.Authorization="Basic "+btoa(d.username+":"+d.password),d=new URL(d.protocol+"//"+d.host+d.pathname+d.search)),d.protocol!=="https:"&&d.protocol!=="http:")throw new Error(`Unknown protocol, ${d.protocol}`);if(s&&!(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="string"))if(typeof s=="object")s=JSON.stringify(s),r["Content-Type"]="application/json";else throw new Error("Unknown body type.");a=new Headers(b(b({},r||{}),a));let p=yield fetch(d,{method:e,headers:a,body:s});if(p.statusCode=p.status,!t.has(p.status))throw new PT(p);return n==="json"?p.json():n==="buffer"?p.arrayBuffer():n==="string"?p.text():p});u$.exports=Mce(Oce)});var p$=h(Qi=>{"use strict";var xce=Qi&&Qi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.RestMessageAdapter=Qi.RestRequestType=void 0;var Nce=xce(l$()),d$=j(),DC;(function(t){t.Get="GET",t.Post="POST",t.Delete="DELETE",t.File="file"})(DC=Qi.RestRequestType||(Qi.RestRequestType={}));var TT=class{constructor(e){if(!e)throw new d$.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,n){let r="";try{let i=n.trim().split(/[\r\n]+/),o={};i.forEach(s=>{let a=s.split(": "),c=a.shift().toLowerCase(),u=a.join(": ");o[c]=u}),r=o[e.toLowerCase()]}catch{}return r}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,n){this.privHeaders[e]=n}request(e,n,r={},i=null){let o=new d$.Deferred,s=e===DC.File?"POST":e,a=(u,l={})=>{let d=u;return{data:JSON.stringify(l),headers:JSON.stringify(u.headers),json:l,ok:u.statusCode>=200&&u.statusCode<300,status:u.statusCode,statusText:l.error?l.error.message:d.statusText?d.statusText:d.statusMessage}},c=u=>{let l=Nce.default(n,s,this.privHeaders,200,201,202,204,400,401,402,403,404),d=this.queryParams(r)===""?"":`?${this.queryParams(r)}`;l(d,u).then(p=>v(this,null,function*(){if(e===DC.Delete||p.statusCode===204)o.resolve(a(p));else try{let f=yield p.json();o.resolve(a(p,f))}catch{o.resolve(a(p))}})).catch(p=>{o.reject(p)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===DC.Post&&i&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),c(i),o.promise}queryParams(e={}){return Object.keys(e).map(n=>encodeURIComponent(n)+"="+encodeURIComponent(e[n])).join("&")}};Qi.RestMessageAdapter=TT});var AT=h(_C=>{"use strict";Object.defineProperty(_C,"__esModule",{value:!0});_C.RestConfigBase=void 0;var Nu=class t{static get requestOptions(){return t.privDefaultRequestOptions}static get configParams(){return t.privDefaultParams}static get restErrors(){return t.privRestErrors}};_C.RestConfigBase=Nu;Nu.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};Nu.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};Nu.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}});var dt=h(_t=>{"use strict";var kce=_t&&_t.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Nr=_t&&_t.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&kce(e,t,n)};Object.defineProperty(_t,"__esModule",{value:!0});Nr(kL(),_t);Nr(jL(),_t);Nr(BL(),_t);Nr(zL(),_t);Nr(UL(),_t);Nr(FU(),_t);Nr(Y0(),_t);Nr(jU(),_t);Nr(o$(),_t);Nr(p$(),_t);Nr(AT(),_t)});var g$=h(RC=>{"use strict";Object.defineProperty(RC,"__esModule",{value:!0});RC.IntentConnectionFactory=void 0;var f$=dt(),wp=D(),h$=ir(),Fce=M(),jce=Bt(),MT=class extends h$.ConnectionFactoryBase{create(e,n,r){let i=e.parameters.getProperty(wp.PropertyId.SpeechServiceConnection_Endpoint);if(!i){let c=e.parameters.getProperty(wp.PropertyId.SpeechServiceConnection_IntentRegion),u=h$.ConnectionFactoryBase.getHostSuffix(c);i=e.parameters.getProperty(wp.PropertyId.SpeechServiceConnection_Host,"wss://"+c+".sr.speech"+u)+"/speech/recognition/interactive/cognitiveservices/v1"}let o={format:"simple",language:e.parameters.getProperty(wp.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,o,i);let s={};n.token!==void 0&&n.token!==""&&(s[n.headerName]=n.token),s[jce.HeaderNames.ConnectionId]=r,e.parameters.setProperty(wp.PropertyId.SpeechServiceConnection_Url,i);let a=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new f$.WebsocketConnection(i,o,s,new Fce.WebsocketMessageFormatter,f$.ProxyInfo.fromRecognizerConfig(e),a,r)}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}};RC.IntentConnectionFactory=MT});var C$=h(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.VoiceProfileConnectionFactory=ku.SpeakerRecognitionConnectionFactory=void 0;var v$=dt(),ga=D(),m$=ir(),Lce=M(),y$=Bt(),PC=class extends m$.ConnectionFactoryBase{create(e,n,r,i){let o=e.parameters.getProperty(ga.PropertyId.SpeechServiceConnection_Endpoint);if(!o){let u=e.parameters.getProperty(ga.PropertyId.SpeechServiceConnection_Region),l=m$.ConnectionFactoryBase.getHostSuffix(u),d=e.parameters.getProperty(ga.PropertyId.SpeechServiceConnection_Host,`wss://${u}.spr-frontend.speech${l}`),p=e.parameters.getProperty(ga.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");o=`${d}/speaker/ws/${this.scenarioToPath(p)}/${r}`}let s={format:"simple",language:e.parameters.getProperty(ga.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,s,o);let a={};n.token!==void 0&&n.token!==""&&(a[n.headerName]=n.token),a[y$.HeaderNames.ConnectionId]=i,a[y$.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(ga.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(ga.PropertyId.SpeechServiceConnection_Url,o);let c=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new v$.WebsocketConnection(o,s,a,new Lce.WebsocketMessageFormatter,v$.ProxyInfo.fromRecognizerConfig(e),c,i)}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}},OT=class extends PC{create(e,n,r){return super.create(e,n,"recognition",r)}};ku.SpeakerRecognitionConnectionFactory=OT;var xT=class extends PC{create(e,n,r){return super.create(e,n,"profile",r)}};ku.VoiceProfileConnectionFactory=xT});var AC=h(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.RecognitionEndedEvent=Rt.RecognitionCompletionStatus=Rt.RecognitionStartedEvent=Rt.ConnectingToServiceEvent=Rt.ListeningStartedEvent=Rt.RecognitionTriggeredEvent=Rt.SpeechRecognitionEvent=void 0;var TC=j(),Xo=class extends TC.PlatformEvent{constructor(e,n,r,i=TC.EventType.Info){super(e,i),this.privRequestId=n,this.privSessionId=r}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}};Rt.SpeechRecognitionEvent=Xo;var NT=class extends Xo{constructor(e,n,r,i){super("RecognitionTriggeredEvent",e,n),this.privAudioSourceId=r,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};Rt.RecognitionTriggeredEvent=NT;var kT=class extends Xo{constructor(e,n,r,i){super("ListeningStartedEvent",e,n),this.privAudioSourceId=r,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};Rt.ListeningStartedEvent=kT;var FT=class extends Xo{constructor(e,n,r){super("ConnectingToServiceEvent",e,r),this.privAuthFetchEventid=n}get authFetchEventid(){return this.privAuthFetchEventid}};Rt.ConnectingToServiceEvent=FT;var jT=class extends Xo{constructor(e,n,r,i,o){super("RecognitionStartedEvent",e,o),this.privAudioSourceId=n,this.privAudioNodeId=r,this.privAuthFetchEventId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}};Rt.RecognitionStartedEvent=jT;var S$;(function(t){t[t.Success=0]="Success",t[t.AudioSourceError=1]="AudioSourceError",t[t.AudioSourceTimeout=2]="AudioSourceTimeout",t[t.AuthTokenFetchError=3]="AuthTokenFetchError",t[t.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",t[t.UnAuthorized=5]="UnAuthorized",t[t.ConnectTimeout=6]="ConnectTimeout",t[t.ConnectError=7]="ConnectError",t[t.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",t[t.UnknownError=9]="UnknownError"})(S$=Rt.RecognitionCompletionStatus||(Rt.RecognitionCompletionStatus={}));var LT=class extends Xo{constructor(e,n,r,i,o,s,a,c){super("RecognitionEndedEvent",e,o,a===S$.Success?TC.EventType.Info:TC.EventType.Error),this.privAudioSourceId=n,this.privAudioNodeId=r,this.privAuthFetchEventId=i,this.privStatus=a,this.privError=c,this.privServiceTag=s}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}};Rt.RecognitionEndedEvent=LT});var va=h(MC=>{"use strict";Object.defineProperty(MC,"__esModule",{value:!0});MC.SpeechConnectionMessage=void 0;var qT=j(),Zi=Bt(),BT=class t extends qT.ConnectionMessage{constructor(e,n,r,i,o,s,a,c){if(!n)throw new qT.ArgumentNullError("path");if(!r)throw new qT.ArgumentNullError("requestId");let u={};if(u[Zi.HeaderNames.Path]=n,u[Zi.HeaderNames.RequestId]=r,u[Zi.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[Zi.HeaderNames.ContentType]=i),s&&(u[Zi.HeaderNames.RequestStreamId]=s),a)for(let l in a)l&&(u[l]=a[l]);c?super(e,o,u,c):super(e,o,u),this.privPath=n,this.privRequestId=r,this.privContentType=i,this.privStreamId=s,this.privAdditionalHeaders=a}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let n=null,r=null,i=null,o=null,s={};if(e.headers)for(let a in e.headers)a&&(a.toLowerCase()===Zi.HeaderNames.Path.toLowerCase()?n=e.headers[a]:a.toLowerCase()===Zi.HeaderNames.RequestId.toLowerCase()?r=e.headers[a]:a.toLowerCase()===Zi.HeaderNames.ContentType.toLowerCase()?i=e.headers[a]:a.toLowerCase()===Zi.HeaderNames.RequestStreamId.toLowerCase()?o=e.headers[a]:s[a]=e.headers[a]);return new t(e.messageType,n,r,i,e.body,o,s,e.id)}};MC.SpeechConnectionMessage=BT});var w$=h(xC=>{"use strict";Object.defineProperty(xC,"__esModule",{value:!0});xC.ServiceRecognizerBase=void 0;var qce=dt(),Je=j(),Pe=D(),fi=M(),es=va(),OC=class t{constructor(e,n,r,i,o){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new Je.ArgumentNullError("authentication");if(!n)throw new Je.ArgumentNullError("connectionFactory");if(!r)throw new Je.ArgumentNullError("audioSource");if(!i)throw new Je.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=i.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=n,this.privAudioSource=r,this.privRecognizerConfig=i,this.privIsDisposed=!1,this.privRecognizer=o,this.privRequestSession=new fi.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new Je.EventSource,this.privServiceEvents=new Je.EventSource,this.privDynamicGrammar=new fi.DynamicGrammarBuilder,this.privSpeechContext=new fi.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new fi.AgentConfig,this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=Je.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(a=>{if(a.name==="ConnectionClosedEvent"){let c=a;(c.statusCode===1003||c.statusCode===1007||c.statusCode===1002||c.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(Pe.CancellationReason.Error,c.statusCode===1007?Pe.CancellationErrorCode.BadRequestParameters:Pe.CancellationErrorCode.ConnectionFailure,`${c.reason} websocket error code: ${c.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=Je.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){let e=this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(e!==void 0){let n=e.split(","),r=this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),i=r!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:i},output:{interimResults:{mode:"Always"}},targetLanguages:n}),r!==void 0){let o={};for(let s of n)o[s]=r;this.privSpeechContext.setSection("synthesis",{defaultVoices:o})}}}setSpeechSegmentationTimeoutJson(){let e=this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(e!==void 0){let n=this.recognitionMode===fi.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===fi.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",r=parseInt(e,10),i=this.privSpeechContext.getSection("phraseDetection");i.mode=n,i[n]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:r}},this.privSpeechContext.setSection("phraseDetection",i)}}setLanguageIdJson(){let e=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){let r=this.privRecognizerConfig.autoDetectSourceLanguages.split(","),i;this.privRecognizerConfig.languageIdMode==="Continuous"?i="DetectContinuous":i="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:r,mode:i,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});let o=this.privRecognizerConfig.sourceLanguageModels;o!==void 0&&(e.customModels=o,e.onInterim={action:"None"},e.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(e.onInterim={action:"Translate"},e.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",e)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(fi.OutputFormatPropertyName,Pe.OutputFormat[Pe.OutputFormat.Simple]).toLowerCase()===Pe.OutputFormat[Pe.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(Pe.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(Pe.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}dispose(e){return v(this,null,function*(){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{yield(yield this.privConnectionConfigurationPromise).dispose(e)}catch{return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,n,r){return v(this,null,function*(){if(this.recognizeOverride!==void 0){yield this.recognizeOverride(e,n,r);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=n,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);let i=this.connectImpl(),o;try{let c=yield this.audioSource.attach(this.privRequestSession.audioNodeId),u=yield this.audioSource.format,l=yield this.audioSource.deviceInfo;this.privIsLiveAudio=l.type&&l.type===fi.type.Microphones,o=new qce.ReplayableAudioNode(c,u.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(o,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l}}catch(c){throw yield this.privRequestSession.onStopRecognizing(),c}try{yield i}catch(c){yield this.cancelRecognitionLocal(Pe.CancellationReason.Error,Pe.CancellationErrorCode.ConnectionFailure,c);return}let s=new Pe.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,s),this.receiveMessage(),this.sendAudio(o).catch(c=>v(this,null,function*(){yield this.cancelRecognitionLocal(Pe.CancellationReason.Error,Pe.CancellationErrorCode.RuntimeError,c)}))})}stopRecognizing(){return v(this,null,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return v(this,null,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(e,n){this.connectImpl().then(()=>{try{e&&e()}catch(r){n&&n(r)}},r=>{try{n&&n(r)}catch{}})}disconnect(){return v(this,null,function*(){if(yield this.cancelRecognitionLocal(Pe.CancellationReason.Error,Pe.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&(yield this.disconnectOverride()),this.privConnectionPromise!==void 0)try{yield(yield this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0})}sendMessage(e){}sendNetworkMessage(e,n){return v(this,null,function*(){let r=typeof n=="string"?Je.MessageType.Text:Je.MessageType.Binary,i=typeof n=="string"?"application/json":"";return(yield this.fetchConnection()).send(new es.SpeechConnectionMessage(r,e,this.privRequestSession.requestId,i,n))})}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}sendTelemetryData(){return v(this,null,function*(){let e=this.privRequestSession.getTelemetry();if(t.telemetryDataEnabled!==!0||this.privIsDisposed||e===null)return;if(t.telemetryData)try{t.telemetryData(e)}catch{}yield(yield this.fetchConnection()).send(new es.SpeechConnectionMessage(Je.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))})}cancelRecognitionLocal(e,n,r){return v(this,null,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,n,r))})}receiveMessage(){return v(this,null,function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection(),n=yield e.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!n)return this.receiveMessage();this.privServiceHasSentMessage=!0;let r=es.SpeechConnectionMessage.fromConnectionMessage(n);if(r.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":let i=fi.SpeechDetected.fromJSON(r.textBody),o=new Pe.RecognitionEventArgs(i.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,o);break;case"speech.enddetected":let s;r.textBody.length>0?s=r.textBody:s="{ Offset: 0 }";let a=fi.SpeechDetected.fromJSON(s),c=new Pe.RecognitionEventArgs(a.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,c);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(Pe.CancellationReason.EndOfStream,Pe.CancellationErrorCode.NoError,void 0));let u=new Pe.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,u);return}else e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(r))||this.privServiceEvents&&this.serviceEvents.onEvent(new Je.ServiceEvent(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch{return null}})}updateSpeakerDiarizationAudioOffset(){let n=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(n)}sendSpeechContext(e,n){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();let r=this.speechContext.toJSON();if(n&&this.privRequestSession.onSpeechContext(),r)return e.send(new es.SpeechConnectionMessage(Je.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",r))}noOp(){}sendPrePayloadJSON(e,n=!0){return v(this,null,function*(){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,n),yield this.sendWaveHeader(e)})}sendWaveHeader(e){return v(this,null,function*(){let n=yield this.audioSource.format;return e.send(new es.SpeechConnectionMessage(Je.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",n.header))})}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(e=>e.state()===Je.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,n,r){if(n.onSpeechContext(),t.telemetryDataEnabled!==!0){let o={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(o)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){let i=JSON.parse(r);i.context.DisableReferenceChannel="True",i.context.MicSpec="1_0_0",r=JSON.stringify(i)}if(r)return e.send(new es.SpeechConnectionMessage(Je.MessageType.Text,"speech.config",n.requestId,"application/json",r))}fetchConnection(){return v(this,null,function*(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(e=>e.state()===Je.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(e){return v(this,null,function*(){let n=yield this.audioSource.format;this.privAverageBytesPerMs=n.avgBytesPerSec/1e3;let r=Date.now(),i=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),o=n.avgBytesPerSec/1e3*parseInt(i,10),s=this.privRequestSession.recogNumber,a=()=>v(this,null,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s){let c=yield this.fetchConnection(),u=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let l,d;if(!u||u.isEnd?(l=null,d=0):(l=u.buffer,this.privRequestSession.onAudioSent(l.byteLength),o>=this.privRequestSession.bytesSent?d=0:d=Math.max(0,r-Date.now())),d!==0&&(yield this.delay(d)),l!==null&&(r=Date.now()+l.byteLength*1e3/(n.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s)if(c.send(new es.SpeechConnectionMessage(Je.MessageType.Binary,"audio",this.privRequestSession.requestId,null,l)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),u?.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return a()}});return a()})}retryableConnect(){return v(this,null,function*(){let e=!1;this.privAuthFetchEventId=Je.createNoDashGuid();let n=this.privRequestSession.sessionId;this.privConnectionId=n!==void 0?n:Je.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let r=0,i="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){let s=yield e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);yield this.privRequestSession.onAuthCompleted(!1);let a=this.privConnectionFactory.create(this.privRecognizerConfig,s,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(a.events),a.events.attach(u=>{this.connectionEvents.onEvent(u)});let c=yield a.open();if(c.statusCode===200)return yield this.privRequestSession.onConnectionEstablishCompleted(c.statusCode),Promise.resolve(a);c.statusCode===1006&&(e=!0),r=c.statusCode,i=c.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(r,i),Promise.reject(`Unable to contact server. StatusCode: ${r}, ${this.privRecognizerConfig.parameters.getProperty(Pe.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${i}`)})}delay(e){return new Promise(n=>this.privSetTimeout(n,e))}writeBufferToConsole(e){let n="Buffer Size: ";if(e===null)n+="null";else{let r=new Uint8Array(e);n+=`${e.byteLength}\r
`;for(let i=0;i<e.byteLength;i++)n+=r[i].toString(16).padStart(2,"0")+" ",(i+1)%16===0&&(console.info(n),n="")}console.info(n)}sendFinalAudio(){return v(this,null,function*(){yield(yield this.fetchConnection()).send(new es.SpeechConnectionMessage(Je.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return v(this,null,function*(){let e=yield this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)})}};xC.ServiceRecognizerBase=OC;OC.telemetryDataEnabled=!0});var b$=h(NC=>{"use strict";Object.defineProperty(NC,"__esModule",{value:!0});NC.ConversationServiceRecognizer=void 0;var sr=D(),hi=M(),VT=class extends hi.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.handleSpeechPhraseMessage=s=>v(this,null,function*(){return this.handleSpeechPhrase(s)}),this.handleSpeechHypothesisMessage=s=>this.handleSpeechHypothesis(s)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,n,r){}handleRecognizingCallback(e,n,r){}processSpeechMessages(e){return v(this,null,function*(){let n=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),n=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(e.textBody)),n=!0;break;default:break}return n})}cancelRecognition(e,n,r,i,o){}handleSpeechPhrase(e){return v(this,null,function*(){let n=hi.SimpleSpeechPhrase.fromJSON(e),r=hi.EnumTranslation.implTranslateRecognitionResult(n.RecognitionStatus),i,o=new sr.PropertyCollection;o.setProperty(sr.PropertyId.SpeechServiceResponse_JsonResult,e);let s=n.Offset+this.privRequestSession.currentTurnAudioOffset,a=s;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),sr.ResultReason.Canceled===r){let c=hi.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus),u=hi.EnumTranslation.implTranslateCancelErrorCode(n.RecognitionStatus);yield this.cancelRecognitionLocal(c,u,hi.EnumTranslation.implTranslateErrorDetails(u))}else if(!(this.privRequestSession.isSpeechEnded&&r===sr.ResultReason.NoMatch&&n.RecognitionStatus!==hi.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(hi.OutputFormatPropertyName)===sr.OutputFormat[sr.OutputFormat.Simple])i=new sr.SpeechRecognitionResult(this.privRequestSession.requestId,r,n.DisplayText,n.Duration,s,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,e,o);else{let c=hi.DetailedSpeechPhrase.fromJSON(e),u=c.Offset+this.privRequestSession.currentTurnAudioOffset,l=c.getJsonWithCorrectedOffsets(u);i=new sr.SpeechRecognitionResult(this.privRequestSession.requestId,r,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,l,o),a=i.offset}this.handleRecognizedCallback(i,a,this.privRequestSession.sessionId)}})}handleSpeechHypothesis(e){let n=hi.SpeechHypothesis.fromJSON(e),r=n.Offset+this.privRequestSession.currentTurnAudioOffset,i=new sr.PropertyCollection;i.setProperty(sr.PropertyId.SpeechServiceResponse_JsonResult,e);let o=new sr.SpeechRecognitionResult(this.privRequestSession.requestId,sr.ResultReason.RecognizingSpeech,n.Text,n.Duration,r,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,e,i);this.privRequestSession.onHypothesis(r),this.handleRecognizingCallback(o,n.Duration,this.privRequestSession.sessionId)}};NC.ConversationServiceRecognizer=VT});var I$=h(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});gi.RecognizerConfig=gi.SpeechResultFormat=gi.RecognitionMode=void 0;var kC=D(),E$=M(),FC;(function(t){t[t.Interactive=0]="Interactive",t[t.Conversation=1]="Conversation",t[t.Dictation=2]="Dictation"})(FC=gi.RecognitionMode||(gi.RecognitionMode={}));var Bce;(function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"})(Bce=gi.SpeechResultFormat||(gi.SpeechResultFormat={}));var zT=class{constructor(e,n){this.privSpeechServiceConfig=e||new E$.SpeechServiceConfig(new E$.Context(null)),this.privParameters=n,this.privMaxRetryCount=parseInt(n.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=n.getProperty(kC.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===FC.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=FC[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==FC.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(kC.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(kC.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){let e=[],n=!1;if(this.autoDetectSourceLanguages!==void 0)for(let r of this.autoDetectSourceLanguages.split(",")){let i=r+kC.PropertyId.SpeechServiceConnection_EndpointId.toString(),o=this.parameters.getProperty(i,void 0);o!==void 0?(e.push({language:r,endpoint:o}),n=!0):e.push({language:r,endpoint:""})}return n?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}};gi.RecognizerConfig=zT});var _$=h(D$=>{"use strict";Object.defineProperty(D$,"__esModule",{value:!0})});var P$=h(jC=>{"use strict";Object.defineProperty(jC,"__esModule",{value:!0});jC.WebsocketMessageFormatter=void 0;var ar=j(),R$=`\r
`,UT=class{toConnectionMessage(e){let n=new ar.Deferred;try{if(e.messageType===ar.MessageType.Text){let r=e.textContent,i={},o=null;if(r){let s=r.split(`\r
\r
`);s&&s.length>0&&(i=this.parseHeaders(s[0]),s.length>1&&(o=s[1]))}n.resolve(new ar.ConnectionMessage(e.messageType,o,i,e.id))}else if(e.messageType===ar.MessageType.Binary){let r=e.binaryContent,i={},o=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");let s=new DataView(r),a=s.getInt16(0);if(r.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<a;u++)c+=String.fromCharCode(s.getInt8(u+2));i=this.parseHeaders(c),r.byteLength>a+2&&(o=r.slice(2+a)),n.resolve(new ar.ConnectionMessage(e.messageType,o,i,e.id))}}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(e){let n=new ar.Deferred;try{if(e.messageType===ar.MessageType.Text){let r=`${this.makeHeaders(e)}${R$}${e.textBody?e.textBody:""}`;n.resolve(new ar.RawWebsocketMessage(ar.MessageType.Text,r,e.id))}else if(e.messageType===ar.MessageType.Binary){let r=this.makeHeaders(e),i=e.binaryBody,o=this.stringToArrayBuffer(r),s=new Int8Array(o),a=s.byteLength,c=new Int8Array(2+a+(i?i.byteLength:0));if(c[0]=a>>8&255,c[1]=a&255,c.set(s,2),i){let l=new Int8Array(i);c.set(l,2+a)}let u=c.buffer;n.resolve(new ar.RawWebsocketMessage(ar.MessageType.Binary,u,e.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}makeHeaders(e){let n="";if(e.headers)for(let r in e.headers)r&&(n+=`${r}: ${e.headers[r]}${R$}`);return n}parseHeaders(e){let n={};if(e){let r=e.match(/[^\r\n]+/g);if(n){for(let i of r)if(i){let o=i.indexOf(":"),s=o>0?i.substr(0,o).trim().toLowerCase():i,a=o>0&&i.length>o+1?i.substr(o+1).trim():"";n[s]=a}}}return n}stringToArrayBuffer(e){let n=new ArrayBuffer(e.length),r=new DataView(n);for(let i=0;i<e.length;i++)r.setUint8(i,e.charCodeAt(i));return n}};jC.WebsocketMessageFormatter=UT});var O$=h(LC=>{"use strict";Object.defineProperty(LC,"__esModule",{value:!0});LC.SpeechConnectionFactory=void 0;var T$=dt(),A$=M(),ts=D(),M$=ir(),HT=M(),Vce=Bt(),ma=Gi(),$T=class extends M$.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(e,n,r){let i=e.parameters.getProperty(ts.PropertyId.SpeechServiceConnection_Endpoint,void 0),o=e.parameters.getProperty(ts.PropertyId.SpeechServiceConnection_Region,void 0),s=M$.ConnectionFactoryBase.getHostSuffix(o),a=e.parameters.getProperty(ts.PropertyId.SpeechServiceConnection_Host,"wss://"+o+".stt.speech"+s),c={},u=e.parameters.getProperty(ts.PropertyId.SpeechServiceConnection_EndpointId,void 0),l=e.parameters.getProperty(ts.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(u?(!i||i.search(ma.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(c[ma.QueryParameterNames.CustomSpeechDeploymentId]=u):l&&(!i||i.search(ma.QueryParameterNames.Language)===-1)&&(c[ma.QueryParameterNames.Language]=l),(!i||i.search(ma.QueryParameterNames.Format)===-1)&&(c[ma.QueryParameterNames.Format]=e.parameters.getProperty(A$.OutputFormatPropertyName,ts.OutputFormat[ts.OutputFormat.Simple]).toLowerCase()),e.autoDetectSourceLanguages!==void 0&&(c[ma.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,c,i),!i)switch(e.recognitionMode){case HT.RecognitionMode.Conversation:e.parameters.getProperty(A$.ForceDictationPropertyName,"false")==="true"?i=a+this.dictationRelativeUri:e.recognitionEndpointVersion!==void 0&&parseInt(e.recognitionEndpointVersion,10)>1?i=`${a}${this.universalUri}${e.recognitionEndpointVersion}`:i=a+this.conversationRelativeUri;break;case HT.RecognitionMode.Dictation:i=a+this.dictationRelativeUri;break;default:e.recognitionEndpointVersion!==void 0&&parseInt(e.recognitionEndpointVersion,10)>1?i=`${a}${this.universalUri}${e.recognitionEndpointVersion}`:i=a+this.interactiveRelativeUri;break}let d={};n.token!==void 0&&n.token!==""&&(d[n.headerName]=n.token),d[Vce.HeaderNames.ConnectionId]=r;let p=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",f=new T$.WebsocketConnection(i,c,d,new HT.WebsocketMessageFormatter,T$.ProxyInfo.fromRecognizerConfig(e),p,r),g=f.uri;return e.parameters.setProperty(ts.PropertyId.SpeechServiceConnection_Url,g),f}};LC.SpeechConnectionFactory=$T});var k$=h(qC=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0});qC.ConversationTranscriberConnectionFactory=void 0;var x$=dt(),kn=D(),zce=M(),N$=ir(),Uce=M(),Hce=Bt(),cr=Gi(),WT=class extends N$.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(e,n,r){let i=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_Endpoint,void 0),o=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_Region,void 0),s=N$.ConnectionFactoryBase.getHostSuffix(o),a=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_Host,"wss://"+o+".stt.speech"+s),c={},u=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_EndpointId,void 0),l=e.parameters.getProperty(kn.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);u?(!i||i.search(cr.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(c[cr.QueryParameterNames.CustomSpeechDeploymentId]=u):l&&(!i||i.search(cr.QueryParameterNames.Language)===-1)&&(c[cr.QueryParameterNames.Language]=l),e.autoDetectSourceLanguages!==void 0&&(c[cr.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,c,i),i||(i=`${a}${this.universalUri}`);let d={};n.token!==void 0&&n.token!==""&&(d[n.headerName]=n.token),d[Hce.HeaderNames.ConnectionId]=r;let p=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",f=new x$.WebsocketConnection(i,c,d,new Uce.WebsocketMessageFormatter,x$.ProxyInfo.fromRecognizerConfig(e),p,r),g=f.uri;return e.parameters.setProperty(kn.PropertyId.SpeechServiceConnection_Url,g),f}setV2UrlParams(e,n,r){new Map([[kn.PropertyId.Speech_SegmentationSilenceTimeoutMs,cr.QueryParameterNames.SegmentationSilenceTimeoutMs],[kn.PropertyId.SpeechServiceConnection_EnableAudioLogging,cr.QueryParameterNames.EnableAudioLogging],[kn.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,cr.QueryParameterNames.EndSilenceTimeoutMs],[kn.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,cr.QueryParameterNames.InitialSilenceTimeoutMs],[kn.PropertyId.SpeechServiceResponse_PostProcessingOption,cr.QueryParameterNames.Postprocessing],[kn.PropertyId.SpeechServiceResponse_ProfanityOption,cr.QueryParameterNames.Profanity],[kn.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,cr.QueryParameterNames.StableIntermediateThreshold]]).forEach((s,a)=>{this.setUrlParameter(a,s,e,n,r)});let o=JSON.parse(e.parameters.getProperty(zce.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach(s=>{n[s]=o[s]})}};qC.ConversationTranscriberConnectionFactory=WT});var q$=h(BC=>{"use strict";Object.defineProperty(BC,"__esModule",{value:!0});BC.TranscriberConnectionFactory=void 0;var F$=dt(),Fn=D(),j$=ir(),L$=M(),$ce=Bt(),bp=Gi(),GT=class extends j$.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(e,n,r){let i=e.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_Endpoint,void 0),o=e.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_Region,"centralus"),s=j$.ConnectionFactoryBase.getHostSuffix(o),a="wss://transcribe."+o+".cts.speech"+s+this.multiaudioRelativeUri,c=e.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_Host,a),u={};this.setQueryParams(u,e,i),i||(i=c);let l={};n.token!==void 0&&n.token!==""&&(l[n.headerName]=n.token),l[$ce.HeaderNames.ConnectionId]=r,e.parameters.setProperty(Fn.PropertyId.SpeechServiceConnection_Url,i);let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new F$.WebsocketConnection(i,u,l,new L$.WebsocketMessageFormatter,F$.ProxyInfo.fromRecognizerConfig(e),d,r)}setQueryParams(e,n,r){let i=n.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_EndpointId,void 0),o=n.parameters.getProperty(Fn.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);i&&!(bp.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[bp.QueryParameterNames.CustomSpeechDeploymentId]=i),o&&!(bp.QueryParameterNames.Language in e)&&(e[bp.QueryParameterNames.Language]=o);let s=n.parameters.getProperty(Fn.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",a=n.parameters.getProperty(L$.OutputFormatPropertyName,Fn.OutputFormat[Fn.OutputFormat.Simple])!==Fn.OutputFormat[Fn.OutputFormat.Simple];(s||a)&&(e[bp.QueryParameterNames.Format]=Fn.OutputFormat[Fn.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(n,e,r)}};BC.TranscriberConnectionFactory=GT});var U$=h(VC=>{"use strict";Object.defineProperty(VC,"__esModule",{value:!0});VC.TranslationConnectionFactory=void 0;var B$=dt(),Wce=FP(),Yi=D(),V$=ir(),KT=M(),Gce=Bt(),z$=Gi(),JT=class extends V$.ConnectionFactoryBase{create(e,n,r){let i=this.getEndpointUrl(e),o={};e.autoDetectSourceLanguages!==void 0&&(o[z$.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(o,e,i);let s={};n.token!==void 0&&n.token!==""&&(s[n.headerName]=n.token),s[Gce.HeaderNames.ConnectionId]=r,e.parameters.setProperty(Yi.PropertyId.SpeechServiceConnection_Url,i);let a=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new B$.WebsocketConnection(i,o,s,new KT.WebsocketMessageFormatter,B$.ProxyInfo.fromRecognizerConfig(e),a,r)}getEndpointUrl(e,n){let r=e.parameters.getProperty(Yi.PropertyId.SpeechServiceConnection_Region),i=V$.ConnectionFactoryBase.getHostSuffix(r),o=e.parameters.getProperty(Yi.PropertyId.SpeechServiceConnection_Endpoint,void 0);return o||(e.autoDetectSourceLanguages!==void 0?o=e.parameters.getProperty(Yi.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+i)+"/speech/universal/v2":o=e.parameters.getProperty(Yi.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+i)+"/speech/translation/cognitiveservices/v1"),n===!0?o:Wce.StringUtils.formatString(o,{region:r})}setQueryParams(e,n,r){e.from=n.parameters.getProperty(Yi.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=n.parameters.getProperty(Yi.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=n.recognitionMode===KT.RecognitionMode.Interactive?"interactive":n.recognitionMode===KT.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(n,e,r),this.setUrlParameter(Yi.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,z$.QueryParameterNames.StableTranslation,n,e,r);let i=n.parameters.getProperty(Yi.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);i!==void 0&&(e.voice=i,e.features="texttospeech")}};VC.TranslationConnectionFactory=JT});var H$=h(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0});zC.EnumTranslation=void 0;var vt=D(),nt=M(),QT=class{static implTranslateRecognitionResult(e,n=!1){let r=vt.ResultReason.Canceled;switch(e){case nt.RecognitionStatus.Success:r=vt.ResultReason.RecognizedSpeech;break;case nt.RecognitionStatus.EndOfDictation:r=n?vt.ResultReason.RecognizedSpeech:vt.ResultReason.NoMatch;break;case nt.RecognitionStatus.NoMatch:case nt.RecognitionStatus.InitialSilenceTimeout:case nt.RecognitionStatus.BabbleTimeout:r=vt.ResultReason.NoMatch;break;case nt.RecognitionStatus.Error:case nt.RecognitionStatus.BadRequest:case nt.RecognitionStatus.Forbidden:default:r=vt.ResultReason.Canceled;break}return r}static implTranslateCancelResult(e){let n=vt.CancellationReason.EndOfStream;switch(e){case nt.RecognitionStatus.Success:case nt.RecognitionStatus.EndOfDictation:case nt.RecognitionStatus.NoMatch:n=vt.CancellationReason.EndOfStream;break;case nt.RecognitionStatus.InitialSilenceTimeout:case nt.RecognitionStatus.BabbleTimeout:case nt.RecognitionStatus.Error:case nt.RecognitionStatus.BadRequest:case nt.RecognitionStatus.Forbidden:default:n=vt.CancellationReason.Error;break}return n}static implTranslateCancelErrorCode(e){let n=vt.CancellationErrorCode.NoError;switch(e){case nt.RecognitionStatus.Error:n=vt.CancellationErrorCode.ServiceError;break;case nt.RecognitionStatus.TooManyRequests:n=vt.CancellationErrorCode.TooManyRequests;break;case nt.RecognitionStatus.BadRequest:n=vt.CancellationErrorCode.BadRequestParameters;break;case nt.RecognitionStatus.Forbidden:n=vt.CancellationErrorCode.Forbidden;break;default:n=vt.CancellationErrorCode.NoError;break}return n}static implTranslateErrorDetails(e){let n="The speech service encountered an internal error and could not continue.";switch(e){case vt.CancellationErrorCode.Forbidden:n="The recognizer is using a free subscription that ran out of quota.";break;case vt.CancellationErrorCode.BadRequestParameters:n="Invalid parameter or unsupported audio format in the request.";break;case vt.CancellationErrorCode.TooManyRequests:n="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break;default:break}return n}};zC.EnumTranslation=QT});var $$=h(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.RecognitionStatus=ns.SynthesisStatus=void 0;var Kce;(function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"})(Kce=ns.SynthesisStatus||(ns.SynthesisStatus={}));var Jce;(function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"})(Jce=ns.RecognitionStatus||(ns.RecognitionStatus={}))});var G$=h(UC=>{"use strict";Object.defineProperty(UC,"__esModule",{value:!0});UC.TranslationSynthesisEnd=void 0;var W$=M(),ZT=class t{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=W$.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=W$.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new t(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};UC.TranslationSynthesisEnd=ZT});var K$=h(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0});HC.TranslationHypothesis=void 0;var Qce=W(),Zce=Ug(),YT=class t{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=Zce.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new t(JSON.parse(e))}static fromTranslationResponse(e){Qce.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");let n=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,n.Translation=e,new t(n)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}};HC.TranslationHypothesis=YT});var J$=h($C=>{"use strict";Object.defineProperty($C,"__esModule",{value:!0});$C.TranslationPhrase=void 0;var Yce=W(),Xce=M(),eue=Ug(),XT=class t{constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=Xce.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=eue.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new t(JSON.parse(e))}static fromTranslationResponse(e){Yce.Contracts.throwIfNullOrUndefined(e,"translationResponse");let n=e.SpeechPhrase;return e.SpeechPhrase=void 0,n.Translation=e,n.Text=n.DisplayText,new t(n)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};$C.TranslationPhrase=XT});var Z$=h(WC=>{"use strict";Object.defineProperty(WC,"__esModule",{value:!0});WC.TranslationServiceRecognizer=void 0;var Q$=j(),we=D(),Ut=M(),eA=class extends Ut.ConversationServiceRecognizer{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privTranslationRecognizer=o,this.connectionEvents.attach(s=>{s.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}processTypeSpecificMessages(e){return v(this,null,function*(){let n=new we.PropertyCollection,r=yield this.processSpeechMessages(e);if(r)return!0;let i=s=>v(this,null,function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),s.RecognitionStatus===Ut.RecognitionStatus.Success){let a=this.fireEventForResult(s,n);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,a)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a.result)}catch(c){this.privErrorCallback&&this.privErrorCallback(c)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{let a=Ut.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus),c=new we.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,a,s.Text,s.Duration,this.privRequestSession.currentTurnAudioOffset+s.Offset,s.Language,s.Confidence,void 0,e.textBody,n);if(a===we.ResultReason.Canceled){let u=Ut.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),l=Ut.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);yield this.cancelRecognitionLocal(u,l,Ut.EnumTranslation.implTranslateErrorDetails(l))}else{if(!(this.privRequestSession.isSpeechEnded&&a===we.ResultReason.NoMatch&&s.RecognitionStatus!==Ut.RecognitionStatus.InitialSilenceTimeout)){let u=new we.TranslationRecognitionEventArgs(c,c.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(c)}catch(u){this.privErrorCallback&&this.privErrorCallback(u)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}r=!0}}),o=(s,a)=>{let c=this.fireEventForResult(s,a);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+c.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}r=!0};switch(e.messageType===Q$.MessageType.Text&&n.setProperty(we.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":o(Ut.TranslationHypothesis.fromJSON(e.textBody),n);break;case"translation.response":let s=JSON.parse(e.textBody);if(s.SpeechPhrase)yield i(Ut.TranslationPhrase.fromTranslationResponse(s));else{let c=JSON.parse(e.textBody);c.SpeechHypothesis&&o(Ut.TranslationHypothesis.fromTranslationResponse(c),n)}break;case"translation.phrase":yield i(Ut.TranslationPhrase.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),r=!0;break;case"audio.end":case"translation.synthesis.end":let a=Ut.TranslationSynthesisEnd.fromJSON(e.textBody);switch(a.SynthesisStatus){case Ut.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){let c=new we.TranslationSynthesisResult(we.ResultReason.Canceled,void 0),u=new we.TranslationSynthesisEventArgs(c,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}if(this.privTranslationRecognizer.canceled){let c=new we.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,we.CancellationReason.Error,a.FailureReason,we.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,c)}catch{}}break;case Ut.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break;default:break}r=!0;break;default:break}return r})}cancelRecognition(e,n,r,i,o){let s=new we.PropertyCollection;if(s.setProperty(Ut.CancellationErrorCodePropertyName,we.CancellationErrorCode[i]),this.privTranslationRecognizer.canceled){let a=new we.TranslationRecognitionCanceledEventArgs(e,r,o,i,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new we.TranslationRecognitionResult(void 0,n,we.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(e,n,r){try{let i=new we.TranslationRecognitionEventArgs(we.TranslationRecognitionResult.fromSpeechRecognitionResult(e),n,r);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch{}}handleRecognizedCallback(e,n,r){try{let i=new we.TranslationRecognitionEventArgs(we.TranslationRecognitionResult.fromSpeechRecognitionResult(e),n,r);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,i)}catch{}}fireEventForResult(e,n){let r;if(e.Translation.Translations!==void 0){r=new we.Translations;for(let l of e.Translation.Translations)r.set(l.Language,l.Text||l.DisplayText)}let i,o;e instanceof Ut.TranslationPhrase?(e.Translation&&e.Translation.TranslationStatus===Q$.TranslationStatus.Success?i=we.ResultReason.TranslatedSpeech:i=we.ResultReason.RecognizedSpeech,o=e.Confidence):i=we.ResultReason.TranslatingSpeech;let s=e.Language,a=e.Offset+this.privRequestSession.currentTurnAudioOffset,c=new we.TranslationRecognitionResult(r,this.privRequestSession.requestId,i,e.Text,e.Duration,a,s,o,e.Translation.FailureReason,JSON.stringify(e),n);return new we.TranslationRecognitionEventArgs(c,a,this.privRequestSession.sessionId)}sendSynthesisAudio(e,n){let r=e===void 0?we.ResultReason.SynthesizingAudioCompleted:we.ResultReason.SynthesizingAudio,i=new we.TranslationSynthesisResult(r,e),o=new we.TranslationSynthesisEventArgs(i,n);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,o)}catch{}}};WC.TranslationServiceRecognizer=eA});var Y$=h(GC=>{"use strict";Object.defineProperty(GC,"__esModule",{value:!0});GC.SpeechDetected=void 0;var tA=class t{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new t(e)}get Offset(){return this.privSpeechStartDetected.Offset}};GC.SpeechDetected=tA});var X$=h(KC=>{"use strict";Object.defineProperty(KC,"__esModule",{value:!0});KC.SpeechHypothesis=void 0;var nA=class t{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new t(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};KC.SpeechHypothesis=nA});var e3=h(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});JC.SpeechKeyword=void 0;var rA=class t{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new t(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}};JC.SpeechKeyword=rA});var t3=h(QC=>{"use strict";Object.defineProperty(QC,"__esModule",{value:!0});QC.SpeechServiceRecognizer=void 0;var Pt=D(),ur=M(),iA=class extends ur.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privSpeechRecognizer=o}processTypeSpecificMessages(e){return v(this,null,function*(){let n,r=new Pt.PropertyCollection;r.setProperty(Pt.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let i=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let o=ur.SpeechHypothesis.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset;n=new Pt.SpeechRecognitionResult(this.privRequestSession.requestId,Pt.ResultReason.RecognizingSpeech,o.Text,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(s);let a=new Pt.SpeechRecognitionEventArgs(n,o.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,a)}catch{}i=!0;break;case"speech.phrase":let c=ur.SimpleSpeechPhrase.fromJSON(e.textBody),u=ur.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+c.Offset+c.Duration),Pt.ResultReason.Canceled===u){let l=ur.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),d=ur.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(l,d,ur.EnumTranslation.implTranslateErrorDetails(d))}else{if(!(this.privRequestSession.isSpeechEnded&&u===Pt.ResultReason.NoMatch&&c.RecognitionStatus!==ur.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(ur.OutputFormatPropertyName)===Pt.OutputFormat[Pt.OutputFormat.Simple])n=new Pt.SpeechRecognitionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,e.textBody,r);else{let d=ur.DetailedSpeechPhrase.fromJSON(e.textBody),p=d.Offset+this.privRequestSession.currentTurnAudioOffset,f=d.getJsonWithCorrectedOffsets(p);n=new Pt.SpeechRecognitionResult(this.privRequestSession.requestId,u,d.RecognitionStatus===ur.RecognitionStatus.Success?d.NBest[0].Display:void 0,d.Duration,p,d.Language,d.LanguageDetectionConfidence,void 0,void 0,f,r)}let l=new Pt.SpeechRecognitionEventArgs(n,n.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(n)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0;break;default:break}return i})}cancelRecognition(e,n,r,i,o){let s=new Pt.PropertyCollection;if(s.setProperty(ur.CancellationErrorCodePropertyName,Pt.CancellationErrorCode[i]),this.privSpeechRecognizer.canceled){let a=new Pt.SpeechRecognitionCanceledEventArgs(r,o,i,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Pt.SpeechRecognitionResult(n,Pt.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}};QC.SpeechServiceRecognizer=iA});var n3=h(ZC=>{"use strict";Object.defineProperty(ZC,"__esModule",{value:!0});ZC.ConversationTranscriptionServiceRecognizer=void 0;var an=D(),lr=M(),oA=class extends lr.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privConversationTranscriber=o,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){let e=this.privSpeechContext.getSection("phraseDetection");e.mode="Conversation";let n={};n.mode="Anonymous",n.audioSessionId=this.privDiarizationSessionId,n.audioOffsetMs=0,e.speakerDiarization=n,this.privSpeechContext.setSection("phraseDetection",e)}}processTypeSpecificMessages(e){return v(this,null,function*(){let n,r=new an.PropertyCollection;r.setProperty(an.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let i=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let o=lr.SpeechHypothesis.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset;n=new an.ConversationTranscriptionResult(this.privRequestSession.requestId,an.ResultReason.RecognizingSpeech,o.Text,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(s);let a=new an.ConversationTranscriptionEventArgs(n,o.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,a)}catch{}i=!0;break;case"speech.phrase":let c=lr.SimpleSpeechPhrase.fromJSON(e.textBody),u=lr.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+c.Offset+c.Duration),an.ResultReason.Canceled===u){let l=lr.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),d=lr.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(l,d,lr.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&u===an.ResultReason.NoMatch&&c.RecognitionStatus!==lr.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(lr.OutputFormatPropertyName)===an.OutputFormat[an.OutputFormat.Simple])n=new an.ConversationTranscriptionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,e.textBody,r);else{let d=lr.DetailedSpeechPhrase.fromJSON(e.textBody),p=d.Offset+this.privRequestSession.currentTurnAudioOffset,f=d.getJsonWithCorrectedOffsets(p);n=new an.ConversationTranscriptionResult(this.privRequestSession.requestId,u,d.RecognitionStatus===lr.RecognitionStatus.Success?d.NBest[0].Display:void 0,d.Duration,p,d.Language,d.LanguageDetectionConfidence,c.SpeakerId,void 0,f,r)}let l=new an.ConversationTranscriptionEventArgs(n,n.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,l)}catch{}}i=!0;break;default:break}return i})}cancelRecognition(e,n,r,i,o){if(new an.PropertyCollection().setProperty(lr.CancellationErrorCodePropertyName,an.CancellationErrorCode[i]),this.privConversationTranscriber.canceled){let a=new an.ConversationTranscriptionCanceledEventArgs(r,o,i,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,a)}catch{}}}};ZC.ConversationTranscriptionServiceRecognizer=oA});var i3=h(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});YC.TranscriptionServiceRecognizer=void 0;var tue=j(),Xi=D(),r3=M(),nue=va(),sA=class extends r3.ConversationServiceRecognizer{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privTranscriberRecognizer=o,this.sendPrePayloadJSONOverride=s=>this.sendTranscriptionStartJSON(s),this.privRecognizerConfig.parameters.getProperty(Xi.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(e,n){return v(this,null,function*(){if(this.privRequestSession.isRecognizing){let r=yield this.fetchConnection();yield this.sendSpeechEvent(r,this.createSpeechEventPayload(e,n))}})}sendMeetingSpeechEventAsync(e,n){return v(this,null,function*(){if(this.privRequestSession.isRecognizing){let r=yield this.fetchConnection();yield this.sendSpeechEvent(r,this.createMeetingSpeechEventPayload(e,n))}})}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,n,r){try{let i=new Xi.SpeechRecognitionEventArgs(e,n,r);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,i),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(o){this.privErrorCallback&&this.privErrorCallback(o)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(e,n,r){try{let i=new Xi.SpeechRecognitionEventArgs(e,n,r);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,i)}catch{}}cancelRecognition(e,n,r,i,o){let s=new Xi.PropertyCollection;if(s.setProperty(r3.CancellationErrorCodePropertyName,Xi.CancellationErrorCode[i]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){let a=new Xi.MeetingTranscriptionCanceledEventArgs(r,o,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch{}}}else if(this.privTranscriberRecognizer.canceled){let a=new Xi.ConversationTranscriptionCanceledEventArgs(r,o,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Xi.SpeechRecognitionResult(n,Xi.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}sendTranscriptionStartJSON(e){return v(this,null,function*(){if(yield this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){let n=this.privTranscriberRecognizer.getMeetingInfo(),r=this.createMeetingSpeechEventPayload(n,"start");yield this.sendSpeechEvent(e,r)}else{let n=this.privTranscriberRecognizer.getConversationInfo(),r=this.createSpeechEventPayload(n,"start");yield this.sendSpeechEvent(e,r)}yield this.sendWaveHeader(e)})}sendSpeechEvent(e,n){let r=JSON.stringify(n);if(r)return e.send(new nue.SpeechConnectionMessage(tue.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",r))}createSpeechEventPayload(e,n){let r={id:"meeting",name:n,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r}createMeetingSpeechEventPayload(e,n){let r={id:"meeting",name:n,meeting:e.meetingProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r}};YC.TranscriptionServiceRecognizer=sA});var o3=h(XC=>{"use strict";Object.defineProperty(XC,"__esModule",{value:!0});XC.DetailedSpeechPhrase=void 0;var rue=M(),aA=class t{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=rue.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new t(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let n;for(let r of this.privDetailedSpeechPhrase.NBest)if(r.Words&&r.Words[0]){n=r.Words[0].Offset;break}if(n&&n<e){let r=e-n;for(let i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(let o of i.Words)o.Offset+=r;if(i.DisplayWords)for(let o of i.DisplayWords)o.Offset+=r}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};XC.DetailedSpeechPhrase=aA});var s3=h(eS=>{"use strict";Object.defineProperty(eS,"__esModule",{value:!0});eS.SimpleSpeechPhrase=void 0;var iue=M(),cA=class t{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=iue.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new t(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};eS.SimpleSpeechPhrase=cA});var a3=h(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});tS.AddedLmIntent=void 0;var uA=class{constructor(e,n){this.modelImpl=e,this.intentName=n}};tS.AddedLmIntent=uA});var u3=h(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});nS.IntentServiceRecognizer=void 0;var c3=j(),rt=D(),Fu=M(),lA=class extends Fu.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privIntentRecognizer=o,this.privIntentDataSent=!1}setIntents(e,n){this.privAddedLmIntents=e,this.privUmbrellaIntent=n,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let n,r,i=!1,o=new rt.PropertyCollection;switch(e.messageType===c3.MessageType.Text&&o.setProperty(rt.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":let a=Fu.SpeechHypothesis.fromJSON(e.textBody);if(n=new rt.IntentRecognitionResult(void 0,this.privRequestSession.requestId,rt.ResultReason.RecognizingIntent,a.Text,a.Duration,a.Offset+this.privRequestSession.currentTurnAudioOffset,a.Language,a.LanguageDetectionConfidence,void 0,e.textBody,o),this.privRequestSession.onHypothesis(n.offset),r=new rt.IntentRecognitionEventArgs(n,a.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,r)}catch{}i=!0;break;case"speech.phrase":let c=Fu.SimpleSpeechPhrase.fromJSON(e.textBody);n=new rt.IntentRecognitionResult(void 0,this.privRequestSession.requestId,Fu.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus),c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,e.textBody,o),r=new rt.IntentRecognitionEventArgs(n,n.offset,this.privRequestSession.sessionId);let u=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(n)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||rt.ResultReason.NoMatch===r.result.reason?(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),u()):this.privPendingIntentArgs=r,i=!0;break;case"response":if(r=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,r===void 0){if(e.textBody==="")return;r=new rt.IntentRecognitionEventArgs(new rt.IntentRecognitionResult,0,this.privRequestSession.sessionId)}let l=Fu.IntentResponse.fromJSON(e.textBody);if(l!==null&&l.topScoringIntent&&l.topScoringIntent.intent){let d=this.privAddedLmIntents[l.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(d=this.privUmbrellaIntent),d){let p=d===void 0||d.intentName===void 0?l.topScoringIntent.intent:d.intentName,f=r.result.reason;p!==void 0&&(f=rt.ResultReason.RecognizedIntent);let g=r.result.properties!==void 0?r.result.properties:new rt.PropertyCollection;g.setProperty(rt.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),r=new rt.IntentRecognitionEventArgs(new rt.IntentRecognitionResult(p,r.result.resultId,f,r.result.text,r.result.duration,r.result.offset,void 0,void 0,r.result.errorDetails,r.result.json,g),r.offset,r.sessionId)}}if(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(r.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}i=!0;break;default:break}let s=new c3.Deferred;return s.resolve(i),s.promise}cancelRecognition(e,n,r,i,o){let s=new rt.PropertyCollection;if(s.setProperty(Fu.CancellationErrorCodePropertyName,rt.CancellationErrorCode[i]),this.privIntentRecognizer.canceled){let a=new rt.IntentRecognitionCanceledEventArgs(r,o,i,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new rt.IntentRecognitionResult(void 0,n,rt.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}};nS.IntentServiceRecognizer=lA});var l3=h(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});rS.IntentResponse=void 0;var dA=class t{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}};rS.IntentResponse=dA});var p3=h(d3=>{"use strict";Object.defineProperty(d3,"__esModule",{value:!0})});var h3=h(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});iS.ServiceTelemetryListener=void 0;var eo=j(),f3=AC(),pA=class{constructor(e,n,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=n,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof f3.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof eo.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof eo.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof eo.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof eo.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof eo.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof f3.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof eo.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof eo.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof eo.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof eo.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){let e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});let n={Metrics:e,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(n);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}};iS.ServiceTelemetryListener=pA});var g3=h(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});sS.RequestSession=void 0;var ju=j(),oS=AC(),oue=h3(),fA=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=ju.createNoDashGuid(),this.privAudioNodeId=ju.createNoDashGuid(),this.privTurnDeferral=new ju.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new oue.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new oS.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,n){return v(this,null,function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,n?yield this.onComplete():this.onEvent(new oS.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(e,n){this.privAuthFetchEventId=e,this.privSessionId=n,this.onEvent(new oS.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return v(this,null,function*(){e&&(yield this.onComplete())})}onConnectionEstablishCompleted(e,n){return v(this,null,function*(){if(e===200){this.onEvent(new oS.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&(yield this.onComplete())})}onServiceTurnEndResponse(e){return v(this,null,function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=ju.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new ju.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return v(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(let e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return v(this,null,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),ju.Events.instance.onEvent(e)}onComplete(){return v(this,null,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return v(this,null,function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}};sS.RequestSession=fA});var v3=h(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0});aS.SpeechContext=void 0;var hA=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,n){this.privContext[e]=n}setPronunciationAssessmentParams(e,n,r=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),r&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),n&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:n},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){let e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}};aS.SpeechContext=hA});var m3=h(cS=>{"use strict";Object.defineProperty(cS,"__esModule",{value:!0});cS.DynamicGrammarBuilder=void 0;var gA=class{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;let e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){let n=[];this.privPhrases.forEach(r=>{n.push({Text:r})}),e.Groups=[{Type:"Generic",Items:n}]}return e}};cS.DynamicGrammarBuilder=gA});var C3=h(y3=>{"use strict";Object.defineProperty(y3,"__esModule",{value:!0})});var mA=h(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.MessageDataStreamType=ya.ActivityPayloadResponse=void 0;var vA=class t{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}};ya.ActivityPayloadResponse=vA;var sue;(function(t){t[t.None=0]="None",t[t.TextToSpeechAudio=1]="TextToSpeechAudio"})(sue=ya.MessageDataStreamType||(ya.MessageDataStreamType={}))});var S3=h(uS=>{"use strict";Object.defineProperty(uS,"__esModule",{value:!0});uS.DialogServiceTurnState=void 0;var aue=fu(),cue=Ys(),uue=mA(),yA=class{constructor(e,n){this.privRequestId=n,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,n){return e.messageDataStreamType===uue.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=cue.AudioOutputStream.createPullStream(),this.privAudioStream.format=n!==void 0?n:aue.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};uS.DialogServiceTurnState=yA});var b3=h(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0});lS.DialogServiceTurnStateManager=void 0;var w3=Ir(),lue=S3(),CA=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new w3.InvalidOperationError("Service error: There is already a turn with id:"+e);let n=new lue.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,n),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new w3.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);let n=this.privTurnMap.get(e);return n.complete(),this.privTurnMap.delete(e),n}};lS.DialogServiceTurnStateManager=CA});var E3=h(pS=>{"use strict";Object.defineProperty(pS,"__esModule",{value:!0});pS.DialogServiceAdapter=void 0;var due=dt(),pue=jD(),Ht=j(),fue=fu(),ge=D(),hue=b3(),vi=M(),gue=mA(),dS=va(),SA=class extends vi.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privEvents=new Ht.EventSource,this.privDialogServiceConnector=o,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new hue.DialogServiceTurnStateManager,this.recognizeOverride=(s,a,c)=>this.listenOnce(s,a,c),this.postConnectImplOverride=s=>this.dialogConnectImpl(s),this.configConnectionOverride=s=>this.configConnection(s),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=r,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(s=>{s.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}sendMessage(e){return v(this,null,function*(){let n=Ht.createGuid(),r=Ht.createNoDashGuid(),i={context:{interactionId:n},messagePayload:JSON.parse(e),version:.5},o=JSON.stringify(i);yield(yield this.fetchConnection()).send(new dS.SpeechConnectionMessage(Ht.MessageType.Text,"agent",r,"application/json",o))})}privDisconnect(){return v(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ge.CancellationReason.Error,ge.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1})}processTypeSpecificMessages(e){let n=new ge.PropertyCollection;e.messageType===Ht.MessageType.Text&&n.setProperty(ge.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let r,i;switch(e.path.toLowerCase()){case"speech.phrase":let s=vi.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),s.RecognitionStatus!==vi.RecognitionStatus.TooManyRequests&&s.RecognitionStatus!==vi.RecognitionStatus.Error){let p=this.fireEventForResult(s,n);if(this.privLastResult=p.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,p)}catch{}}i=!0;break;case"speech.hypothesis":let a=vi.SpeechHypothesis.fromJSON(e.textBody),c=a.Offset+this.privRequestSession.currentTurnAudioOffset;r=new ge.SpeechRecognitionResult(this.privRequestSession.requestId,ge.ResultReason.RecognizingSpeech,a.Text,a.Duration,c,a.Language,a.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(c);let u=new ge.SpeechRecognitionEventArgs(r,a.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,u)}catch{}i=!0;break;case"speech.keyword":let l=vi.SpeechKeyword.fromJSON(e.textBody);r=new ge.SpeechRecognitionResult(this.privRequestSession.requestId,l.Status==="Accepted"?ge.ResultReason.RecognizedKeyword:ge.ResultReason.NoMatch,l.Text,l.Duration,l.Offset,void 0,void 0,void 0,void 0,e.textBody,n),l.Status!=="Accepted"&&(this.privLastResult=r);let d=new ge.SpeechRecognitionEventArgs(r,r.duration,r.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,d)}catch{}i=!0;break;case"audio":{let p=e.requestId.toUpperCase(),f=this.privTurnStateManager.GetTurn(p);try{e.binaryBody?f.audioStream.write(e.binaryBody):f.endAudioStream()}catch{}}i=!0;break;case"response":this.handleResponseMessage(e),i=!0;break;default:break}let o=new Ht.Deferred;return o.resolve(i),o.promise}cancelRecognition(e,n,r,i,o){return v(this,null,function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){let s=new ge.PropertyCollection;s.setProperty(vi.CancellationErrorCodePropertyName,ge.CancellationErrorCode[i]);let a=new ge.SpeechRecognitionCanceledEventArgs(r,o,i,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,a)}catch{}if(this.privSuccessCallback){let c=new ge.SpeechRecognitionResult(void 0,ge.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(c),this.privSuccessCallback=void 0}catch{}}}})}listenOnce(e,n,r){return v(this,null,function*(){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=n,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(ge.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let i=this.connectImpl(),o=this.sendPreAudioMessages(),s=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,u=new due.ReplayableAudioNode(s,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield i,yield o}catch(p){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ge.CancellationReason.Error,ge.CancellationErrorCode.ConnectionFailure,p),Promise.resolve()}let l=new ge.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.sendAudio(u).then(()=>{},p=>v(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ge.CancellationReason.Error,ge.CancellationErrorCode.RuntimeError,p)}))})}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){let e=new Ht.Deferred,n=()=>v(this,null,function*(){try{let r=this.isDisposed(),i=!this.isDisposed()&&this.terminateMessageLoop;if(r||i){e.resolve(void 0);return}let s=yield(yield this.fetchConnection()).read();if(!s)return n();let a=dS.SpeechConnectionMessage.fromConnectionMessage(s);switch(a.path.toLowerCase()){case"turn.start":{let g=a.requestId.toUpperCase(),m=this.privRequestSession.requestId.toUpperCase();g!==m?this.privTurnStateManager.StartTurn(g):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":let u=vi.SpeechDetected.fromJSON(a.textBody),l=new ge.RecognitionEventArgs(u.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,l);break;case"speech.enddetected":let d;a.textBody.length>0?d=a.textBody:d="{ Offset: 0 }";let p=vi.SpeechDetected.fromJSON(d);this.privRequestSession.onServiceRecognized(p.Offset+this.privRequestSession.currentTurnAudioOffset);let f=new ge.RecognitionEventArgs(p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f);break;case"turn.end":{let g=a.requestId.toUpperCase(),m=this.privRequestSession.requestId.toUpperCase();if(g!==m)this.privTurnStateManager.CompleteTurn(g);else{let y=new ge.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,y),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(w){this.privErrorCallback&&this.privErrorCallback(w)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(a))||this.serviceEvents&&this.serviceEvents.onEvent(new Ht.ServiceEvent(a.path.toLowerCase(),a.textBody))}catch{}}return n()}catch{this.terminateMessageLoop=!0,e.resolve()}});return n().catch(r=>{Ht.Events.instance.onEvent(new Ht.BackgroundEvent(r))}),e.promise}startMessageLoop(){return v(this,null,function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ge.CancellationReason.Error,ge.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()})}configConnection(e){return v(this,null,function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)})}sendPreAudioMessages(){return v(this,null,function*(){let e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e,!0),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)})}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(ge.PropertyId.Conversation_DialogType)===ge.DialogServiceConfig.DialogTypes.CustomCommands){let r=this.agentConfig.get();r.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(ge.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(r)}this.onEvent(new pue.SendingAgentContextMessageEvent(this.agentConfig));let n=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new dS.SpeechConnectionMessage(Ht.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",n))}}sendAgentContext(e){let n=Ht.createGuid(),r=this.privDialogServiceConnector.properties.getProperty(ge.PropertyId.Conversation_Speech_Activity_Template),o=JSON.stringify({channelData:"",context:{interactionId:n},messagePayload:typeof r===void 0?void 0:r,version:.5});return e.send(new dS.SpeechConnectionMessage(Ht.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",o))}fireEventForResult(e,n){let r=vi.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),i=e.Offset+this.privRequestSession.currentTurnAudioOffset,o=new ge.SpeechRecognitionResult(this.privRequestSession.requestId,r,e.DisplayText,e.Duration,i,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),n);return new ge.SpeechRecognitionEventArgs(o,i,this.privRequestSession.sessionId)}handleResponseMessage(e){let n=JSON.parse(e.textBody);switch(n.messageType.toLowerCase()){case"message":let r=e.requestId.toUpperCase(),i=gue.ActivityPayloadResponse.fromJSON(e.textBody),o=this.privTurnStateManager.GetTurn(r);if(i.conversationId){let c=this.agentConfig.get();c.botInfo.conversationId=i.conversationId,this.agentConfig.set(c)}let s=o.processActivityPayload(i,fue.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(ge.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),a=new ge.ActivityReceivedEventArgs(i.messagePayload,s);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,a)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new ge.TurnStatusReceivedEventArgs(e.textBody))}catch{}break;default:Ht.Events.instance.onEvent(new Ht.BackgroundEvent(`Unexpected response of type ${n.messageType}. Ignoring.`));break}}onEvent(e){this.privEvents.onEvent(e),Ht.Events.instance.onEvent(e)}addKeywordContextData(){let e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(e===void 0)return;let n=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),i=e.split(";"),o=n===void 0?[]:n.split(";"),s=r===void 0?[]:r.split(";"),a=[];for(let c=0;c<i.length;c++){let u={};u.text=i[c],c<o.length&&(u.offset=Number(o[c])),c<s.length&&(u.duration=Number(s[c])),a.push(u)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:a,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};pS.DialogServiceAdapter=SA});var I3=h(fS=>{"use strict";Object.defineProperty(fS,"__esModule",{value:!0});fS.AgentConfig=void 0;var wA=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}};fS.AgentConfig=wA});var gS=h(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});hS.ConversationConnectionConfig=void 0;var vue=AT(),mi=class t extends vue.RestConfigBase{static get host(){return t.privHost}static get apiVersion(){return t.privApiVersion}static get clientAppId(){return t.privClientAppId}static get defaultLanguageCode(){return t.privDefaultLanguageCode}static get restPath(){return t.privRestPath}static get webSocketPath(){return t.privWebSocketPath}static get transcriptionEventKeys(){return t.privTranscriptionEventKeys}};hS.ConversationConnectionConfig=mi;mi.privHost="dev.microsofttranslator.com";mi.privRestPath="/capito/room";mi.privApiVersion="2.0";mi.privDefaultLanguageCode="en-US";mi.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";mi.privWebSocketPath="/capito/translate";mi.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]});var D3=h(mS=>{"use strict";Object.defineProperty(mS,"__esModule",{value:!0});mS.ConversationManager=void 0;var vS=dt(),rs=W(),to=D(),Ca=gS(),bA=class{constructor(){this.privRequestParams=Ca.ConversationConnectionConfig.configParams,this.privErrors=Ca.ConversationConnectionConfig.restErrors,this.privHost=Ca.ConversationConnectionConfig.host,this.privApiVersion=Ca.ConversationConnectionConfig.apiVersion,this.privRestPath=Ca.ConversationConnectionConfig.restPath,this.privRestAdapter=new vS.RestMessageAdapter({})}createOrJoin(e,n,r,i){try{rs.Contracts.throwIfNullOrUndefined(e,"args");let o=e.getProperty(to.PropertyId.SpeechServiceConnection_RecoLanguage,Ca.ConversationConnectionConfig.defaultLanguageCode),s=e.getProperty(to.PropertyId.ConversationTranslator_Name,"conversation_host"),a=e.getProperty(to.PropertyId.ConversationTranslator_Host,this.privHost),c=e.getProperty(to.PropertyId.ConversationTranslator_CorrelationId),u=e.getProperty(to.PropertyId.SpeechServiceConnection_Key),l=e.getProperty(to.PropertyId.SpeechServiceConnection_Region),d=e.getProperty(to.PropertyId.SpeechServiceAuthorization_Token);rs.Contracts.throwIfNullOrWhitespace(o,"languageCode"),rs.Contracts.throwIfNullOrWhitespace(s,"nickname"),rs.Contracts.throwIfNullOrWhitespace(a,"endpointHost");let p={};p[this.privRequestParams.apiVersion]=this.privApiVersion,p[this.privRequestParams.languageCode]=o,p[this.privRequestParams.nickname]=s;let f={};c&&(f[this.privRequestParams.correlationId]=c),f[this.privRequestParams.clientAppId]=Ca.ConversationConnectionConfig.clientAppId,n!==void 0?p[this.privRequestParams.roomId]=n:(rs.Contracts.throwIfNullOrUndefined(l,this.privErrors.authInvalidSubscriptionRegion),f[this.privRequestParams.subscriptionRegion]=l,u?f[this.privRequestParams.subscriptionKey]=u:d?f[this.privRequestParams.authorization]=`Bearer ${d}`:rs.Contracts.throwIfNullOrUndefined(u,this.privErrors.authInvalidSubscriptionKey));let g={};g.headers=f,this.privRestAdapter.options=g;let m=`https://${a}${this.privRestPath}`;this.privRestAdapter.request(vS.RestRequestType.Post,m,p,null).then(y=>{let w=vS.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,y.headers);if(!y.ok){if(i){let C=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",y.status.toString()),_;try{_=JSON.parse(y.data),C+=` [${_.error.code}: ${_.error.message}]`}catch{C+=` [${y.data}]`}w&&(C+=` ${w}`),i(C)}return}let I=JSON.parse(y.data);if(I&&(I.requestId=w),r){try{r(I)}catch(C){i&&i(C)}r=void 0}}).catch(()=>{})}catch(o){if(i)if(o instanceof Error){let s=o;i(s.name+": "+s.message)}else i(o)}}leave(e,n){return new Promise((r,i)=>{try{rs.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),rs.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","token"));let o=e.getProperty(to.PropertyId.ConversationTranslator_Host,this.privHost),s=e.getProperty(to.PropertyId.ConversationTranslator_CorrelationId),a={};a[this.privRequestParams.apiVersion]=this.privApiVersion,a[this.privRequestParams.sessionToken]=n;let c={};s&&(c[this.privRequestParams.correlationId]=s);let u={};u.headers=c,this.privRestAdapter.options=u;let l=`https://${o}${this.privRestPath}`;this.privRestAdapter.request(vS.RestRequestType.Delete,l,a,null).then(d=>{d.ok,r()}).catch(()=>{})}catch(o){if(o instanceof Error){let s=o;i(s.name+": "+s.message)}else i(o)}})}};mS.ConversationManager=bA});var IA=h(yS=>{"use strict";Object.defineProperty(yS,"__esModule",{value:!0});yS.ConversationConnectionMessage=void 0;var mue=j(),EA=class extends mue.ConnectionMessage{constructor(e,n,r,i){super(e,n,r,i);let o=JSON.parse(this.textBody);o.type!==void 0&&(this.privConversationMessageType=o.type)}get conversationMessageType(){return this.privConversationMessageType}};yS.ConversationConnectionMessage=EA});var R3=h(CS=>{"use strict";Object.defineProperty(CS,"__esModule",{value:!0});CS.ConversationWebsocketMessageFormatter=void 0;var Sa=j(),_3=IA(),DA=class{toConnectionMessage(e){let n=new Sa.Deferred;try{if(e.messageType===Sa.MessageType.Text){let r=new _3.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);n.resolve(r)}else e.messageType===Sa.MessageType.Binary&&n.resolve(new _3.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(e){let n=new Sa.Deferred;try{if(e.messageType===Sa.MessageType.Text){let r=`${e.textBody?e.textBody:""}`;n.resolve(new Sa.RawWebsocketMessage(Sa.MessageType.Text,r,e.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}};CS.ConversationWebsocketMessageFormatter=DA});var T3=h(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0});SS.ConversationConnectionFactory=void 0;var P3=dt(),yue=j(),Cue=W(),_A=D(),Sue=ir(),Lu=gS(),wue=R3(),RA=class extends Sue.ConnectionFactoryBase{create(e,n,r){let i=e.parameters.getProperty(_A.PropertyId.ConversationTranslator_Host,Lu.ConversationConnectionConfig.host),o=e.parameters.getProperty(_A.PropertyId.ConversationTranslator_CorrelationId,yue.createGuid()),s=`wss://${i}${Lu.ConversationConnectionConfig.webSocketPath}`,a=e.parameters.getProperty(_A.PropertyId.ConversationTranslator_Token,void 0);Cue.Contracts.throwIfNullOrUndefined(a,"token");let c={};c[Lu.ConversationConnectionConfig.configParams.apiVersion]=Lu.ConversationConnectionConfig.apiVersion,c[Lu.ConversationConnectionConfig.configParams.token]=a,c[Lu.ConversationConnectionConfig.configParams.correlationId]=o;let u=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new P3.WebsocketConnection(s,c,{},new wue.ConversationWebsocketMessageFormatter,P3.ProxyInfo.fromRecognizerConfig(e),u,r)}};SS.ConversationConnectionFactory=RA});var A3=h(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0});wS.ConversationRequestSession=void 0;var PA=j(),TA=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=PA.createNoDashGuid(),this.privRequestCompletionDeferral=new PA.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,n){this.privSessionId=n}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=PA.createNoDashGuid():this.onComplete()}dispose(){return v(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(let e of this.privDetachables)yield e.detach()}})}onComplete(){}};wS.ConversationRequestSession=TA});var FA=h(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.ConversationReceivedTranslationEventArgs=Dn.ParticipantsListEventArgs=Dn.ParticipantAttributeEventArgs=Dn.ParticipantEventArgs=Dn.LockRoomEventArgs=Dn.MuteAllEventArgs=void 0;var Ep=D(),AA=class extends Ep.SessionEventArgs{constructor(e,n){super(n),this.privIsMuted=e}get isMuted(){return this.privIsMuted}};Dn.MuteAllEventArgs=AA;var MA=class extends Ep.SessionEventArgs{constructor(e,n){super(n),this.privIsLocked=e}get isMuted(){return this.privIsLocked}};Dn.LockRoomEventArgs=MA;var OA=class extends Ep.SessionEventArgs{constructor(e,n){super(n),this.privParticipant=e}get participant(){return this.privParticipant}};Dn.ParticipantEventArgs=OA;var xA=class extends Ep.SessionEventArgs{constructor(e,n,r,i){super(i),this.privKey=n,this.privValue=r,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}};Dn.ParticipantAttributeEventArgs=xA;var NA=class extends Ep.SessionEventArgs{constructor(e,n,r,i,o,s,a,c,u){super(u),this.privRoomId=e,this.privSessionToken=n,this.privTranslateTo=r,this.privProfanityFilter=i,this.privRoomProfanityFilter=o,this.privIsRoomLocked=s,this.privIsRoomLocked=a,this.privParticipants=c}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}};Dn.ParticipantsListEventArgs=NA;var kA=class{constructor(e,n,r){this.privPayload=n,this.privCommand=e,this.privSessionId=r}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}};Dn.ConversationReceivedTranslationEventArgs=kA});var LA=h(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.ConversationTranslatorCommandTypes=is.ConversationTranslatorMessageTypes=is.InternalParticipants=void 0;var jA=class{constructor(e=[],n){this.participants=e,this.meId=n}addOrUpdateParticipant(e){if(e===void 0)return;let n=this.getParticipantIndex(e.id);return n>-1?this.participants.splice(n,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(n=>n.id===e)}getParticipant(e){return this.participants.find(n=>n.id===e)}deleteParticipant(e){this.participants=this.participants.filter(n=>n.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}};is.InternalParticipants=jA;is.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};is.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}});var M3=h(bS=>{"use strict";Object.defineProperty(bS,"__esModule",{value:!0});bS.CommandResponsePayload=void 0;var bue=t=>JSON.parse(t),qA=class t{constructor(e){this.privCommandResponse=bue(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new t(e)}};bS.CommandResponsePayload=qA});var O3=h(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.ParticipantPayloadResponse=qu.ParticipantsListPayloadResponse=void 0;var Eue=t=>JSON.parse(t),Iue=t=>JSON.parse(t),BA=class t{constructor(e){this.privParticipantsPayloadResponse=Eue(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new t(e)}};qu.ParticipantsListPayloadResponse=BA;var VA=class t{constructor(e){this.privParticipantPayloadResponse=Iue(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new t(e)}};qu.ParticipantPayloadResponse=VA});var x3=h(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.TextResponsePayload=Bu.SpeechResponsePayload=void 0;var Due=t=>JSON.parse(t),_ue=t=>JSON.parse(t),zA=class t{constructor(e){this.privSpeechResponse=Due(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new t(e)}};Bu.SpeechResponsePayload=zA;var UA=class t{constructor(e){this.privTextResponse=_ue(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new t(e)}};Bu.TextResponsePayload=UA});var F3=h(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});var Rue=M3();Object.defineProperty(wa,"CommandResponsePayload",{enumerable:!0,get:function(){return Rue.CommandResponsePayload}});var N3=O3();Object.defineProperty(wa,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return N3.ParticipantsListPayloadResponse}});Object.defineProperty(wa,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return N3.ParticipantPayloadResponse}});var k3=x3();Object.defineProperty(wa,"SpeechResponsePayload",{enumerable:!0,get:function(){return k3.SpeechResponsePayload}});Object.defineProperty(wa,"TextResponsePayload",{enumerable:!0,get:function(){return k3.TextResponsePayload}})});var q3=h(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});ES.ConversationServiceAdapter=void 0;var Ip=j(),kr=D(),j3=M(),L3=IA(),Pue=A3(),jn=FA(),os=LA(),Dp=F3(),HA=class t extends j3.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=o,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=s=>this.conversationConnectImpl(s),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new Pue.ConversationRequestSession(Ip.createNoDashGuid()),this.privConversationConnectionFactory=n,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){return v(this,null,function*(){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&(yield(yield this.privConnectionConfigPromise).dispose(e)),yield Ye(t.prototype,this,"dispose").call(this,e)})}sendMessage(e){return v(this,null,function*(){return(yield this.fetchConnection()).send(new L3.ConversationConnectionMessage(Ip.MessageType.Text,e))})}sendMessageAsync(e){return v(this,null,function*(){yield(yield this.fetchConnection()).send(new L3.ConversationConnectionMessage(Ip.MessageType.Text,e))})}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,kr.CancellationReason.Error,kr.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return v(this,null,function*(){return!0})}cancelRecognition(e,n,r,i,o){this.terminateMessageLoop=!0;let s=new kr.ConversationTranslationCanceledEventArgs(r,o,i,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,s)}catch{}}conversationConnectImpl(e){return v(this,null,function*(){return this.privConnectionLoop=this.startMessageLoop(),e})}receiveConversationMessageOverride(){return v(this,null,function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();let e=new Ip.Deferred;try{let r=yield(yield this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!r)return this.receiveConversationMessageOverride();let i=this.privConversationRequestSession.sessionId,o=r.conversationMessageType.toLowerCase(),s=!1;try{switch(o){case"info":case"participant_command":case"command":let a=Dp.CommandResponsePayload.fromJSON(r.textBody);switch(a.command.toLowerCase()){case"participantlist":let f=Dp.ParticipantsListPayloadResponse.fromJSON(r.textBody),g=f.participants.map(_=>({avatar:_.avatar,displayName:_.nickname,id:_.participantId,isHost:_.ishost,isMuted:_.ismuted,isUsingTts:_.usetts,preferredLanguage:_.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new jn.ParticipantsListEventArgs(f.roomid,f.token,f.translateTo,f.profanityFilter,f.roomProfanityFilter,f.roomLocked,f.muteAll,g,i));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new jn.ParticipantAttributeEventArgs(a.participantId,os.ConversationTranslatorCommandTypes.setTranslateToLanguages,a.value,i));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new jn.ParticipantAttributeEventArgs(a.participantId,os.ConversationTranslatorCommandTypes.setProfanityFiltering,a.value,i));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new jn.ParticipantAttributeEventArgs(a.participantId,os.ConversationTranslatorCommandTypes.setMute,a.value,i));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new jn.MuteAllEventArgs(a.value,i));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new kr.ConversationExpirationEventArgs(a.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new jn.ParticipantAttributeEventArgs(a.participantId,os.ConversationTranslatorCommandTypes.setUseTTS,a.value,i));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new jn.LockRoomEventArgs(a.value,i));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new jn.ParticipantAttributeEventArgs(a.participantId,os.ConversationTranslatorCommandTypes.changeNickname,a.value,i));break;case"joinsession":let m=Dp.ParticipantPayloadResponse.fromJSON(r.textBody),y={avatar:m.avatar,displayName:m.nickname,id:m.participantId,isHost:m.ishost,isMuted:m.ismuted,isUsingTts:m.usetts,preferredLanguage:m.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new jn.ParticipantEventArgs(y,i));break;case"leavesession":let w={id:a.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new jn.ParticipantEventArgs(w,i));break;case"disconnectsession":let I={id:a.participantId};break;case"token":let C=new j3.CognitiveTokenAuthentication(()=>{let _=a.token;return Promise.resolve(_)},()=>{let _=a.token;return Promise.resolve(_)});this.authentication=C,this.privConversationServiceConnector.onToken(C);break;default:break}break;case"partial":case"final":let c=Dp.SpeechResponsePayload.fromJSON(r.textBody),u=o==="final"?kr.ResultReason.TranslatedParticipantSpeech:kr.ResultReason.TranslatingParticipantSpeech,l=new kr.ConversationTranslationResult(c.participantId,this.getTranslations(c.translations),c.language,c.id,u,c.recognition,void 0,void 0,r.textBody,void 0);c.isFinal?((l.text!==void 0&&l.text.length>0||c.id===this.privLastPartialUtteranceId)&&(s=!0),s&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new jn.ConversationReceivedTranslationEventArgs(os.ConversationTranslatorMessageTypes.final,l,i))):l.text!==void 0&&(this.privLastPartialUtteranceId=c.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new jn.ConversationReceivedTranslationEventArgs(os.ConversationTranslatorMessageTypes.partial,l,i)));break;case"translated_message":let d=Dp.TextResponsePayload.fromJSON(r.textBody),p=new kr.ConversationTranslationResult(d.participantId,this.getTranslations(d.translations),d.language,void 0,void 0,d.originalText,void 0,void 0,void 0,r.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new jn.ConversationReceivedTranslationEventArgs(os.ConversationTranslatorMessageTypes.instantMessage,p,i));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return e.promise})}startMessageLoop(){return v(this,null,function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;let e=this.receiveConversationMessageOverride();try{return yield e}catch(n){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",kr.CancellationReason.Error,kr.CancellationErrorCode.RuntimeError,n),null}})}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(e=>e.state()===Ip.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(e=>e),this.privConnectionConfigPromise)}getTranslations(e){let n;if(e!==void 0){n=new kr.Translations;for(let r of e)n.set(r.lang,r.translation)}return n}};ES.ConversationServiceAdapter=HA});var B3=h(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.ConversationTranslatorRecognizer=Uu.ConversationRecognizerFactory=void 0;var Tue=M(),Vu=j(),zu=W(),$A=D(),Aue=T3(),Mue=q3(),WA=class{static fromConfig(e,n,r){return new IS(e,n,r)}};Uu.ConversationRecognizerFactory=WA;var IS=class t extends $A.Recognizer{constructor(e,n,r){let i=n;zu.Contracts.throwIfNull(i,"speechConfig");let o=e;zu.Contracts.throwIfNull(o,"conversationImpl"),super(r,i.properties,new Aue.ConversationConnectionFactory),this.privConversation=o,this.privIsDisposed=!1,this.privProperties=i.properties.clone(),this.privConnection=$A.Connection.fromRecognizer(this),this.privProperties.getProperty($A.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=Vu.Timeout.setTimeout,this.privClearTimeout=Vu.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,n,r){try{zu.Contracts.throwIfDisposed(this.privIsDisposed),zu.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(n,r)}catch(i){if(r)if(i instanceof Error){let o=i;r(o.name+": "+o.message)}else r(i)}}disconnect(e,n){try{zu.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{e&&e()},r=>{n&&n(r)})}catch(r){if(n)if(r instanceof Error){let i=r;n(i.name+": "+i.message)}else n(r);this.dispose(!0).catch(i=>{Vu.Events.instance.onEvent(new Vu.BackgroundEvent(i))})}}sendRequest(e,n,r){try{zu.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,n,r)}catch(i){if(r)if(i instanceof Error){let o=i;r(o.name+": "+o.message)}else r(i);this.dispose(!0).catch(o=>{Vu.Events.instance.onEvent(new Vu.BackgroundEvent(o))})}}onToken(e){this.privConversation.onToken(e)}close(){return v(this,null,function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))})}dispose(e){return v(this,null,function*(){this.privIsDisposed||e&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield Ye(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new Tue.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){let o=r;return new Mue.ConversationServiceAdapter(e,n,o,i,this)}sendMessage(e,n,r){let i=this.privReco;((s,a,c)=>{s!==void 0?s.then(()=>{try{a&&a()}catch(u){c&&c(`'Unhandled error on promise callback: ${u}'`)}},u=>{try{c&&c(u)}catch{}}):c&&c("Null promise")})(i.sendMessageAsync(e),n,r),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};Uu.ConversationTranslatorRecognizer=IS});var z3=h(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});_S.TranscriberRecognizer=void 0;var V3=j(),Fr=W(),Hu=D(),DS=M(),GA=class t extends Hu.Recognizer{constructor(e,n){let r=e;Fr.Contracts.throwIfNull(r,"speechTranslationConfig");let i=n;Fr.Contracts.throwIfNull(i,"audioConfigImpl"),Fr.Contracts.throwIfNullOrWhitespace(r.speechRecognitionLanguage,Hu.PropertyId[Hu.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,r.properties,new DS.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return Fr.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Hu.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Hu.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Fr.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Hu.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){Fr.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return Fr.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){Fr.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return Fr.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(e,n){V3.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(DS.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,n){V3.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,n)}close(){return v(this,null,function*(){this.privDisposedRecognizer||(yield this.dispose(!0))})}pushConversationEvent(e,n){return v(this,null,function*(){let r=this.privReco;Fr.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),yield r.sendSpeechEventAsync(e,n)})}pushMeetingEvent(e,n){return v(this,null,function*(){let r=this.privReco;Fr.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),yield r.sendMeetingSpeechEventAsync(e,n)})}enforceAudioGating(){return v(this,null,function*(){let r=(yield this.audioConfig.format).channels;if(r===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(r!==8)throw new Error(`Unsupported audio configuration: Detected ${r}-channel audio`)})}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(n,r)=>{e.canceled&&e.canceled(e,r)},this.recognizing=(n,r)=>{e.transcribing&&e.transcribing(e,r)},this.recognized=(n,r)=>{e.transcribed&&e.transcribed(e,r)},this.sessionStarted=(n,r)=>{e.sessionStarted&&e.sessionStarted(e,r)},this.sessionStopped=(n,r)=>{e.sessionStopped&&e.sessionStopped(e,r)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){return v(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ye(t.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new DS.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,n,r,i){let o=r;return new DS.TranscriptionServiceRecognizer(e,n,o,i,this)}};_S.TranscriberRecognizer=GA});var U3=h(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});var Oue=D3();Object.defineProperty(cn,"ConversationManager",{enumerable:!0,get:function(){return Oue.ConversationManager}});var xue=gS();Object.defineProperty(cn,"ConversationConnectionConfig",{enumerable:!0,get:function(){return xue.ConversationConnectionConfig}});var Nue=B3();Object.defineProperty(cn,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return Nue.ConversationRecognizerFactory}});var kue=z3();Object.defineProperty(cn,"TranscriberRecognizer",{enumerable:!0,get:function(){return kue.TranscriberRecognizer}});var $u=FA();Object.defineProperty(cn,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return $u.ConversationReceivedTranslationEventArgs}});Object.defineProperty(cn,"LockRoomEventArgs",{enumerable:!0,get:function(){return $u.LockRoomEventArgs}});Object.defineProperty(cn,"MuteAllEventArgs",{enumerable:!0,get:function(){return $u.MuteAllEventArgs}});Object.defineProperty(cn,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return $u.ParticipantAttributeEventArgs}});Object.defineProperty(cn,"ParticipantEventArgs",{enumerable:!0,get:function(){return $u.ParticipantEventArgs}});Object.defineProperty(cn,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return $u.ParticipantsListEventArgs}});var KA=LA();Object.defineProperty(cn,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return KA.ConversationTranslatorCommandTypes}});Object.defineProperty(cn,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return KA.ConversationTranslatorMessageTypes}});Object.defineProperty(cn,"InternalParticipants",{enumerable:!0,get:function(){return KA.InternalParticipants}})});var QA=h(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.SynthesisAudioMetadata=ba.MetadataType=void 0;var Fue;(function(t){t.WordBoundary="WordBoundary",t.Bookmark="Bookmark",t.Viseme="Viseme",t.SentenceBoundary="SentenceBoundary",t.SessionEnd="SessionEnd",t.AvatarSignal="TalkingAvatarSignal"})(Fue=ba.MetadataType||(ba.MetadataType={}));var JA=class t{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new t(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}};ba.SynthesisAudioMetadata=JA});var $3=h(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.SynthesisStartedEvent=yi.ConnectingToSynthesisServiceEvent=yi.SynthesisTriggeredEvent=yi.SpeechSynthesisEvent=void 0;var H3=j(),Wu=class extends H3.PlatformEvent{constructor(e,n,r=H3.EventType.Info){super(e,r),this.privRequestId=n}get requestId(){return this.privRequestId}};yi.SpeechSynthesisEvent=Wu;var ZA=class extends Wu{constructor(e,n,r){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=n,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};yi.SynthesisTriggeredEvent=ZA;var YA=class extends Wu{constructor(e,n){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}};yi.ConnectingToSynthesisServiceEvent=YA;var XA=class extends Wu{constructor(e,n){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}};yi.SynthesisStartedEvent=XA});var W3=h(TS=>{"use strict";Object.defineProperty(TS,"__esModule",{value:!0});TS.SynthesisTurn=void 0;var RS=j(),jue=Ys(),PS=D(),Lue=QA(),eM=$3(),tM=class t{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=RS.createNoDashGuid(),this.privTurnDeferral=new RS.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){let e=new PS.PropertyCollection;return e.setProperty(PS.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}getAllReceivedAudio(){return v(this,null,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return v(this,null,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){let e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()})}startNewSynthesis(e,n,r,i){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=n,this.privIsSSML=r,this.privAudioOutputStream=new jue.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",i!==void 0&&(this.privTurnAudioDestination=i,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new eM.SynthesisTriggeredEvent(this.requestId,void 0,i===void 0?void 0:i.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new eM.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(e===200){this.onEvent(new eM.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else e===403&&this.onComplete()}onServiceResponseMessage(e){let n=JSON.parse(e);this.streamId=n.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(e){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new RS.Deferred;let n=JSON.parse(e);n.webrtc&&(this.privWebRTCSDP=n.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){e.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}constructSynthesisResult(){return v(this,null,function*(){let e=yield this.getAllReceivedAudioWithHeader();return new PS.SpeechSynthesisResult(this.requestId,PS.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)})}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){let e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){RS.Events.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&e[0]==="<"&&e[e.length-1]===">"}updateTextOffset(e,n){n===Lue.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!t.isXmlTag(e)&&this.updateTextOffset(e,n))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!t.isXmlTag(e)&&this.updateTextOffset(e,n)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return v(this,null,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}};TS.SynthesisTurn=tM});var G3=h(MS=>{"use strict";Object.defineProperty(MS,"__esModule",{value:!0});MS.SynthesisAdapterBase=void 0;var $t=j(),Ln=D(),dr=M(),Gu=va(),AS=class{constructor(e,n,r,i){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new $t.ArgumentNullError("authentication");if(!n)throw new $t.ArgumentNullError("connectionFactory");if(!r)throw new $t.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=n,this.privSynthesizerConfig=r,this.privIsDisposed=!1,this.privSessionAudioDestination=i,this.privSynthesisTurn=new dr.SynthesisTurn,this.privConnectionEvents=new $t.EventSource,this.privServiceEvents=new $t.EventSource,this.privSynthesisContext=new dr.SynthesisContext,this.privAgentConfig=new dr.AgentConfig,this.connectionEvents.attach(o=>{if(o.name==="ConnectionClosedEvent"){let s=o;s.statusCode!==1e3&&this.cancelSynthesisLocal(Ln.CancellationReason.Error,s.statusCode===1007?Ln.CancellationErrorCode.BadRequestParameters:Ln.CancellationErrorCode.ConnectionFailure,`${s.reason} websocket error code: ${s.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=e),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}dispose(e){return v(this,null,function*(){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&(yield(yield this.privConnectionConfigurationPromise).dispose(e))})}connect(){return v(this,null,function*(){yield this.connectImpl()})}sendNetworkMessage(e,n){return v(this,null,function*(){let r=typeof n=="string"?$t.MessageType.Text:$t.MessageType.Binary,i=typeof n=="string"?"application/json":"";return(yield this.fetchConnection()).send(new Gu.SpeechConnectionMessage(r,e,this.privSynthesisTurn.requestId,i,n))})}Speak(e,n,r,i,o,s){return v(this,null,function*(){let a;if(n?a=e:a=this.privSynthesizer.buildSsml(e),this.speakOverride!==void 0)return this.speakOverride(a,r,i,o);this.privSuccessCallback=i,this.privErrorCallback=o,this.privSynthesisTurn.startNewSynthesis(r,e,n,s);try{yield this.connectImpl();let c=yield this.fetchConnection();yield this.sendSynthesisContext(c),yield this.sendSsmlMessage(c,a,r),this.onSynthesisStarted(r),this.receiveMessage()}catch(c){return this.cancelSynthesisLocal(Ln.CancellationReason.Error,Ln.CancellationErrorCode.ConnectionFailure,c),Promise.reject(c)}})}stopSpeaking(){return v(this,null,function*(){return yield this.connectImpl(),(yield this.fetchConnection()).send(new Gu.SpeechConnectionMessage($t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))})}cancelSynthesis(e,n,r,i){let o=new Ln.PropertyCollection;o.setProperty(dr.CancellationErrorCodePropertyName,Ln.CancellationErrorCode[r]);let s=new Ln.SpeechSynthesisResult(e,Ln.ResultReason.Canceled,void 0,i,o);if(this.onSynthesisCancelled(s),this.privSuccessCallback)try{this.privSuccessCallback(s)}catch{}}cancelSynthesisLocal(e,n,r){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,n,r))}processTypeSpecificMessages(e){return!0}receiveMessage(){return v(this,null,function*(){try{let n=yield(yield this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!n)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;let r=Gu.SpeechConnectionMessage.fromConnectionMessage(n);if(r.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(r.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(r.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===r.streamId.toLowerCase()&&r.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(r.binaryBody),this.onSynthesizing(r.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(r.binaryBody));break;case"audio.metadata":let i=dr.SynthesisAudioMetadata.fromJSON(r.textBody).Metadata;for(let s of i)switch(s.Type){case dr.MetadataType.WordBoundary:case dr.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(s);let a=new Ln.SpeechSynthesisWordBoundaryEventArgs(s.Data.Offset,s.Data.Duration,s.Data.text.Text,s.Data.text.Length,s.Type===dr.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,s.Data.text.BoundaryType);this.onWordBoundary(a);break;case dr.MetadataType.Bookmark:let c=new Ln.SpeechSynthesisBookmarkEventArgs(s.Data.Offset,s.Data.Bookmark);this.onBookmarkReached(c);break;case dr.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(s),s.Data.IsLastAnimation){let u=new Ln.SpeechSynthesisVisemeEventArgs(s.Data.Offset,s.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(u)}break;case dr.MetadataType.AvatarSignal:this.onAvatarEvent(s);break;case dr.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(s);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let o;try{o=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(o)}catch(s){this.privErrorCallback&&this.privErrorCallback(s)}this.onSynthesisCompleted(o);break;default:this.processTypeSpecificMessages(r)||this.privServiceEvents&&this.serviceEvents.onEvent(new $t.ServiceEvent(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch{}})}sendSynthesisContext(e){this.setSynthesisContextSynthesisSection();let n=this.synthesisContext.toJSON();if(n)return e.send(new Gu.SpeechConnectionMessage($t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",n))}setSpeechConfigSynthesisSection(){}connectImpl(e=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(r=>r.state()===$t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=$t.createNoDashGuid(),this.privConnectionId=$t.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);let n=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=n.then(r=>v(this,null,function*(){this.privSynthesisTurn.onAuthCompleted(!1);let i=this.privConnectionFactory.create(this.privSynthesizerConfig,r,this.privConnectionId);i.events.attach(s=>{this.connectionEvents.onEvent(s)});let o=yield i.open();return o.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(o.statusCode),Promise.resolve(i)):o.statusCode===403&&!e?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(o.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${o.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(Ln.PropertyId.SpeechServiceConnection_Url)} Reason: ${o.reason}`))}),r=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(r)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(e,n){if(n)return e.send(new Gu.SpeechConnectionMessage($t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",n))}sendSsmlMessage(e,n,r){return e.send(new Gu.SpeechConnectionMessage($t.MessageType.Text,"ssml",r,"application/ssml+xml",n))}fetchConnection(){return v(this,null,function*(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(e=>e.state()===$t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return v(this,null,function*(){let e=yield this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)})}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}};MS.SynthesisAdapterBase=AS;AS.telemetryDataEnabled=!0});var J3=h(OS=>{"use strict";Object.defineProperty(OS,"__esModule",{value:!0});OS.AvatarSynthesisAdapter=void 0;var K3=D(),que=M(),nM=class extends que.SynthesisAdapterBase{constructor(e,n,r,i,o){super(e,n,r,void 0),this.privAvatarSynthesizer=i,this.privSynthesizer=i,this.privAvatarConfig=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(K3.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(e){if(this.privAvatarSynthesizer.avatarEventReceived){let n=new K3.AvatarEventArgs(e.Data.Offset,e.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,n)}catch{}}}};OS.AvatarSynthesisAdapter=nM});var Q3=h(xS=>{"use strict";Object.defineProperty(xS,"__esModule",{value:!0});xS.SpeechSynthesisAdapter=void 0;var ss=D(),Bue=M(),rM=class extends Bue.SynthesisAdapterBase{constructor(e,n,r,i,o){super(e,n,r,o),this.privSpeechSynthesizer=i,this.privSynthesizer=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(e){let n=new ss.SpeechSynthesisEventArgs(new ss.SpeechSynthesisResult(e,ss.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,n)}onSynthesizing(e){if(this.privSpeechSynthesizer.synthesizing)try{let n=this.privSynthesisTurn.audioOutputFormat.addHeader(e),r=new ss.SpeechSynthesisEventArgs(new ss.SpeechSynthesisResult(this.privSynthesisTurn.requestId,ss.ResultReason.SynthesizingAudio,n));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,r)}catch{}}onSynthesisCancelled(e){if(this.privSpeechSynthesizer.SynthesisCanceled){let n=new ss.SpeechSynthesisEventArgs(e);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,n)}catch{}}}onSynthesisCompleted(e){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new ss.SpeechSynthesisEventArgs(e))}catch{}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch{}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch{}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch{}}};xS.SpeechSynthesisAdapter=rM});var Z3=h(NS=>{"use strict";Object.defineProperty(NS,"__esModule",{value:!0});NS.SynthesisRestAdapter=void 0;var iM=dt(),oM=D(),Vue=ir(),zue=Bt(),sM=class{constructor(e,n){let r=e.parameters.getProperty(oM.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!r){let o=e.parameters.getProperty(oM.PropertyId.SpeechServiceConnection_Region,"westus"),s=Vue.ConnectionFactoryBase.getHostSuffix(o);r=e.parameters.getProperty(oM.PropertyId.SpeechServiceConnection_Host,`https://${o}.tts.speech${s}`)}this.privUri=`${r}/cognitiveservices/voices/list`;let i=iM.RestConfigBase.requestOptions;this.privRestAdapter=new iM.RestMessageAdapter(i),this.privAuthentication=n}getVoicesList(e){return this.privRestAdapter.setHeaders(zue.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then(n=>(this.privRestAdapter.setHeaders(n.headerName,n.token),this.privRestAdapter.request(iM.RestRequestType.Get,this.privUri)))}};NS.SynthesisRestAdapter=sM});var e8=h(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.SynthesizerConfig=Ea.SynthesisServiceType=void 0;var Y3=M(),X3;(function(t){t[t.Standard=0]="Standard",t[t.Custom=1]="Custom"})(X3=Ea.SynthesisServiceType||(Ea.SynthesisServiceType={}));var aM=class{constructor(e,n){this.privSynthesisServiceType=X3.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new Y3.SpeechServiceConfig(new Y3.Context(null)),this.privParameters=n}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}};Ea.SynthesizerConfig=aM});var t8=h(kS=>{"use strict";Object.defineProperty(kS,"__esModule",{value:!0});kS.SynthesisContext=void 0;var cM=D(),uM=class{constructor(){this.privContext={}}setSection(e,n){this.privContext[e]=n}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){let n=this.buildSynthesisContext(e);this.setSection("synthesis",n)}buildSynthesisContext(e){return{audio:{metadataOptions:{bookmarkEnabled:!!e?.bookmarkReached,punctuationBoundaryEnabled:e?.properties.getProperty(cM.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!e?.wordBoundary),sentenceBoundaryEnabled:e?.properties.getProperty(cM.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!e?.visemeReceived,wordBoundaryEnabled:e?.properties.getProperty(cM.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!e?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:e?.autoDetectSourceLanguage}}}};kS.SynthesisContext=uM});var n8=h(FS=>{"use strict";Object.defineProperty(FS,"__esModule",{value:!0});FS.SpeakerRecognitionConfig=void 0;var Uue=M(),lM=class{constructor(e,n){this.privContext=e||new Uue.Context(null),this.privParameters=n}get parameters(){return this.privParameters}get Context(){return this.privContext}};FS.SpeakerRecognitionConfig=lM});var i8=h(LS=>{"use strict";Object.defineProperty(LS,"__esModule",{value:!0});LS.SpeakerServiceRecognizer=void 0;var Hue=dt(),jS=j(),Tt=D(),r8=M(),$ue=va(),dM=class extends r8.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privSpeakerRecognizer=o,this.privSpeakerAudioSource=r,this.recognizeSpeaker=s=>this.recognizeSpeakerOnce(s),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let n=!1,r=new Tt.PropertyCollection;switch(e.messageType===jS.MessageType.Text&&r.setProperty(Tt.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.response":let o=JSON.parse(e.textBody),s;o.status.statusCode.toLowerCase()!=="success"?s=new Tt.SpeakerRecognitionResult(o,Tt.ResultReason.Canceled,Tt.CancellationErrorCode.ServiceError,o.status.reason):s=new Tt.SpeakerRecognitionResult(o,Tt.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(s),n=!0;break;default:break}let i=new jS.Deferred;return i.resolve(n),i.promise}cancelRecognition(e,n,r,i,o){if(new Tt.PropertyCollection().setProperty(r8.CancellationErrorCodePropertyName,Tt.CancellationErrorCode[i]),this.privResultDeferral){let a=new Tt.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:o,reason:o}},Tt.ResultReason.Canceled,i,o);try{this.privResultDeferral.resolve(a)}catch(c){this.privResultDeferral.reject(c)}}}recognizeSpeakerOnce(e){return v(this,null,function*(){this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new jS.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(Tt.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let n=this.connectImpl(),r=this.sendPreAudioMessages(this.extractSpeakerContext(e)),i=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),o=yield this.privSpeakerAudioSource.format,s=yield this.privSpeakerAudioSource.deviceInfo,a=new Hue.ReplayableAudioNode(i,o.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(a,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:s};try{yield n,yield r}catch(l){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Tt.CancellationReason.Error,Tt.CancellationErrorCode.ConnectionFailure,l)}let c=new Tt.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,c),this.receiveMessage(),this.sendAudio(a).then(()=>{},l=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Tt.CancellationReason.Error,Tt.CancellationErrorCode.RuntimeError,l)}),this.privResultDeferral.promise})}sendPreAudioMessages(e){return v(this,null,function*(){let n=yield this.fetchConnection();yield this.sendSpeakerRecognition(n,e)})}sendSpeakerRecognition(e,n){return v(this,null,function*(){let r=JSON.stringify(n);return e.send(new $ue.SpeechConnectionMessage(jS.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",r))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}};LS.SpeakerServiceRecognizer=dM});var s8=h(qS=>{"use strict";Object.defineProperty(qS,"__esModule",{value:!0});qS.VoiceServiceRecognizer=void 0;var Wue=dt(),Ci=j(),Ie=D(),o8=M(),pM=va(),fM=class extends o8.ServiceRecognizerBase{constructor(e,n,r,i,o){super(e,n,r,i,o),this.privDeferralMap=new Ci.DeferralMap,this.privSpeakerAudioSource=r,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let n=!1,r=new Ie.PropertyCollection;switch(e.messageType===Ci.MessageType.Text&&r.setProperty(Ie.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":let o=JSON.parse(e.textBody);switch(o.operation.toLowerCase()){case"create":this.handleCreateResponse(o,e.requestId);break;case"delete":case"reset":this.handleResultResponse(o,e.requestId);break;case"fetch":let u=JSON.parse(e.textBody);this.handleFetchResponse(u,e.requestId);break;default:break}n=!0;break;case"speaker.phrases":let s=JSON.parse(e.textBody);this.handlePhrasesResponse(s,e.requestId),n=!0;break;case"speaker.profile.enrollment":let a=JSON.parse(e.textBody),c=new Ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(a.enrollment?a.enrollment.enrollmentStatus:a.status.statusCode),a.enrollment?JSON.stringify(a.enrollment):void 0,a.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,c),this.privRequestSession.onSpeechEnded(),n=!0;break;default:break}let i=new Ci.Deferred;return i.resolve(n),i.promise}cancelRecognition(e,n,r,i,o){new Ie.PropertyCollection().setProperty(o8.CancellationErrorCodePropertyName,Ie.CancellationErrorCode[i]);let a=new Ie.VoiceProfileEnrollmentResult(Ie.ResultReason.Canceled,o,o);this.privDeferralMap.getId(n)&&this.privDeferralMap.complete(n,a)}createProfile(e,n){return v(this,null,function*(){this.voiceProfileType=e.toString();let r=this.connectImpl();try{let i=new Ci.Deferred;return yield r,yield this.sendCreateProfile(i,e,n),this.receiveMessage(),i.promise}catch(i){throw i}})}resetProfile(e){return v(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)})}deleteProfile(e){return v(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)})}retrieveEnrollmentResult(e){return v(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)})}getAllProfiles(e){return v(this,null,function*(){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)})}getActivationPhrases(e,n){return v(this,null,function*(){this.voiceProfileType=e.toString();let r=this.connectImpl();try{let i=new Ci.Deferred;return yield r,yield this.sendPhrasesRequest(i,e,n),this.receiveMessage(),i.promise}catch(i){throw i}})}enrollProfile(e){return v(this,null,function*(){this.voiceProfileType=e.profileType.toString();let n=new Ci.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(Ie.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let r=this.connectImpl(),i=this.sendPreAudioMessages(e,n),o=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),s=yield this.privSpeakerAudioSource.format,a=yield this.privSpeakerAudioSource.deviceInfo,c=new Wue.ReplayableAudioNode(o,s.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(c,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:a};try{yield r,yield i}catch(d){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Ie.CancellationReason.Error,Ie.CancellationErrorCode.ConnectionFailure,d)}let u=new Ie.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.receiveMessage(),this.sendAudio(c).then(()=>{},d=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Ie.CancellationReason.Error,Ie.CancellationErrorCode.RuntimeError,d)}),n.promise})}sendPreAudioMessages(e,n){return v(this,null,function*(){let r=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,n),yield this.sendBaseRequest(r,"enroll",this.scenarioFrom(e.profileType),e)})}sendPhrasesRequest(e,n,r){return v(this,null,function*(){let i=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let o=this.scenarioFrom(n),s={locale:r,scenario:o};return i.send(new pM.SpeechConnectionMessage(Ci.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))})}sendCreateProfile(e,n,r){return v(this,null,function*(){let i=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let o=n===Ie.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":n===Ie.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",s={locale:r,number:"1",scenario:o};return i.send(new pM.SpeechConnectionMessage(Ci.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))})}sendCommonRequest(e,n,r=void 0){return v(this,null,function*(){let i=this.connectImpl();try{let o=new Ci.Deferred;this.privRequestSession.onSpeechContext(),yield i;let s=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,o),yield this.sendBaseRequest(s,e,this.scenarioFrom(n),r),this.receiveMessage(),o.promise}catch(o){throw o}})}sendBaseRequest(e,n,r,i){return v(this,null,function*(){let o={scenario:r};return i?o.profileIds=[i.profileId]:o.maxPageSize=-1,e.send(new pM.SpeechConnectionMessage(Ci.MessageType.Text,`speaker.profile.${n}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,n){if(this.privDeferralMap.getId(n))if(e.status.statusCode.toLowerCase()!=="success"){let r=Ie.ResultReason.Canceled,i=new Ie.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(n,i)}else if(e.phrases&&e.phrases.length>0){let r=Ie.ResultReason.EnrollingVoiceProfile,i=new Ie.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(n,i)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${n} not found`)}handleCreateResponse(e,n){if(e.profiles&&e.profiles.length>0)if(this.privDeferralMap.getId(n)){let r=e.profiles.map(i=>i.profileId);this.privDeferralMap.complete(n,r)}else throw new Error(`Voice Profile create request for requestID ${n} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(e,n){if(this.privDeferralMap.getId(n)){let r=e.operation.toLowerCase()==="delete"?Ie.ResultReason.DeletedVoiceProfile:Ie.ResultReason.ResetVoiceProfile,i=e.status.statusCode.toLowerCase()==="success"?r:Ie.ResultReason.Canceled,o=new Ie.VoiceProfileResult(i,`statusCode: ${e.status.statusCode}, errorDetails: ${e.status.reason}`);this.privDeferralMap.complete(n,o)}else throw new Error(`Voice Profile create request for requestID ${n} not found`)}handleFetchResponse(e,n){if(this.privDeferralMap.getId(n)&&e.profiles[0]){if(this.privExpectedProfileId&&e.profiles.length===1&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;let r=e.profiles[0],i=new Ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(r.enrollmentStatus),JSON.stringify(r),e.status.reason);this.privDeferralMap.complete(n,i)}else if(e.profiles.length>0){let r=e.profiles,i=[];for(let o of r)i.push(new Ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(o.enrollmentStatus),JSON.stringify(o),e.status.reason));this.privDeferralMap.complete(n,i)}}else throw new Error(`Voice Profile fetch request for requestID ${n} not found`)}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return Ie.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return Ie.ResultReason.Canceled;default:return Ie.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===Ie.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===Ie.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};qS.VoiceServiceRecognizer=fM});var a8=h(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.type=mt.connectivity=mt.Device=mt.OS=mt.System=mt.Context=mt.SpeechServiceConfig=void 0;var hM=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,(e,n)=>{if(n&&typeof n=="object"&&!Array.isArray(n)){let r={};for(let i in n)Object.hasOwnProperty.call(n,i)&&(r[i&&i.charAt(0).toLowerCase()+i.substring(1)]=n[i]);return r}return n})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}};mt.SpeechServiceConfig=hM;var gM=class{constructor(e){this.system=new BS,this.os=e}};mt.Context=gM;var BS=class{constructor(){let e="1.40.0";this.name="SpeechSDK",this.version=e,this.build="JavaScript",this.lang="JavaScript"}};mt.System=BS;var vM=class{constructor(e,n,r){this.platform=e,this.name=n,this.version=r}};mt.OS=vM;var mM=class{constructor(e,n,r){this.manufacturer=e,this.model=n,this.version=r}};mt.Device=mM;var Gue;(function(t){t.Bluetooth="Bluetooth",t.Wired="Wired",t.WiFi="WiFi",t.Cellular="Cellular",t.InBuilt="InBuilt",t.Unknown="Unknown"})(Gue=mt.connectivity||(mt.connectivity={}));var Kue;(function(t){t.Phone="Phone",t.Speaker="Speaker",t.Car="Car",t.Headset="Headset",t.Thermostat="Thermostat",t.Microphones="Microphones",t.Deskphone="Deskphone",t.RemoteControl="RemoteControl",t.Unknown="Unknown",t.File="File",t.Stream="Stream"})(Kue=mt.type||(mt.type={}))});var M=h(P=>{"use strict";var Jue=P&&P.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),L=P&&P.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&Jue(e,t,n)};Object.defineProperty(P,"__esModule",{value:!0});P.AutoDetectSourceLanguagesOpenRangeOptionName=P.ForceDictationPropertyName=P.ServicePropertiesPropertyName=P.CancellationErrorCodePropertyName=P.OutputFormatPropertyName=void 0;L(DL(),P);L(TL(),P);L(Jg(),P);L(ML(),P);L(xL(),P);L(g$(),P);L(C$(),P);L(AC(),P);L(w$(),P);L(b$(),P);L(I$(),P);L(_$(),P);L(P$(),P);L(O$(),P);L(k$(),P);L(q$(),P);L(U$(),P);L(yT(),P);L(H$(),P);L($$(),P);L(G$(),P);L(K$(),P);L(J$(),P);L(Z$(),P);L(Y$(),P);L(X$(),P);L(e3(),P);L(t3(),P);L(n3(),P);L(i3(),P);L(o3(),P);L(s3(),P);L(a3(),P);L(u3(),P);L(l3(),P);L(p3(),P);L(g3(),P);L(v3(),P);L(m3(),P);L(C3(),P);L(E3(),P);L(I3(),P);L(U3(),P);L(QA(),P);L(W3(),P);L(G3(),P);var Que=J3();Object.defineProperty(P,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return Que.AvatarSynthesisAdapter}});var Zue=Q3();Object.defineProperty(P,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return Zue.SpeechSynthesisAdapter}});L(Z3(),P);L(e8(),P);L(t8(),P);L(n8(),P);L(i8(),P);L(s8(),P);L(a8(),P);P.OutputFormatPropertyName="OutputFormat";P.CancellationErrorCodePropertyName="CancellationErrorCode";P.ServicePropertiesPropertyName="ServiceProperties";P.ForceDictationPropertyName="ForceDictation";P.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"});var c8=h(Ia=>{"use strict";var Yue=Ia&&Ia.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Xue=Ia&&Ia.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&Yue(e,t,n)};Object.defineProperty(Ia,"__esModule",{value:!0});var ele=M();new ele.AgentConfig;Xue(D(),Ia)});function EM(t,e){return Object.is(t,e)}var it=null,Ku=!1,_p=1,Vn=Symbol("SIGNAL");function ce(t){let e=it;return it=t,e}function IM(){return it}function D8(){return Ku}var Da={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function GS(t){if(Ku)throw new Error("");if(it===null)return;it.consumerOnSignalRead(t);let e=it.nextProducerIndex++;if(Op(it),e<it.producerNode.length&&it.producerNode[e]!==t&&Ju(it)){let n=it.producerNode[e];Mp(n,it.producerIndexOfThis[e])}it.producerNode[e]!==t&&(it.producerNode[e]=t,it.producerIndexOfThis[e]=Ju(it)?TM(t,it,e):0),it.producerLastReadVersion[e]=t.version}function _8(){_p++}function DM(t){if(!(Ju(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===_p)){if(!t.producerMustRecompute(t)&&!Tp(t)){t.dirty=!1,t.lastCleanEpoch=_p;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=_p}}function _M(t){if(t.liveConsumerNode===void 0)return;let e=Ku;Ku=!0;try{for(let n of t.liveConsumerNode)n.dirty||PM(n)}finally{Ku=e}}function RM(){return it?.consumerAllowSignalWrites!==!1}function PM(t){t.dirty=!0,_M(t),t.consumerMarkedDirty?.(t)}function Qu(t){return t&&(t.nextProducerIndex=0),ce(t)}function Pp(t,e){if(ce(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ju(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Mp(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Tp(t){Op(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(DM(n),r!==n.version))return!0}return!1}function Ap(t){if(Op(t),Ju(t))for(let e=0;e<t.producerNode.length;e++)Mp(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function TM(t,e,n){if(AM(t),t.liveConsumerNode.length===0&&MM(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=TM(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Mp(t,e){if(AM(t),t.liveConsumerNode.length===1&&MM(t))for(let r=0;r<t.producerNode.length;r++)Mp(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Op(i),i.producerIndexOfThis[r]=e}}function Ju(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Op(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function AM(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function MM(t){return t.producerNode!==void 0}function KS(t){let e=Object.create(R8);e.computation=t;let n=()=>{if(DM(e),GS(e),e.value===Rp)throw e.error;return e.value};return n[Vn]=e,n}var HS=Symbol("UNSET"),$S=Symbol("COMPUTING"),Rp=Symbol("ERRORED"),R8=$(b({},Da),{value:HS,dirty:!0,error:null,equal:EM,producerMustRecompute(t){return t.value===HS||t.value===$S},producerRecomputeValue(t){if(t.value===$S)throw new Error("Detected cycle in computations.");let e=t.value;t.value=$S;let n=Qu(t),r;try{r=t.computation()}catch(i){r=Rp,t.error=i}finally{Pp(t,n)}if(e!==HS&&e!==Rp&&r!==Rp&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function P8(){throw new Error}var OM=P8;function xM(){OM()}function NM(t){OM=t}var T8=null;function kM(t){let e=Object.create(jM);e.value=t;let n=()=>(GS(e),e.value);return n[Vn]=e,n}function JS(t,e){RM()||xM(),t.equal(t.value,e)||(t.value=e,A8(t))}function FM(t,e){RM()||xM(),JS(t,e(t.value))}var jM=$(b({},Da),{equal:EM,value:void 0});function A8(t){t.version++,_8(),_M(t),T8?.()}function LM(t,e,n){let r=Object.create(M8);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(Ap(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=WS)}let a=()=>{if(r.fn===null)return;if(D8())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Tp(r))return;r.hasRun=!0;let c=Qu(r);try{r.cleanupFn(),r.cleanupFn=WS,r.fn(i)}finally{Pp(r,c)}};return r.ref={notify:()=>PM(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Vn]:r},r.ref}var WS=()=>{},M8=$(b({},Da),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:WS});function q(t){return typeof t=="function"}function _a(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var xp=_a(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ls(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(o){e=o instanceof xp?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{qM(o)}catch(s){e=e??[],s instanceof xp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new xp(e)}}add(e){var n;if(e&&e!==this)if(this.closed)qM(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ls(n,e)}remove(e){let{_finalizers:n}=this;n&&ls(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var QS=xe.EMPTY;function Np(t){return t instanceof xe||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function qM(t){q(t)?t():t.unsubscribe()}var vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ra={setTimeout(t,e,...n){let{delegate:r}=Ra;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ra;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function kp(t){Ra.setTimeout(()=>{let{onUnhandledError:e}=vr;if(e)e(t);else throw t})}function Zu(){}var BM=ZS("C",void 0,void 0);function VM(t){return ZS("E",void 0,t)}function zM(t){return ZS("N",t,void 0)}function ZS(t,e,n){return{kind:t,value:e,error:n}}var ds=null;function Pa(t){if(vr.useDeprecatedSynchronousErrorHandling){let e=!ds;if(e&&(ds={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ds;if(ds=null,n)throw r}}else t()}function UM(t){vr.useDeprecatedSynchronousErrorHandling&&ds&&(ds.errorThrown=!0,ds.error=t)}var ps=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Np(e)&&e.add(this)):this.destination=N8}static create(e,n,r){return new Ta(e,n,r)}next(e){this.isStopped?XS(zM(e),this):this._next(e)}error(e){this.isStopped?XS(VM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?XS(BM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},O8=Function.prototype.bind;function YS(t,e){return O8.call(t,e)}var ew=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Fp(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Fp(r)}else Fp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Fp(n)}}},Ta=class extends ps{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&vr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&YS(e.next,o),error:e.error&&YS(e.error,o),complete:e.complete&&YS(e.complete,o)}):i=e}this.destination=new ew(i)}};function Fp(t){vr.useDeprecatedSynchronousErrorHandling?UM(t):kp(t)}function x8(t){throw t}function XS(t,e){let{onStoppedNotification:n}=vr;n&&Ra.setTimeout(()=>n(t,e))}var N8={closed:!0,next:Zu,error:x8,complete:Zu};var Aa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rn(t){return t}function tw(...t){return nw(t)}function nw(t){return t.length===0?Rn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=F8(n)?n:new Ta(n,r,i);return Pa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=HM(r),new r((i,o)=>{let s=new Ta({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Aa](){return this}pipe(...n){return nw(n)(this)}toPromise(n){return n=HM(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function HM(t){var e;return(e=t??vr.Promise)!==null&&e!==void 0?e:Promise}function k8(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function F8(t){return t&&t instanceof ps||k8(t)&&Np(t)}function rw(t){return q(t?.lift)}function me(t){return e=>{if(rw(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,r,i){return new iw(t,e,n,r,i)}var iw=class extends ps{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ma(){return me((t,e)=>{let n=null;t._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Oa=class extends se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let n=this.getSubject();e.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return Ma()(this)}};var xa={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:r}=xa;r&&(e=r.requestAnimationFrame,n=r.cancelAnimationFrame);let i=e(o=>{n=void 0,t(o)});return new xe(()=>n?.(i))},requestAnimationFrame(...t){let{delegate:e}=xa;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=xa;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var $M=_a(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class t extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new jp(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $M}next(n){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?QS:(this.currentObservers=null,o.push(n),new xe(()=>{this.currentObservers=null,ls(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new se;return n.source=this,n}}return t.create=(e,n)=>new jp(e,n),t})(),jp=class extends Xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:QS}};var Ct=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ow={now(){return(ow.delegate||Date).now()},delegate:void 0};var Lp=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var Yu={setInterval(t,e,...n){let{delegate:r}=Yu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Yu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Na=class extends Lp{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Yu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Yu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ls(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ka=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ka.now=ow.now;var Fa=class extends ka{constructor(e,n=ka.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var j8=new Fa(Na),WM=j8;var qp=class extends Na{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return r!==null&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e._scheduled||(e._scheduled=xa.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,n,r);let{actions:o}=e;n!=null&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==n&&(xa.cancelAnimationFrame(n),e._scheduled=void 0)}};var Bp=class extends Fa{flush(e){this._active=!0;let n=this._scheduled;this._scheduled=void 0;let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw i}}};var sw=new Bp(qp);var Jt=new se(t=>t.complete());function Vp(t){return t&&q(t.schedule)}function aw(t){return t[t.length-1]}function zp(t){return q(aw(t))?t.pop():void 0}function qr(t){return Vp(aw(t))?t.pop():void 0}function GM(t,e){return typeof aw(t)=="number"?t.pop():e}function Up(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function Hp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function JM(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function KM(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fs(t){return this instanceof fs?(this.v=t,this):new fs(t)}function QM(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(g){return Promise.resolve(g).then(f,d)}}function a(f,g){r[f]&&(i[f]=function(m){return new Promise(function(y,w){o.push([f,m,y,w])>1||c(f,m)})},g&&(i[f]=g(i[f])))}function c(f,g){try{u(r[f](g))}catch(m){p(o[0][3],m)}}function u(f){f.value instanceof fs?Promise.resolve(f.value.v).then(l,d):p(o[0][2],f)}function l(f){c("next",f)}function d(f){c("throw",f)}function p(f,g){f(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ZM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof KM=="function"?KM(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var ja=t=>t&&typeof t.length=="number"&&typeof t!="function";function $p(t){return q(t?.then)}function Wp(t){return q(t[Aa])}function Gp(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function Kp(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function L8(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jp=L8();function Qp(t){return q(t?.[Jp])}function Zp(t){return QM(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield fs(n.read());if(i)return yield fs(void 0);yield yield fs(r)}}finally{n.releaseLock()}})}function Yp(t){return q(t?.getReader)}function Ne(t){if(t instanceof se)return t;if(t!=null){if(Wp(t))return q8(t);if(ja(t))return B8(t);if($p(t))return V8(t);if(Gp(t))return YM(t);if(Qp(t))return z8(t);if(Yp(t))return U8(t)}throw Kp(t)}function q8(t){return new se(e=>{let n=t[Aa]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function B8(t){return new se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function V8(t){return new se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,kp)})}function z8(t){return new se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function YM(t){return new se(e=>{H8(t,e).catch(n=>e.error(n))})}function U8(t){return YM(Zp(t))}function H8(t,e){var n,r,i,o;return JM(this,void 0,void 0,function*(){try{for(n=ZM(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function un(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Xp(t,e=0){return me((n,r)=>{n.subscribe(pe(r,i=>un(r,t,()=>r.next(i),e),()=>un(r,t,()=>r.complete(),e),i=>un(r,t,()=>r.error(i),e)))})}function ef(t,e=0){return me((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function XM(t,e){return Ne(t).pipe(ef(e),Xp(e))}function eO(t,e){return Ne(t).pipe(ef(e),Xp(e))}function tO(t,e){return new se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function nO(t,e){return new se(n=>{let r;return un(n,e,()=>{r=t[Jp](),un(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function tf(t,e){if(!t)throw new Error("Iterable cannot be null");return new se(n=>{un(n,e,()=>{let r=t[Symbol.asyncIterator]();un(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function rO(t,e){return tf(Zp(t),e)}function iO(t,e){if(t!=null){if(Wp(t))return XM(t,e);if(ja(t))return tO(t,e);if($p(t))return eO(t,e);if(Gp(t))return tf(t,e);if(Qp(t))return nO(t,e);if(Yp(t))return rO(t,e)}throw Kp(t)}function Te(t,e){return e?iO(t,e):Ne(t)}function B(...t){let e=qr(t);return Te(t,e)}function La(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new se(e?i=>e.schedule(r,0,i):r)}function cw(t){return!!t&&(t instanceof se||q(t.lift)&&q(t.subscribe))}var wi=_a(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function oO(t){return t instanceof Date&&!isNaN(t)}function Q(t,e){return me((n,r)=>{let i=0;n.subscribe(pe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:$8}=Array;function W8(t,e){return $8(e)?t(...e):t(e)}function qa(t){return Q(e=>W8(t,e))}var{isArray:G8}=Array,{getPrototypeOf:K8,prototype:J8,keys:Q8}=Object;function nf(t){if(t.length===1){let e=t[0];if(G8(e))return{args:e,keys:null};if(Z8(e)){let n=Q8(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Z8(t){return t&&typeof t=="object"&&K8(t)===J8}function rf(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Xu(...t){let e=qr(t),n=zp(t),{args:r,keys:i}=nf(t);if(r.length===0)return Te([],e);let o=new se(Y8(r,e,i?s=>rf(i,s):Rn));return n?o.pipe(qa(n)):o}function Y8(t,e,n=Rn){return r=>{sO(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)sO(e,()=>{let u=Te(t[c],e),l=!1;u.subscribe(pe(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function sO(t,e,n){t?un(n,t,e):e()}function aO(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,p=()=>{d&&!c.length&&!u&&e.complete()},f=m=>u<r?g(m):c.push(m),g=m=>{o&&e.next(m),u++;let y=!1;Ne(n(m,l++)).subscribe(pe(e,w=>{i?.(w),o?f(w):e.next(w)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){let w=c.shift();s?un(e,s,()=>g(w)):g(w)}p()}catch(w){e.error(w)}}))};return t.subscribe(pe(e,f,()=>{d=!0,p()})),()=>{a?.()}}function ze(t,e,n=1/0){return q(e)?ze((r,i)=>Q((o,s)=>e(r,o,i,s))(Ne(t(r,i))),n):(typeof e=="number"&&(n=e),me((r,i)=>aO(r,i,t,n)))}function ro(t=1/0){return ze(Rn,t)}function cO(){return ro(1)}function Ba(...t){return cO()(Te(t,qr(t)))}function of(t){return new se(e=>{Ne(t()).subscribe(e)})}function uw(...t){let e=zp(t),{args:n,keys:r}=nf(t),i=new se(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;Ne(n[l]).subscribe(pe(o,p=>{d||(d=!0,u--),a[l]=p},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?rf(r,a):a),o.complete())}))}});return e?i.pipe(qa(e)):i}var X8=["addListener","removeListener"],e6=["addEventListener","removeEventListener"],t6=["on","off"];function Va(t,e,n,r){if(q(n)&&(r=n,n=void 0),r)return Va(t,e,n).pipe(qa(r));let[i,o]=i6(t)?e6.map(s=>a=>t[s](e,a,n)):n6(t)?X8.map(uO(t,e)):r6(t)?t6.map(uO(t,e)):[];if(!i&&ja(t))return ze(s=>Va(s,e,n))(Ne(t));if(!i)throw new TypeError("Invalid event target");return new se(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function uO(t,e){return n=>r=>t[n](e,r)}function n6(t){return q(t.addListener)&&q(t.removeListener)}function r6(t){return q(t.on)&&q(t.off)}function i6(t){return q(t.addEventListener)&&q(t.removeEventListener)}function lw(t=0,e,n=WM){let r=-1;return e!=null&&(Vp(e)?n=e:r=e),new se(i=>{let o=oO(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function dw(...t){let e=qr(t),n=GM(t,1/0),r=t;return r.length?r.length===1?Ne(r[0]):ro(n)(Te(r,e)):Jt}function Qt(t,e){return me((n,r)=>{let i=0;n.subscribe(pe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function bi(t){return me((e,n)=>{let r=null,i=!1,o;r=e.subscribe(pe(n,void 0,void 0,s=>{o=Ne(t(s,bi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function lO(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(pe(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Ei(t,e){return q(e)?ze(t,e,1):ze(t,1)}function io(t){return me((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ii(t){return t<=0?()=>Jt:me((e,n)=>{let r=0;e.subscribe(pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function pw(t){return Q(()=>t)}function sf(t=o6){return me((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function o6(){return new wi}function mr(t){return me((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Br(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Qt((i,o)=>t(i,o,r)):Rn,Ii(1),n?io(e):sf(()=>new wi))}function za(t){return t<=0?()=>Jt:me((e,n)=>{let r=[];e.subscribe(pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function fw(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Qt((i,o)=>t(i,o,r)):Rn,za(1),n?io(e):sf(()=>new wi))}function hw(t,e){return me(lO(t,e,arguments.length>=2,!0))}function gw(...t){let e=qr(t);return me((n,r)=>{(e?Ba(t,n,e):Ba(t,n)).subscribe(r)})}function Zt(t,e){return me((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(pe(r,c=>{i?.unsubscribe();let u=0,l=o++;Ne(t(c,l)).subscribe(i=pe(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function af(t){return me((e,n)=>{Ne(t).subscribe(pe(n,()=>n.complete(),Zu)),!n.closed&&e.subscribe(n)})}function ot(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?me((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Rn}var nx="https://g.co/ng/security#xss",k=class extends Error{constructor(e,n){super(Hf(e,n)),this.code=e}};function Hf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function dl(t){return{toString:t}.toString()}var cf="__parameters__";function s6(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function rx(t,e,n){return dl(()=>{let r=s6(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(cf)?c[cf]:Object.defineProperty(c,cf,{value:[]})[cf];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var nl=globalThis;function Ae(t){for(let e in t)if(t[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function a6(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function en(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(en).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Aw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var c6=Ae({__forward_ref__:Ae});function mo(t){return t.__forward_ref__=mo,t.toString=function(){return en(this())},t}function Yt(t){return ix(t)?t():t}function ix(t){return typeof t=="function"&&t.hasOwnProperty(c6)&&t.__forward_ref__===mo}function R(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function $f(t){return dO(t,sx)||dO(t,ax)}function ox(t){return $f(t)!==null}function dO(t,e){return t.hasOwnProperty(e)?t[e]:null}function u6(t){let e=t&&(t[sx]||t[ax]);return e||null}function pO(t){return t&&(t.hasOwnProperty(fO)||t.hasOwnProperty(l6))?t[fO]:null}var sx=Ae({\u0275prov:Ae}),fO=Ae({\u0275inj:Ae}),ax=Ae({ngInjectableDef:Ae}),l6=Ae({ngInjectorDef:Ae}),N=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=R({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cx(t){return t&&!!t.\u0275providers}var d6=Ae({\u0275cmp:Ae}),p6=Ae({\u0275dir:Ae}),f6=Ae({\u0275pipe:Ae}),h6=Ae({\u0275mod:Ae}),Sf=Ae({\u0275fac:Ae}),tl=Ae({__NG_ELEMENT_ID__:Ae}),hO=Ae({__NG_ENV_ID__:Ae});function pl(t){return typeof t=="string"?t:t==null?"":String(t)}function g6(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():pl(t)}function v6(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new k(-200,t)}function Fb(t,e){throw new k(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),Mw;function ux(){return Mw}function zn(t){let e=Mw;return Mw=t,e}function lx(t,e,n){let r=$f(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;Fb(t,"Injector")}var m6={},rl=m6,Ow="__NG_DI_FLAG__",wf="ngTempTokenPath",y6="ngTokenPath",C6=/\n/gm,S6="\u0275",gO="__source",Wa;function w6(){return Wa}function oo(t){let e=Wa;return Wa=t,e}function b6(t,e=te.Default){if(Wa===void 0)throw new k(-203,!1);return Wa===null?lx(t,void 0,e):Wa.get(t,e&te.Optional?null:void 0,e)}function x(t,e=te.Default){return(ux()||b6)(Yt(t),e)}function E(t,e=te.Default){return x(t,Wf(e))}function Wf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function xw(t){let e=[];for(let n=0;n<t.length;n++){let r=Yt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new k(900,!1);let i,o=te.Default;for(let s=0;s<r.length;s++){let a=r[s],c=E6(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(x(i,o))}else e.push(x(r))}return e}function dx(t,e){return t[Ow]=e,t.prototype[Ow]=e,t}function E6(t){return t[Ow]}function I6(t,e,n,r){let i=t[wf];throw e[gO]&&i.unshift(e[gO]),t.message=D6(`
`+t.message,i,n,r),t[y6]=i,t[wf]=null,t}function D6(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==S6?t.slice(2):t;let i=en(e);if(Array.isArray(e))i=e.map(en).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):en(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(C6,`
  `)}`}var Gf=dx(rx("Optional"),8);var jb=dx(rx("SkipSelf"),4);function Ka(t,e){let n=t.hasOwnProperty(Sf);return n?t[Sf]:null}function _6(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function R6(t){return t.flat(Number.POSITIVE_INFINITY)}function Lb(t,e){t.forEach(n=>Array.isArray(n)?Lb(n,e):e(n))}function px(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function P6(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function T6(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Kf(t,e,n){let r=fl(t,e);return r>=0?t[r|1]=n:(r=~r,T6(t,r,e,n)),r}function vw(t,e){let n=fl(t,e);if(n>=0)return t[n|1]}function fl(t,e){return A6(t,e,1)}function A6(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ja={},Xt=[],Qa=new N(""),fx=new N("",-1),hx=new N(""),Ef=class{get(e,n=rl){if(n===rl){let r=new Error(`NullInjectorError: No provider for ${en(e)}!`);throw r.name="NullInjectorError",r}return n}},gx=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gx||{}),Ur=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ur||{}),co=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(co||{});function M6(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Nw(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];O6(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function vx(t){return t===3||t===4||t===6}function O6(t){return t.charCodeAt(0)===64}function il(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?vO(t,n,i,null,e[++r]):vO(t,n,i,null,null))}}return t}function vO(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var mx="ng-template";function x6(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&M6(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(qb(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function qb(t){return t.type===4&&t.value!==mx}function N6(t,e,n){let r=t.type===4&&!n?mx:t.value;return e===r}function k6(t,e,n){let r=4,i=t.attrs,o=i!==null?L6(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!yr(r)&&!yr(c))return!1;if(s&&yr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!N6(t,c,n)||c===""&&e.length===1){if(yr(r))return!1;s=!0}}else if(r&8){if(i===null||!x6(t,i,c,n)){if(yr(r))return!1;s=!0}}else{let u=e[++a],l=F6(c,i,qb(t),n);if(l===-1){if(yr(r))return!1;s=!0;continue}if(u!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(yr(r))return!1;s=!0}}}}return yr(r)||s}function yr(t){return(t&1)===0}function F6(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return q6(e,t)}function yx(t,e,n=!1){for(let r=0;r<e.length;r++)if(k6(t,e[r],n))return!0;return!1}function j6(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function L6(t){for(let e=0;e<t.length;e++){let n=t[e];if(vx(n))return e}return t.length}function q6(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function B6(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function mO(t,e){return t?":not("+e.trim()+")":e}function V6(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yr(s)&&(e+=mO(o,i),i=""),r=s,o=o||!yr(r);n++}return i!==""&&(e+=mO(o,i)),e}function z6(t){return t.map(V6).join(",")}function U6(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!yr(i))break;i=o}r++}return{attrs:e,classes:n}}function Gr(t){return dl(()=>{let e=Ex(t),n=$(b({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ur.Emulated,styles:t.styles||Xt,_:null,schemas:t.schemas||null,tView:null,id:""});Ix(n);let r=t.dependencies;return n.directiveDefs=CO(r,!1),n.pipeDefs=CO(r,!0),n.id=W6(n),n})}function H6(t){return uo(t)||Cx(t)}function $6(t){return t!==null}function pn(t){return dl(()=>({type:t.type,bootstrap:t.bootstrap||Xt,declarations:t.declarations||Xt,imports:t.imports||Xt,exports:t.exports||Xt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function yO(t,e){if(t==null)return Ja;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=co.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==co.None?[r,a]:r,e[o]=s):n[o]=r}return n}function We(t){return dl(()=>{let e=Ex(t);return Ix(e),e})}function uo(t){return t[d6]||null}function Cx(t){return t[p6]||null}function Sx(t){return t[f6]||null}function wx(t){let e=uo(t)||Cx(t)||Sx(t);return e!==null?e.standalone:!1}function bx(t,e){let n=t[h6]||null;if(!n&&e===!0)throw new Error(`Type ${en(t)} does not have '\u0275mod' property.`);return n}function Ex(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ja,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Xt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yO(t.inputs,e),outputs:yO(t.outputs),debugInfo:null}}function Ix(t){t.features?.forEach(e=>e(t))}function CO(t,e){if(!t)return null;let n=e?Sx:H6;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter($6)}function W6(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ac(t){return{\u0275providers:t}}function G6(...t){return{\u0275providers:Dx(!0,t),\u0275fromNgModule:!0}}function Dx(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Lb(e,s=>{let a=s;kw(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&_x(i,o),n}function _x(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Bb(i,o=>{e(o,r)})}}function kw(t,e,n,r){if(t=Yt(t),!t)return!1;let i=null,o=pO(t),s=!o&&uo(t);if(!o&&!s){let c=t.ngModule;if(o=pO(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)kw(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Lb(o.imports,l=>{kw(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&_x(u,e)}if(!a){let u=Ka(i)||(()=>new i);e({provide:i,useFactory:u,deps:Xt},i),e({provide:hx,useValue:i,multi:!0},i),e({provide:Qa,useValue:()=>x(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;Bb(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Bb(t,e){for(let n of t)cx(n)&&(n=n.\u0275providers),Array.isArray(n)?Bb(n,e):e(n)}var K6=Ae({provide:String,useValue:Ae});function Rx(t){return t!==null&&typeof t=="object"&&K6 in t}function J6(t){return!!(t&&t.useExisting)}function Q6(t){return!!(t&&t.useFactory)}function Za(t){return typeof t=="function"}function Z6(t){return!!t.useClass}var Jf=new N(""),hf={},Y6={},mw;function Vb(){return mw===void 0&&(mw=new Ef),mw}var tn=class{},ol=class extends tn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jw(e,s=>this.processProvider(s)),this.records.set(fx,Ua(void 0,this)),i.has("environment")&&this.records.set(tn,Ua(void 0,this));let o=this.records.get(Jf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hx,Xt,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=oo(this),r=zn(void 0),i;try{return e()}finally{oo(n),zn(r)}}get(e,n=rl,r=te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(hO))return e[hO](this);r=Wf(r);let i,o=oo(this),s=zn(void 0);try{if(!(r&te.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=r4(e)&&$f(e);u&&this.injectableDefInScope(u)?c=Ua(Fw(e),hf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&te.Self?Vb():this.parent;return n=r&te.Optional&&n===rl?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[wf]=a[wf]||[]).unshift(en(e)),o)throw a;return I6(a,e,"R3InjectorError",this.source)}else throw a}finally{zn(s),oo(o)}}resolveInjectorInitializers(){let e=ce(null),n=oo(this),r=zn(void 0),i;try{let o=this.get(Qa,Xt,te.Self);for(let s of o)s()}finally{oo(n),zn(r),ce(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(en(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new k(205,!1)}processProvider(e){e=Yt(e);let n=Za(e)?e:Yt(e&&e.provide),r=e4(e);if(!Za(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ua(void 0,hf,!0),i.factory=()=>xw(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ce(null);try{return n.value===hf&&(n.value=Y6,n.value=n.factory()),typeof n.value=="object"&&n.value&&n4(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Yt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Fw(t){let e=$f(t),n=e!==null?e.factory:Ka(t);if(n!==null)return n;if(t instanceof N)throw new k(204,!1);if(t instanceof Function)return X6(t);throw new k(204,!1)}function X6(t){if(t.length>0)throw new k(204,!1);let n=u6(t);return n!==null?()=>n.factory(t):()=>new t}function e4(t){if(Rx(t))return Ua(void 0,t.useValue);{let e=Px(t);return Ua(e,hf)}}function Px(t,e,n){let r;if(Za(t)){let i=Yt(t);return Ka(i)||Fw(i)}else if(Rx(t))r=()=>Yt(t.useValue);else if(Q6(t))r=()=>t.useFactory(...xw(t.deps||[]));else if(J6(t))r=()=>x(Yt(t.useExisting));else{let i=Yt(t&&(t.useClass||t.provide));if(t4(t))r=()=>new i(...xw(t.deps));else return Ka(i)||Fw(i)}return r}function Ua(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function t4(t){return!!t.deps}function n4(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function r4(t){return typeof t=="function"||typeof t=="object"&&t instanceof N}function jw(t,e){for(let n of t)Array.isArray(n)?jw(n,e):n&&cx(n)?jw(n.\u0275providers,e):e(n)}function Tn(t,e){t instanceof ol&&t.assertNotDestroyed();let n,r=oo(t),i=zn(void 0);try{return e()}finally{oo(r),zn(i)}}function Tx(){return ux()!==void 0||w6()!=null}function zb(t){if(!Tx())throw new k(-203,!1)}function i4(t){return typeof t=="function"}var Pi=0,K=1,z=2,xt=3,Cr=4,fn=5,Ya=6,If=7,Mt=8,Xa=9,Hr=10,qe=11,sl=12,SO=13,cc=14,Pn=15,vs=16,Ha=17,Di=18,Qf=19,Ax=20,so=21,gf=22,Un=23,nn=25,Mx=1;var ms=7,Df=8,ec=9,Ot=10,_f=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(_f||{});function ao(t){return Array.isArray(t)&&typeof t[Mx]=="object"}function Ti(t){return Array.isArray(t)&&t[Mx]===!0}function Ub(t){return(t.flags&4)!==0}function Zf(t){return t.componentOffset>-1}function Yf(t){return(t.flags&1)===1}function lo(t){return!!t.template}function Lw(t){return(t[z]&512)!==0}var qw=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ox(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ai(){return xx}function xx(t){return t.type.prototype.ngOnChanges&&(t.setInput=s4),o4}Ai.ngInherit=!0;function o4(){let t=kx(this),e=t?.current;if(e){let n=t.previous;if(n===Ja)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function s4(t,e,n,r,i){let o=this.declaredInputs[r],s=kx(t)||a4(t,{previous:Ja,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new qw(u&&u.currentValue,n,c===Ja),Ox(t,e,i,n)}var Nx="__ngSimpleChanges__";function kx(t){return t[Nx]||null}function a4(t,e){return t[Nx]=e}var wO=null;var Vr=function(t,e,n){wO?.(t,e,n)},c4="svg",u4="math";function $r(t){for(;Array.isArray(t);)t=t[Pi];return t}function Fx(t,e){return $r(e[t])}function $n(t,e){return $r(e[t.index])}function Hb(t,e){return t.data[e]}function l4(t,e){return t[e]}function yo(t,e){let n=e[t];return ao(n)?n:n[Pi]}function d4(t){return(t[z]&4)===4}function $b(t){return(t[z]&128)===128}function p4(t){return Ti(t[xt])}function po(t,e){return e==null?null:t[e]}function jx(t){t[Ha]=0}function Lx(t){t[z]&1024||(t[z]|=1024,$b(t)&&Xf(t))}function f4(t,e){for(;t>0;)e=e[cc],t--;return e}function al(t){return!!(t[z]&9216||t[Un]?.dirty)}function Bw(t){t[Hr].changeDetectionScheduler?.notify(7),t[z]&64&&(t[z]|=1024),al(t)&&Xf(t)}function Xf(t){t[Hr].changeDetectionScheduler?.notify(0);let e=ys(t);for(;e!==null&&!(e[z]&8192||(e[z]|=8192,!$b(e)));)e=ys(e)}function qx(t,e){if((t[z]&256)===256)throw new k(911,!1);t[so]===null&&(t[so]=[]),t[so].push(e)}function h4(t,e){if(t[so]===null)return;let n=t[so].indexOf(e);n!==-1&&t[so].splice(n,1)}function ys(t){let e=t[xt];return Ti(e)?e[xt]:e}var re={lFrame:Qx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Bx=!1;function g4(){return re.lFrame.elementDepthCount}function v4(){re.lFrame.elementDepthCount++}function m4(){re.lFrame.elementDepthCount--}function Vx(){return re.bindingsEnabled}function zx(){return re.skipHydrationRootTNode!==null}function y4(t){return re.skipHydrationRootTNode===t}function C4(){re.skipHydrationRootTNode=null}function X(){return re.lFrame.lView}function Ge(){return re.lFrame.tView}function Ux(t){return re.lFrame.contextLView=t,t[Mt]}function Hx(t){return re.lFrame.contextLView=null,t}function Nt(){let t=$x();for(;t!==null&&t.type===64;)t=t.parent;return t}function $x(){return re.lFrame.currentTNode}function S4(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Is(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function Wb(){return re.lFrame.isParent}function Gb(){re.lFrame.isParent=!1}function w4(){return re.lFrame.contextLView}function Wx(){return Bx}function bO(t){Bx=t}function Kb(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function b4(t){return re.lFrame.bindingIndex=t}function uc(){return re.lFrame.bindingIndex++}function Gx(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function E4(){return re.lFrame.inI18n}function I4(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Vw(e)}function D4(){return re.lFrame.currentDirectiveIndex}function Vw(t){re.lFrame.currentDirectiveIndex=t}function _4(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Jb(){return re.lFrame.currentQueryIndex}function eh(t){re.lFrame.currentQueryIndex=t}function R4(t){let e=t[K];return e.type===2?e.declTNode:e.type===1?t[fn]:null}function Kx(t,e,n){if(n&te.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=R4(o),i===null||(o=o[cc],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=Jx();return r.currentTNode=e,r.lView=t,!0}function Qb(t){let e=Jx(),n=t[K];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Jx(){let t=re.lFrame,e=t===null?null:t.child;return e===null?Qx(t):e}function Qx(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Zx(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Yx=Zx;function Zb(){let t=Zx();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function P4(t){return(re.lFrame.contextLView=f4(t,re.lFrame.contextLView))[Mt]}function Co(){return re.lFrame.selectedIndex}function Cs(t){re.lFrame.selectedIndex=t}function th(){let t=re.lFrame;return Hb(t.tView,t.selectedIndex)}function T4(){return re.lFrame.currentNamespace}var Xx=!0;function nh(){return Xx}function rh(t){Xx=t}function A4(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=xx(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ih(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function vf(t,e,n){eN(t,e,3,n)}function mf(t,e,n,r){(t[z]&3)===n&&eN(t,e,n,r)}function yw(t,e){let n=t[z];(n&3)===e&&(n&=16383,n+=1,t[z]=n)}function eN(t,e,n,r){let i=r!==void 0?t[Ha]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ha]+=65536),(a<o||o==-1)&&(M4(t,n,e,c),t[Ha]=(t[Ha]&4294901760)+c+2),c++}function EO(t,e){Vr(4,t,e);let n=ce(null);try{e.call(t)}finally{ce(n),Vr(5,t,e)}}function M4(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[z]>>14<t[Ha]>>16&&(t[z]&3)===e&&(t[z]+=16384,EO(a,o)):EO(a,o)}var Ga=-1,Ss=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function O4(t){return t instanceof Ss}function x4(t){return(t.flags&8)!==0}function N4(t){return(t.flags&16)!==0}var Cw={},zw=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Wf(r);let i=this.injector.get(e,Cw,r);return i!==Cw||n===Cw?i:this.parentInjector.get(e,n,r)}};function tN(t){return t!==Ga}function Rf(t){return t&32767}function k4(t){return t>>16}function Pf(t,e){let n=k4(t),r=e;for(;n>0;)r=r[cc],n--;return r}var Uw=!0;function IO(t){let e=Uw;return Uw=t,e}var F4=256,nN=F4-1,rN=5,j4=0,zr={};function L4(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(tl)&&(r=n[tl]),r==null&&(r=n[tl]=j4++);let i=r&nN,o=1<<i;e.data[t+(i>>rN)]|=o}function Tf(t,e){let n=iN(t,e);if(n!==-1)return n;let r=e[K];r.firstCreatePass&&(t.injectorIndex=e.length,Sw(r.data,t),Sw(e,null),Sw(r.blueprint,null));let i=Yb(t,e),o=t.injectorIndex;if(tN(i)){let s=Rf(i),a=Pf(i,e),c=a[K].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Sw(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iN(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Yb(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=uN(i),r===null)return Ga;if(n++,i=i[cc],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ga}function Hw(t,e,n){L4(t,e,n)}function q4(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(vx(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function oN(t,e,n){if(n&te.Optional||t!==void 0)return t;Fb(e,"NodeInjector")}function sN(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let i=t[Xa],o=zn(void 0);try{return i?i.get(e,r,n&te.Optional):lx(e,r,n&te.Optional)}finally{zn(o)}}return oN(r,e,n)}function aN(t,e,n,r=te.Default,i){if(t!==null){if(e[z]&2048&&!(r&te.Self)){let s=U4(t,e,n,r,zr);if(s!==zr)return s}let o=cN(t,e,n,r,zr);if(o!==zr)return o}return sN(e,n,r,i)}function cN(t,e,n,r,i){let o=V4(n);if(typeof o=="function"){if(!Kx(e,t,r))return r&te.Host?oN(i,n,r):sN(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&te.Optional))Fb(n);else return s}finally{Yx()}}else if(typeof o=="number"){let s=null,a=iN(t,e),c=Ga,u=r&te.Host?e[Pn][fn]:null;for((a===-1||r&te.SkipSelf)&&(c=a===-1?Yb(t,e):e[a+8],c===Ga||!_O(r,!1)?a=-1:(s=e[K],a=Rf(c),e=Pf(c,e)));a!==-1;){let l=e[K];if(DO(o,a,l.data)){let d=B4(a,e,n,s,r,u);if(d!==zr)return d}c=e[a+8],c!==Ga&&_O(r,e[K].data[a+8]===u)&&DO(o,a,e)?(s=l,a=Rf(c),e=Pf(c,e)):a=-1}}return i}function B4(t,e,n,r,i,o){let s=e[K],a=s.data[t+8],c=r==null?Zf(a)&&Uw:r!=s&&(a.type&3)!==0,u=i&te.Host&&o===a,l=yf(a,s,n,c,u);return l!==null?ws(e,s,l,a):zr}function yf(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,p=i?a+l:u;for(let f=d;f<p;f++){let g=s[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=s[c];if(f&&lo(f)&&f.type===n)return c}return null}function ws(t,e,n,r){let i=t[n],o=e.data;if(O4(i)){let s=i;s.resolving&&v6(g6(o[n]));let a=IO(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?zn(s.injectImpl):null,l=Kx(t,r,te.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&A4(n,o[n],e)}finally{u!==null&&zn(u),IO(a),s.resolving=!1,Yx()}}return i}function V4(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(tl)?t[tl]:void 0;return typeof e=="number"?e>=0?e&nN:z4:e}function DO(t,e,n){let r=1<<t;return!!(n[e+(t>>rN)]&r)}function _O(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var gs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aN(this._tNode,this._lView,e,Wf(r),n)}};function z4(){return new gs(Nt(),X())}function lc(t){return dl(()=>{let e=t.prototype.constructor,n=e[Sf]||$w(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Sf]||$w(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function $w(t){return ix(t)?()=>{let e=$w(Yt(t));return e&&e()}:Ka(t)}function U4(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[z]&2048&&!(s[z]&512);){let a=cN(o,s,n,r|te.Self,zr);if(a!==zr)return a;let c=o.parent;if(!c){let u=s[Ax];if(u){let l=u.get(n,zr,r);if(l!==zr)return l}c=uN(s),s=s[cc]}o=c}return i}function uN(t){let e=t[K],n=e.type;return n===2?e.declTNode:n===1?t[fn]:null}function Xb(t){return q4(Nt(),t)}function RO(t,e=null,n=null,r){let i=lN(t,e,n,r);return i.resolveInjectorInitializers(),i}function lN(t,e=null,n=null,r,i=new Set){let o=[n||Xt,G6(t)];return r=r||(typeof t=="object"?void 0:en(t)),new ol(o,e||Vb(),r||null,i)}var hs=class hs{static create(e,n){if(Array.isArray(e))return RO({name:""},n,e,"");{let r=e.name??"";return RO({name:r},e.parent,e.providers,r)}}};hs.THROW_IF_NOT_FOUND=rl,hs.NULL=new Ef,hs.\u0275prov=R({token:hs,providedIn:"any",factory:()=>x(fx)}),hs.__NG_ELEMENT_ID__=-1;var pt=hs;var H4=new N("");H4.__NG_ELEMENT_ID__=t=>{let e=Nt();if(e===null)throw new k(204,!1);if(e.type&2)return e.value;if(t&te.Optional)return null;throw new k(204,!1)};var $4="ngOriginalError";function ww(t){return t[$4]}var dc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=W4,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Ww=class extends dc{constructor(e){super(),this._lView=e}onDestroy(e){return qx(this._lView,e),()=>h4(this._lView,e)}};function W4(){return new Ww(X())}var Kr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Gw=class extends Xe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Tx()&&(this.destroyRef=E(dc,{optional:!0})??void 0,this.pendingTasks=E(Kr,{optional:!0})??void 0)}emit(e){let n=ce(null);try{super.next(e)}finally{ce(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof xe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ne=Gw;function Af(...t){}function dN(t){let e,n;function r(){t=Af;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function PO(t){return queueMicrotask(()=>t()),()=>{t=Af}}var _e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ne(!1),this.onMicrotaskEmpty=new ne(!1),this.onStable=new ne(!1),this.onError=new ne(!1),typeof Zone>"u")throw new k(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,J4(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new k(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new k(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,G4,Af,Af);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},G4={};function eE(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function K4(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{dN(()=>{t.callbackScheduled=!1,Kw(t),t.isCheckStableRunning=!0,eE(t),t.isCheckStableRunning=!1})}),Kw(t))}function J4(t){let e=()=>{K4(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(Q4(a))return n.invokeTask(i,o,s,a);try{return TO(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),AO(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return TO(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Z4(a)&&e(),AO(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Kw(t),eE(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Kw(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function TO(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function AO(t){t._nesting--,eE(t)}var Jw=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ne,this.onMicrotaskEmpty=new ne,this.onStable=new ne,this.onError=new ne}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Q4(t){return pN(t,"__ignore_ng_zone__")}function Z4(t){return pN(t,"__scheduler_tick__")}function pN(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Wr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ww(e);for(;n&&ww(n);)n=ww(n);return n||null}},Y4=new N("",{providedIn:"root",factory:()=>{let t=E(_e),e=E(Wr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function X4(){return pc(Nt(),X())}function pc(t,e){return new ft($n(t,e))}var ft=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=X4;let t=e;return t})();function fN(t){return t instanceof ft?t.nativeElement:t}function eW(){return this._results[Symbol.iterator]()}var Qw=class t{get changes(){return this._changes??=new ne}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=eW)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=R6(e);(this._changesDetected=!_6(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function hN(t){return(t.flags&128)===128}var gN=new Map,tW=0;function nW(){return tW++}function rW(t){gN.set(t[Qf],t)}function iW(t){gN.delete(t[Qf])}var MO="__ngContext__";function fo(t,e){ao(e)?(t[MO]=e[Qf],rW(e)):t[MO]=e}function vN(t){return yN(t[sl])}function mN(t){return yN(t[Cr])}function yN(t){for(;t!==null&&!Ti(t);)t=t[Cr];return t}var Zw;function CN(t){Zw=t}function SN(){if(Zw!==void 0)return Zw;if(typeof document<"u")return document;throw new k(210,!1)}var tE=new N("",{providedIn:"root",factory:()=>oW}),oW="ng",nE=new N(""),Wn=new N("",{providedIn:"platform",factory:()=>"unknown"});var rE=new N("",{providedIn:"root",factory:()=>SN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sW="h",aW="b";var cW=()=>null;function iE(t,e,n=!1){return cW(t,e,n)}var wN=!1,uW=new N("",{providedIn:"root",factory:()=>wN});var uf;function lW(){if(uf===void 0&&(uf=null,nl.trustedTypes))try{uf=nl.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return uf}function oh(t){return lW()?.createHTML(t)||t}var lf;function bN(){if(lf===void 0&&(lf=null,nl.trustedTypes))try{lf=nl.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return lf}function OO(t){return bN()?.createHTML(t)||t}function xO(t){return bN()?.createScriptURL(t)||t}var Mf=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nx})`}};function So(t){return t instanceof Mf?t.changingThisBreaksApplicationSecurity:t}function sh(t,e){let n=dW(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nx})`)}return n===e}function dW(t){return t instanceof Mf&&t.getTypeName()||null}function pW(t){let e=new Xw(t);return fW()?new Yw(e):e}var Yw=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(oh(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},Xw=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=oh(e),n}};function fW(){try{return!!new window.DOMParser().parseFromString(oh(""),"text/html")}catch{return!1}}var hW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function oE(t){return t=String(t),t.match(hW)?t:"unsafe:"+t}function Mi(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function hl(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var EN=Mi("area,br,col,hr,img,wbr"),IN=Mi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),DN=Mi("rp,rt"),gW=hl(DN,IN),vW=hl(IN,Mi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mW=hl(DN,Mi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),NO=hl(EN,vW,mW,gW),_N=Mi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yW=Mi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),CW=Mi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),SW=hl(_N,yW,CW),wW=Mi("script,style,template"),eb=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=IW(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=EW(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=kO(e).toLowerCase();if(!NO.hasOwnProperty(n))return this.sanitizedSomething=!0,!wW.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!SW.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;_N[a]&&(c=oE(c)),this.buf.push(" ",s,'="',FO(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=kO(e).toLowerCase();NO.hasOwnProperty(n)&&!EN.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(FO(e))}};function bW(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function EW(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw RN(e);return e}function IW(t){let e=t.firstChild;if(e&&bW(t,e))throw RN(e);return e}function kO(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function RN(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var DW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_W=/([^\#-~ |!])/g;function FO(t){return t.replace(/&/g,"&amp;").replace(DW,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(_W,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var df;function PN(t,e){let n=null;try{df=df||pW(t);let r=e?String(e):"";n=df.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=df.getInertBodyElement(r)}while(r!==o);let a=new eb().sanitizeChildren(jO(n)||n);return oh(a)}finally{if(n){let r=jO(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function jO(t){return"content"in t&&RW(t)?t.content:null}function RW(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var gl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(gl||{});function ome(t){let e=sE();return e?OO(e.sanitize(gl.HTML,t)||""):sh(t,"HTML")?OO(So(t)):PN(SN(),pl(t))}function PW(t){let e=sE();return e?e.sanitize(gl.URL,t)||"":sh(t,"URL")?So(t):oE(pl(t))}function TW(t){let e=sE();if(e)return xO(e.sanitize(gl.RESOURCE_URL,t)||"");if(sh(t,"ResourceURL"))return xO(So(t));throw new k(904,!1)}function AW(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?TW:PW}function TN(t,e,n){return AW(e,n)(t)}function sE(){let t=X();return t&&t[Hr].sanitizer}var MW=/^>|^->|<!--|-->|--!>|<!-$/g,OW=/(<|>)/g,xW="\u200B$1\u200B";function NW(t){return t.replace(MW,e=>e.replace(OW,xW))}function sme(t){return t.ownerDocument.defaultView}function ame(t){return t.ownerDocument}function AN(t){return t instanceof Function?t():t}function kW(t){return(t??E(pt)).get(Wn)==="browser"}var _i=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_i||{}),FW;function aE(t,e){return FW(t,e)}function $a(t,e,n,r,i){if(r!=null){let o,s=!1;Ti(r)?o=r:ao(r)&&(s=!0,r=r[Pi]);let a=$r(r);t===0&&n!==null?i==null?kN(e,n,a):Of(e,n,a,i||null,!0):t===1&&n!==null?Of(e,n,a,i||null,!0):t===2?ZW(e,a,s):t===3&&e.destroyNode(a),o!=null&&XW(e,t,o,n,i)}}function jW(t,e){return t.createText(e)}function LW(t,e,n){t.setValue(e,n)}function qW(t,e){return t.createComment(NW(e))}function MN(t,e,n){return t.createElement(e,n)}function BW(t,e){ON(t,e),e[Pi]=null,e[fn]=null}function VW(t,e,n,r,i,o){r[Pi]=i,r[fn]=e,uh(t,r,n,1,i,o)}function ON(t,e){e[Hr].changeDetectionScheduler?.notify(8),uh(t,e,e[qe],2,null,null)}function zW(t){let e=t[sl];if(!e)return bw(t[K],t);for(;e;){let n=null;if(ao(e))n=e[sl];else{let r=e[Ot];r&&(n=r)}if(!n){for(;e&&!e[Cr]&&e!==t;)ao(e)&&bw(e[K],e),e=e[xt];e===null&&(e=t),ao(e)&&bw(e[K],e),n=e&&e[Cr]}e=n}}function UW(t,e,n,r){let i=Ot+r,o=n.length;r>0&&(n[i-1][Cr]=e),r<o-Ot?(e[Cr]=n[i],px(n,Ot+r,e)):(n.push(e),e[Cr]=null),e[xt]=n;let s=e[vs];s!==null&&n!==s&&xN(s,e);let a=e[Di];a!==null&&a.insertView(t),Bw(e),e[z]|=128}function xN(t,e){let n=t[ec],r=e[xt];if(ao(r))t[z]|=_f.HasTransplantedViews;else{let i=r[xt][Pn];e[Pn]!==i&&(t[z]|=_f.HasTransplantedViews)}n===null?t[ec]=[e]:n.push(e)}function cE(t,e){let n=t[ec],r=n.indexOf(e);n.splice(r,1)}function cl(t,e){if(t.length<=Ot)return;let n=Ot+e,r=t[n];if(r){let i=r[vs];i!==null&&i!==t&&cE(i,r),e>0&&(t[n-1][Cr]=r[Cr]);let o=bf(t,Ot+e);BW(r[K],r);let s=o[Di];s!==null&&s.detachView(o[K]),r[xt]=null,r[Cr]=null,r[z]&=-129}return r}function ah(t,e){if(!(e[z]&256)){let n=e[qe];n.destroyNode&&uh(t,e,n,3,null,null),zW(e)}}function bw(t,e){if(e[z]&256)return;let n=ce(null);try{e[z]&=-129,e[z]|=256,e[Un]&&Ap(e[Un]),$W(t,e),HW(t,e),e[K].type===1&&e[qe].destroy();let r=e[vs];if(r!==null&&Ti(e[xt])){r!==e[xt]&&cE(r,e);let i=e[Di];i!==null&&i.detachView(t)}iW(e)}finally{ce(n)}}function HW(t,e){let n=t.cleanup,r=e[If];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[If]=null);let i=e[so];if(i!==null){e[so]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function $W(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ss)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Vr(4,a,c);try{c.call(a)}finally{Vr(5,a,c)}}else{Vr(4,i,o);try{o.call(i)}finally{Vr(5,i,o)}}}}}function NN(t,e,n){return WW(t,e.parent,n)}function WW(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Pi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Ur.None||o===Ur.Emulated)return null}return $n(r,n)}}function Of(t,e,n,r,i){t.insertBefore(e,n,r,i)}function kN(t,e,n){t.appendChild(e,n)}function LO(t,e,n,r,i){r!==null?Of(t,e,n,r,i):kN(t,e,n)}function GW(t,e,n,r){t.removeChild(e,n,r)}function uE(t,e){return t.parentNode(e)}function KW(t,e){return t.nextSibling(e)}function FN(t,e,n){return QW(t,e,n)}function JW(t,e,n){return t.type&40?$n(t,n):null}var QW=JW,qO;function ch(t,e,n,r){let i=NN(t,r,e),o=e[qe],s=r.parent||e[fn],a=FN(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)LO(o,i,n[c],a,!1);else LO(o,i,n,a,!1);qO!==void 0&&qO(o,r,e,n,i)}function el(t,e){if(e!==null){let n=e.type;if(n&3)return $n(e,t);if(n&4)return tb(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return el(t,r);{let i=t[e.index];return Ti(i)?tb(-1,i):$r(i)}}else{if(n&128)return el(t,e.next);if(n&32)return aE(e,t)()||$r(t[e.index]);{let r=jN(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ys(t[Pn]);return el(i,r)}else return el(t,e.next)}}}return null}function jN(t,e){if(e!==null){let r=t[Pn][fn],i=e.projection;return r.projection[i]}return null}function tb(t,e){let n=Ot+t+1;if(n<e.length){let r=e[n],i=r[K].firstChild;if(i!==null)return el(r,i)}return e[ms]}function ZW(t,e,n){let r=uE(t,e);r&&GW(t,r,e,n)}function lE(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&fo($r(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)lE(t,e,n.child,r,i,o,!1),$a(e,t,i,a,o);else if(c&32){let u=aE(n,r),l;for(;l=u();)$a(e,t,i,l,o);$a(e,t,i,a,o)}else c&16?LN(t,e,r,n,i,o):$a(e,t,i,a,o);n=s?n.projectionNext:n.next}}function uh(t,e,n,r,i,o){lE(n,r,t.firstChild,e,i,o,!1)}function YW(t,e,n){let r=e[qe],i=NN(t,n,e),o=n.parent||e[fn],s=FN(o,n,e);LN(r,0,e,n,i,s)}function LN(t,e,n,r,i,o){let s=n[Pn],c=s[fn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];$a(e,t,i,l,o)}else{let u=c,l=s[xt];hN(r)&&(u.flags|=128),lE(t,e,u,l,i,o,!0)}}function XW(t,e,n,r,i){let o=n[ms],s=$r(n);o!==s&&$a(e,t,r,o,i);for(let a=Ot;a<n.length;a++){let c=n[a];uh(c[K],c,t,e,r,o)}}function eG(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:_i.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_i.Important),t.setStyle(n,r,i,o))}}function tG(t,e,n){t.setAttribute(e,"style",n)}function qN(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function BN(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Nw(t,e,r),i!==null&&qN(t,e,i),o!==null&&tG(t,e,o)}var Sr={};function Ds(t=1){VN(Ge(),X(),Co()+t,!1)}function VN(t,e,n,r){if(!r)if((e[z]&3)===3){let o=t.preOrderCheckHooks;o!==null&&vf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&mf(e,o,0,n)}Cs(n)}function V(t,e=te.Default){let n=X();if(n===null)return x(t,e);let r=Nt();return aN(r,n,Yt(t),e)}function zN(){let t="invalid";throw new Error(t)}function UN(t,e,n,r,i,o){let s=ce(null);try{let a=null;i&co.SignalBased&&(a=e[r][Vn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&co.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):Ox(e,a,r,o)}finally{ce(s)}}function nG(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Cs(~i);else{let o=i,s=n[++r],a=n[++r];I4(s,o);let c=e[o];a(2,c)}}}finally{Cs(-1)}}function lh(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[Pi]=i,d[z]=r|4|128|8|64,(u!==null||t&&t[z]&2048)&&(d[z]|=2048),jx(d),d[xt]=d[cc]=t,d[Mt]=n,d[Hr]=s||t&&t[Hr],d[qe]=a||t&&t[qe],d[Xa]=c||t&&t[Xa]||null,d[fn]=o,d[Qf]=nW(),d[Ya]=l,d[Ax]=u,d[Pn]=e.type==2?t[Pn]:d,d}function fc(t,e,n,r,i){let o=t.data[e];if(o===null)o=rG(t,e,n,r,i),E4()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=S4();o.injectorIndex=s===null?-1:s.injectorIndex}return Is(o,!0),o}function rG(t,e,n,r,i){let o=$x(),s=Wb(),a=s?o:o&&o.parent,c=t.data[e]=uG(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function HN(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function $N(t,e,n,r,i){let o=Co(),s=r&2;try{Cs(-1),s&&e.length>nn&&VN(t,e,nn,!1),Vr(s?2:0,i),n(r,i)}finally{Cs(o),Vr(s?3:1,i)}}function dE(t,e,n){if(Ub(e)){let r=ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{ce(r)}}}function pE(t,e,n){Vx()&&(gG(t,e,n,$n(n,e)),(n.flags&64)===64&&KN(t,e,n))}function fE(t,e,n=$n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function WN(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=hE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function hE(t,e,n,r,i,o,s,a,c,u,l){let d=nn+r,p=d+i,f=iG(d,p),g=typeof u=="function"?u():u;return f[K]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function iG(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Sr);return n}function oG(t,e,n,r){let o=r.get(uW,wN)||n===Ur.ShadowDom,s=t.selectRootElement(e,o);return sG(s),s}function sG(t){aG(t)}var aG=()=>null;function cG(t,e,n,r){let i=ZN(e);i.push(n),t.firstCreatePass&&YN(t).push(r,i.length-1)}function uG(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return zx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function BO(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=co.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?VO(r,n,u,a,c):VO(r,n,u,a)}return r}function VO(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function lG(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],p=n?n.get(d):null,f=p?p.inputs:null,g=p?p.outputs:null;c=BO(0,d.inputs,l,c,f),u=BO(1,d.outputs,l,u,g);let m=c!==null&&s!==null&&!qb(e)?_G(c,l,s):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function dG(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gE(t,e,n,r,i,o,s,a){let c=$n(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(mE(t,n,l,r,i),Zf(e)&&pG(n,e.index)):e.type&3?(r=dG(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function pG(t,e){let n=yo(e,t);n[z]&16||(n[z]|=64)}function vE(t,e,n,r){if(Vx()){let i=r===null?null:{"":-1},o=mG(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&GN(t,e,n,s,i,a),i&&yG(n,r,i)}n.mergedAttrs=il(n.mergedAttrs,n.attrs)}function GN(t,e,n,r,i,o){for(let u=0;u<r.length;u++)Hw(Tf(n,e),t,r[u].type);SG(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=HN(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=il(n.mergedAttrs,l.hostAttrs),wG(t,n,e,c,l),CG(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}lG(t,n,o)}function fG(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;hG(s)!=a&&s.push(a),s.push(n,r,o)}}function hG(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function gG(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Zf(n)&&bG(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Tf(n,e),fo(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=ws(e,t,a,n);if(fo(u,e),s!==null&&DG(e,a-i,u,c,n,s),lo(c)){let l=yo(n.index,e);l[Mt]=ws(e,t,a,n)}}}function KN(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=D4();try{Cs(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Vw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&vG(c,u)}}finally{Cs(-1),Vw(s)}}function vG(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function mG(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(yx(e,s.selectors,!1))if(r||(r=[]),lo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;nb(t,e,c)}else r.unshift(s),nb(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function nb(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function yG(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new k(-301,!1);r.push(e[i],o)}}}function CG(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;lo(e)&&(n[""]=t)}}function SG(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function wG(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ka(i.type,!0)),s=new Ss(o,lo(i),V);t.blueprint[r]=s,n[r]=s,fG(t,e,r,HN(t,n,i.hostVars,Sr),i)}function bG(t,e,n){let r=$n(e,t),i=WN(n),o=t[Hr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=dh(t,lh(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function EG(t,e,n,r,i,o){let s=$n(t,e);IG(e[qe],s,o,t.value,n,r,i)}function IG(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?pl(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function DG(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];UN(r,n,c,u,l,d)}}function _G(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function JN(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function QN(t,e){let n=t.contentQueries;if(n!==null){let r=ce(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];eh(o),a.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function dh(t,e){return t[sl]?t[SO][Cr]=e:t[sl]=e,t[SO]=e,e}function rb(t,e,n){eh(0);let r=ce(null);try{e(t,n)}finally{ce(r)}}function ZN(t){return t[If]??=[]}function YN(t){return t.cleanup??=[]}function XN(t,e){let n=t[Xa],r=n?n.get(Wr,null):null;r&&r.handleError(e)}function mE(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],l=t.data[s];UN(l,u,r,a,c,i)}}function RG(t,e,n){let r=Fx(e,t);LW(t[qe],r,n)}function PG(t,e){let n=yo(e,t),r=n[K];TG(r,n);let i=n[Pi];i!==null&&n[Ya]===null&&(n[Ya]=iE(i,n[Xa])),yE(r,n,n[Mt])}function TG(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function yE(t,e,n){Qb(e);try{let r=t.viewQuery;r!==null&&rb(1,r,n);let i=t.template;i!==null&&$N(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Di]?.finishViewCreation(t),t.staticContentQueries&&QN(t,e),t.staticViewQueries&&rb(2,t.viewQuery,n);let o=t.components;o!==null&&AG(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[z]&=-5,Zb()}}function AG(t,e){for(let n=0;n<e.length;n++)PG(t,e[n])}function vl(t,e,n,r){let i=ce(null);try{let o=e.tView,a=t[z]&4096?4096:16,c=lh(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[vs]=u;let l=t[Di];return l!==null&&(c[Di]=l.createEmbeddedView(o)),yE(o,c,n),c}finally{ce(i)}}function e1(t,e){let n=Ot+e;if(n<t.length)return t[n]}function tc(t,e){return!e||e.firstChild===null||hN(t)}function ml(t,e,n,r=!0){let i=e[K];if(UW(i,e,t,n),r){let s=tb(n,t),a=e[qe],c=uE(a,t[ms]);c!==null&&VW(i,t[fn],a,e,c,s)}let o=e[Ya];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function t1(t,e){let n=cl(t,e);return n!==void 0&&ah(n[K],n),n}function xf(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push($r(o)),Ti(o)&&MG(o,r);let s=n.type;if(s&8)xf(t,e,n.child,r);else if(s&32){let a=aE(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=jN(e,n);if(Array.isArray(a))r.push(...a);else{let c=ys(e[Pn]);xf(c[K],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function MG(t,e){for(let n=Ot;n<t.length;n++){let r=t[n],i=r[K].firstChild;i!==null&&xf(r[K],r,i,e)}t[ms]!==t[Pi]&&e.push(t[ms])}var n1=[];function OG(t){return t[Un]??xG(t)}function xG(t){let e=n1.pop()??Object.create(kG);return e.lView=t,e}function NG(t){t.lView[Un]!==t&&(t.lView=null,n1.push(t))}var kG=$(b({},Da),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Xf(t.lView)},consumerOnSignalRead(){this.lView[Un]=this}});function FG(t){let e=t[Un]??Object.create(jG);return e.lView=t,e}var jG=$(b({},Da),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ys(t.lView);for(;e&&!r1(e[K]);)e=ys(e);e&&Lx(e)},consumerOnSignalRead(){this.lView[Un]=this}});function r1(t){return t.type!==2}var LG=100;function i1(t,e=!0,n=0){let r=t[Hr],i=r.rendererFactory,o=!1;o||i.begin?.();try{qG(t,n)}catch(s){throw e&&XN(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function qG(t,e){let n=Wx();try{bO(!0),ib(t,e);let r=0;for(;al(t);){if(r===LG)throw new k(103,!1);r++,ib(t,1)}}finally{bO(n)}}function BG(t,e,n,r){let i=e[z];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Hr].inlineEffectRunner?.flush(),Qb(e);let a=!0,c=null,u=null;o||(r1(t)?(u=OG(e),c=Qu(u)):IM()===null?(a=!1,u=FG(e),c=Qu(u)):e[Un]&&(Ap(e[Un]),e[Un]=null));try{jx(e),b4(t.bindingStartIndex),n!==null&&$N(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let f=t.preOrderCheckHooks;f!==null&&vf(e,f,null)}else{let f=t.preOrderHooks;f!==null&&mf(e,f,0,null),yw(e,0)}if(s||VG(e),o1(e,0),t.contentQueries!==null&&QN(t,e),!o)if(l){let f=t.contentCheckHooks;f!==null&&vf(e,f)}else{let f=t.contentHooks;f!==null&&mf(e,f,1),yw(e,1)}nG(t,e);let d=t.components;d!==null&&a1(e,d,0);let p=t.viewQuery;if(p!==null&&rb(2,p,r),!o)if(l){let f=t.viewCheckHooks;f!==null&&vf(e,f)}else{let f=t.viewHooks;f!==null&&mf(e,f,2),yw(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[gf]){for(let f of e[gf])f();e[gf]=null}o||(e[z]&=-73)}catch(l){throw o||Xf(e),l}finally{u!==null&&(Pp(u,c),a&&NG(u)),Zb()}}function o1(t,e){for(let n=vN(t);n!==null;n=mN(n))for(let r=Ot;r<n.length;r++){let i=n[r];s1(i,e)}}function VG(t){for(let e=vN(t);e!==null;e=mN(e)){if(!(e[z]&_f.HasTransplantedViews))continue;let n=e[ec];for(let r=0;r<n.length;r++){let i=n[r];Lx(i)}}}function zG(t,e,n){let r=yo(e,t);s1(r,n)}function s1(t,e){$b(t)&&ib(t,e)}function ib(t,e){let r=t[K],i=t[z],o=t[Un],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Tp(o)),s||=!1,o&&(o.dirty=!1),t[z]&=-9217,s)BG(r,t,r.template,t[Mt]);else if(i&8192){o1(t,1);let a=r.components;a!==null&&a1(t,a,1)}}function a1(t,e,n){for(let r=0;r<e.length;r++)zG(t,e[r],n)}function CE(t,e){let n=Wx()?64:1088;for(t[Hr].changeDetectionScheduler?.notify(e);t;){t[z]|=n;let r=ys(t);if(Lw(t)&&!r)return t;t=r}return null}var bs=class{get rootNodes(){let e=this._lView,n=e[K];return xf(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mt]}set context(e){this._lView[Mt]=e}get destroyed(){return(this._lView[z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xt];if(Ti(e)){let n=e[Df],r=n?n.indexOf(this):-1;r>-1&&(cl(e,r),bf(n,r))}this._attachedToViewContainer=!1}ah(this._lView[K],this._lView)}onDestroy(e){qx(this._lView,e)}markForCheck(){CE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[z]&=-129}reattach(){Bw(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,i1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new k(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Lw(this._lView),n=this._lView[vs];n!==null&&!e&&cE(n,this._lView),ON(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new k(902,!1);this._appRef=e;let n=Lw(this._lView),r=this._lView[vs];r!==null&&!n&&xN(r,this._lView),Bw(this._lView)}},Ri=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$G;let t=e;return t})(),UG=Ri,HG=class extends UG{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=vl(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new bs(i)}};function $G(){return ph(Nt(),X())}function ph(t,e){return t.type&4?new HG(e,t,pc(t,e)):null}var ume=new RegExp(`^(\\d+)*(${aW}|${sW})*(.*)`);var WG=()=>null;function nc(t,e){return WG(t,e)}var rc=class{},SE=new N("",{providedIn:"root",factory:()=>!1});var c1=new N(""),ob=class{},Nf=class{};function GG(t){let e=Error(`No component factory found for ${en(t)}.`);return e[KG]=t,e}var KG="ngComponent";var sb=class{resolveComponentFactory(e){throw GG(e)}},xE=class xE{};xE.NULL=new sb;var ho=xE,go=class{},Jr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>JG();let t=e;return t})();function JG(){let t=X(),e=Nt(),n=yo(e.index,t);return(ao(n)?n:t)[qe]}var QG=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var zO=new Set;function Qr(t){zO.has(t)||(zO.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ln=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ln||{}),ZG={destroy(){}};function wE(t,e){!e&&zb(wE);let n=e?.injector??E(pt);return kW(n)?(Qr("NgAfterNextRender"),XG(t,n,!0,e?.phase??ln.MixedReadWrite)):ZG}function YG(t,e){if(t instanceof Function)switch(e){case ln.EarlyRead:return{earlyRead:t};case ln.Write:return{write:t};case ln.MixedReadWrite:return{mixedReadWrite:t};case ln.Read:return{read:t}}return t}function XG(t,e,n,r){let i=YG(t,r),o=e.get(bE),s=o.handler??=new cb,a=[],c=[],u=()=>{for(let f of c)s.unregister(f);l()},l=e.get(dc).onDestroy(u),d=0,p=(f,g)=>{if(!g)return;let m=n?(...w)=>(d--,d<1&&u(),g(...w)):g,y=Tn(e,()=>new ab(f,a,m));s.register(y),c.push(y),d++};return p(ln.EarlyRead,i.earlyRead),p(ln.Write,i.write),p(ln.MixedReadWrite,i.mixedReadWrite),p(ln.Read,i.read),{destroy:u}}var ab=class{constructor(e,n,r){this.phase=e,this.pipelinedArgs=n,this.callbackFn=r,this.zone=E(_e),this.errorHandler=E(Wr,{optional:!0}),E(rc,{optional:!0})?.notify(6)}invoke(){try{let e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}},cb=class{constructor(){this.executingCallbacks=!1,this.buckets={[ln.EarlyRead]:new Set,[ln.Write]:new Set,[ln.MixedReadWrite]:new Set,[ln.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},bE=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function kf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Aw(i,a);else if(o==2){let c=a,u=e[++s];r=Aw(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ff=class extends ho{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=uo(e);return new ic(n,this.ngModule)}};function UO(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:co.None;e?n.push({propName:s,templateName:r,isSignal:(a&co.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function e5(t){let e=t.toLowerCase();return e==="svg"?c4:e==="math"?u4:null}var ic=class extends Nf{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=UO(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return UO(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=z6(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=ce(null);try{i=i||this.ngModule;let s=i instanceof tn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new zw(e,s):e,c=a.get(go,null);if(c===null)throw new k(407,!1);let u=a.get(QG,null),l=a.get(bE,null),d=a.get(rc,null),p={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=r?oG(f,r,this.componentDef.encapsulation,a):MN(f,g,e5(g)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let w=null;m!==null&&(w=iE(m,a,!0));let I=hE(0,null,null,1,0,null,null,null,null,null,null),C=lh(null,I,null,y,null,null,p,f,a,null,w);Qb(C);let _,H;try{let O=this.componentDef,de,ae=null;O.findHostDirectiveDefs?(de=[],ae=new Map,O.findHostDirectiveDefs(O,de,ae),de.push(O)):de=[O];let De=t5(C,m),Qe=n5(De,m,O,de,C,p,f);H=Hb(I,nn),m&&o5(f,O,m,r),n!==void 0&&s5(H,this.ngContentSelectors,n),_=i5(Qe,O,de,ae,C,[a5]),yE(I,C,null)}finally{Zb()}return new ub(this.componentType,_,pc(H,C),C,H)}finally{ce(o)}}},ub=class extends ob{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new bs(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;mE(o[K],o,i,e,n),this.previousInputValues.set(e,n);let s=yo(this._tNode.index,o);CE(s,1)}}get injector(){return new gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function t5(t,e){let n=t[K],r=nn;return t[r]=e,fc(n,r,2,"#host",null)}function n5(t,e,n,r,i,o,s){let a=i[K];r5(r,t,e,s);let c=null;e!==null&&(c=iE(e,i[Xa]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=lh(i,WN(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&nb(a,t,r.length-1),dh(i,d),i[t.index]=d}function r5(t,e,n,r){for(let i of t)e.mergedAttrs=il(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(kf(e,e.mergedAttrs,!0),n!==null&&BN(r,n,e))}function i5(t,e,n,r,i,o){let s=Nt(),a=i[K],c=$n(s,i);GN(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,p=ws(i,a,d,s);fo(p,i)}KN(a,i,s),c&&fo(c,i);let u=ws(i,a,s.directiveStart+s.componentOffset,s);if(t[Mt]=i[Mt]=u,o!==null)for(let l of o)l(u,e);return dE(a,s,i),u}function o5(t,e,n,r){if(r)Nw(t,n,["ng-version","18.1.3"]);else{let{attrs:i,classes:o}=U6(e.selectors[0]);i&&Nw(t,n,i),o&&o.length>0&&qN(t,n,o.join(" "))}}function s5(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function a5(){let t=Nt();ih(X()[K],t)}var wr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=c5;let t=e;return t})();function c5(){let t=Nt();return l1(t,X())}var u5=wr,u1=class extends u5{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return pc(this._hostTNode,this._hostLView)}get injector(){return new gs(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yb(this._hostTNode,this._hostLView);if(tN(e)){let n=Pf(e,this._hostLView),r=Rf(e),i=n[K].data[r+8];return new gs(i,n)}else return new gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=HO(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,tc(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!i4(e),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?e:new ic(uo(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(s?u:this.parentInjector).get(tn,null);m&&(o=m)}let l=uo(c.componentType??{}),d=nc(this._lContainer,l?.id??null),p=d?.firstChild??null,f=c.create(u,i,p,o);return this.insertImpl(f.hostView,a,tc(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(p4(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[xt],u=new u1(c,c[fn],c[xt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ml(s,i,o,r),e.attachToViewContainerRef(),px(Ew(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=HO(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=cl(this._lContainer,n);r&&(bf(Ew(this._lContainer),n),ah(r[K],r))}detach(e){let n=this._adjustIndex(e,-1),r=cl(this._lContainer,n);return r&&bf(Ew(this._lContainer),n)!=null?new bs(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function HO(t){return t[Df]}function Ew(t){return t[Df]||(t[Df]=[])}function l1(t,e){let n,r=e[t.index];return Ti(r)?n=r:(n=JN(r,e,null,t),e[t.index]=n,dh(e,n)),d5(n,e,t,r),new u1(n,t,e)}function l5(t,e){let n=t[qe],r=n.createComment(""),i=$n(e,t),o=uE(n,i);return Of(n,o,r,KW(n,i),!1),r}var d5=h5,p5=()=>!1;function f5(t,e,n){return p5(t,e,n)}function h5(t,e,n,r){if(t[ms])return;let i;n.type&8?i=$r(r):i=l5(e,n),t[ms]=i}var lb=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},db=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)IE(e,n).matches!==null&&this.queries[n].setDirty()}},pb=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=S5(e):this.predicate=e}},fb=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},hb=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,g5(n,o)),this.matchTNodeWithReadOption(e,n,yf(n,e,o,!1,!1))}else r===Ri?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,yf(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ft||i===wr||i===Ri&&n.type&4)this.addMatch(n.index,-2);else{let o=yf(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function g5(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function v5(t,e){return t.type&11?pc(t,e):t.type&4?ph(t,e):null}function m5(t,e,n,r){return n===-1?v5(e,t):n===-2?y5(t,e,r):ws(t,t[K],n,e)}function y5(t,e,n){if(n===ft)return pc(e,t);if(n===Ri)return ph(e,t);if(n===wr)return l1(e,t)}function d1(t,e,n,r){let i=e[Di].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=o[u];a.push(m5(e,l,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function gb(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=d1(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],l=e[-c];for(let d=Ot;d<l.length;d++){let p=l[d];p[vs]===p[xt]&&gb(p[K],p,u,r)}if(l[ec]!==null){let d=l[ec];for(let p=0;p<d.length;p++){let f=d[p];gb(f[K],f,u,r)}}}}}return r}function EE(t,e){return t[Di].queries[e].queryList}function C5(t,e,n){let r=new Qw((n&4)===4);return cG(t,e,r,r.destroy),(e[Di]??=new db).queries.push(new lb(r))-1}function p1(t,e,n){let r=Ge();return r.firstCreatePass&&(w5(r,new pb(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),C5(r,X(),e)}function S5(t){return t.split(",").map(e=>e.trim())}function w5(t,e,n){t.queries===null&&(t.queries=new fb),t.queries.track(new hb(e,n))}function IE(t,e){return t.queries.getByIndex(e)}function f1(t,e){let n=t[K],r=IE(n,e);return r.crossesNgTemplate?gb(n,t,e,[]):d1(n,t,r,e)}function DE(t){return typeof t=="function"&&t[Vn]!==void 0}function wo(t,e){Qr("NgSignals");let n=kM(t),r=n[Vn];return e?.equal&&(r.equal=e.equal),n.set=i=>JS(r,i),n.update=i=>FM(r,i),n.asReadonly=b5.bind(n),n}function b5(){let t=this[Vn];if(t.readonlyFn===void 0){let e=()=>this();e[Vn]=t,t.readonlyFn=e}return t.readonlyFn}function h1(t){return DE(t)&&typeof t.set=="function"}function g1(t,e){let n,r=KS(()=>{n._dirtyCounter();let i=_5(n,t);if(e&&i===void 0)throw new k(-951,!1);return i});return n=r[Vn],n._dirtyCounter=wo(0),n._flatValue=void 0,r}function E5(){return g1(!0,!1)}function I5(){return g1(!0,!0)}function D5(t,e){let n=t[Vn];n._lView=X(),n._queryIndex=e,n._queryList=EE(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function _5(t,e){let n=t._lView,r=t._queryIndex;if(n===void 0||r===void 0||n[z]&4)return e?void 0:Xt;let i=EE(n,r),o=f1(n,r);return i.reset(o,fN),e?i.first:i._changesDetected||t._flatValue===void 0?t._flatValue=i.toArray():t._flatValue}function $O(t,e){return E5()}function R5(t,e){return I5()}var dme=($O.required=R5,$O);function P5(t){return Object.getPrototypeOf(t.prototype).constructor}function Zr(t){let e=P5(t.type),n=!0,r=[t];for(;e;){let i;if(lo(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new k(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=pf(t.inputs),s.inputTransforms=pf(t.inputTransforms),s.declaredInputs=pf(t.declaredInputs),s.outputs=pf(t.outputs);let a=i.hostBindings;a&&x5(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&M5(t,c),u&&O5(t,u),T5(t,i),a6(t.outputs,i.outputs),lo(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Zr&&(n=!1)}}e=Object.getPrototypeOf(e)}A5(r)}function T5(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function A5(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=il(i.hostAttrs,n=il(n,i.hostAttrs))}}function pf(t){return t===Ja?{}:t===Xt?[]:t}function M5(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function O5(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function x5(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function _E(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var vo=class{},ul=class{};var vb=class extends vo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ff(this);let i=bx(e);this._bootstrapComponents=AN(i.bootstrap),this._r3Injector=lN(e,n,[{provide:vo,useValue:this},{provide:ho,useValue:this.componentFactoryResolver},...r],en(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mb=class extends ul{constructor(e){super(),this.moduleType=e}create(e){return new vb(this.moduleType,e,[])}};var jf=class extends vo{constructor(e){super(),this.componentFactoryResolver=new Ff(this),this.instance=null;let n=new ol([...e.providers,{provide:vo,useValue:this},{provide:ho,useValue:this.componentFactoryResolver}],e.parent||Vb(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function fh(t,e,n=null){return new jf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function v1(t){return k5(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function N5(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function k5(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function RE(t,e,n){return t[e]=n}function Hn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function m1(t,e,n,r){let i=Hn(t,e,n);return Hn(t,e+1,r)||i}function F5(t,e,n,r,i){let o=m1(t,e,n,r);return Hn(t,e+2,i)||o}function j5(t){return(t.flags&32)===32}function L5(t,e,n,r,i,o,s,a,c){let u=e.consts,l=fc(e,t,4,s||null,a||null);vE(e,n,l,po(u,c)),ih(e,l);let d=l.tView=hE(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Lf(t,e,n,r,i,o,s,a,c,u){let l=n+nn,d=e.firstCreatePass?L5(l,e,t,r,i,o,s,a,c):e.data[l];Is(d,!1);let p=q5(e,t,d,n);nh()&&ch(e,t,p,d),fo(p,t);let f=JN(p,t,p,d);return t[l]=f,dh(t,f),f5(f,d,t),Yf(d)&&pE(e,t,d),c!=null&&fE(t,d,u),d}function hh(t,e,n,r,i,o,s,a){let c=X(),u=Ge(),l=po(u.consts,o);return Lf(c,u,t,e,n,r,i,l,s,a),hh}var q5=B5;function B5(t,e,n,r){return rh(!0),e[qe].createComment("")}function hc(t,e,n,r){let i=X(),o=uc();if(Hn(i,o,e)){let s=Ge(),a=th();EG(a,i,t,e,n,r)}return hc}function y1(t,e,n,r){return Hn(t,uc(),n)?e+pl(n)+r:Sr}function ff(t,e){return t<<17|e<<2}function Es(t){return t>>17&32767}function V5(t){return(t&2)==2}function z5(t,e){return t&131071|e<<17}function yb(t){return t|2}function oc(t){return(t&131068)>>2}function Iw(t,e){return t&-131069|e<<2}function U5(t){return(t&1)===1}function Cb(t){return t|1}function H5(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Es(s),c=oc(s);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||fl(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let p=Es(t[a+1]);t[r+1]=ff(p,a),p!==0&&(t[p+1]=Iw(t[p+1],r)),t[a+1]=z5(t[a+1],r)}else t[r+1]=ff(a,0),a!==0&&(t[a+1]=Iw(t[a+1],r)),a=r;else t[r+1]=ff(c,0),a===0?a=r:t[c+1]=Iw(t[c+1],r),c=r;u&&(t[r+1]=yb(t[r+1])),WO(t,l,r,!0),WO(t,l,r,!1),$5(e,l,t,r,o),s=ff(a,c),o?e.classBindings=s:e.styleBindings=s}function $5(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&fl(o,e)>=0&&(n[r+1]=Cb(n[r+1]))}function WO(t,e,n,r){let i=t[n+1],o=e===null,s=r?Es(i):oc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];W5(c,e)&&(a=!0,t[s+1]=r?Cb(u):yb(u)),s=r?Es(u):oc(u)}a&&(t[n+1]=r?yb(i):Cb(i))}function W5(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?fl(t,e)>=0:!1}var st={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function C1(t){return t.substring(st.key,st.keyEnd)}function G5(t){return t.substring(st.value,st.valueEnd)}function K5(t){return b1(t),S1(t,sc(t,0,st.textEnd))}function S1(t,e){let n=st.textEnd;return n===e?-1:(e=st.keyEnd=Q5(t,st.key=e,n),sc(t,e,n))}function J5(t){return b1(t),w1(t,sc(t,0,st.textEnd))}function w1(t,e){let n=st.textEnd,r=st.key=sc(t,e,n);return n===r?-1:(r=st.keyEnd=Z5(t,r,n),r=GO(t,r,n,58),r=st.value=sc(t,r,n),r=st.valueEnd=Y5(t,r,n),GO(t,r,n,59))}function b1(t){st.key=0,st.keyEnd=0,st.value=0,st.valueEnd=0,st.textEnd=t.length}function sc(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Q5(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Z5(t,e,n){let r;for(;e<n&&((r=t.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function GO(t,e,n,r){return e=sc(t,e,n),e<n&&e++,e}function Y5(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){let c=t.charCodeAt(s++);if(c===59)return a;c===34||c===39?a=s=KO(t,c,s,n):e===s-4&&o===85&&i===82&&r===76&&c===40?a=s=KO(t,41,s,n):c>32&&(a=s),o=i,i=r,r=c&-33}return a}function KO(t,e,n,r){let i=-1,o=n;for(;o<r;){let s=t.charCodeAt(o++);if(s==e&&i!==92)return o;s==92&&i===92?i=0:i=s}throw new Error}function Gn(t,e,n){let r=X(),i=uc();if(Hn(r,i,e)){let o=Ge(),s=th();gE(o,s,r,t,e,r[qe],n,!1)}return Gn}function Sb(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";mE(t,n,o[s],s,r)}function E1(t,e,n){return I1(t,e,n,!1),E1}function gh(t,e){return I1(t,e,null,!0),gh}function pme(t){D1(P1,X5,t,!1)}function X5(t,e){for(let n=J5(e);n>=0;n=w1(e,n))P1(t,C1(e),G5(e))}function gc(t){D1(s9,e9,t,!0)}function e9(t,e){for(let n=K5(e);n>=0;n=S1(e,n))Kf(t,C1(e),!0)}function I1(t,e,n,r){let i=X(),o=Ge(),s=Gx(2);if(o.firstUpdatePass&&R1(o,t,s,r),e!==Sr&&Hn(i,s,e)){let a=o.data[Co()];T1(o,a,i,i[qe],t,i[s+1]=c9(e,n),r,s)}}function D1(t,e,n,r){let i=Ge(),o=Gx(2);i.firstUpdatePass&&R1(i,null,o,r);let s=X();if(n!==Sr&&Hn(s,o,n)){let a=i.data[Co()];if(A1(a,r)&&!_1(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Aw(c,n||"")),Sb(i,a,s,n,r)}else a9(i,a,s,s[qe],s[o+1],s[o+1]=o9(t,e,n),r,o)}}function _1(t,e){return e>=t.expandoStartIndex}function R1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Co()],s=_1(t,n);A1(o,r)&&e===null&&!s&&(e=!1),e=t9(i,o,e,r),H5(i,o,e,n,s,r)}}function t9(t,e,n,r){let i=_4(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Dw(null,t,e,n,r),n=ll(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Dw(i,t,e,n,r),o===null){let c=n9(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Dw(null,t,e,c[1],r),c=ll(c,e.attrs,r),r9(t,e,r,c))}else o=i9(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function n9(t,e,n){let r=n?e.classBindings:e.styleBindings;if(oc(r)!==0)return t[Es(r)]}function r9(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Es(i)]=r}function i9(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ll(r,s,n)}return ll(r,e.attrs,n)}function Dw(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ll(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ll(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Kf(t,s,n?!0:e[++o]))}return t===void 0?null:t}function o9(t,e,n){if(n==null||n==="")return Xt;let r=[],i=So(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function P1(t,e,n){Kf(t,e,So(n))}function s9(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Kf(t,r,n)}function a9(t,e,n,r,i,o,s,a){i===Sr&&(i=Xt);let c=0,u=0,l=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;l!==null||d!==null;){let p=c<i.length?i[c+1]:void 0,f=u<o.length?o[u+1]:void 0,g=null,m;l===d?(c+=2,u+=2,p!==f&&(g=d,m=f)):d===null||l!==null&&l<d?(c+=2,g=l):(u+=2,g=d,m=f),g!==null&&T1(t,e,n,r,g,m,s,a),l=c<i.length?i[c]:null,d=u<o.length?o[u]:null}}function T1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=U5(u)?JO(c,e,n,i,oc(u),s):void 0;if(!qf(l)){qf(o)||V5(u)&&(o=JO(c,null,n,i,a,s));let d=Fx(Co(),n);eG(r,s,d,i,o)}}function JO(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,p=n[i+1];p===Sr&&(p=d?Xt:void 0);let f=d?vw(p,r):l===r?p:void 0;if(u&&!qf(f)&&(f=vw(c,r)),qf(f)&&(a=f,s))return a;let g=t[i+1];i=s?Es(g):oc(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=vw(c,r))}return a}function qf(t){return t!==void 0}function c9(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=en(So(t)))),t}function A1(t,e){return(t.flags&(e?8:16))!==0}var wb=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function _w(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function u9(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=t.at(o),l=e[o],d=_w(o,u,o,l,n);if(d!==0){d<0&&t.updateValue(o,l),o++;continue}let p=t.at(s),f=e[c],g=_w(s,p,c,f,n);if(g!==0){g<0&&t.updateValue(s,f),s--,c--;continue}let m=n(o,u),y=n(s,p),w=n(o,l);if(Object.is(w,y)){let I=n(c,f);Object.is(I,m)?(t.swap(o,s),t.updateValue(s,f),c--,s--):t.move(s,o),t.updateValue(o,l),o++;continue}if(r??=new Bf,i??=ZO(t,o,s,n),bb(t,r,o,w))t.updateValue(o,l),o++,s++;else if(i.has(w))r.set(m,t.detach(o)),s--;else{let I=t.create(o,e[o]);t.attach(o,I),o++,s++}}for(;o<=c;)QO(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let l=t.at(o),d=u.value,p=_w(o,l,o,d,n);if(p!==0)p<0&&t.updateValue(o,d),o++,u=c.next();else{r??=new Bf,i??=ZO(t,o,s,n);let f=n(o,d);if(bb(t,r,o,f))t.updateValue(o,d),o++,s++,u=c.next();else if(!i.has(f))t.attach(o,t.create(o,d)),o++,s++,u=c.next();else{let g=n(o,l);r.set(g,t.detach(o)),s--}}}for(;!u.done;)QO(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function bb(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function QO(t,e,n,r,i){if(bb(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function ZO(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Bf=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function fme(t,e){Qr("NgControlFlow");let n=X(),r=uc(),i=n[r]!==Sr?n[r]:-1,o=i!==-1?Vf(n,nn+i):void 0,s=0;if(Hn(n,r,t)){let a=ce(null);try{if(o!==void 0&&t1(o,s),t!==-1){let c=nn+t,u=Vf(n,c),l=_b(n[K],c),d=nc(u,l.tView.ssrId),p=vl(n,l,e,{dehydratedView:d});ml(u,p,s,tc(l,d))}}finally{ce(a)}}else if(o!==void 0){let a=e1(o,s);a!==void 0&&(a[Mt]=e)}}var Eb=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ot}};function hme(t,e){return e}var Ib=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function gme(t,e,n,r,i,o,s,a,c,u,l,d,p){Qr("NgControlFlow");let f=X(),g=Ge(),m=c!==void 0,y=X(),w=a?s.bind(y[Pn][Mt]):s,I=new Ib(m,w);y[nn+t]=I,Lf(f,g,t+1,e,n,r,i,po(g.consts,o)),m&&Lf(f,g,t+2,c,u,l,d,po(g.consts,p))}var Db=class extends wb{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ot}at(e){return this.getLView(e)[Mt].$implicit}attach(e,n){let r=n[Ya];this.needsIndexUpdate||=e!==this.length,ml(this.lContainer,n,e,tc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,l9(this.lContainer,e)}create(e,n){let r=nc(this.lContainer,this.templateTNode.tView.ssrId),i=vl(this.hostLView,this.templateTNode,new Eb(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){ah(e[K],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Mt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Mt].$index=e}getLView(e){return d9(this.lContainer,e)}};function vme(t){let e=ce(null),n=Co();try{let r=X(),i=r[K],o=r[n],s=n+1,a=Vf(r,s);if(o.liveCollection===void 0){let u=_b(i,s);o.liveCollection=new Db(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(u9(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=uc(),l=c.length===0;if(Hn(r,u,l)){let d=n+2,p=Vf(r,d);if(l){let f=_b(i,d),g=nc(p,f.tView.ssrId),m=vl(r,f,void 0,{dehydratedView:g});ml(p,m,0,tc(f,g))}else t1(p,0)}}}finally{ce(e)}}function Vf(t,e){return t[e]}function l9(t,e){return cl(t,e)}function d9(t,e){return e1(t,e)}function _b(t,e){return Hb(t,e)}function p9(t,e,n,r,i,o){let s=e.consts,a=po(s,i),c=fc(e,t,2,r,a);return vE(e,n,c,po(s,o)),c.attrs!==null&&kf(c,c.attrs,!1),c.mergedAttrs!==null&&kf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function kt(t,e,n,r){let i=X(),o=Ge(),s=nn+t,a=i[qe],c=o.firstCreatePass?p9(s,o,i,e,n,r):o.data[s],u=f9(o,i,c,a,e,t);i[s]=u;let l=Yf(c);return Is(c,!0),BN(a,u,c),!j5(c)&&nh()&&ch(o,i,u,c),g4()===0&&fo(u,i),v4(),l&&(pE(o,i,c),dE(o,c,i)),r!==null&&fE(i,c),kt}function hn(){let t=Nt();Wb()?Gb():(t=t.parent,Is(t,!1));let e=t;y4(e)&&C4(),m4();let n=Ge();return n.firstCreatePass&&(ih(n,t),Ub(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&x4(e)&&Sb(n,e,X(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&N4(e)&&Sb(n,e,X(),e.stylesWithoutHost,!1),hn}function Yr(t,e,n,r){return kt(t,e,n,r),hn(),Yr}var f9=(t,e,n,r,i,o)=>(rh(!0),MN(r,i,T4()));function h9(t,e,n,r,i){let o=e.consts,s=po(o,r),a=fc(e,t,8,"ng-container",s);s!==null&&kf(a,s,!0);let c=po(o,i);return vE(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function M1(t,e,n){let r=X(),i=Ge(),o=t+nn,s=i.firstCreatePass?h9(o,i,r,e,n):i.data[o];Is(s,!0);let a=v9(i,r,s,t);return r[o]=a,nh()&&ch(i,r,a,s),fo(a,r),Yf(s)&&(pE(i,r,s),dE(i,s,r)),n!=null&&fE(r,s),M1}function O1(){let t=Nt(),e=Ge();return Wb()?Gb():(t=t.parent,Is(t,!1)),e.firstCreatePass&&(ih(e,t),Ub(t)&&e.queries.elementEnd(t)),O1}function g9(t,e,n){return M1(t,e,n),O1(),g9}var v9=(t,e,n,r)=>(rh(!0),qW(e[qe],""));function x1(){return X()}var zf="en-US";var m9=zf;function y9(t){typeof t=="string"&&(m9=t.toLowerCase().replace(/_/g,"-"))}var C9=(t,e,n)=>{};function gn(t,e,n,r){let i=X(),o=Ge(),s=Nt();return N1(o,i,i[qe],s,t,e,r),gn}function S9(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[If],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function N1(t,e,n,r,i,o,s){let a=Yf(r),u=t.firstCreatePass&&YN(t),l=e[Mt],d=ZN(e),p=!0;if(r.type&3||s){let m=$n(r,e),y=s?s(m):m,w=d.length,I=s?_=>s($r(_[r.index])):r.index,C=null;if(!s&&a&&(C=S9(t,e,i,r.index)),C!==null){let _=C.__ngLastListenerFn__||C;_.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,p=!1}else{o=XO(r,e,l,o),C9(m,i,o);let _=n.listen(y,i,o);d.push(o,_),u&&u.push(i,I,w,w+1)}}else o=XO(r,e,l,o);let f=r.outputs,g;if(p&&f!==null&&(g=f[i])){let m=g.length;if(m)for(let y=0;y<m;y+=2){let w=g[y],I=g[y+1],H=e[w][I].subscribe(o),O=d.length;d.push(o,H),u&&u.push(i,r.index,O,-(O+1))}}}function YO(t,e,n,r){let i=ce(null);try{return Vr(6,e,n),n(r)!==!1}catch(o){return XN(t,o),!1}finally{Vr(7,e,n),ce(i)}}function XO(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?yo(t.index,e):e;CE(s,5);let a=YO(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=YO(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function PE(t=1){return P4(t)}function w9(t,e){let n=null,r=j6(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?yx(t,o,!0):B6(r,o))return i}return n}function vh(t){let e=X()[Pn][fn];if(!e.projection){let n=t?t.length:1,r=e.projection=P6(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?w9(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function mh(t,e=0,n,r,i,o){let s=X(),a=Ge(),c=r?t+1:null;c!==null&&Lf(s,a,c,r,i,o,null,n);let u=fc(a,nn+t,16,null,n||null);u.projection===null&&(u.projection=e),Gb();let d=!s[Ya]||zx();s[Pn][fn].projection[u.projection]===null&&c!==null?b9(s,a,c):d&&(u.flags&32)!==32&&YW(a,s,u)}function b9(t,e,n){let r=nn+n,i=e.data[r],o=t[r],s=nc(o,i.tView.ssrId),a=vl(t,i,void 0,{dehydratedView:s});ml(o,a,0,tc(i,s))}function E9(t,e,n){return k1(t,"",e,"",n),E9}function k1(t,e,n,r,i){let o=X(),s=y1(o,e,n,r);if(s!==Sr){let a=Ge(),c=th();gE(a,c,o,t,s,o[qe],i,!1)}return k1}function mme(t,e,n){p1(t,e,n)}function I9(t){let e=X(),n=Ge(),r=Jb();eh(r+1);let i=IE(n,r);if(t.dirty&&d4(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=f1(e,r);t.reset(o,fN),t.notifyOnChanges()}return!0}return!1}function D9(){return EE(X(),Jb())}function yme(t,e,n,r){D5(t,p1(e,n,r))}function Cme(t=1){eh(Jb()+t)}function Sme(t){let e=w4();return l4(e,nn+t)}function _s(t,e=""){let n=X(),r=Ge(),i=t+nn,o=r.firstCreatePass?fc(r,i,1,e,null):r.data[i],s=_9(r,n,o,e,t);n[i]=s,nh()&&ch(r,n,s,o),Is(o,!1)}var _9=(t,e,n,r,i)=>(rh(!0),jW(e[qe],r));function R9(t){return F1("",t,""),R9}function F1(t,e,n){let r=X(),i=y1(r,t,e,n);return i!==Sr&&RG(r,Co(),i),F1}function P9(t,e,n){h1(e)&&(e=e());let r=X(),i=uc();if(Hn(r,i,e)){let o=Ge(),s=th();gE(o,s,r,t,e,r[qe],n,!1)}return P9}function wme(t,e){let n=h1(t);return n&&t.set(e),n}function T9(t,e){let n=X(),r=Ge(),i=Nt();return N1(r,n,n[qe],i,t,e),T9}function A9(t,e,n){let r=Ge();if(r.firstCreatePass){let i=lo(t);Rb(n,r.data,r.blueprint,i,!0),Rb(e,r.data,r.blueprint,i,!1)}}function Rb(t,e,n,r,i){if(t=Yt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Rb(t[o],e,n,r,i);else{let o=Ge(),s=X(),a=Nt(),c=Za(t)?t:Yt(t.provide),u=Px(t),l=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(Za(t)||!t.multi){let f=new Ss(u,i,V),g=Pw(c,e,i?l:l+p,d);g===-1?(Hw(Tf(a,s),o,c),Rw(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[g]=f,s[g]=f)}else{let f=Pw(c,e,l+p,d),g=Pw(c,e,l,l+p),m=f>=0&&n[f],y=g>=0&&n[g];if(i&&!y||!i&&!m){Hw(Tf(a,s),o,c);let w=x9(i?O9:M9,n.length,i,r,u);!i&&y&&(n[g].providerFactory=w),Rw(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),s.push(w)}else{let w=j1(n[i?g:f],u,!i&&r);Rw(o,t,f>-1?f:g,w)}!i&&r&&y&&n[g].componentProviders++}}}function Rw(t,e,n,r){let i=Za(e),o=Z6(e);if(i||o){let c=(o?Yt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function j1(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Pw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function M9(t,e,n,r){return Pb(this.multi,[])}function O9(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ws(n,n[K],this.providerFactory.index,r);o=a.slice(0,s),Pb(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Pb(i,o);return o}function Pb(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function x9(t,e,n,r,i){let o=new Ss(t,n,V);return o.multi=[],o.index=e,o.componentProviders=0,j1(o,i,r&&!n),o}function vc(t,e=[]){return n=>{n.providersResolver=(r,i)=>A9(r,i?i(t):t,e)}}var N9=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Dx(!1,r.type),o=i.length>0?fh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=R({token:e,providedIn:"environment",factory:()=>new e(x(tn))});let t=e;return t})();function mc(t){Qr("NgStandalone"),t.getStandaloneInjector=e=>e.get(N9).getOrCreateStandaloneInjector(t)}function yc(t,e,n,r){return k9(X(),Kb(),t,e,n,r)}function bme(t,e,n,r,i){return F9(X(),Kb(),t,e,n,r,i)}function Eme(t,e,n,r,i,o){return j9(X(),Kb(),t,e,n,r,i,o)}function TE(t,e){let n=t[e];return n===Sr?void 0:n}function k9(t,e,n,r,i,o){let s=e+n;return Hn(t,s,i)?RE(t,s+1,o?r.call(o,i):r(i)):TE(t,s+1)}function F9(t,e,n,r,i,o,s){let a=e+n;return m1(t,a,i,o)?RE(t,a+2,s?r.call(s,i,o):r(i,o)):TE(t,a+2)}function j9(t,e,n,r,i,o,s,a){let c=e+n;return F5(t,c,i,o,s)?RE(t,c+3,a?r.call(a,i,o,s):r(i,o,s)):TE(t,c+3)}function Ime(t,e){return ph(t,e)}var yh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var L1=new N("");function Rs(t){return!!t&&typeof t.then=="function"}function q1(t){return!!t&&typeof t.subscribe=="function"}var Ch=new N(""),B1=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=E(Ch,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Rs(s))r.push(s);else if(q1(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yl=new N("");function L9(){NM(()=>{throw new k(600,!1)})}function q9(t){return t.isBoundToModule}var B9=10;function V9(t,e,n){try{let r=n();return Rs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Oi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(Y4),this.afterRenderEffectManager=E(bE),this.zonelessEnabled=E(SE),this.externalTestViews=new Set,this.beforeRender=new Xe,this.afterTick=new Xe,this.componentTypes=[],this.components=[],this.isStable=E(Kr).hasPendingTasks.pipe(Q(r=>!r)),this._injector=E(tn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Nf;if(!this._injector.get(B1).done){let f=!o&&wx(r),g=!1;throw new k(405,g)}let a;o?a=r:a=this._injector.get(ho).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=q9(a)?void 0:this._injector.get(vo),u=i||a.selector,l=a.create(pt.NULL,[],u,c),d=l.location.nativeElement,p=l.injector.get(L1,null);return p?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Tw(this.components,l),p?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new k(101,!1);let i=ce(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,ce(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(go,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<B9;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)z9(c,u,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>al(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>al(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Tw(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(yl,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Tw(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new k(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Tw(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function z9(t,e,n,r){if(!n&&!al(t))return;i1(t,e,n&&!r?0:1)}var Tb=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Sh=(()=>{let e=class e{compileModuleSync(r){return new mb(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=bx(r),s=AN(o.declarations).reduce((a,c)=>{let u=uo(c);return u&&a.push(new ic(u)),a},[]);return new Tb(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var U9=(()=>{let e=class e{constructor(){this.zone=E(_e),this.changeDetectionScheduler=E(rc),this.applicationRef=E(Oi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),H9=new N("",{factory:()=>!1});function V1({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new _e(z1()),[{provide:_e,useFactory:t},{provide:Qa,multi:!0,useFactory:()=>{let n=E(U9,{optional:!0});return()=>n.initialize()}},{provide:Qa,multi:!0,useFactory:()=>{let n=E($9);return()=>{n.initialize()}}},e===!0?{provide:c1,useValue:!0}:[]]}function Dme(t){let e=t?.ignoreChangesOutsideZone,n=V1({ngZoneFactory:()=>{let r=z1(t);return r.shouldCoalesceEventChangeDetection&&Qr("NgZone_CoalesceEvent"),new _e(r)},ignoreChangesOutsideZone:e});return ac([{provide:H9,useValue:!0},{provide:SE,useValue:!1},n])}function z1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var $9=(()=>{let e=class e{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=E(_e),this.pendingTasks=E(Kr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W9=(()=>{let e=class e{constructor(){this.appRef=E(Oi),this.taskService=E(Kr),this.ngZone=E(_e),this.zonelessEnabled=E(SE),this.disableScheduling=E(c1,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new xe,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jw||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?PO:dN;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&_e.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,PO(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function G9(){return typeof $localize<"u"&&$localize.locale||zf}var AE=new N("",{providedIn:"root",factory:()=>E(AE,te.Optional|te.SkipSelf)||G9()});var U1=new N("");var Cf=null;function K9(t=[],e){return pt.create({name:e,providers:[{provide:Jf,useValue:"platform"},{provide:U1,useValue:new Set([()=>Cf=null])},...t]})}function J9(t=[]){if(Cf)return Cf;let e=K9(t);return Cf=e,L9(),Q9(e),e}function Q9(t){t.get(nE,null)?.forEach(n=>n())}function H1(){return!1}var Xr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Z9;let t=e;return t})();function Z9(t){return Y9(Nt(),X(),(t&16)===16)}function Y9(t,e,n){if(Zf(t)&&!n){let r=yo(t.index,e);return new bs(r,r)}else if(t.type&175){let r=e[Pn];return new bs(r,e)}return null}var Ab=class{constructor(){}supports(e){return v1(e)}create(e){return new Mb(e)}},X9=(t,e)=>e,Mb=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||X9}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<ex(r,i,o)?n:r,a=ex(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let p=0;p<u;p++){let f=p<o.length?o[p]:o[p]=0,g=f+p;l<=g&&g<u&&(o[p]=f+1)}let d=s.previousIndex;o[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!v1(e))throw new k(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,N5(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Ob(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Uf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Uf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ob=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},xb=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Uf=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new xb,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ex(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function tx(){return new ME([new Ab])}var ME=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||tx()),deps:[[e,new jb,new Gf]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new k(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:tx});let t=e;return t})();function $1(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=J9(r),o=[V1({}),{provide:rc,useExisting:W9},...n||[]],a=new jf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(_e);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Wr,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),p=i.get(U1);return p.add(d),a.onDestroy(()=>{l.unsubscribe(),p.delete(d)}),V9(u,c,()=>{let f=a.get(B1);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(AE,zf);y9(g||zf);let m=a.get(Oi);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}var W1=new N("");function Ps(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function bo(t,e){Qr("NgSignals");let n=KS(t);return e?.equal&&(n[Vn].equal=e.equal),n}function Kn(t){let e=ce(null);try{return t()}finally{ce(e)}}var eK=new N("",{providedIn:"root",factory:()=>E(tK)}),tK=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new Nb});let t=e;return t})(),Nb=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=E(Kr),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},kb=class{constructor(e,n,r,i,o,s){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=o,this.watcher=LM(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Wr,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function OE(t,e){Qr("NgSignals"),!e?.injector&&zb(OE);let n=e?.injector??E(pt),r=e?.manualCleanup!==!0?n.get(dc):null,i=new kb(n.get(eK),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),o=n.get(Xr,null,{optional:!0});return!o||!(o._lView[z]&8)?i.watcher.notify():(o._lView[gf]??=[]).push(i.watcher.notify),i}function G1(t){let e=uo(t);if(!e)return null;let n=new ic(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var X1=null;function Ni(){return X1}function ek(t){X1??=t}var wh=class{};var at=new N(""),BE=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>E(rK),providedIn:"platform"});let t=e;return t})(),tk=new N(""),rK=(()=>{let e=class e extends BE{constructor(){super(),this._doc=E(at),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ni().getBaseHref(this._doc)}onPopState(r){let i=Ni().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ni().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function VE(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function K1(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function xi(t){return t&&t[0]!=="?"?"?"+t:t}var ki=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>E(zE),providedIn:"root"});let t=e;return t})(),nk=new N(""),zE=(()=>{let e=class e extends ki{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??E(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return VE(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+xi(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+xi(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+xi(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(BE),x(nk,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rk=(()=>{let e=class e extends ki{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=VE(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+xi(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+xi(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(BE),x(nk,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Sc=(()=>{let e=class e{constructor(r){this._subject=new ne,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=sK(K1(J1(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+xi(i))}normalize(r){return e.stripTrailingSlash(oK(this._basePath,J1(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xi(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xi(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=xi,e.joinWithSlash=VE,e.stripTrailingSlash=K1,e.\u0275fac=function(i){return new(i||e)(x(ki))},e.\u0275prov=R({token:e,factory:()=>iK(),providedIn:"root"});let t=e;return t})();function iK(){return new Sc(x(ki))}function oK(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function J1(t){return t.replace(/\/index.html$/,"")}function sK(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function bh(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var NE=/\s+/,Q1=[],wc=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Q1,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(NE):Q1}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(NE):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(NE).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(V(ft),V(Jr))},e.\u0275dir=We({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var kE=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Qme=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new kE(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),Z1(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);Z1(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(V(wr),V(Ri),V(ME))},e.\u0275dir=We({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function Z1(t,e){t.context.$implicit=e.item}var ik=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new FE,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Y1("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Y1("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(V(wr),V(Ri))},e.\u0275dir=We({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),FE=class{constructor(){this.$implicit=null,this.ngIf=null}};function Y1(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${en(e)}'.`)}var Zme=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,o):!1,get:(r,i,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,o)}})}};e.\u0275fac=function(i){return new(i||e)(V(wr))},e.\u0275dir=We({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ai]});let t=e;return t})();var Fi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({});let t=e;return t})(),UE="browser",aK="server";function HE(t){return t===UE}function Eh(t){return t===aK}var ok=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>HE(E(Wn))?new jE(E(at),window):new LE});let t=e;return t})(),jE=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=cK(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function cK(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var LE=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Cc=class{};var wl=class{},Dh=class{},Jn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var WE=class{encodeKey(e){return sk(e)}encodeValue(e){return sk(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function uK(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var lK=/%(\d[a-f0-9])/gi,dK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sk(t){return encodeURIComponent(t).replace(lK,(e,n)=>dK[n]??e)}function Ih(t){return`${t}`}var Io=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new WE,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=uK(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Ih):[Ih(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ih(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ih(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var GE=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function pK(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ak(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function ck(t){return typeof Blob<"u"&&t instanceof Blob}function uk(t){return typeof FormData<"u"&&t instanceof FormData}function fK(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Sl=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(pK(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Jn,this.context??=new GE,!this.params)this.params=new Io,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ak(this.body)||ck(this.body)||uk(this.body)||fK(this.body)?this.body:this.body instanceof Io?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||uk(this.body)?null:ck(this.body)?this.body.type||null:ak(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Io?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,l=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,f)=>p.set(f,e.setHeaders[f]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((p,f)=>p.set(f,e.setParams[f]),l)),new t(n,r,s,{params:l,headers:u,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Do=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Do||{}),bl=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Jn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},_h=class t extends bl{constructor(e={}){super(e),this.type=Do.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},El=class t extends bl{constructor(e={}){super(e),this.type=Do.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Eo=class extends bl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},hk=200,hK=204;function $E(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Il=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Sl)s=r;else{let u;o.headers instanceof Jn?u=o.headers:u=new Jn(o.headers);let l;o.params&&(o.params instanceof Io?l=o.params:l=new Io({fromObject:o.params})),s=new Sl(r,i,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=B(s).pipe(Ei(u=>this.handler.handle(u)));if(r instanceof Sl||o.observe==="events")return a;let c=a.pipe(Qt(u=>u instanceof El));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(Q(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(Q(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(Q(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(Q(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Io().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,$E(o,i))}post(r,i,o={}){return this.request("POST",r,$E(o,i))}put(r,i,o={}){return this.request("PUT",r,$E(o,i))}};e.\u0275fac=function(i){return new(i||e)(x(wl))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),gK=/^\)\]\}',?\n/,vK="X-Request-URL";function lk(t){if(t.url)return t.url;let e=vK.toLocaleLowerCase();return t.headers.get(e)}var mK=(()=>{let e=class e{constructor(){this.fetchImpl=E(KE,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=E(_e)}handle(r){return new se(i=>{let o=new AbortController;return this.doRequest(r,o.signal,i).then(JE,s=>i.error(new Eo({error:s}))),()=>o.abort()})}doRequest(r,i,o){return v(this,null,function*(){let s=this.createRequestInit(r),a;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,b({signal:i},s)));yK(g),o.next({type:Do.Sent}),a=yield g}catch(g){o.error(new Eo({error:g,status:g.status??0,statusText:g.statusText,url:r.urlWithParams,headers:g.headers}));return}let c=new Jn(a.headers),u=a.statusText,l=lk(a)??r.urlWithParams,d=a.status,p=null;if(r.reportProgress&&o.next(new _h({headers:c,status:d,statusText:u,url:l})),a.body){let g=a.headers.get("content-length"),m=[],y=a.body.getReader(),w=0,I,C,_=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){let{done:O,value:de}=yield y.read();if(O)break;if(m.push(de),w+=de.length,r.reportProgress){C=r.responseType==="text"?(C??"")+(I??=new TextDecoder).decode(de,{stream:!0}):void 0;let ae=()=>o.next({type:Do.DownloadProgress,total:g?+g:void 0,loaded:w,partialText:C});_?_.run(ae):ae()}}}));let H=this.concatChunks(m,w);try{let O=a.headers.get("Content-Type")??"";p=this.parseBody(r,H,O)}catch(O){o.error(new Eo({error:O,headers:new Jn(a.headers),status:a.status,statusText:a.statusText,url:lk(a)??r.urlWithParams}));return}}d===0&&(d=p?hk:0),d>=200&&d<300?(o.next(new El({body:p,headers:c,status:d,statusText:u,url:l})),o.complete()):o.error(new Eo({error:p,headers:c,status:d,statusText:u,url:l}))})}parseBody(r,i,o){switch(r.responseType){case"json":let s=new TextDecoder().decode(i).replace(gK,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:o});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},o=r.withCredentials?"include":void 0;if(r.headers.forEach((s,a)=>i[s]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let s=r.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:o}}concatChunks(r,i){let o=new Uint8Array(i),s=0;for(let a of r)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),KE=class{};function JE(){}function yK(t){t.then(JE,JE)}function gk(t,e){return e(t)}function CK(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function SK(t,e,n){return(r,i)=>Tn(n,()=>e(r,o=>t(o,i)))}var wK=new N(""),QE=new N(""),bK=new N(""),vk=new N("",{providedIn:"root",factory:()=>!0});function EK(){let t=null;return(e,n)=>{t===null&&(t=(E(wK,{optional:!0})??[]).reduceRight(CK,gk));let r=E(Kr);if(E(vk)){let o=r.add();return t(e,n).pipe(mr(()=>r.remove(o)))}else return t(e,n)}}var dk=(()=>{let e=class e extends wl{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=E(Kr),this.contributeToStability=E(vk)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(QE),...this.injector.get(bK,[])]));this.chain=i.reduceRight((o,s)=>SK(o,s,this.injector),gk)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(mr(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(x(Dh),x(tn))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();var IK=/^\)\]\}',?\n/;function DK(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var pk=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new k(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Te(i.\u0275loadImpl()):B(null)).pipe(Zt(()=>new se(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((y,w)=>a.setRequestHeader(y,w.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let y=r.detectContentTypeHeader();y!==null&&a.setRequestHeader("Content-Type",y)}if(r.responseType){let y=r.responseType.toLowerCase();a.responseType=y!=="json"?y:"text"}let c=r.serializeBody(),u=null,l=()=>{if(u!==null)return u;let y=a.statusText||"OK",w=new Jn(a.getAllResponseHeaders()),I=DK(a)||r.url;return u=new _h({headers:w,status:a.status,statusText:y,url:I}),u},d=()=>{let{headers:y,status:w,statusText:I,url:C}=l(),_=null;w!==hK&&(_=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=_?hk:0);let H=w>=200&&w<300;if(r.responseType==="json"&&typeof _=="string"){let O=_;_=_.replace(IK,"");try{_=_!==""?JSON.parse(_):null}catch(de){_=O,H&&(H=!1,_={error:de,text:_})}}H?(s.next(new El({body:_,headers:y,status:w,statusText:I,url:C||void 0})),s.complete()):s.error(new Eo({error:_,headers:y,status:w,statusText:I,url:C||void 0}))},p=y=>{let{url:w}=l(),I=new Eo({error:y,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});s.error(I)},f=!1,g=y=>{f||(s.next(l()),f=!0);let w={type:Do.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),r.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),s.next(w)},m=y=>{let w={type:Do.UploadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),s.next(w)};return a.addEventListener("load",d),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),r.reportProgress&&(a.addEventListener("progress",g),c!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(c),s.next({type:Do.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",d),a.removeEventListener("timeout",p),r.reportProgress&&(a.removeEventListener("progress",g),c!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(x(Cc))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),mk=new N(""),_K="XSRF-TOKEN",RK=new N("",{providedIn:"root",factory:()=>_K}),PK="X-XSRF-TOKEN",TK=new N("",{providedIn:"root",factory:()=>PK}),Rh=class{},AK=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=bh(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(x(at),x(Wn),x(RK))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function MK(t,e){let n=t.url.toLowerCase();if(!E(mk)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=E(Rh).getToken(),i=E(TK);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var yk=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(yk||{});function OK(t,e){return{\u0275kind:t,\u0275providers:e}}function dye(...t){let e=[Il,pk,dk,{provide:wl,useExisting:dk},{provide:Dh,useFactory:()=>E(mK,{optional:!0})??E(pk)},{provide:QE,useValue:MK,multi:!0},{provide:mk,useValue:!0},{provide:Rh,useClass:AK}];for(let n of t)e.push(...n.\u0275providers);return ac(e)}var fk=new N("");function pye(){return OK(yk.LegacyInterceptors,[{provide:fk,useFactory:EK},{provide:QE,useExisting:fk,multi:!0}])}var XE=class extends wh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},eI=class t extends XE{static makeCurrent(){ek(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=xK();return n==null?null:NK(n)}resetBaseElement(){Dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bh(document.cookie,e)}},Dl=null;function xK(){return Dl=Dl||document.querySelector("base"),Dl?Dl.getAttribute("href"):null}function NK(t){return new URL(t,document.baseURI).pathname}var kK=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Ph=new N(""),bk=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new k(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(x(Ph),x(_e))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),_l=class{constructor(e){this._doc=e}},ZE="ng-app-id",Ek=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Eh(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${ZE}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(ZE),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(ZE,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(x(at),x(tE),x(rE,8),x(Wn))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),YE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},nI=/%COMP%/g,Ik="%COMP%",FK=`_nghost-${Ik}`,jK=`_ngcontent-${Ik}`,LK=!0,qK=new N("",{providedIn:"root",factory:()=>LK});function BK(t){return jK.replace(nI,t)}function VK(t){return FK.replace(nI,t)}function Dk(t,e){return e.map(n=>n.replace(nI,t))}var Ck=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Eh(c),this.defaultRenderer=new Rl(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ur.ShadowDom&&(i=$(b({},i),{encapsulation:Ur.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Th?o.applyToHost(r):o instanceof Pl&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Ur.Emulated:s=new Th(u,l,i,this.appId,d,a,c,p);break;case Ur.ShadowDom:return new tI(u,l,r,i,a,c,this.nonce,p);default:s=new Pl(u,l,i,d,a,c,p);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(x(bk),x(Ek),x(tE),x(qK),x(at),x(Wn),x(_e),x(rE))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Rl=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(YE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Sk(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Sk(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new k(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=YE[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=YE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_i.DashCase|_i.Important)?e.style.setProperty(n,r,i&_i.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_i.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ni().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Sk(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var tI=class extends Rl{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Dk(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pl=class extends Rl{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Dk(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Th=class extends Pl{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=BK(u),this.hostAttr=VK(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},zK=(()=>{let e=class e extends _l{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),UK=(()=>{let e=class e extends _l{constructor(r){super(r),this.delegate=E(W1,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),wk=["alt","control","meta","shift"],HK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$K={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},WK=(()=>{let e=class e extends _l{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ni().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),wk.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=HK[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),wk.forEach(a=>{if(a!==o){let c=$K[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function jye(t,e){return $1(b({rootComponent:t},GK(e)))}function GK(t){return{appProviders:[...YK,...t?.providers??[]],platformProviders:ZK}}function KK(){eI.makeCurrent()}function JK(){return new Wr}function QK(){return CN(document),document}var ZK=[{provide:Wn,useValue:UE},{provide:nE,useValue:KK,multi:!0},{provide:at,useFactory:QK,deps:[]}];var YK=[{provide:Jf,useValue:"root"},{provide:Wr,useFactory:JK,deps:[]},{provide:Ph,useClass:zK,multi:!0,deps:[at,_e,Wn]},{provide:Ph,useClass:WK,multi:!0,deps:[at]},{provide:Ph,useClass:UK,multi:!0},Ck,Ek,bk,{provide:go,useExisting:Ck},{provide:Cc,useClass:kK,deps:[]},[]];var _k=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ee="primary",Ul=Symbol("RouteTitle"),aI=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Rc(t){return new aI(t)}function e7(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function t7(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ei(t[n],e[n]))return!1;return!0}function ei(t,e){let n=t?cI(t):void 0,r=e?cI(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!jk(t[i],e[i]))return!1;return!0}function cI(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function jk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Lk(t){return t.length>0?t[t.length-1]:null}function Po(t){return cw(t)?t:Rs(t)?Te(Promise.resolve(t)):B(t)}var n7={exact:Bk,subset:Vk},qk={exact:r7,subset:i7,ignored:()=>!0};function Rk(t,e,n){return n7[n.paths](t.root,e.root,n.matrixParams)&&qk[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function r7(t,e){return ei(t,e)}function Bk(t,e,n){if(!As(t.segments,e.segments)||!Oh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Bk(t.children[r],e.children[r],n))return!1;return!0}function i7(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>jk(t[n],e[n]))}function Vk(t,e,n){return zk(t,e,e.segments,n)}function zk(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!As(i,n)||e.hasChildren()||!Oh(i,n,r))}else if(t.segments.length===n.length){if(!As(t.segments,n)||!Oh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Vk(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!As(t.segments,i)||!Oh(t.segments,i,r)||!t.children[ee]?!1:zk(t.children[ee],e,o,r)}}function Oh(t,e,n){return e.every((r,i)=>qk[n](t[i].parameters,r.parameters))}var Li=class{constructor(e=new be([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Rc(this.queryParams),this._queryParamMap}toString(){return a7.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xh(this)}},Ts=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Rc(this.parameters),this._parameterMap}toString(){return Hk(this)}};function o7(t,e){return As(t,e)&&t.every((n,r)=>ei(n.parameters,e[r].parameters))}function As(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function s7(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var Hl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new Pc,providedIn:"root"});let t=e;return t})(),Pc=class{parse(e){let n=new lI(e);return new Li(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Tl(e.root,!0)}`,r=l7(e.queryParams),i=typeof e.fragment=="string"?`#${c7(e.fragment)}`:"";return`${n}${r}${i}`}},a7=new Pc;function xh(t){return t.segments.map(e=>Hk(e)).join("/")}function Tl(t,e){if(!t.hasChildren())return xh(t);if(e){let n=t.children[ee]?Tl(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ee&&r.push(`${i}:${Tl(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=s7(t,(r,i)=>i===ee?[Tl(t.children[ee],!1)]:[`${i}:${Tl(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${xh(t)}/${n[0]}`:`${xh(t)}/(${n.join("//")})`}}function Uk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ah(t){return Uk(t).replace(/%3B/gi,";")}function c7(t){return encodeURI(t)}function uI(t){return Uk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nh(t){return decodeURIComponent(t)}function Pk(t){return Nh(t.replace(/\+/g,"%20"))}function Hk(t){return`${uI(t.path)}${u7(t.parameters)}`}function u7(t){return Object.entries(t).map(([e,n])=>`;${uI(e)}=${uI(n)}`).join("")}function l7(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ah(n)}=${Ah(i)}`).join("&"):`${Ah(n)}=${Ah(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var d7=/^[^\/()?;#]+/;function rI(t){let e=t.match(d7);return e?e[0]:""}var p7=/^[^\/()?;=#]+/;function f7(t){let e=t.match(p7);return e?e[0]:""}var h7=/^[^=?&#]+/;function g7(t){let e=t.match(h7);return e?e[0]:""}var v7=/^[^&#]+/;function m7(t){let e=t.match(v7);return e?e[0]:""}var lI=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new be(e,n)),r}parseSegment(){let e=rI(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new k(4009,!1);return this.capture(e),new Ts(Nh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=f7(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=rI(this.remaining);i&&(r=i,this.capture(r))}e[Nh(n)]=Nh(r)}parseQueryParam(e){let n=g7(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=m7(this.remaining);s&&(r=s,this.capture(r))}let i=Pk(n),o=Pk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=rI(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new k(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ee);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ee]:new be([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new k(4011,!1)}};function $k(t){return t.segments.length>0?new be([],{[ee]:t}):t}function Wk(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Wk(i);if(r===ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new be(t.segments,e);return y7(n)}function y7(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new be(t.segments.concat(e.segments),e.children)}return t}function Ms(t){return t instanceof Li}function C7(t,e,n=null,r=null){let i=Gk(t);return Kk(i,e,n,r)}function Gk(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new be(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=$k(r);return e??i}function Kk(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return iI(i,i,i,n,r);let o=S7(e);if(o.toRoot())return iI(i,i,new be([],{}),n,r);let s=w7(o,i,t),a=s.processChildren?Ol(s.segmentGroup,s.index,o.commands):Qk(s.segmentGroup,s.index,o.commands);return iI(i,s.segmentGroup,a,n,r)}function kh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function kl(t){return typeof t=="object"&&t!=null&&t.outlets}function iI(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=Jk(t,e,n);let a=$k(Wk(s));return new Li(a,o,i)}function Jk(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Jk(o,e,n)}),new be(t.segments,r)}var Fh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&kh(r[0]))throw new k(4003,!1);let i=r.find(kl);if(i&&i!==Lk(r))throw new k(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S7(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Fh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Fh(n,e,r)}var Ic=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function w7(t,e,n){if(t.isAbsolute)return new Ic(e,!0,0);if(!n)return new Ic(e,!1,NaN);if(n.parent===null)return new Ic(n,!0,0);let r=kh(t.commands[0])?0:1,i=n.segments.length-1+r;return b7(n,i,t.numberOfDoubleDots)}function b7(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new k(4005,!1);i=r.segments.length}return new Ic(r,!1,i-o)}function E7(t){return kl(t[0])?t[0].outlets:{[ee]:t}}function Qk(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return Ol(t,e,n);let r=I7(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new be(t.segments.slice(0,r.pathIndex),{});return o.children[ee]=new be(t.segments.slice(r.pathIndex),t.children),Ol(o,0,i)}else return r.match&&i.length===0?new be(t.segments,{}):r.match&&!t.hasChildren()?dI(t,e,n):r.match?Ol(t,0,i):dI(t,e,n)}function Ol(t,e,n){if(n.length===0)return new be(t.segments,{});{let r=E7(n),i={};if(Object.keys(r).some(o=>o!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let o=Ol(t.children[ee],e,n);return new be(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Qk(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new be(t.segments,i)}}function I7(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(kl(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Ak(c,u,s))return o;r+=2}else{if(!Ak(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function dI(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(kl(o)){let c=D7(o.outlets);return new be(r,c)}if(i===0&&kh(n[0])){let c=t.segments[e];r.push(new Ts(c.path,Tk(n[0]))),i++;continue}let s=kl(o)?o.outlets[ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&kh(a)?(r.push(new Ts(s,Tk(a))),i+=2):(r.push(new Ts(s,{})),i++)}return new be(r,{})}function D7(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=dI(new be([],{}),0,r))}),e}function Tk(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Ak(t,e,n){return t==n.path&&ei(e,n.parameters)}var xl="imperative",ht=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ht||{}),Qn=class{constructor(e,n){this.id=e,this.url=n}},Tc=class extends Qn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ht.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ti=class extends Qn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ht.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Mn||{}),jh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(jh||{}),ji=class extends Qn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ht.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_o=class extends Qn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ht.NavigationSkipped}},Fl=class extends Qn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ht.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lh=class extends Qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ht.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pI=class extends Qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ht.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fI=class extends Qn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ht.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hI=class extends Qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ht.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gI=class extends Qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ht.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vI=class{constructor(e){this.route=e,this.type=ht.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mI=class{constructor(e){this.route=e,this.type=ht.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yI=class{constructor(e){this.snapshot=e,this.type=ht.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},CI=class{constructor(e){this.snapshot=e,this.type=ht.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},SI=class{constructor(e){this.snapshot=e,this.type=ht.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wI=class{constructor(e){this.snapshot=e,this.type=ht.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qh=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ht.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},jl=class{},Ac=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function _7(t,e){return t.providers&&!t._injector&&(t._injector=fh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function br(t){return t.outlet||ee}function R7(t,e){let n=t.filter(r=>br(r)===e);return n.push(...t.filter(r=>br(r)!==e)),n}function $l(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var bI=class{get injector(){return $l(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Wl(this.rootInjector),this.attachRef=null}},Wl=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new bI(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(x(tn))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=EI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=EI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=II(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return II(e,this._root).map(n=>n.value)}};function EI(t,e){if(t===e.value)return e;for(let n of e.children){let r=EI(t,n);if(r)return r}return null}function II(t,e){if(t===e.value)return[e];for(let n of e.children){let r=II(t,n);if(r.length)return r.unshift(e),r}return[]}var An=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ec(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Vh=class extends Bh{constructor(e,n){super(e),this.snapshot=n,xI(this,e)}toString(){return this.snapshot.toString()}};function Zk(t){let e=P7(t),n=new Ct([new Ts("",{})]),r=new Ct({}),i=new Ct({}),o=new Ct({}),s=new Ct(""),a=new Ro(n,r,o,s,i,ee,t,e.root);return a.snapshot=e.root,new Vh(new An(a,[]),e)}function P7(t){let e={},n={},r={},i="",o=new Dc([],e,r,i,n,ee,t,null,{});return new Uh("",new An(o,[]))}var Ro=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(u=>u[Ul]))??B(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Rc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Rc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:b(b({},e.params),t.params),data:b(b({},e.data),t.data),resolve:b(b(b(b({},t.data),e.data),i?.data),t._resolvedData)}:r={params:b({},t.params),data:b({},t.data),resolve:b(b({},t.data),t._resolvedData??{})},i&&Xk(i)&&(r.resolve[Ul]=i.title),r}var Dc=class{get title(){return this.data?.[Ul]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Rc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Rc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Uh=class extends Bh{constructor(e,n){super(n),this.url=e,xI(this,n)}toString(){return Yk(this._root)}};function xI(t,e){e.value._routerState=t,e.children.forEach(n=>xI(t,n))}function Yk(t){let e=t.children.length>0?` { ${t.children.map(Yk).join(", ")} } `:"";return`${t.value}${e}`}function oI(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ei(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ei(e.params,n.params)||t.paramsSubject.next(n.params),t7(e.url,n.url)||t.urlSubject.next(n.url),ei(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function DI(t,e){let n=ei(t.params,e.params)&&o7(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||DI(t.parent,e.parent))}function Xk(t){return typeof t.title=="string"||t.title===null}var T7=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ee,this.activateEvents=new ne,this.deactivateEvents=new ne,this.attachEvents=new ne,this.detachEvents=new ne,this.parentContexts=E(Wl),this.location=E(wr),this.changeDetector=E(Xr),this.inputBinder=E(Gh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new k(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new k(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new k(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new k(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new _I(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=We({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ai]});let t=e;return t})(),_I=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ro?this.route:e===Wl?this.childContexts:this.parent.get(e,n)}},Gh=new N(""),Mk=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Xu([i.queryParams,i.params,i.data]).pipe(Zt(([s,a,c],u)=>(c=b(b(b({},s),a),c),u===0?B(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=G1(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function A7(t,e,n){let r=Ll(t,e._root,n?n._root:void 0);return new Vh(r,e)}function Ll(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=M7(t,e,n);return new An(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ll(t,a)),s}}let r=O7(e.value),i=e.children.map(o=>Ll(t,o));return new An(r,i)}}function M7(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ll(t,r,i);return Ll(t,r)})}function O7(t){return new Ro(new Ct(t.url),new Ct(t.params),new Ct(t.queryParams),new Ct(t.fragment),new Ct(t.data),t.outlet,t.component,t)}var ql=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},eF="ngNavigationCancelingError";function Hh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ms(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tF(!1,Mn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function tF(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[eF]=!0,n.cancellationCode=e,n}function x7(t){return nF(t)&&Ms(t.url)}function nF(t){return!!t&&t[eF]}var N7=(t,e,n,r)=>Q(i=>(new RI(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),RI=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),oI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ec(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ec(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ec(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ec(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new wI(o.value.snapshot))}),e.children.length&&this.forwardEvent(new CI(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(oI(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),oI(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},$h=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_c=class{constructor(e,n){this.component=e,this.route=n}};function k7(t,e,n){let r=t._root,i=e?e._root:null;return Al(r,i,n,[r.value])}function F7(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Oc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!ox(t)?t:e.get(t):r}function Al(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ec(e);return t.children.forEach(s=>{j7(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Nl(a,n.getContext(s),i)),i}function j7(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=L7(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $h(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Al(t,e,a?a.children:null,r,i):Al(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _c(a.outlet.component,s))}else s&&Nl(e,a,i),i.canActivateChecks.push(new $h(r)),o.component?Al(t,null,a?a.children:null,r,i):Al(t,null,n,r,i);return i}function L7(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!As(t.url,e.url);case"pathParamsOrQueryParamsChange":return!As(t.url,e.url)||!ei(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!DI(t,e)||!ei(t.queryParams,e.queryParams);case"paramsChange":default:return!DI(t,e)}}function Nl(t,e,n){let r=Ec(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Nl(s,e.children.getContext(o),n):Nl(s,null,n):Nl(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new _c(e.outlet.component,i)):n.canDeactivateChecks.push(new _c(null,i)):n.canDeactivateChecks.push(new _c(null,i))}function Gl(t){return typeof t=="function"}function q7(t){return typeof t=="boolean"}function B7(t){return t&&Gl(t.canLoad)}function V7(t){return t&&Gl(t.canActivate)}function z7(t){return t&&Gl(t.canActivateChild)}function U7(t){return t&&Gl(t.canDeactivate)}function H7(t){return t&&Gl(t.canMatch)}function rF(t){return t instanceof wi||t?.name==="EmptyError"}var Mh=Symbol("INITIAL_VALUE");function Mc(){return Zt(t=>Xu(t.map(e=>e.pipe(Ii(1),gw(Mh)))).pipe(Q(e=>{for(let n of e)if(n!==!0){if(n===Mh)return Mh;if(n===!1||$7(n))return n}return!0}),Qt(e=>e!==Mh),Ii(1)))}function $7(t){return Ms(t)||t instanceof ql}function W7(t,e){return ze(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?B($(b({},n),{guardsResult:!0})):G7(s,r,i,t).pipe(ze(a=>a&&q7(a)?K7(r,o,t,e):B(a)),Q(a=>$(b({},n),{guardsResult:a})))})}function G7(t,e,n,r){return Te(t).pipe(ze(i=>X7(i.component,i.route,n,e,r)),Br(i=>i!==!0,!0))}function K7(t,e,n,r){return Te(e).pipe(Ei(i=>Ba(Q7(i.route.parent,r),J7(i.route,r),Y7(t,i.path,n),Z7(t,i.route,n))),Br(i=>i!==!0,!0))}function J7(t,e){return t!==null&&e&&e(new SI(t)),B(!0)}function Q7(t,e){return t!==null&&e&&e(new yI(t)),B(!0)}function Z7(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return B(!0);let i=r.map(o=>of(()=>{let s=$l(e)??n,a=Oc(o,s),c=V7(a)?a.canActivate(e,t):Tn(s,()=>a(e,t));return Po(c).pipe(Br())}));return B(i).pipe(Mc())}function Y7(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>F7(s)).filter(s=>s!==null).map(s=>of(()=>{let a=s.guards.map(c=>{let u=$l(s.node)??n,l=Oc(c,u),d=z7(l)?l.canActivateChild(r,t):Tn(u,()=>l(r,t));return Po(d).pipe(Br())});return B(a).pipe(Mc())}));return B(o).pipe(Mc())}function X7(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return B(!0);let s=o.map(a=>{let c=$l(e)??i,u=Oc(a,c),l=U7(u)?u.canDeactivate(t,e,n,r):Tn(c,()=>u(t,e,n,r));return Po(l).pipe(Br())});return B(s).pipe(Mc())}function eJ(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return B(!0);let o=i.map(s=>{let a=Oc(s,t),c=B7(a)?a.canLoad(e,n):Tn(t,()=>a(e,n));return Po(c)});return B(o).pipe(Mc(),iF(r))}function iF(t){return tw(ot(e=>{if(typeof e!="boolean")throw Hh(t,e)}),Q(e=>e===!0))}function tJ(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return B(!0);let o=i.map(s=>{let a=Oc(s,t),c=H7(a)?a.canMatch(e,n):Tn(t,()=>a(e,n));return Po(c)});return B(o).pipe(Mc(),iF(r))}var Bl=class{constructor(e){this.segmentGroup=e||null}},Vl=class extends Error{constructor(e){super(),this.urlTree=e}};function bc(t){return La(new Bl(t))}function nJ(t){return La(new k(4e3,!1))}function rJ(t){return La(tF(!1,Mn.GuardRejected))}var PI=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return B(r);if(i.numberOfChildren>1||!i.children[ee])return nJ(`${e.redirectTo}`);i=i.children[ee]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:u,routeConfig:l,url:d,outlet:p,params:f,data:g,title:m}=i,y=Tn(o,()=>a({params:f,data:g,queryParams:c,fragment:u,routeConfig:l,url:d,outlet:p,title:m}));if(y instanceof Li)throw new Vl(y);n=y}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Vl(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Li(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new be(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new k(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},TI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iJ(t,e,n,r,i){let o=NI(t,e,n);return o.matched?(r=_7(e,r),tJ(r,e,n,i).pipe(Q(s=>s===!0?o:b({},TI)))):B(o)}function NI(t,e,n){if(e.path==="**")return oJ(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?b({},TI):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||e7)(n,t,e);if(!i)return b({},TI);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?b(b({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function oJ(t){return{matched:!0,parameters:t.length>0?Lk(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Ok(t,e,n,r){return n.length>0&&cJ(t,n,r)?{segmentGroup:new be(e,aJ(r,new be(n,t.children))),slicedSegments:[]}:n.length===0&&uJ(t,n,r)?{segmentGroup:new be(t.segments,sJ(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function sJ(t,e,n,r){let i={};for(let o of n)if(Kh(t,e,o)&&!r[br(o)]){let s=new be([],{});i[br(o)]=s}return b(b({},r),i)}function aJ(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&br(r)!==ee){let i=new be([],{});n[br(r)]=i}return n}function cJ(t,e,n){return n.some(r=>Kh(t,e,r)&&br(r)!==ee)}function uJ(t,e,n){return n.some(r=>Kh(t,e,r))}function Kh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function lJ(t,e,n,r){return br(t)!==r&&(r===ee||!Kh(e,n,t))?!1:NI(e,t,n).matched}function dJ(t,e,n){return e.length===0&&!t.children[n]}var AI=class{};function pJ(t,e,n,r,i,o,s="emptyOnly"){return new MI(t,e,n,r,i,s,o).recognize()}var fJ=31,MI=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new PI(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new k(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ok(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:n,rootSnapshot:r})=>{let i=new An(r,n),o=new Uh("",i),s=C7(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Dc([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ee,n).pipe(Q(r=>({children:r,rootSnapshot:n})),bi(r=>{if(r instanceof Vl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bl?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof An?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Te(o).pipe(Ei(s=>{let a=r.children[s],c=R7(n,s);return this.processSegmentGroup(e,c,a,s,i)}),hw((s,a)=>(s.push(...a),s)),io(null),fw(),ze(s=>{if(s===null)return bc(r);let a=oF(s);return hJ(a),B(a)}))}processSegment(e,n,r,i,o,s,a){return Te(n).pipe(Ei(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(bi(u=>{if(u instanceof Bl)return B(null);throw u}))),Br(c=>!!c),bi(c=>{if(rF(c))return dJ(r,i,o)?B(new AI):bc(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return lJ(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):bc(i):bc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:d,remainingSegments:p}=NI(n,i,o);if(!c)return bc(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fJ&&(this.allowRedirects=!1));let f=new Dc(o,u,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,xk(i),br(i),i.component??i._loadedComponent??null,i,Nk(i)),g=zh(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(g.params),f.data=Object.freeze(g.data);let m=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,m).pipe(ze(y=>this.processSegment(e,r,n,y.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=iJ(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Zt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Zt(({routes:u})=>{let l=r._loadedInjector??e,{parameters:d,consumedSegments:p,remainingSegments:f}=c,g=new Dc(p,d,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,xk(r),br(r),r.component??r._loadedComponent??null,r,Nk(r)),m=zh(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(m.params),g.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:w}=Ok(n,p,f,u);if(w.length===0&&y.hasChildren())return this.processChildren(l,u,y,g).pipe(Q(C=>new An(g,C)));if(u.length===0&&w.length===0)return B(new An(g,[]));let I=br(r)===o;return this.processSegment(l,u,y,w,I?ee:o,!0,g).pipe(Q(C=>new An(g,C instanceof An?[C]:[])))}))):bc(n)))}getChildConfig(e,n,r){return n.children?B({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?B({routes:n._loadedRoutes,injector:n._loadedInjector}):eJ(e,n,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,n).pipe(ot(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):rJ(n))):B({routes:[],injector:e})}};function hJ(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function gJ(t){let e=t.value.routeConfig;return e&&e.path===""}function oF(t){let e=[],n=new Set;for(let r of t){if(!gJ(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=oF(r.children);e.push(new An(r.value,i))}return e.filter(r=>!n.has(r))}function xk(t){return t.data||{}}function Nk(t){return t.resolve||{}}function vJ(t,e,n,r,i,o){return ze(s=>pJ(t,e,n,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:c})=>$(b({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function mJ(t,e){return ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return B(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of sF(c))s.add(u);let a=0;return Te(s).pipe(Ei(c=>o.has(c)?yJ(c,r,t,e):(c.data=zh(c,c.parent,t).resolve,B(void 0))),ot(()=>a++),za(1),ze(c=>a===s.size?B(n):Jt))})}function sF(t){let e=t.children.map(n=>sF(n)).flat();return[t,...e]}function yJ(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Xk(i)&&(o[Ul]=i.title),CJ(o,t,e,r).pipe(Q(s=>(t._resolvedData=s,t.data=zh(t,t.parent,n).resolve,null)))}function CJ(t,e,n,r){let i=cI(t);if(i.length===0)return B({});let o={};return Te(i).pipe(ze(s=>SJ(t[s],e,n,r).pipe(Br(),ot(a=>{if(a instanceof ql)throw Hh(new Pc,a);o[s]=a}))),za(1),pw(o),bi(s=>rF(s)?Jt:La(s)))}function SJ(t,e,n,r){let i=$l(e)??r,o=Oc(t,i),s=o.resolve?o.resolve(e,n):Tn(i,()=>o(e,n));return Po(s)}function sI(t){return Zt(e=>{let n=t(e);return n?Te(n).pipe(Q(()=>e)):B(e)})}var aF=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===ee);return i}getResolvedTitleForRoute(r){return r.data[Ul]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>E(wJ),providedIn:"root"});let t=e;return t})(),wJ=(()=>{let e=class e extends aF{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(x(_k))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kl=new N("",{providedIn:"root",factory:()=>({})}),bJ=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Gr({type:e,selectors:[["ng-component"]],standalone:!0,features:[mc],decls:1,vars:0,template:function(i,o){i&1&&Yr(0,"router-outlet")},dependencies:[T7],encapsulation:2});let t=e;return t})();function kI(t){let e=t.children&&t.children.map(kI),n=e?$(b({},t),{children:e}):b({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=bJ),n}var zl=new N(""),FI=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(Sh)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return B(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Po(r.loadComponent()).pipe(Q(cF),ot(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),mr(()=>{this.componentLoaders.delete(r)})),o=new Oa(i,()=>new Xe).pipe(Ma());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return B({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=EJ(i,this.compiler,r,this.onLoadEndListener).pipe(mr(()=>{this.childrenLoaders.delete(i)})),a=new Oa(s,()=>new Xe).pipe(Ma());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EJ(t,e,n,r){return Po(t.loadChildren()).pipe(Q(cF),ze(i=>i instanceof ul||Array.isArray(i)?B(i):Te(e.compileModuleAsync(i))),Q(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(zl,[],{optional:!0,self:!0}).flat()),{routes:s.map(kI),injector:o}}))}function IJ(t){return t&&typeof t=="object"&&"default"in t}function cF(t){return IJ(t)?t.default:t}var jI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>E(DJ),providedIn:"root"});let t=e;return t})(),DJ=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uF=new N(""),lF=new N("");function _J(t,e,n){let r=t.get(lF),i=t.get(at);return t.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),RJ(t))),{onViewTransitionCreated:c}=r;return c&&Tn(t,()=>c({transition:a,from:e,to:n})),s})}function RJ(t){return new Promise(e=>{wE({read:()=>setTimeout(e)},{injector:t})})}var PJ=new N(""),LI=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe,this.transitionAbortSubject=new Xe,this.configLoader=E(FI),this.environmentInjector=E(tn),this.urlSerializer=E(Hl),this.rootContexts=E(Wl),this.location=E(Sc),this.inputBindingEnabled=E(Gh,{optional:!0})!==null,this.titleStrategy=E(aF),this.options=E(Kl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(jI),this.createViewTransition=E(uF,{optional:!0}),this.navigationErrorHandler=E(PJ,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null;let r=o=>this.events.next(new vI(o)),i=o=>this.events.next(new mI(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next($(b(b({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ct({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:xl,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qt(s=>s.id!==0),Q(s=>$(b({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Zt(s=>{let a=!1,c=!1;return B(s).pipe(Zt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Mn.SupersededByNewNavigation),Jt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?$(b({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let p="";return this.events.next(new _o(u.id,this.urlSerializer.serialize(u.rawUrl),p,jh.IgnoredSameUrlNavigation)),u.resolve(!1),Jt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return B(u).pipe(Zt(p=>{let f=this.transitions?.getValue();return this.events.next(new Tc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),f!==this.transitions?.getValue()?Jt:Promise.resolve(p)}),vJ(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ot(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=$(b({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let f=new Lh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:f,source:g,restoredState:m,extras:y}=u,w=new Tc(p,this.urlSerializer.serialize(f),g,m);this.events.next(w);let I=Zk(this.rootComponentType).snapshot;return this.currentTransition=s=$(b({},u),{targetSnapshot:I,urlAfterRedirects:f,extras:$(b({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,B(s)}else{let p="";return this.events.next(new _o(u.id,this.urlSerializer.serialize(u.extractedUrl),p,jh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Jt}}),ot(u=>{let l=new pI(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Q(u=>(this.currentTransition=s=$(b({},u),{guards:k7(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),W7(this.environmentInjector,u=>this.events.next(u)),ot(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Hh(this.urlSerializer,u.guardsResult);let l=new fI(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Qt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Mn.GuardRejected),!1)),sI(u=>{if(u.guards.canActivateChecks.length)return B(u).pipe(ot(l=>{let d=new hI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Zt(l=>{let d=!1;return B(l).pipe(mJ(this.paramsInheritanceStrategy,this.environmentInjector),ot({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Mn.NoDataFromResolver)}}))}),ot(l=>{let d=new gI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),sI(u=>{let l=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(ot(f=>{d.component=f}),Q(()=>{})));for(let f of d.children)p.push(...l(f));return p};return Xu(l(u.targetSnapshot.root)).pipe(io(null),Ii(1))}),sI(()=>this.afterPreactivation()),Zt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?Te(d).pipe(Q(()=>s)):B(s)}),Q(u=>{let l=A7(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=$(b({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),ot(()=>{this.events.next(new jl)}),N7(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Ii(1),ot({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ti(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),af(this.transitionAbortSubject.pipe(ot(u=>{throw u}))),mr(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Mn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),bi(u=>{if(c=!0,nF(u))this.events.next(new ji(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),x7(u)?this.events.next(new Ac(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Fl(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let d=Tn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof ql){let{message:p,cancellationCode:f}=Hh(this.urlSerializer,d);this.events.next(new ji(s.id,this.urlSerializer.serialize(s.extractedUrl),p,f)),this.events.next(new Ac(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let p=r.errorHandler(u);s.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Jt}))}))}cancelNavigationTransition(r,i,o){let s=new ji(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TJ(t){return t!==xl}var AJ=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>E(MJ),providedIn:"root"});let t=e;return t})(),OI=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},MJ=(()=>{let e=class e extends OI{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=lc(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>E(OJ),providedIn:"root"});let t=e;return t})(),OJ=(()=>{let e=class e extends dF{constructor(){super(...arguments),this.location=E(Sc),this.urlSerializer=E(Hl),this.options=E(Kl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(jI),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Li,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Zk(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Tc)this.stateMemento=this.createStateMemento();else if(r instanceof _o)this.rawUrlTree=i.initialUrl;else if(r instanceof Lh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof jl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof ji&&(r.code===Mn.GuardRejected||r.code===Mn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Fl?this.restoreHistory(i,!0):r instanceof ti&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof Li?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=b(b({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=b(b({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=lc(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ml=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ml||{});function pF(t,e){t.events.pipe(Qt(n=>n instanceof ti||n instanceof ji||n instanceof Fl||n instanceof _o),Q(n=>n instanceof ti||n instanceof _o?Ml.COMPLETE:(n instanceof ji?n.code===Mn.Redirect||n.code===Mn.SupersededByNewNavigation:!1)?Ml.REDIRECTING:Ml.FAILED),Qt(n=>n!==Ml.REDIRECTING),Ii(1)).subscribe(()=>{e()})}function xJ(t){throw t}var NJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qi=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=E(yh),this.stateManager=E(dF),this.options=E(Kl,{optional:!0})||{},this.pendingTasks=E(Kr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(LI),this.urlSerializer=E(Hl),this.location=E(Sc),this.urlHandlingStrategy=E(jI),this._events=new Xe,this.errorHandler=this.options.errorHandler||xJ,this.navigated=!1,this.routeReuseStrategy=E(AJ),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(zl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(Gh,{optional:!0}),this.eventsSubscription=new xe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof ji&&i.code!==Mn.Redirect&&i.code!==Mn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ti)this.navigated=!0;else if(i instanceof Ac){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u=b({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||TJ(o.source)},a);this.scheduleNavigation(c,xl,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}jJ(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=b({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(kI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=b(b({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let f=o?o.snapshot:this.routerState.snapshot.root;p=Gk(f)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return Kk(p,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Ms(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,xl,null,i)}navigate(r,i={skipLocationChange:!1}){return FJ(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=b({},NJ):i===!1?o=b({},kJ):o=i,Ms(r))return Rk(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Rk(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((p,f)=>{c=p,u=f});let d=this.pendingTasks.add();return pF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FJ(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new k(4008,!1)}function jJ(t){return!(t instanceof jl)&&!(t instanceof Ac)}var nCe=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new Xe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof ti&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ms(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:TN(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.routerLinkInput===null?null:Ms(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(V(qi),V(Ro),Xb("tabindex"),V(Jr),V(ft),V(ki))},e.\u0275dir=We({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&gn("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&hc("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ps],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ps],replaceUrl:[2,"replaceUrl","replaceUrl",Ps],routerLink:"routerLink"},standalone:!0,features:[_E,Ai]});let t=e;return t})();var Wh=class{};var LJ=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(r=>r instanceof ti),Ei(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=fh(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Te(o).pipe(ro())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=B(null);let s=o.pipe(ze(a=>a===null?B(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Te([s,a]).pipe(ro())}else return s})}};e.\u0275fac=function(i){return new(i||e)(x(qi),x(Sh),x(tn),x(Wh),x(FI))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fF=new N(""),qJ=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Tc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof ti?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof _o&&r.code===jh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof qh&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new qh(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){zN()},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function rCe(t,...e){return ac([{provide:zl,multi:!0,useValue:t},[],{provide:Ro,useFactory:hF,deps:[qi]},{provide:yl,multi:!0,useFactory:gF},e.map(n=>n.\u0275providers)])}function hF(t){return t.routerState.root}function Jl(t,e){return{\u0275kind:t,\u0275providers:e}}function gF(){let t=E(pt);return e=>{let n=t.get(Oi);if(e!==n.components[0])return;let r=t.get(qi),i=t.get(vF);t.get(qI)===1&&r.initialNavigation(),t.get(mF,null,te.Optional)?.setUpPreloading(),t.get(fF,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var vF=new N("",{factory:()=>new Xe}),qI=new N("",{providedIn:"root",factory:()=>1});function BJ(){return Jl(2,[{provide:qI,useValue:0},{provide:Ch,multi:!0,deps:[pt],useFactory:e=>{let n=e.get(tk,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(qi),o=e.get(vF);pF(i,()=>{r(!0)}),e.get(LI).afterPreactivation=()=>(r(!0),o.closed?B(void 0):o),i.initialNavigation()}))}}])}function VJ(){return Jl(3,[{provide:Ch,multi:!0,useFactory:()=>{let e=E(qi);return()=>{e.setUpLocationChangeListener()}}},{provide:qI,useValue:2}])}var mF=new N("");function zJ(t){return Jl(0,[{provide:mF,useExisting:LJ},{provide:Wh,useExisting:t}])}function UJ(){return Jl(8,[Mk,{provide:Gh,useExisting:Mk}])}function HJ(t){let e=[{provide:uF,useValue:_J},{provide:lF,useValue:b({skipNextTransition:!!t?.skipInitialTransition},t)}];return Jl(9,e)}var kk=new N("ROUTER_FORROOT_GUARD"),$J=[Sc,{provide:Hl,useClass:Pc},qi,Wl,{provide:Ro,useFactory:hF,deps:[qi]},FI,[]],iCe=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[$J,[],{provide:zl,multi:!0,useValue:r},{provide:kk,useFactory:JJ,deps:[[qi,new Gf,new jb]]},{provide:Kl,useValue:i||{}},i?.useHash?GJ():KJ(),WJ(),i?.preloadingStrategy?zJ(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?QJ(i):[],i?.bindToComponentInputs?UJ().\u0275providers:[],i?.enableViewTransitions?HJ().\u0275providers:[],ZJ()]}}static forChild(r){return{ngModule:e,providers:[{provide:zl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(x(kk,8))},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({});let t=e;return t})();function WJ(){return{provide:fF,useFactory:()=>{let t=E(ok),e=E(_e),n=E(Kl),r=E(LI),i=E(Hl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new qJ(i,r,t,e,n)}}}function GJ(){return{provide:ki,useClass:rk}}function KJ(){return{provide:ki,useClass:zE}}function JJ(t){return"guarded"}function QJ(t){return[t.initialNavigation==="disabled"?VJ().\u0275providers:[],t.initialNavigation==="enabledBlocking"?BJ().\u0275providers:[]]}var Fk=new N("");function ZJ(){return[{provide:Fk,useFactory:gF},{provide:yl,multi:!0,useExisting:Fk}]}var _F=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(V(Jr),V(ft))},e.\u0275dir=We({type:e});let t=e;return t})(),RF=(()=>{let e=class e extends _F{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=lc(e)))(o||e)}})(),e.\u0275dir=We({type:e,features:[Zr]});let t=e;return t})(),rg=new N(""),YJ={provide:rg,useExisting:mo(()=>XJ),multi:!0},XJ=(()=>{let e=class e extends RF{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=lc(e)))(o||e)}})(),e.\u0275dir=We({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&gn("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[vc([YJ]),Zr]});let t=e;return t})(),eQ={provide:rg,useExisting:mo(()=>PF),multi:!0};function tQ(){let t=Ni()?Ni().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var nQ=new N(""),PF=(()=>{let e=class e extends _F{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!tQ())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(V(Jr),V(ft),V(nQ,8))},e.\u0275dir=We({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&gn("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[vc([eQ]),Zr]});let t=e;return t})();function To(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function TF(t){return t!=null&&typeof t.length=="number"}var VI=new N(""),zI=new N(""),rQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,yF=class{static min(e){return iQ(e)}static max(e){return oQ(e)}static required(e){return sQ(e)}static requiredTrue(e){return aQ(e)}static email(e){return cQ(e)}static minLength(e){return uQ(e)}static maxLength(e){return lQ(e)}static pattern(e){return dQ(e)}static nullValidator(e){return AF(e)}static compose(e){return FF(e)}static composeAsync(e){return jF(e)}};function iQ(t){return e=>{if(To(e.value)||To(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function oQ(t){return e=>{if(To(e.value)||To(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function sQ(t){return To(t.value)?{required:!0}:null}function aQ(t){return t.value===!0?null:{required:!0}}function cQ(t){return To(t.value)||rQ.test(t.value)?null:{email:!0}}function uQ(t){return e=>To(e.value)||!TF(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function lQ(t){return e=>TF(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function dQ(t){if(!t)return AF;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(To(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function AF(t){return null}function MF(t){return t!=null}function OF(t){return Rs(t)?Te(t):t}function xF(t){let e={};return t.forEach(n=>{e=n!=null?b(b({},e),n):e}),Object.keys(e).length===0?null:e}function NF(t,e){return e.map(n=>n(t))}function pQ(t){return!t.validate}function kF(t){return t.map(e=>pQ(e)?e:n=>e.validate(n))}function FF(t){if(!t)return null;let e=t.filter(MF);return e.length==0?null:function(n){return xF(NF(n,e))}}function UI(t){return t!=null?FF(kF(t)):null}function jF(t){if(!t)return null;let e=t.filter(MF);return e.length==0?null:function(n){let r=NF(n,e).map(OF);return uw(r).pipe(Q(xF))}}function HI(t){return t!=null?jF(kF(t)):null}function CF(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function LF(t){return t._rawValidators}function qF(t){return t._rawAsyncValidators}function BI(t){return t?Array.isArray(t)?t:[t]:[]}function Qh(t,e){return Array.isArray(t)?t.includes(e):t===e}function SF(t,e){let n=BI(e);return BI(t).forEach(i=>{Qh(n,i)||n.push(i)}),n}function wF(t,e){return BI(e).filter(n=>!Qh(t,n))}var Zh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},kc=class extends Zh{get formDirective(){return null}get path(){return null}},Os=class extends Zh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Yh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},fQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},bCe=$(b({},fQ),{"[class.ng-submitted]":"isSubmitted"}),ECe=(()=>{let e=class e extends Yh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(V(Os,2))},e.\u0275dir=We({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&gh("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Zr]});let t=e;return t})(),ICe=(()=>{let e=class e extends Yh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(V(kc,10))},e.\u0275dir=We({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&gh("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Zr]});let t=e;return t})();var Ql="VALID",Jh="INVALID",xc="PENDING",Zl="DISABLED",Fc=class{},Xh=class extends Fc{constructor(e,n){super(),this.value=e,this.source=n}},Xl=class extends Fc{constructor(e,n){super(),this.pristine=e,this.source=n}},ed=class extends Fc{constructor(e,n){super(),this.touched=e,this.source=n}},Nc=class extends Fc{constructor(e,n){super(),this.status=e,this.source=n}};function BF(t){return(ig(t)?t.validators:t)||null}function hQ(t){return Array.isArray(t)?UI(t):t||null}function VF(t,e){return(ig(e)?e.asyncValidators:t)||null}function gQ(t){return Array.isArray(t)?HI(t):t||null}function ig(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function vQ(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new k(1e3,"");if(!r[n])throw new k(1001,"")}function mQ(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new k(1002,"")})}var eg=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=bo(()=>this.statusReactive()),this.statusReactive=wo(void 0),this._pristine=bo(()=>this.pristineReactive()),this.pristineReactive=wo(!0),this._touched=bo(()=>this.touchedReactive()),this.touchedReactive=wo(!1),this._events=new Xe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Kn(this.statusReactive)}set status(e){Kn(()=>this.statusReactive.set(e))}get valid(){return this.status===Ql}get invalid(){return this.status===Jh}get pending(){return this.status==xc}get disabled(){return this.status===Zl}get enabled(){return this.status!==Zl}get pristine(){return Kn(this.pristineReactive)}set pristine(e){Kn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Kn(this.touchedReactive)}set touched(e){Kn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wF(e,this._rawAsyncValidators))}hasValidator(e){return Qh(this._rawValidators,e)}hasAsyncValidator(e){return Qh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched($(b({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ed(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ed(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty($(b({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Xl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Xl(!0,r))}markAsPending(e={}){this.status=xc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending($(b({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Zl,this.errors=null,this._forEachChild(i=>{i.disable($(b({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xh(this.value,r)),this._events.next(new Nc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($(b({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ql,this._forEachChild(r=>{r.enable($(b({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors($(b({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ql||this.status===xc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xh(this.value,n)),this._events.next(new Nc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity($(b({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zl:Ql}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=xc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=OF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Nc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ne,this.statusChanges=new ne}_calculateStatus(){return this._allControlsDisabled()?Zl:this.errors?Jh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xc)?xc:this._anyControlsHaveStatus(Jh)?Jh:Ql}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Xl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ed(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ig(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=hQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=gQ(this._rawAsyncValidators)}},tg=class extends eg{constructor(e,n,r){super(BF(n),VF(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){mQ(this,!0,e),Object.keys(e).forEach(r=>{vQ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var td=new N("CallSetDisabledState",{providedIn:"root",factory:()=>og}),og="always";function yQ(t,e){return[...e.path,t]}function $I(t,e,n=og){zF(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),wQ(t,e),EQ(t,e),bQ(t,e),CQ(t,e)}function bF(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),SQ(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ng(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function CQ(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function zF(t,e){let n=LF(t);e.validator!==null?t.setValidators(CF(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=qF(t);e.asyncValidator!==null?t.setAsyncValidators(CF(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();ng(e._rawValidators,i),ng(e._rawAsyncValidators,i)}function SQ(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=LF(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=qF(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return ng(e._rawValidators,r),ng(e._rawAsyncValidators,r),n}function wQ(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&UF(t,e)})}function bQ(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&UF(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function UF(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function EQ(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function IQ(t,e){t==null,zF(t,e)}function HF(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function DQ(t){return Object.getPrototypeOf(t.constructor)===RF}function _Q(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $F(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===PF?n=o:DQ(o)?r=o:i=o}),i||r||n||null}var RQ={provide:kc,useExisting:mo(()=>PQ)},Yl=Promise.resolve(),PQ=(()=>{let e=class e extends kc{get submitted(){return Kn(this.submittedReactive)}constructor(r,i,o){super(),this.callSetDisabledState=o,this._submitted=bo(()=>this.submittedReactive()),this.submittedReactive=wo(!1),this._directives=new Set,this.ngSubmit=new ne,this.form=new tg({},UI(r),HI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Yl.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),$I(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Yl.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Yl.then(()=>{let i=this._findContainer(r.path),o=new tg({});IQ(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Yl.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Yl.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),_Q(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(V(VI,10),V(zI,10),V(td,8))},e.\u0275dir=We({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&gn("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vc([RQ]),Zr]});let t=e;return t})();function EF(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function IF(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var TQ=class extends eg{constructor(e=null,n,r){super(BF(n),VF(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ig(n)&&(n.nonNullable||n.initialValueIsDefault)&&(IF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){IF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var AQ={provide:Os,useExisting:mo(()=>MQ)},DF=Promise.resolve(),MQ=(()=>{let e=class e extends Os{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new TQ,this._registered=!1,this.name="",this.update=new ne,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=$F(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),HF(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){$I(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){DF.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Ps(i);DF.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?yQ(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(V(kc,9),V(VI,10),V(zI,10),V(rg,10),V(Xr,8),V(td,8))},e.\u0275dir=We({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vc([AQ]),Zr,Ai]});let t=e;return t})(),_Ce=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=We({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var WF=new N(""),OQ={provide:Os,useExisting:mo(()=>xQ)},xQ=(()=>{let e=class e extends Os{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new ne,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$F(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&bF(i,this,!1),$I(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}HF(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&bF(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(V(VI,10),V(zI,10),V(rg,10),V(WF,8),V(td,8))},e.\u0275dir=We({type:e,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[vc([OQ]),Zr,Ai]});let t=e;return t})();var GF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({});let t=e;return t})();var RCe=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:td,useValue:r.callSetDisabledState??og}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({imports:[GF]});let t=e;return t})(),PCe=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:WF,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:td,useValue:r.callSetDisabledState??og}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({imports:[GF]});let t=e;return t})();var NQ="https://ebla-ai-demo-002.azurewebsites.net/api/v1/";var kQ="assets/images/nlogo.svg";var sg={production:!0,endpoint:NQ,debugMode:!1,logo:kQ,STREAM_ID_STORAGE_KEY:"streamId",MESSAGE_TEXT_KEY:"message_text",AVATAR_IS_RECORDING_KEY:"is_recording",OUTER_AVATAR_IS_ACTIVE_KEY:"is_active_outer_avatar",base:"/ai-demo"};var jc=class{_baseUrl;loading=!1;constructor(e){this._baseUrl=e}get baseUrl(){return sg.endpoint+this.tag+this._baseUrl}startLoading(){this.loading=!0}stopLoading(){this.loading=!1}};var KF=(()=>{class t extends jc{tag="common/";http=E(Il);constructor(){super("speech")}transcribe(n){return this.startLoading(),this.http.post(this.baseUrl+"/transcribe",n,{headers:new Jn({enctype:"multipart/form-data"})}).pipe(mr(()=>{this.stopLoading()}))}requestAuthorizationToken(){return this.http.get(this.baseUrl+"/token",{headers:new Jn({"Content-Type":"application/json"})})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var FQ=t=>({active:t}),JF=(()=>{class t{onClick=new ne;active=!1;position="top";constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Gr({type:t,selectors:[["stop-processing-btn"]],inputs:{active:"active",position:"position"},outputs:{onClick:"onClick"},standalone:!0,features:[mc],decls:4,vars:5,consts:[["type","button",1,"btn","btn-secondary","px-3","border","border-light","btn-sm","d-flex","align-items-center","rounded-pill","stop-processing-btn",3,"click","ngClass"],[1,"ms-1","mdi","mdi-pause"]],template:function(r,i){r&1&&(kt(0,"button",0),gn("click",function(){return i.onClick.emit()}),kt(1,"small"),_s(2," Stop Processing "),Yr(3,"i",1),hn()()),r&2&&(gc(i.position),Gn("ngClass",yc(3,FQ,i.active)))},dependencies:[Fi,wc],styles:[".stop-processing-btn[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);opacity:0;white-space:nowrap;transition:.4s;visibility:hidden}.stop-processing-btn.active[_ngcontent-%COMP%]{opacity:.5;visibility:visible}.stop-processing-btn[_ngcontent-%COMP%]:hover{opacity:1}.stop-processing-btn.top[_ngcontent-%COMP%]{top:-42px}.stop-processing-btn.bottom[_ngcontent-%COMP%]{bottom:-42px}"]})}return t})();var WI=class{constructor(e,n){this.open=e,this.close=n||e}isManual(){return this.open==="manual"||this.close==="manual"}},jQ={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};function GI(t,e=jQ){let n=(t||"").trim();if(n.length===0)return[];let r=n.split(/\s+/).map(o=>o.split(":")).map(o=>{let s=e[o[0]]||o;return new WI(s[0],s[1])}),i=r.filter(o=>o.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(i.length===1&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}function YF(t,e){let n=GI(e.triggers),r=e.target;if(n.length===1&&n[0].isManual())return Function.prototype;let i=[],o=[],s=()=>{o.forEach(a=>i.push(a())),o.length=0};return n.forEach(a=>{let c=a.open===a.close,u=c?e.toggle:e.show;if(!c&&a.close&&e.hide){let l=a.close,d=e.hide,p=()=>t.listen(r,l,d);o.push(p)}u&&i.push(t.listen(r,a.open,()=>u(s)))}),()=>{i.forEach(a=>a())}}function XF(t,e){return e.outsideClick?t.listen("document","click",n=>{e.target&&e.target.contains(n.target)||e.targets&&e.targets.some(r=>r.contains(n.target))||e.hide&&e.hide()}):Function.prototype}function ej(t,e){return e.outsideEsc?t.listen("document","keyup.esc",n=>{e.target&&e.target.contains(n.target)||e.targets&&e.targets.some(r=>r.contains(n.target))||e.hide&&e.hide()}):Function.prototype}var ct=typeof window<"u"&&window||{},GCe=ct.document,KCe=ct.location,JCe=ct.gc?()=>ct.gc():()=>null,QCe=ct.performance?ct.performance:null,ZCe=ct.Event,YCe=ct.MouseEvent,XCe=ct.KeyboardEvent,eSe=ct.EventTarget,tSe=ct.History,nSe=ct.Location,rSe=ct.EventListener,tj=function(t){return t.isBs4="bs4",t.isBs5="bs5",t}(tj||{}),Ao;function nj(){let t=ct.document.createElement("span");t.innerText="testing bs version",t.classList.add("d-none"),t.classList.add("pl-1"),ct.document.head.appendChild(t);let e=ct.getComputedStyle(t).paddingLeft;return e&&parseFloat(e)?(ct.document.head.removeChild(t),"bs4"):(ct.document.head.removeChild(t),"bs5")}function LQ(){return Ao||(Ao=nj()),Ao==="bs4"}function qQ(){return Ao||(Ao=nj()),Ao==="bs5"}function Mo(){return{isBs4:LQ(),isBs5:qQ()}}function BQ(){let t=Mo(),e=Object.keys(t).find(n=>t[n]);return tj[e]}function ag(){let t="Change";return function(n,r){let i=` __${r}Value`;Object.defineProperty(n,r,{get(){return this[i]},set(o){let s=this[i];this[i]=o,s!==o&&this[r+t]&&this[r+t].emit(o)}})}}var QF=class{static reflow(e){e.offsetHeight}static getStyles(e){let n=e.ownerDocument.defaultView;return(!n||!n.opener)&&(n=ct),n.getComputedStyle(e)}static stackOverflowConfig(){let e=BQ();return{crossorigin:"anonymous",integrity:e==="bs5"?"sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65":"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2",cdnLink:e==="bs5"?"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css":"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"}}},ZF={},VQ=typeof console>"u"||!("warn"in console);function mn(t){!H1()||VQ||t in ZF||(ZF[t]=!0,console.warn(t))}var cj=function(t){return t.top="top",t.bottom="bottom",t.left="left",t.right="right",t.auto="auto",t.end="right",t.start="left",t["top left"]="top left",t["top right"]="top right",t["right top"]="right top",t["right bottom"]="right bottom",t["bottom right"]="bottom right",t["bottom left"]="bottom left",t["left bottom"]="left bottom",t["left top"]="left top",t["top start"]="top left",t["top end"]="top right",t["end top"]="right top",t["end bottom"]="right bottom",t["bottom end"]="bottom right",t["bottom start"]="bottom left",t["start bottom"]="start bottom",t["start top"]="left top",t}(cj||{}),nd=function(t){return t.top="top",t.bottom="bottom",t.left="start",t.right="end",t.auto="auto",t.end="end",t.start="start",t["top left"]="top start",t["top right"]="top end",t["right top"]="end top",t["right bottom"]="end bottom",t["bottom right"]="bottom end",t["bottom left"]="bottom start",t["left bottom"]="start bottom",t["left top"]="start top",t["top start"]="top start",t["top end"]="top end",t["end top"]="end top",t["end bottom"]="end bottom",t["bottom end"]="bottom end",t["bottom start"]="bottom start",t["start bottom"]="start bottom",t["start top"]="start top",t}(nd||{});function xs(t,e){if(t.nodeType!==1)return[];let r=t.ownerDocument.defaultView?.getComputedStyle(t,null);return e?r&&r[e]:r}function ZI(t){if(!t)return document.documentElement;let e=null,n=t?.offsetParent,r;for(;n===e&&t.nextElementSibling&&r!==t.nextElementSibling;)r=t.nextElementSibling,n=r.offsetParent;let i=n&&n.nodeName;return!i||i==="BODY"||i==="HTML"?r?r.ownerDocument.documentElement:document.documentElement:n&&["TH","TD","TABLE"].indexOf(n.nodeName)!==-1&&xs(n,"position")==="static"?ZI(n):n}function zQ(t){let{nodeName:e}=t;return e==="BODY"?!1:e==="HTML"||ZI(t.firstElementChild)===t}function KI(t){return t.parentNode!==null?KI(t.parentNode):t}function dg(t,e){if(!t||!t.nodeType||!e||!e.nodeType)return document.documentElement;let n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);let s=o.commonAncestorContainer;if(t!==s&&e!==s||r.contains(i))return zQ(s)?s:ZI(s);let a=KI(t);return a.host?dg(a.host,e):dg(t,KI(e).host)}function uj(t){if(!t||!t.parentElement)return document.documentElement;let e=t.parentElement;for(;e?.parentElement&&xs(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function rj(t,e){let n=e==="x"?"Left":"Top",r=n==="Left"?"Right":"Bottom";return parseFloat(t[`border${n}Width`])+parseFloat(t[`border${r}Width`])}function ij(t,e,n){let r=e,i=n;return Math.max(r[`offset${t}`],r[`scroll${t}`],i[`client${t}`],i[`offset${t}`],i[`scroll${t}`],0)}function lj(t){let e=t.body,n=t.documentElement;return{height:ij("Height",e,n),width:ij("Width",e,n)}}function rd(t){return $(b({},t),{right:(t.left||0)+t.width,bottom:(t.top||0)+t.height})}function UQ(t){return t!==""&&!isNaN(parseFloat(t))&&isFinite(Number(t))}function ke(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function oj(t){let e=t.getBoundingClientRect();if(!(e&&ke(e.top)&&ke(e.left)&&ke(e.bottom)&&ke(e.right)))return e;let n={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r=t.nodeName==="HTML"?lj(t.ownerDocument):void 0,i=r?.width||t.clientWidth||ke(e.right)&&ke(n.left)&&e.right-n.left||0,o=r?.height||t.clientHeight||ke(e.bottom)&&ke(n.top)&&e.bottom-n.top||0,s=t.offsetWidth-i,a=t.offsetHeight-o;if(s||a){let c=xs(t);s-=rj(c,"x"),a-=rj(c,"y"),n.width-=s,n.height-=a}return rd(n)}function YI(t,e,n=!1){let r=e.nodeName==="HTML",i=oj(t),o=oj(e),s=xs(e),a=parseFloat(s.borderTopWidth),c=parseFloat(s.borderLeftWidth);n&&r&&(o.top=Math.max(o.top??0,0),o.left=Math.max(o.left??0,0));let u=rd({top:(i.top??0)-(o.top??0)-a,left:(i.left??0)-(o.left??0)-c,width:i.width,height:i.height});if(u.marginTop=0,u.marginLeft=0,r){let l=parseFloat(s.marginTop),d=parseFloat(s.marginLeft);ke(u.top)&&(u.top-=a-l),ke(u.bottom)&&(u.bottom-=a-l),ke(u.left)&&(u.left-=c-d),ke(u.right)&&(u.right-=c-d),u.marginTop=l,u.marginLeft=d}return u}function XI(t){return t.nodeName==="HTML"?t:t.parentNode||t.host}function dj(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body;default:}let{overflow:e,overflowX:n,overflowY:r}=xs(t);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(n))?t:dj(XI(t))}function sj(t,e="top"){let n=e==="top"?"scrollTop":"scrollLeft",r=t.nodeName;if(r==="BODY"||r==="HTML"){let i=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||i)[n]}return t[n]}function HQ(t,e=!1){let n=t.ownerDocument.documentElement,r=YI(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:sj(n),a=e?0:sj(n,"left"),c={top:s-Number(r?.top)+Number(r?.marginTop),left:a-Number(r?.left)+Number(r?.marginLeft),width:i,height:o};return rd(c)}function pj(t){let e=t.nodeName;return e==="BODY"||e==="HTML"?!1:xs(t,"position")==="fixed"?!0:pj(XI(t))}function eD(t,e,n=0,r,i=!1){let o={top:0,left:0},s=i?uj(t):dg(t,e);if(r==="viewport")o=HQ(s,i);else{let a;r==="scrollParent"?(a=dj(XI(e)),a.nodeName==="BODY"&&(a=t.ownerDocument.documentElement)):r==="window"?a=t.ownerDocument.documentElement:a=r;let c=YI(a,s,i);if(c&&a.nodeName==="HTML"&&!pj(s)){let{height:u,width:l}=lj(t.ownerDocument);ke(o.top)&&ke(c.top)&&ke(c.marginTop)&&(o.top+=c.top-c.marginTop),ke(o.top)&&(o.bottom=Number(u)+Number(c.top)),ke(o.left)&&ke(c.left)&&ke(c.marginLeft)&&(o.left+=c.left-c.marginLeft),ke(o.top)&&(o.right=Number(l)+Number(c.left))}else c&&(o=c)}return ke(o.left)&&(o.left+=n),ke(o.top)&&(o.top+=n),ke(o.right)&&(o.right-=n),ke(o.bottom)&&(o.bottom-=n),o}function $Q({width:t,height:e}){return t*e}function fj(t,e,n,r,i=["top","bottom","right","left"],o="viewport",s=0){if(t.indexOf("auto")===-1)return t;let a=eD(n,r,s,o),c={top:{width:a?.width??0,height:(e?.top??0)-(a?.top??0)},right:{width:(a?.right??0)-(e?.right??0),height:a?.height??0},bottom:{width:a?.width??0,height:(a?.bottom??0)-(e?.bottom??0)},left:{width:(e.left??0)-(a?.left??0),height:a?.height??0}},u=Object.keys(c).map(f=>$(b({position:f},c[f]),{area:$Q(c[f])})).sort((f,g)=>g.area-f.area),l=u.filter(({width:f,height:g})=>f>=n.clientWidth&&g>=n.clientHeight);l=l.filter(({position:f})=>i.some(g=>g===f));let d=l.length>0?l[0].position:u[0].position,p=t.split(" ")[1];return n.className=n.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Mo().isBs5?nd[d]:d}`),d+(p?`-${p}`:"")}function WQ(t){return{width:t.offsets.target.width,height:t.offsets.target.height,left:Math.floor(t.offsets.target.left??0),top:Math.round(t.offsets.target.top??0),bottom:Math.round(t.offsets.target.bottom??0),right:Math.floor(t.offsets.target.right??0)}}function GQ(t){let e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,n=>e[n])}function KQ(t){return t==="right"?"left":t==="left"?"right":t}var cg=(t,e=0)=>t?parseFloat(t):e;function hj(t){let n=t.ownerDocument.defaultView?.getComputedStyle(t),r=cg(n?.marginTop)+cg(n?.marginBottom),i=cg(n?.marginLeft)+cg(n?.marginRight);return{width:Number(t.offsetWidth)+i,height:Number(t.offsetHeight)+r}}function gj(t,e,n){let r=n?uj(t):dg(t,e);return YI(e,r,n)}function JI(t,e,n){let r=n.split(" ")[0],i=hj(t),o={width:i.width,height:i.height},s=["right","left"].indexOf(r)!==-1,a=s?"top":"left",c=s?"left":"top",u=s?"height":"width",l=s?"width":"height";return o[a]=(e[a]??0)+e[u]/2-i[u]/2,o[c]=r===c?(e[c]??0)-i[l]:e[GQ(c)]??0,o}function vj(t,e){return!!t.modifiers[e]?.enabled}var JQ={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function ug(t,e){return Mo().isBs5?JQ[e].includes(t):!1}function QQ(t){return Mo().isBs5?ug(t,"end")?"ms-2":ug(t,"start")?"me-2":ug(t,"top")?"mb-2":ug(t,"bottom")?"mt-2":"":""}function ZQ(t,e){let n=t.instance.target,r=n.className,i=Mo().isBs5?nd[t.placement]:t.placement;if(t.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),r.indexOf("popover")!==-1&&(r=r+" "+QQ(i)),r.indexOf("popover")!==-1&&r.indexOf("popover-auto")===-1&&(r+=" popover-auto"),r.indexOf("tooltip")!==-1&&r.indexOf("tooltip-auto")===-1&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e){e.setAttribute(n,"class",r);return}n.className=r}function aj(t,e,n){!t||!e||Object.keys(e).forEach(r=>{let i="";if(["width","height","top","right","bottom","left"].indexOf(r)!==-1&&UQ(e[r])&&(i="px"),n){n.setStyle(t,r,`${String(e[r])}${i}`);return}t.style[r]=String(e[r])+i})}function YQ(t){let e=t.offsets.target,n=t.instance.target.querySelector(".arrow");if(!n)return t;let r=["left","right"].indexOf(t.placement.split(" ")[0])!==-1,i=r?"height":"width",o=r?"Top":"Left",s=o.toLowerCase(),a=r?"left":"top",c=r?"bottom":"right",u=hj(n)[i],l=t.placement.split(" ")[1];(t.offsets.host[c]??0)-u<(e[s]??0)&&(e[s]-=(e[s]??0)-((t.offsets.host[c]??0)-u)),Number(t.offsets.host[s])+Number(u)>(e[c]??0)&&(e[s]+=Number(t.offsets.host[s])+Number(u)-Number(e[c])),e=rd(e);let d=xs(t.instance.target),p=parseFloat(d[`margin${o}`])||0,f=parseFloat(d[`border${o}Width`])||0,g;if(!l)g=Number(t.offsets.host[s])+Number(t.offsets.host[i]/2-u/2);else{let y=parseFloat(d.borderRadius)||0,w=Number(p+f+y);g=s===l?Number(t.offsets.host[s])+w:Number(t.offsets.host[s])+Number(t.offsets.host[i]-w)}let m=g-(e[s]??0)-p-f;return m=Math.max(Math.min(e[i]-(u+5),m),0),t.offsets.arrow={[s]:Math.round(m),[a]:""},t.instance.arrow=n,t}function XQ(t){if(t.offsets.target=rd(t.offsets.target),!vj(t.options,"flip"))return t.offsets.target=b(b({},t.offsets.target),JI(t.instance.target,t.offsets.host,t.placement)),t;let e=eD(t.instance.target,t.instance.host,0,"viewport",!1),n=t.placement.split(" ")[0],r=t.placement.split(" ")[1]||"",i=t.offsets.host,o=t.instance.target,s=t.instance.host,a=fj("auto",i,o,s,t.options.allowedPositions),c=[n,a];return c.forEach((u,l)=>{if(n!==u||c.length===l+1)return;n=t.placement.split(" ")[0];let d=n==="left"&&Math.floor(t.offsets.target.right??0)>Math.floor(t.offsets.host.left??0)||n==="right"&&Math.floor(t.offsets.target.left??0)<Math.floor(t.offsets.host.right??0)||n==="top"&&Math.floor(t.offsets.target.bottom??0)>Math.floor(t.offsets.host.top??0)||n==="bottom"&&Math.floor(t.offsets.target.top??0)<Math.floor(t.offsets.host.bottom??0),p=Math.floor(t.offsets.target.left??0)<Math.floor(e.left??0),f=Math.floor(t.offsets.target.right??0)>Math.floor(e.right??0),g=Math.floor(t.offsets.target.top??0)<Math.floor(e.top??0),m=Math.floor(t.offsets.target.bottom??0)>Math.floor(e.bottom??0),y=n==="left"&&p||n==="right"&&f||n==="top"&&g||n==="bottom"&&m,w=["top","bottom"].indexOf(n)!==-1,I=w&&r==="left"&&p||w&&r==="right"&&f||!w&&r==="left"&&g||!w&&r==="right"&&m;(d||y||I)&&((d||y)&&(n=c[l+1]),I&&(r=KQ(r)),t.placement=n+(r?` ${r}`:""),t.offsets.target=b(b({},t.offsets.target),JI(t.instance.target,t.offsets.host,t.placement)))}),t}function eZ(t,e,n,r){if(!t||!e)return;let i=gj(t,e);!n.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!n.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(n="auto");let o=!!n.match(/auto/g),s=n.match(/auto\s(left|right|top|bottom|start|end)/)?n.split(" ")[1]||"auto":n,a=s.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);a&&(s=a[1]+(a[2]?` ${a[2]}`:"")),["left right","right left","top bottom","bottom top"].indexOf(s)!==-1&&(s="auto"),s=fj(s,i,t,e,r?r.allowedPositions:void 0);let c=JI(t,i,s);return{options:r||{modifiers:{}},instance:{target:t,host:e,arrow:void 0},offsets:{target:c,host:i,arrow:void 0},positionFixed:!1,placement:s,placementAuto:o}}function tZ(t){if(!vj(t.options,"preventOverflow"))return t;let e="transform",n=t.instance.target.style,{top:r,left:i,[e]:o}=n;n.top="",n.left="",n[e]="";let s=eD(t.instance.target,t.instance.host,0,t.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);n.top=r,n.left=i,n[e]=o;let a=["left","right","top","bottom"],c={primary(u){let l=t.offsets.target[u];return(t.offsets.target[u]??0)<(s[u]??0)&&(l=Math.max(t.offsets.target[u]??0,s[u]??0)),{[u]:l}},secondary(u){let l=u==="right",d=l?"left":"top",p=l?"width":"height",f=t.offsets.target[d];return(t.offsets.target[u]??0)>(s[u]??0)&&(f=Math.min(t.offsets.target[d]??0,(s[u]??0)-t.offsets.target[p])),{[d]:f}}};return a.forEach(u=>{let l=["left","top","start"].indexOf(u)!==-1?c.primary:c.secondary;t.offsets.target=b(b({},t.offsets.target),l(u))}),t}function nZ(t){let e=t.placement,n=e.split(" ")[0],r=e.split(" ")[1];if(r){let{host:i,target:o}=t.offsets,s=["bottom","top"].indexOf(n)!==-1,a=s?"left":"top",c=s?"width":"height",u={start:{[a]:i[a]},end:{[a]:(i[a]??0)+i[c]-o[c]}};t.offsets.target=$(b({},o),{[a]:a===r?u.start[a]:u.end[a]})}return t}var QI=class{position(e,n){return this.offset(e,n)}offset(e,n){return gj(n,e)}positionElements(e,n,r,i,o){let s=[XQ,nZ,tZ,YQ],a=cj[r],c=eZ(n,e,a,o);if(c)return s.reduce((u,l)=>l(u),c)}},rZ=new QI;function iZ(t,e,n,r,i,o){let s=rZ.positionElements(t,e,n,r,i);if(!s)return;let a=WQ(s);aj(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${a.left}px, ${a.top}px, 0px)`},o),s.instance.arrow&&aj(s.instance.arrow,s.offsets.arrow,o),ZQ(s,o)}var Lc=(()=>{let e=class e{constructor(r,i,o){this.update$$=new Xe,this.positionElements=new Map,this.isDisabled=!1,HE(o)&&r.runOutsideAngular(()=>{this.triggerEvent$=dw(Va(window,"scroll",{passive:!0}),Va(window,"resize",{passive:!0}),B(0,sw),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(s=>{iZ(lg(s.target),lg(s.element),s.attachment,s.appendToBody,this.options,i.createRenderer(null,null))})})})}position(r){this.addPositionElement(r)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(r){this.positionElements.set(lg(r.element),r)}calcPosition(){this.update$$.next(null)}deletePositionElement(r){this.positionElements.delete(lg(r))}setOptions(r){this.options=r}};e.\u0275fac=function(i){return new(i||e)(x(_e),x(go),x(Wn))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lg(t){return typeof t=="string"?document.querySelector(t):t instanceof ft?t.nativeElement:t??null}var Ns=class{constructor(e,n,r){this.nodes=e,this.viewRef=n,this.componentRef=r}},tD=class{constructor(e,n,r,i,o,s,a,c,u){this._viewContainerRef=e,this._renderer=n,this._elementRef=r,this._injector=i,this._componentFactoryResolver=o,this._ngZone=s,this._applicationRef=a,this._posService=c,this._document=u,this.onBeforeShow=new ne,this.onShown=new ne,this.onBeforeHide=new ne,this.onHidden=new ne,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return this._isHiding?!1:!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);let n=pt.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(n,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof ft&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),typeof this.container=="string"&&typeof this._document<"u"){let r=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);let n=this._componentRef.location.nativeElement;return n.parentNode?.removeChild(n),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._componentRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){if(this.isShown){this.hide();return}this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||this._elementRef?.nativeElement;let n=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),r=this._listenOpts.show=o=>{e.show?e.show(o):this.show(o),o()},i=o=>{this.isShown?n():r(o)};return this._renderer&&(this._unregisterListenersFn=YF(this._renderer,{target:e.target,triggers:e.triggers,show:r,hide:n,toggle:i})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,n){return e&&n&&(this._inlineViewRef=e.createEmbeddedView(n)),this}_registerOutsideClick(){if(!this._componentRef||!this._componentRef.location)return;let e=Function.prototype,n=Function.prototype;if(this._listenOpts.outsideClick){let r=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(e=XF(this._renderer,{targets:[r,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}if(this._listenOpts.outsideEsc&&this._renderer&&this._elementRef){let r=this._componentRef.location.nativeElement;n=ej(this._renderer,{targets:[r,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()})}this._globalListener=()=>{e(),n()}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:this.container==="body"})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,n,r){if(!e)return new Ns([]);if(e instanceof Ri){if(this._viewContainerRef){let s=this._viewContainerRef.createEmbeddedView(e,n);return s.markForCheck(),new Ns([s.rootNodes],s)}let o=e.createEmbeddedView({});return this._applicationRef.attachView(o),new Ns([o.rootNodes],o)}if(typeof e=="function"){let o=this._componentFactoryResolver.resolveComponentFactory(e),s=pt.create({providers:this._providers,parent:this._injector}),a=o.create(s);return Object.assign(a.instance,r),this._applicationRef.attachView(a.hostView),new Ns([[a.location.nativeElement]],a.hostView,a)}let i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new Ns([i])}},pg=(()=>{let e=class e{constructor(r,i,o,s,a,c){this._componentFactoryResolver=r,this._ngZone=i,this._injector=o,this._posService=s,this._applicationRef=a,this._document=c}createLoader(r,i,o){return new tD(i,o,r,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}};e.\u0275fac=function(i){return new(i||e)(x(ho),x(_e),x(pt),x(Lc),x(Oi),x(at))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sZ=["*"],nD=(()=>{let e=class e{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aZ=(()=>{let e=class e{get _bsVersions(){return Mo()}constructor(r){Object.assign(this,r)}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=nd[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}};e.\u0275fac=function(i){return new(i||e)(V(nD))},e.\u0275cmp=Gr({type:e,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(i,o){i&2&&(hc("id",o.id),gc("show tooltip in tooltip-"+o.placement+" bs-tooltip-"+o.placement+" "+o.placement+" "+o.containerClass))},ngContentSelectors:sZ,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(i,o){i&1&&(vh(),Yr(0,"div",0),kt(1,"div",1),mh(2),hn())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none;position:absolute}.tooltip[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0});let t=e;return t})(),cZ=0,yj=(()=>{let e=class e{get isOpen(){return this._tooltip.isShown}set isOpen(r){r?this.show():this.hide()}set htmlContent(r){mn("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=r}set _placement(r){mn("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=r}set _isOpen(r){mn("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=r}get _isOpen(){return mn("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(r){mn("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!r}get _enable(){return mn("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(r){mn('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=r?"body":this.container}get _appendToBody(){return mn('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container==="body"}set _popupClass(r){mn("tooltipClass deprecated")}set _tooltipContext(r){mn("tooltipContext deprecated")}set _tooltipPopupDelay(r){mn("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=r}get _tooltipTrigger(){return mn("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(r){mn("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(r||"").toString()}constructor(r,i,o,s,a,c){this._elementRef=s,this._renderer=a,this._positionService=c,this.tooltipId=cZ++,this.adaptivePosition=!0,this.tooltipChange=new ne,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new ne,this._tooltip=i.createLoader(this._elementRef,r,this._renderer).provide({provide:nD,useValue:o}),Object.assign(this,o),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(r=>{r||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;let r=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(aZ).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},i=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=lw(this.delay).subscribe(()=>{r(),i()}),this.triggers&&GI(this.triggers).forEach(o=>{o.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,o.close,()=>{this._delaySubscription?.unsubscribe(),i()}))})):r()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(V(wr),V(pg),V(nD),V(ft),V(Jr),V(Lc))},e.\u0275dir=We({type:e,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:[0,"tooltipHtml","htmlContent"],_placement:[0,"tooltipPlacement","_placement"],_isOpen:[0,"tooltipIsOpen","_isOpen"],_enable:[0,"tooltipEnable","_enable"],_appendToBody:[0,"tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:[0,"tooltipClass","_popupClass"],_tooltipContext:[0,"tooltipContext","_tooltipContext"],_tooltipPopupDelay:[0,"tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:[0,"tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]});let t=e;return Up([ag(),Hp("design:type",Object)],t.prototype,"tooltip",void 0),t})(),Cj=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[pg,Lc]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({imports:[Fi]});let t=e;return t})();var as=I8(c8());var tle=["*"];function nle(t,e){if(t&1){let n=x1();kt(0,"button",2),gn("click",function(){Ux(n);let i=PE(2);return Hx(i.close())}),kt(1,"span",3),_s(2,"\xD7"),hn(),kt(3,"span",4),_s(4,"Close"),hn()()}}function rle(t,e){if(t&1&&(kt(0,"div",1),hh(1,nle,5,0,"ng-template",0),mh(2),hn()),t&2){let n=PE();gc("alert alert-"+n.type),Gn("ngClass",n.classes),Ds(),Gn("ngIf",n.dismissible)}}var ile=(()=>{let e=class e{constructor(){this.type="warning",this.dismissible=!1,this.dismissOnTimeout=void 0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),u8=(()=>{let e=class e{constructor(r,i){this.changeDetection=i,this.type="warning",this.dismissible=!1,this.isOpen=!0,this.onClose=new ne,this.onClosed=new ne,this.classes="",this.dismissibleChange=new ne,Object.assign(this,r),this.dismissibleChange.subscribe(()=>{this.classes=this.dismissible?"alert-dismissible":"",this.changeDetection.markForCheck()})}ngOnInit(){this.dismissOnTimeout&&setTimeout(()=>this.close(),parseInt(this.dismissOnTimeout,10))}close(){this.isOpen&&(this.onClose.emit(this),this.isOpen=!1,this.changeDetection.markForCheck(),this.onClosed.emit(this))}};e.\u0275fac=function(i){return new(i||e)(V(ile),V(Xr))},e.\u0275cmp=Gr({type:e,selectors:[["alert"],["bs-alert"]],inputs:{type:"type",dismissible:"dismissible",dismissOnTimeout:"dismissOnTimeout",isOpen:"isOpen"},outputs:{onClose:"onClose",onClosed:"onClosed"},ngContentSelectors:tle,decls:1,vars:1,consts:[[3,"ngIf"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"sr-only","visually-hidden"]],template:function(i,o){i&1&&(vh(),hh(0,rle,3,4,"ng-template",0)),i&2&&Gn("ngIf",o.isOpen)},dependencies:[wc,ik],encapsulation:2,changeDetection:0});let t=e;return Up([ag(),Hp("design:type",Object)],t.prototype,"dismissible",void 0),t})(),l8=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=dn({imports:[Fi]});let t=e;return t})();var sle=t=>({processing:t}),ale=t=>({disabled:t}),cle=t=>({active:t}),eRe=(()=>{class t{onRecordReady=new ne;onStopRecording=new ne;disabled=!0;isProcessing=!1;recordOnHold=!1;AVATAR_IS_RECORDING_KEY=sg.AVATAR_IS_RECORDING_KEY;result="";recognizedText="";aiSpeechToTextService=E(KF);isRecording=!1;recognizer;speechConfig;stream;showMessageEmptyPopup=!1;constraints={video:!1,audio:{channelCount:1,sampleRate:16e3,sampleSize:16,volume:1}};constructor(){}ngOnInit(){this.aiSpeechToTextService.requestAuthorizationToken().subscribe(({token:n,region:r})=>{this.speechConfig=as.SpeechConfig.fromAuthorizationToken(n,r),this.disabled=!1})}startRecording(){this.isRecording||(this.isRecording=!0,localStorage.setItem(this.AVATAR_IS_RECORDING_KEY,String(!0)),navigator.mediaDevices.getUserMedia(this.constraints).then(n=>{try{this.stream=n;let r=as.AudioConfig.fromStreamInput(n),i=as.AutoDetectSourceLanguageConfig.fromLanguages(["ar-QA","en-US"]);this.recognizer=as.SpeechRecognizer.FromConfig(this.speechConfig,i,r),this.recognizer.recognizing=(o,s)=>{this.isProcessing=!0,s.result.text&&this.isRecording&&this.onRecordReady.emit(s.result.text)},this.recognizedText="",this.recognizer.recognized=(o,s)=>{this.isProcessing=!1,s.result.text&&(this.recognizedText+=" "+s.result.text),this.isRecording&&this.onRecordReady.emit(this.recognizedText)},this.recognizer.startContinuousRecognitionAsync()}catch{this.isRecording=!1,this.stream.getTracks().forEach(r=>{r.stop()})}}))}stopRecording(){this.isRecording&&(localStorage.setItem(this.AVATAR_IS_RECORDING_KEY,String(!1)),this.isRecording=!1,this.onStopRecording.emit(),this.recognizer.stopContinuousRecognitionAsync(),this.recognizedText||(this.showMessageEmptyPopup=!0,setTimeout(()=>{this.showMessageEmptyPopup=!1},1e3)))}canceledRecording(){this.recognizer.close(),this.isRecording=!1,localStorage.setItem(this.AVATAR_IS_RECORDING_KEY,String(!1))}ngOnDestroy(){}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Gr({type:t,selectors:[["audio-recorder"]],inputs:{disabled:"disabled",isProcessing:"isProcessing",recordOnHold:"recordOnHold"},outputs:{onRecordReady:"onRecordReady",onStopRecording:"onStopRecording"},standalone:!0,features:[mc],decls:8,vars:13,consts:[[1,"mic-container","rounded-circle","position-relative",2,"box-shadow","0px 1px 13px #00000080"],[3,"onClick","active"],[1,"spinner",3,"ngClass"],["type","button",1,"btn","circle","border-0",3,"click","mousedown","mouseup","touchstart","touchend","tooltip","disabled","ngClass"],[1,"mdi","mdi-microphone"],["type","danger py-0 px-3 rounded-pill",1,"text-nowrap","position-absolute",2,"z-index","2","top","-40px",3,"isOpen"],[2,"font-size","12px"]],template:function(r,i){r&1&&(kt(0,"div",0)(1,"stop-processing-btn",1),gn("onClick",function(){return i.canceledRecording()}),hn(),Yr(2,"div",2),kt(3,"button",3),gn("click",function(){return!i.isRecording&&!i.recordOnHold?i.startRecording():i.stopRecording()})("mousedown",function(){return i.recordOnHold&&i.startRecording()})("mouseup",function(){return i.recordOnHold&&i.stopRecording()})("touchstart",function(){return i.startRecording()})("touchend",function(){return i.stopRecording()}),Yr(4,"i",4),hn(),kt(5,"alert",5)(6,"small",6),_s(7," No speech recognized "),hn()()()),r&2&&(Ds(),Gn("active",i.isRecording&&!i.recordOnHold),Ds(),Gn("ngClass",yc(7,sle,i.isProcessing)),Ds(),Gn("tooltip",i.isRecording?"Stop Recording":"Start Recording")("disabled",i.disabled)("ngClass",yc(9,ale,i.disabled))("ngClass",yc(11,cle,i.isRecording)),Ds(2),Gn("isOpen",i.showMessageEmptyPopup))},dependencies:[Fi,wc,JF,Cj,yj,l8,u8],styles:['.mic-container[_ngcontent-%COMP%]{height:34px;width:34px;margin-top:2px;display:flex;align-items:center;justify-content:center}.mic-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;background:#fff;display:flex;justify-content:center;align-items:center;z-index:1;opacity:1;transition:.5s;box-shadow:0 0 2px #00000024,0 1px 18px #0000001f,0 3px 5px -1px #0002}.mic-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#b2b1b1;font-size:23px;transition:.9s}.mic-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:before{content:"";width:40px;height:40px;border-radius:50%;opacity:.2;z-index:-1;position:absolute}.mic-container[_ngcontent-%COMP%]   .circle.active[_ngcontent-%COMP%]:before{background:var(--bs-primary);animation:_ngcontent-%COMP%_bounce .8s linear infinite .5s}.mic-container[_ngcontent-%COMP%]   .circle.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-primary)}.mic-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:41px;height:41px;border-radius:50%;position:absolute;transform:rotate(0);background:linear-gradient(to left,#dede4e,transparent,transparent,#70f570,#8c8cff,transparent,transparent,#dede4e);animation:_ngcontent-%COMP%_spin 2s linear infinite .5s;opacity:0}.mic-container[_ngcontent-%COMP%]   .spinner.processing[_ngcontent-%COMP%]{opacity:1}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.disabled[_ngcontent-%COMP%]{background:#dfd9d9!important}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:scale(1)}20%{transform:scale(.6)}40%{transform:scale(.75)}60%{transform:scale(.4)}80%{transform:scale(.25)}}']})}return t})();function d8(t){let e=Kn(()=>t());return ule(e)?new Proxy(t,{get(n,r){return r in e?(DE(n[r])||Object.defineProperty(n,r,{value:bo(()=>n()[r]),configurable:!0}),d8(n[r])):n[r]}}):t}function ule(t){return t?.constructor===Object}var lle=new WeakMap,pr=Symbol("STATE_SOURCE");function yM(t,...e){t[pr].update(n=>e.reduce((r,i)=>b(b({},r),typeof i=="function"?i(r):i),n)),ple(t)}function VS(t){return t[pr]()}function dle(t){return lle.get(t[pr])||[]}function ple(t){let e=dle(t);for(let n of e){let r=Kn(()=>VS(t));n(r)}}function p8(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),r=e;return(()=>{class o{constructor(){let a=r.reduce((m,y)=>y(m),fle()),{stateSignals:c,computedSignals:u,methods:l,hooks:d}=a,p=b(b(b({},c),u),l);this[pr]=a[pr];for(let m in p)this[m]=p[m];let{onInit:f,onDestroy:g}=d;f&&f(),g&&E(dc).onDestroy(g)}static \u0275fac=function(c){return new(c||o)};static \u0275prov=R({token:o,factory:o.\u0275fac,providedIn:n.providedIn||null})}return o})()}function fle(){return{[pr]:wo({}),stateSignals:{},computedSignals:{},methods:{},hooks:{}}}function f8(t){return e=>{let n=b(b(b({[pr]:e[pr]},e.stateSignals),e.computedSignals),e.methods),r=typeof t=="function"?t(n):t,i=o=>{let s=r[o],a=e.hooks[o];return s?()=>{a&&a(),s(n)}:a};return $(b({},e),{hooks:{onInit:i("onInit"),onDestroy:i("onDestroy")}})}}function h8(t){return e=>{let n=t(b(b(b({[pr]:e[pr]},e.stateSignals),e.computedSignals),e.methods));return Object.keys(n),$(b({},e),{methods:b(b({},e.methods),n)})}}function g8(t){return e=>{let n=typeof t=="function"?t():t,r=Object.keys(n);e[pr].update(o=>b(b({},o),n));let i=r.reduce((o,s)=>{let a=bo(()=>e[pr]()[s]);return $(b({},o),{[s]:d8(a)})},{});return $(b({},e),{stateSignals:b(b({},e.stateSignals),i)})}}var hle={backgroundColor:"#8A1538",backgroundUrl:"assets/images/background.svg",logoUrl:"assets/images/qrep-newlogo-colored.png",isVideo:!1,preview:!1},cRe=p8({providedIn:"root",protectedState:!0},g8(hle),h8(t=>({updateState(e){yM(t,e)}})),f8(t=>{let e=localStorage.getItem("CURRENT_STATE");if(e)yM(t,JSON.parse(e));else{let n=VS(t);localStorage.setItem("CURRENT_STATE",JSON.stringify(n))}return{onInit(){OE(()=>{let n=VS(t);localStorage.setItem("CURRENT_STATE",JSON.stringify(n))})}}}));var hRe=(()=>{class t extends jc{http=E(Il);tag="common/";constructor(){super("avatar")}startStream(n=!1){return this.http.post(this.baseUrl+"/start-stream",{},{params:b({},n?{size:"life-size"}:{})})}sendCandidate(n,r){return this.http.post(`${this.baseUrl}/send-candidate/${n}`,{candidate:r})}sendAnswer(n,r){return this.http.put(`${this.baseUrl}/send-answer/${n}`,{answer:r})}closeStream(n){return this.http.delete(`${this.baseUrl}/close-stream/${n}`)}renderText(n,r){return this.http.post(`${this.baseUrl}/render-text/${n}`,{text:r})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{b as a,$ as b,Xe as c,Te as d,Q as e,Qt as f,bi as g,Ii as h,mr as i,Zt as j,af as k,ot as l,mo as m,R as n,dn as o,N as p,x as q,E as r,Gr as s,pn as t,We as u,Ai as v,Ux as w,Hx as x,ne as y,_e as z,ft as A,Wn as B,ome as C,PW as D,sme as E,ame as F,Ds as G,V as H,go as I,Jr as J,dme as K,hh as L,hc as M,Gn as N,E1 as O,gh as P,pme as Q,gc as R,fme as S,hme as T,gme as U,vme as V,kt as W,hn as X,Yr as Y,g9 as Z,x1 as _,gn as $,PE as aa,vh as ba,mh as ca,E9 as da,mme as ea,I9 as fa,D9 as ga,yme as ha,Cme as ia,Sme as ja,_s as ka,R9 as la,F1 as ma,P9 as na,wme as oa,T9 as pa,vc as qa,mc as ra,yc as sa,bme as ta,Eme as ua,Ime as va,Dme as wa,Xr as xa,at as ya,wc as za,Qme as Aa,ik as Ba,Zme as Ca,Fi as Da,HE as Ea,Jn as Fa,Il as Ga,dye as Ha,pye as Ia,jye as Ja,ti as Ka,T7 as La,qi as Ma,nCe as Na,rCe as Oa,iCe as Pa,sg as Qa,jc as Ra,hRe as Sa,rg as Ta,XJ as Ua,PF as Va,yF as Wa,ECe as Xa,ICe as Ya,PQ as Za,TQ as _a,MQ as $a,_Ce as ab,xQ as bb,RCe as cb,PCe as db,KF as eb,JF as fb,GCe as gb,QF as hb,pg as ib,yj as jb,Cj as kb,eRe as lb,VS as mb,cRe as nb};
